<html>
<head>
<title>Exploiting Activity in medium android app</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用中型android应用中的活动</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/exploiting-activity-in-medium-android-app-e2e6f3553eef?source=collection_archive---------3-----------------------#2021-05-10">https://infosecwriteups.com/exploiting-activity-in-medium-android-app-e2e6f3553eef?source=collection_archive---------3-----------------------#2021-05-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/73372ce79cfe0e91a35fe65e80f84a15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Oejyt1O2akeKW0AhgXaAFQ.png"/></div></div></figure><p id="c95f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">朋友们好，我是拉朱·库马尔，又名赛博战士先生。让我们来看看这个故事，我在网络和android应用程序中发现了漏洞，但网络漏洞尚未修复，所以在这里我将讨论在Andriod应用程序ie中发现的一个错误。剥削活动。如果你已经了解了jadx-gui，并且对android应用有一个基本的概念，可以跳过第一节，直接阅读漏洞的检测和利用。</p><p id="009e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> jadx: </strong>它是一个命令行和GUI工具，用于从Android Dex和apk文件生成Java源代码。</p><p id="26fd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> AndroidManifest.xml: </strong>每个应用程序都必须有一个AndroidManifest.xml文件，它包含关于你的包的信息，包括应用程序的组件，如活动、服务、广播接收器、内容提供商等。</p><p id="5c68" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">活动:</strong>Android活动是Android应用程序用户界面的一个屏幕。它是在androidmanifest.xml文件中定义的。</p><p id="0728" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有关更多信息，请查看开发者指南<a class="ae kw" href="https://developer.android.com/guide/" rel="noopener ugc nofollow" target="_blank">https://developer.android.com/guide/</a></p><h1 id="5071" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">漏洞的检测和利用</strong></h1><p id="dfdc" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我使用jadx-gui反编译应用程序，然后查看AndriodManifest.xml文件。我发现SaveToMediumActivity是一个导出的活动。这意味着它可以由安装在同一台设备上的任意应用程序启动。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ma"><img src="../Images/a3510293d7c99ea265a6023fbc91253b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ByTJXIJMsAW-1D5J42ixOg.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">(点击图像进行缩放)</figcaption></figure><p id="c42f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们跳到SaveToMediumActivity的代码中，开始分析静态代码及其功能。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ma"><img src="../Images/799e4ba6922a063c475151bb41400877.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Oq_LIP6QlvcqfrgarkIKZQ.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">(点击图像进行缩放)</figcaption></figure><p id="1972" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过使用这个应用程序，我发现媒体上发布的每篇文章都有一个保存按钮，一旦用户点击保存按钮，文章就会被添加到用户保存列表中。作为一个攻击者，我只是想把我自己没有在媒体上发表的文章保存到受害者保存列表中。</p><p id="ac27" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如您在上面的代码中看到的，它将文章保存在保存列表中。这里存在漏洞。攻击者提供的URL通过getIntent()加载。getstring extra(" Android . intent . extra . text ")</p><p id="a212" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们利用亚行来利用这一点</p><p id="0e08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ADB shell am start-n com . medium . reader/com . medium . Android . donkey . save . savetomediumactivity-e Android . intent . extra . text " https://attack . com "</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mj"><img src="../Images/7f3a6a855f8e1d2f838853238caf4607.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oaX1BeRAepqRUzAd0DNSbQ.png"/></div></div></figure><p id="85a3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Java开发代码的概念验证；</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mk"><img src="../Images/c84fa2874b8d6fad3bfe28b3005f7962.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ddMO8RApZjviYcjYJzjhOg.png"/></div></div></figure><p id="8e22" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我用上面的代码创建了一个应用程序，让我们利用它。</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="3e0e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢阅读。</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mn mm l"/></div></figure><p id="4a0f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">报告错误:2020年9月29日</p><p id="151d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Bug修复，悬赏:2020年10月2日</p><p id="7e7d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如有疑问，可以在<a class="ae kw" href="https://twitter.com/mrcyberwarrior" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上DM。随时欢迎反馈。</p><p id="db16" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">黑客快乐:)</p></div></div>    
</body>
</html>