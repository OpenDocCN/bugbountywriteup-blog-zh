<html>
<head>
<title>$4500 Bounty — How I got lucky</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">4500美元的赏金——我是如何幸运的</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/4500-bounty-how-i-got-lucky-99d8bc933f75?source=collection_archive---------0-----------------------#2018-05-03">https://infosecwriteups.com/4500-bounty-how-i-got-lucky-99d8bc933f75?source=collection_archive---------0-----------------------#2018-05-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="6f48" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是一个简短的解释，我是如何通过在正确的时间做侦察接管了一个子域，以及我在bug bounty社区了解到的竞争情况。</p><p id="e8d4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，我用来识别易受攻击的子域的工具是迈克尔·亨利克森的Aquatone。这个工具非常适合侦察，每个黑客都应该考虑用它来侦察目标。幸运的是，我在克隆Aquatone repo的第一天就遇到了这个易受攻击的域名，但你可能没有那么幸运。</p><p id="5530" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在运行<code class="fe kq kr ks kt b">aquatone-takeover — domain {{target}}.com</code>之后，我在AWS Cloudfront上看到一个容易被接管的域名。起初，我并不兴奋，因为大多数时候你会得到一个CNAME已经在使用错误试图要求一个子域。然而，令我非常惊讶的是，该公司忘记删除CNAME，我可以要求它。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div class="gh gi ku"><img src="../Images/08917c525259b9739ed9d7249f48ae05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*UohSmXoykJtzq0FZ7SZgvQ.png"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">这就是易受攻击的Cloudfront域的样子</figcaption></figure><p id="bb64" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这些当然是优步在使用，不可能索赔。顺便提一下，检查结果是否错误的一个快速方法是同时使用http和https导航到主机。如果两者都返回相同的错误页面，您可能会接管该域并登录AWS。</p><p id="4139" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您也能够申请一个子域，那么最好的做法是将您的内容托管在其他路径中，以避免损害公司的声誉。我在我的AWS bucket上托管了一个简单的HTML文件，并将域指向该文件。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lg"><img src="../Images/961be5fe938f64434edd7828f554bcfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IemT573jO-sUA0CuhQwpgA.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">一个简单的标题加上你的用户名就足够了</figcaption></figure><p id="b906" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我的报告很快得到了HackerOne员工的认可，并在4天内得到了修复。然而，最有趣的部分是我在持有域名期间收集的所有数据。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi ll"><img src="../Images/bc8ee21f28c1d44195f8f31f0b49087c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0qfv7oG4mQb_Rz67vziJDw.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">收到1235个请求</figcaption></figure><p id="20b5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可以看到，周末大约有1200个请求被发送到这个子域，通过分析，我意识到大多数流量是黑客在进行dirsearch或寻找漏洞。在那一刻，我开始意识到公共昆虫奖励项目中存在着多么激烈的竞争。老实说，我很幸运被邀请参加私人聚会，那里的竞争似乎没那么激烈。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lm"><img src="../Images/0960541aae6de79e6ca87fde89d54749.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LRvBsRahOsAWxKASXiI44A.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">发送到网站的各种请求</figcaption></figure><p id="158c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如你所看到的，大多数人都在对目标进行基本的侦察，寻找反射的XSS、打开的重定向或暴露的目录。你需要非常幸运才能找到那种唾手可得的水果，但试试也无妨。</p><p id="28a3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">就这个发现而言，我获得了4500美元，因为这个子域可以用来在整个域上设置有效的cookies。老实说，我不知道我是如何击败弗兰斯·罗森的剧本的，但我会接受的。</p><p id="990e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">时间线:</p><p id="14e9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2018年4月12日:提交报告并分类</p><p id="3903" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2018年4月16日:报告已解决</p><p id="50c8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2018年5月3日:奖励4500美元</p></div></div>    
</body>
</html>