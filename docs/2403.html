<html>
<head>
<title>Understanding the NMAP methodology — Part 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">理解NMAP方法—第3部分</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/understanding-the-nmap-methodology-part-3-bb377b7767e0?source=collection_archive---------5-----------------------#2022-09-28">https://infosecwriteups.com/understanding-the-nmap-methodology-part-3-bb377b7767e0?source=collection_archive---------5-----------------------#2022-09-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="a558" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从初级到高级理解NMAP方法论</p><h2 id="e3f7" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">描述:</h2><p id="5a7d" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">在今天的文章中，我们将了解Nmap更高级的网络映射技术。如果你没有看过<a class="ae lj" rel="noopener ugc nofollow" target="_blank" href="/network-mapping-part-1-112116ce6555">第一部</a>和<a class="ae lj" rel="noopener ugc nofollow" target="_blank" href="/understanding-the-nmap-methodology-part-2-3d0442f1c482">第二部</a>，建议你通读一下这篇文章。这将是本系列Nmap的最后一部分。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi lr"><img src="../Images/6b31e8df70d8e3ee1c1adb69563c5076.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YxBRUnHoGIwt6jAHc4-lqw.jpeg"/></div></div><figcaption class="md me gj gh gi mf mg bd b be z dk translated">来源:https://unsplash.com/<a class="ae lj" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><p id="fb1b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在您开始之前，<strong class="jp ir">您可以加入我们的discord服务器，与志同道合的人交流，分享您可以与他人分享的一切，以帮助他们，并让人们回答您的问题。</strong></p><div class="mh mi gp gr mj mk"><a href="https://discord.gg/VKJSmqDN5P" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab fo"><div class="mm ab mn cl cj mo"><h2 class="bd ir gy z fp mp fr fs mq fu fw ip bi translated">加入赛博空间不和谐服务器！</h2><div class="mr l"><h3 class="bd b gy z fp mp fr fs mq fu fw dk translated">查看Discord上的CyberVerse社区——与106名其他成员一起玩，享受免费语音和文本聊天。</h3></div><div class="ms l"><p class="bd b dl z fp mp fr fs mq fu fw dk translated">不和谐. gg</p></div></div><div class="mt l"><div class="mu l mv mw mx mt my mb mk"/></div></div></a></div><p id="13b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi mz translated"><span class="l na nb nc bm nd ne nf ng nh di">正如</span>我们已经在第一部分和第二部分看到了一些关于网络映射的基础知识和高级知识，了解一些更高级的技术来扫描和映射网络是值得的。</p><h1 id="e1b4" class="ni km iq bd kn nj nk nl kq nm nn no kt np nq nr kw ns nt nu kz nv nw nx lc ny bi translated">1.诱饵扫描</h1><p id="53b1" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">当您想要测试您的IDS和IPS设备来扫描您的扫描流量时，诱饵扫描非常重要。使用此功能可以避免被Nmap检测到。你可能不想被抓到执行网络扫描。在诱饵扫描中，我们提供一些诱饵来扫描网络。因此，他们的IDS可能会报告来自唯一IP地址的5-10个端口扫描，但他们不会知道哪个IP正在扫描他们，哪个是无辜的诱饵。</p><pre class="ls lt lu lv gt nz oa ob oc aw od bi"><span id="0dcf" class="kl km iq oa b gy oe of l og oh">nmap -D &lt;ip&gt;<br/>-D : Decoys</span></pre><p id="c089" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然可以通过路由器路径跟踪、响应丢弃和其他主动机制来挫败这种攻击，但这通常是隐藏IP地址的有效技术。</p><h1 id="f434" class="ni km iq bd kn nj nk nl kq nm nn no kt np nq nr kw ns nt nu kz nv nw nx lc ny bi translated">2.僵尸/空闲扫描</h1><p id="5066" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">在僵尸扫描中，我们不需要向网络发送任何单个数据包来扫描IP地址。这种技术比目前讨论的其他技术更复杂。确定TCP端口是否打开的一种方法是向端口发送一个SYN(同步)数据包。如果端口打开，目标机器将以SYN/ACK数据包响应，如果端口关闭，则以RST(重置)响应。这是之前在<a class="ae lj" rel="noopener ugc nofollow" target="_blank" href="/network-mapping-part-1-112116ce6555">第1部分</a>中讨论的SYN扫描的基础。</p><pre class="ls lt lu lv gt nz oa ob oc aw od bi"><span id="68b4" class="kl km iq oa b gy oe of l og oh">nmap -sI &lt;zombie-machine-ip&gt; &lt;ip&gt;</span><span id="dec0" class="kl km iq oa b gy oi of l og oh">-sI : Zombie machine IP address</span></pre><p id="52b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">收到未经请求的SYN/ACK数据包的机器将会用RST进行响应。未经请求的RST将被忽略。互联网上的每个IP数据包都有一个片段标识号(IP ID)。由于许多操作系统对于发送的每个数据包都会增加这个数字，因此探测IPID可以告诉攻击者自上次探测以来已经发送了多少个数据包。结合这些特征使得在伪造身份的同时扫描目标网络成为可能，这样看起来就像是无辜的僵尸机器进行了扫描。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/92b0f5aedadad3b0f971089b1b4f11ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*PBOjt4xQW_CUM6s3SouHqQ.png"/></div><figcaption class="md me gj gh gi mf mg bd b be z dk translated">来源:https://nmap.org/book/idlescan.html</figcaption></figure><h1 id="5ea3" class="ni km iq bd kn nj nk nl kq nm nn no kt np nq nr kw ns nt nu kz nv nw nx lc ny bi translated">3.有关Nmap标志的更多信息</h1><p id="e209" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">Nmap提供了许多其他选项，在扫描网络或机器时非常有用。让我们一个一个地看，以便对它们有一个清楚的了解。</p><h2 id="b076" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">a.服务版本检测</h2><p id="ed39" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">此选项启用Nmap上的服务版本检测。使用该选项，可以发现哪个开放端口运行在哪个服务版本上。为了检测服务版本，Nmap需要像TCP连接扫描一样完全连接到机器。</p><pre class="ls lt lu lv gt nz oa ob oc aw od bi"><span id="5cd9" class="kl km iq oa b gy oe of l og oh">nmap -sV &lt;ip&gt;</span><span id="9184" class="kl km iq oa b gy oi of l og oh">-sV : Service version detection</span></pre><h2 id="44a6" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">b.操作系统版本检测和冗长扫描</h2><p id="1e28" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">使用Nmap的这些选项，可以找到目标的操作系统版本，并以详细的方式给出输出。</p><pre class="ls lt lu lv gt nz oa ob oc aw od bi"><span id="24cc" class="kl km iq oa b gy oe of l og oh">nmap -O -v &lt;ip&gt;</span><span id="722c" class="kl km iq oa b gy oi of l og oh">-O : OS version detection<br/>-v : Verbose output (You can increase v up to 3 time to get more verbose output eg. -vv or -vvv)</span></pre><h2 id="4e68" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">c.侵略性扫描</h2><p id="26f6" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">使用此选项，您可以进行服务版本检测+操作系统版本检测+扫描+跟踪路由等..一起。</p><pre class="ls lt lu lv gt nz oa ob oc aw od bi"><span id="9265" class="kl km iq oa b gy oe of l og oh">nmap -A &lt;ip&gt;</span><span id="9151" class="kl km iq oa b gy oi of l og oh">-A : Aggressive scan</span></pre><h2 id="733d" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">d.Nmap脚本引擎</h2><p id="5aa9" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">默认情况下，Nmap提供对自动化脚本的支持，这些脚本对于枚举和获取目标系统上的已知漏洞信息非常有用。有这么多的默认脚本支持，你可以访问nmap的官方手册了解更多关于它的<a class="ae lj" href="https://nmap.org/book/man-nse.html" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><pre class="ls lt lu lv gt nz oa ob oc aw od bi"><span id="316c" class="kl km iq oa b gy oe of l og oh">nmap ---script &lt;ip&gt;</span><span id="0301" class="kl km iq oa b gy oi of l og oh">-script : Default script run</span></pre><p id="85c7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用— script命令，您可以通过Nmap启用默认脚本执行。</p><h1 id="4999" class="ni km iq bd kn nj nk nl kq nm nn no kt np nq nr kw ns nt nu kz nv nw nx lc ny bi translated">4.扫描时间</h1><p id="33f5" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">扫描时间也是扫描的一个重要部分，可以被安全机制避免。默认情况下，Nmap中有6种类型的扫描计时可用。</p><ul class=""><li id="b158" class="ok ol iq jp b jq jr ju jv jy om kc on kg oo kk op oq or os bi translated">-T0:偏执(最慢)</li><li id="127b" class="ok ol iq jp b jq ot ju ou jy ov kc ow kg ox kk op oq or os bi translated">-T1:鬼鬼祟祟</li><li id="ffbe" class="ok ol iq jp b jq ot ju ou jy ov kc ow kg ox kk op oq or os bi translated">-T2:礼貌</li><li id="061b" class="ok ol iq jp b jq ot ju ou jy ov kc ow kg ox kk op oq or os bi translated">-T3:正常</li><li id="3dd1" class="ok ol iq jp b jq ot ju ou jy ov kc ow kg ox kk op oq or os bi translated">-T4:咄咄逼人</li><li id="95ca" class="ok ol iq jp b jq ot ju ou jy ov kc ow kg ox kk op oq or os bi translated">-T5:疯狂</li></ul><p id="b507" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">-T0每分钟扫描一次端口。这是一种非常慢的方法，但是扫描检测是非常不可能的。要避免IDS检测，请使用-T0或-T1。如果在扫描时没有指定任何其他值，则默认值为-T3。其中-T1更多地用于实际战斗中，在这些战斗中，隐身更为重要。</p><h1 id="59d6" class="ni km iq bd kn nj nk nl kq nm nn no kt np nq nr kw ns nt nu kz nv nw nx lc ny bi translated">5.更多可定制选项</h1><p id="4ccb" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">或者，您可以选择使用“最小速率<num>和“最大速率<num>”来控制数据包速率</num></num></p><p id="ba0f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如:- ` —最小速率10 '和`—最大速率10 '确保每秒发送的数据包不超过10个。`—最小并行度<num>`确保并行执行的探测数量。</num></p><h2 id="6212" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">主机超时</h2><p id="9463" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">有时目标系统在那个时间没有响应，我们可以设置受害系统是否在特定时间没有响应，然后切换到下一点。</p><p id="7310" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ex :- —主机超时500毫秒<ip/></p><h2 id="fa5c" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">扫描延迟</h2><p id="026e" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">如果在目标系统中有IDS/IPS可用于检测连续请求，而我们想通过发送数据包→等待→发送数据包…绕过它。</p><p id="2a62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ex :- ` —扫描延迟1s<ip>` 1秒</ip></p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><p id="f853" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是今天的文章。如果你觉得它有趣且有启发性，那就和你的朋友分享吧。谢谢你读到这里。让我知道你的问题或者你想在回复部分阅读的文章的主题。关注我并订阅，直接在您的电子邮件中获取有趣的文章。</p><p id="21cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在这里的社交媒体上关注:<a class="ae lj" href="https://www.linkedin.com/in/jay-vadhaiya-3b74531b1/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>，<a class="ae lj" href="https://www.instagram.com/mr.jv_2407/" rel="noopener ugc nofollow" target="_blank"> Instagram </a>，<a class="ae lj" href="https://twitter.com/sudo0x18" rel="noopener ugc nofollow" target="_blank"> Twitter </a></p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h2 id="1c9c" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">来自Infosec的报道:Infosec每天都有很多内容，很难跟上。<a class="ae lj" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank">加入我们的每周简讯</a>以5篇文章、4个线程、3个视频、2个GitHub Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</h2></div></div>    
</body>
</html>