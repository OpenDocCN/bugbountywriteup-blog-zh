<html>
<head>
<title>HacktheBox Writeup: Paper</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">HacktheBox撰写:论文</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/hackthebox-writeup-paper-5a13adfcc549?source=collection_archive---------1-----------------------#2022-06-21">https://infosecwriteups.com/hackthebox-writeup-paper-5a13adfcc549?source=collection_archive---------1-----------------------#2022-06-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/05726c0ab72373acf65c72de19e5f193.png" data-original-src="https://miro.medium.com/v2/resize:fit:1186/format:webp/1*iumiBWiVw-Wf-XVZQ0pSYg.png"/></div></figure><p id="d6d4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这是一个由易到难的Linux机器，需要基本的扫描和枚举来在机器上获得立足点并获得用户标志。向root用户提升权限也是一个相对简单的过程，需要使用名为CVE-2021–3560(即Polkit)的Linux权限提升。</p></div><div class="ab cl ks kt hu ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ij ik il im in"><h1 id="967c" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">列举</h1><p id="8528" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">我开始通过用<strong class="jw ir"> NMAP </strong>执行快速扫描来枚举目标机器，以识别任何打开的端口:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="31b4" class="ml la iq mh b gy mm mn l mo mp">nmap -T5 --open -sS -vvv --min-rate=300 --max-retries=3 -p- -oN all-ports-nmap-report 10.10.11.143</span><span id="34d6" class="ml la iq mh b gy mq mn l mo mp">PORT    STATE SERVICE REASON<br/>22/tcp  open  ssh     syn-ack ttl 63<br/>80/tcp  open  http    syn-ack ttl 63<br/>443/tcp open  https   syn-ack ttl 63</span></pre><p id="425f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">扫描发现三个端口打开(即端口22、80和443)。接下来，我使用NMAP来识别每个端口上运行的服务，并使用通用NSE脚本来查找我可以利用的任何常见漏洞:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="4ecd" class="ml la iq mh b gy mm mn l mo mp">nmap -sV -sC -Pn -v -oN nmap-report -p 22,80,443 10.10.11.143</span><span id="aebe" class="ml la iq mh b gy mq mn l mo mp">PORT    STATE SERVICE  VERSION<br/>22/tcp  open  ssh      OpenSSH 8.0 (protocol 2.0)<br/>| ssh-hostkey: <br/>|   2048 10:05:ea:50:56:a6:00:cb:1c:9c:93:df:5f:83:e0:64 (RSA)<br/>|   256 58:8c:82:1c:c6:63:2a:83:87:5c:2f:2b:4f:4d:c3:79 (ECDSA)<br/>|_  256 31:78:af:d1:3b:c4:2e:9d:60:4e:eb:5d:03:ec:a0:22 (ED25519)<br/>80/tcp  open  http     Apache httpd 2.4.37 ((centos) OpenSSL/1.1.1k mod_fcgid/2.3.9)<br/>|_http-generator: HTML Tidy for HTML5 for Linux version 5.7.28<br/>| http-methods: <br/>|   Supported Methods: GET POST OPTIONS HEAD TRACE<br/>|_  Potentially risky methods: TRACE<br/>|_http-server-header: Apache/2.4.37 (centos) OpenSSL/1.1.1k mod_fcgid/2.3.9<br/>|_http-title: HTTP Server Test Page powered by CentOS<br/>443/tcp open  ssl/http Apache httpd 2.4.37 ((centos) OpenSSL/1.1.1k mod_fcgid/2.3.9)<br/>| http-methods: <br/>|   Supported Methods: GET POST OPTIONS HEAD TRACE<br/>|_  Potentially risky methods: TRACE<br/>|_http-server-header: Apache/2.4.37 (centos) OpenSSL/1.1.1k mod_fcgid/2.3.9<br/>|_http-title: HTTP Server Test Page powered by CentOS<br/>| ssl-cert: Subject: commonName=localhost.localdomain/organizationName=Unspecified/countryName=US<br/>| Subject Alternative Name: DNS:localhost.localdomain<br/>| Issuer: commonName=localhost.localdomain/organizationName=Unspecified/countryName=US<br/>| Public Key type: rsa<br/>| Public Key bits: 2048<br/>| Signature Algorithm: sha256WithRSAEncryption<br/>| Not valid before: 2021-07-03T08:52:34<br/>| Not valid after:  2022-07-08T10:32:34<br/>| MD5:   579a 92bd 803c ac47 d49c 5add e44e 4f84<br/>|_SHA-1: 61a2 301f 9e5c 2603 a643 00b5 e5da 5fd5 c175 f3a9<br/>|_ssl-date: TLS randomness does not represent time<br/>| tls-alpn: <br/>|_  http/1.1</span></pre><p id="f4a1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我看到端口22运行的是SSH，而端口80和443是运行Apache/2.4.37 (centos)的web服务器。我认为我有足够的信息继续前进，并开始检查托管在端口80上的网站。</p></div><div class="ab cl ks kt hu ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ij ik il im in"><h1 id="fef3" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">HTTP —端口80分析</h1><p id="0205" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">导航到<em class="mr"> http://10.10.11.143/ </em>，我看到一个默认的http服务器测试页面。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ms"><img src="../Images/46de72a0bf68b4a7efe9beb9dba661b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3wR09rX8hHvqcC1c_lAm1w.png"/></div></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">HTTP服务器测试页面。</figcaption></figure><p id="4f3e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">接下来，我决定使用<strong class="jw ir"> FFuF </strong>模糊隐藏的目录和网页。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="f3fe" class="ml la iq mh b gy mm mn l mo mp">ffuf -c -u <a class="ae nb" href="http://10.10.11.143/FUZZ" rel="noopener ugc nofollow" target="_blank">http://10.10.11.143/FUZZ</a> -w /usr/share/wordlists/dirb/common.txt -e .php,.bak,.old</span><span id="d41e" class="ml la iq mh b gy mq mn l mo mp">cgi-bin/               [Status: 403, Size: 199, Words: 14, Lines: 8]<br/>manual                 [Status: 301, Size: 235, Words: 14, Lines: 8]</span></pre><p id="f2fd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我找到了一个名为“<em class="mr"> manual”的目录，并用</em>的<strong class="jw ir"> FFuF </strong>模糊任何子目录。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="6f34" class="ml la iq mh b gy mm mn l mo mp">ffuf -c -u <a class="ae nb" href="http://10.10.11.143/manual/FUZZ" rel="noopener ugc nofollow" target="_blank">http://10.10.11.143/manual/FUZZ</a> -w /usr/share/wordlists/dirb/common.txt -e .php,.bak,.old</span><span id="9df0" class="ml la iq mh b gy mq mn l mo mp">developer        [Status: 301, Size: 245, Words: 14, Lines: 8]<br/>faq              [Status: 301, Size: 239, Words: 14, Lines: 8]<br/>howto            [Status: 301, Size: 241, Words: 14, Lines: 8]<br/>images           [Status: 301, Size: 242, Words: 14, Lines: 8]<br/>index.html       [Status: 200, Size: 9164, Words: 541, Lines: 125]<br/>LICENSE          [Status: 200, Size: 11358, Words: 2516, Lines: 203]<br/>misc             [Status: 301, Size: 240, Words: 14, Lines: 8]<br/>mod              [Status: 301, Size: 239, Words: 14, Lines: 8]<br/>programs         [Status: 301, Size: 244, Words: 14, Lines: 8]<br/>ssl              [Status: 301, Size: 239, Words: 14, Lines: 8]<br/>style            [Status: 301, Size: 241, Words: 14, Lines: 8]</span></pre><p id="2d85" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我花了一些时间浏览这些目录，但我没有立即看到任何感兴趣的东西。我决定改变我的方法，使用<strong class="jw ir">Nikto</strong>web vulnerability scanner收集更多信息。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="4c9a" class="ml la iq mh b gy mm mn l mo mp">nikto -h 10.10.11.143 -o nikto.txt</span><span id="736e" class="ml la iq mh b gy mq mn l mo mp">+ Target Host: 10.10.11.143<br/>+ Target Port: 80<br/>+ GET The anti-clickjacking X-Frame-Options header is not present.<br/>+ GET The X-XSS-Protection header is not defined. This header can hint to the user agent to protect against some forms of XSS<br/>+ GET Uncommon header 'x-backend-server' found, with contents: office.paper<br/>+ GET The X-Content-Type-Options header is not set. This could allow the user agent to render the content of the site in a different fashion to the MIME type<br/>+ GET Retrieved x-powered-by header: PHP/7.2.24<br/>+ OPTIONS Allowed HTTP Methods: GET, POST, OPTIONS, HEAD, TRACE <br/>+ OSVDB-877: TRACE HTTP TRACE method is active, suggesting the host is vulnerable to XST<br/>+ OSVDB-3092: GET /manual/: Web server manual found.<br/>+ OSVDB-3268: GET /icons/: Directory indexing found.<br/>+ OSVDB-3268: GET /manual/images/: Directory indexing found.<br/>+ OSVDB-3233: GET /icons/README: Apache default file found.</span></pre><p id="2c94" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">查看上面的输出，Nikto发现了一个有趣的GET请求头，它为后端服务器提供了一个名为"<strong class="jw ir"><em class="mr">office . paper</em></strong><em class="mr">"</em>的主机名。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="6570" class="ml la iq mh b gy mm mn l mo mp">+ GET Uncommon header 'x-backend-server' found, with contents: office.paper</span></pre><p id="86c4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我将这个主机名添加到我的“<em class="mr"> /etc/hosts </em>”文件中，并访问了网站。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/2ba706c21d576240c0b2be11dadf6cd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:770/format:webp/1*gkN6xoIDRJo4AAIH54IG8Q.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">office.paper网站。</figcaption></figure></div><div class="ab cl ks kt hu ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ij ik il im in"><h1 id="f914" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">最初的立足点</h1><p id="7c95" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">看着“<strong class="jw ir"><em class="mr">office . paper</em></strong><em class="mr"/>网站，我可以看到一个叫“<em class="mr"> Prisonmike </em>”的用户发的三个帖子。一个帖子有一个名为“<em class="mr"> nick </em>的用户的评论，暗示<strong class="jw ir">帖子草稿</strong>中存储了秘密内容。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nd"><img src="../Images/39b99fe84858e707d5a33c662916b1d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mc5Oh76uPVFdPiuO1lBE5A.png"/></div></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">评论提到帖子草稿中的秘密内容。</figcaption></figure><p id="708b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我还可以看到网站是由WordPress提供支持的。我使用了<strong class="jw ir"> wpscan </strong>来列举与网站正在使用的WordPress版本相关的用户和漏洞信息。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="e38c" class="ml la iq mh b gy mm mn l mo mp">wpscan --url <a class="ae nb" href="http://office.paper/" rel="noopener ugc nofollow" target="_blank">http://office.paper/</a> -e u,ap</span></pre><p id="6910" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">通过查看输出，我发现正在使用的WordPress版本存在漏洞，并找到了三个用户。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ne"><img src="../Images/2f77a920765947af83568e16062da1bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U4_1N7Q8FjOkBaxvs93FJQ.png"/></div></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">有漏洞的WordPress版本。</figcaption></figure><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nf"><img src="../Images/c7ff5e5e5c9b95798d77691ebb831243.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*59UFBsvIOvovq9iuRN-ZYA.png"/></div></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">WordPress用户发现。</figcaption></figure><p id="2d09" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">搜索WordPress 5 . 2 . 3版本相关的漏洞，我发现了一个漏洞，允许<a class="ae nb" href="https://wpscan.com/vulnerability/3413b879-785f-4c9f-aa8a-5a4a1d5e0ba2" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir">未经认证查看私人/草稿帖子</strong> </a>。用户Nick之前的评论暗示了草稿帖子中保存的秘密内容。我使用了网站上面链接中显示的概念验证示例。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="f199" class="ml la iq mh b gy mm mn l mo mp">http://office.paper/?static=1</span></pre><p id="d330" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这提供了一个帖子草稿，它提供了一个链接到一个名为“<strong class="jw ir"><em class="mr">chat . office . paper</em></strong>”的新子域名。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ng"><img src="../Images/0a09fbdec1b13b877dfe7c8a9d21bec0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uLBIxigKiwZG0WkTopMtqw.png"/></div></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">帖子草稿包含有趣的链接。</figcaption></figure><p id="b7e1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我将这个子域添加到我的“<em class="mr"> /etc/hosts </em>”文件中，并跟随链接。这让我想到了RocketChat，<strong class="jw ir">一个开源的团队聊天客户端</strong>，类似于Slack和Mattermost等其他团队聊天解决方案。我创建了一个帐户并登录。一旦登录，有一个名为<strong class="jw ir"> general、</strong>的频道，里面提到德怀特创造了一个名为<strong class="jw ir"> <em class="mr"> recyclops </em> </strong>的机器人。查看可以用Bot执行的操作，我可以看到它可以检索文件内容并列出文件夹的内容。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/3a7bb485152c2bfa8c7e9784205802a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*oXSNJRIIka7BjLgffdDa9w.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">有趣的机器人动作。</figcaption></figure></div><div class="ab cl ks kt hu ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ij ik il im in"><h1 id="79e8" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">用户标志:命令注入</h1><p id="2ccb" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">我与recyclops建立了一个单独的对话，并检查了“<em class="mr"> sale </em>”目录中有哪些文件。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/cce141fc1c9a868cbaff260daafd1bd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*248UxTuvb3ZIySdSASt95Q.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">“销售”目录的内容。</figcaption></figure><p id="9010" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">接下来，我试图打印“<em class="mr"> portfolio.txt </em>”文件的内容，但发现我还需要指定“<em class="mr"> sale </em>”目录。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/9e8ba60d04a918458abf48bfebb02749.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*fxNcpYdYRw3Qei1jD_PRxg.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">“portfolio.txt”文件的内容。</figcaption></figure><p id="fffd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我可以看到用于查看“<em class="mr"> portfolio.txt </em>”文件的完整路径。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="8314" class="ml la iq mh b gy mm mn l mo mp">/home/dwight/sales/sale/portfolio.txt</span></pre><p id="faed" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">接下来，我决定列出其他文件夹的内容，包括文件夹“<em class="mr">德怀特</em>”。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/0af7aeb1940448c68fe3b457d872e517.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*WeAXOoMOafW2-gLGiZpKgw.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">用户“dwight”文件夹的内容。</figcaption></figure><p id="751e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我可以看到“<em class="mr"> user.txt </em>”文件，但是我没有权限访问它。翻看其他文件，找到一个名为“<em class="mr"> hubot </em>”的文件夹。在查看这个文件夹的内容时，我发现了一个名为“<em class="mr">的隐藏文件。env </em>”。查看该文件的内容为用户“<em class="mr"> dwight </em>”提供了密码。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/8cffd94930be3ff9f40b1e9e986a57bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*CBXYYQojsG0E9tUh-EshLA.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">用户“dwight”密码。</figcaption></figure><p id="ff70" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我使用凭证SSH到机器，并获得了用户<strong class="jw ir">标志。</strong></p><figure class="mc md me mf gt jr gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/afcbd165e76bb48a3e1f31fd5f6380cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*R4WafyuGA26WeR0rBP0eoQ.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">用户标志。</figcaption></figure></div><div class="ab cl ks kt hu ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ij ik il im in"><h1 id="77ec" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">根旗:CVE-2021–3560波尔基特</h1><p id="bb22" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">查看用户“<em class="mr"> dwight </em>”目录的内容，我发现了一个名为“<em class="mr"> poc.sh </em>”的文件，该文件引用了一个名为CVE-2021–3560的Linux权限提升。根据这个<a class="ae nb" href="https://github.com/Almorabea/Polkit-exploit" rel="noopener ugc nofollow" target="_blank"> Github </a>:</p><blockquote class="nn no np"><p id="2771" class="ju jv mr jw b jx jy jz ka kb kc kd ke nq kg kh ki nr kk kl km ns ko kp kq kr ij bi translated">CVE-2021–3560是polkit上的一个身份验证旁路，它允许非特权用户使用DBus调用特权方法，在此漏洞利用中，我们将调用accountsservice提供的2个特权方法(CreateUser和SetPassword)，这允许我们创建一个特权用户，然后为其设置密码，最后以创建的用户身份登录，然后提升为root用户。</p></blockquote><p id="3fbe" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我可以使用在这个Github上找到的<a class="ae nb" href="https://github.com/Almorabea/Polkit-exploit/blob/main/CVE-2021-3560.py" rel="noopener ugc nofollow" target="_blank">漏洞利用</a>,并将其从我的攻击机器上传到目标机器。然后，我就可以利用漏洞并获得root权限。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="8363" class="ml la iq mh b gy mm mn l mo mp">[dwight@paper ~]$ python3 CVE-2021-3560.py</span><span id="1343" class="ml la iq mh b gy mq mn l mo mp">[+] Exploit Completed, Your new user is 'Ahmed' just log into it like, 'su ahmed', and then 'sudo su' to root</span><span id="af50" class="ml la iq mh b gy mq mn l mo mp">[root@paper dwight]#</span></pre><p id="8195" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">然后我可以检索根标志。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/4c9ba92dbcf682fc4727a45937bd969e.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*N5vz8UdwTJAeHBqDWzXTxA.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">根标志。</figcaption></figure></div><div class="ab cl ks kt hu ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ij ik il im in"><h1 id="78b2" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">最后的想法</h1><p id="de16" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">总的来说，我发现这台机器是枚举的好方法。它强调了使用不同的工具和方法进行计数的重要性，这是获得最初立足点的关键。一旦我找到了最初的妥协，剩下的就很简单了。谢谢你一直读到最后，祝你黑客快乐😄！</p></div></div>    
</body>
</html>