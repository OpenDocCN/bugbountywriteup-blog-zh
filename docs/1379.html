<html>
<head>
<title>Power Of Recon: Easy Win (Vim Attack)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">侦查的力量:轻松取胜(Vim攻击)</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/power-of-recon-easy-win-vim-attack-e38edba7e562?source=collection_archive---------2-----------------------#2021-06-11">https://infosecwriteups.com/power-of-recon-easy-win-vim-attack-e38edba7e562?source=collection_archive---------2-----------------------#2021-06-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d05a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">大家好，我是来自尼泊尔的Veshraj Ghimire。这是我的第二篇文章，在这篇文章中，我将告诉你一个我完全意想不到的赏金故事，这个故事只有通过侦察才有可能实现。</p><p id="bba3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，不浪费你的时间，让我快速地讲一个我的小故事。</p><figure class="kl km kn ko gt kp"><div class="bz fp l di"><div class="kq kr l"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">让我们开始:V</figcaption></figure><blockquote class="kw kx ky"><p id="a8a7" class="jn jo kz jp b jq jr js jt ju jv jw jx la jz ka kb lb kd ke kf lc kh ki kj kk ij bi translated">严重性:中等</p></blockquote><p id="4588" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一天，当我在<a class="ae ld" href="https://bugv.io" rel="noopener ugc nofollow" target="_blank"><em class="kz">【Bugv】</em></a>看节目时，我浏览了一个WordPress网站。首先，我访问了该网站，并检查我是否可能会发现一些有趣的东西，但该网站似乎是静态的，所以我没有发现任何有趣的东西。然后我计划枚举子域，但最终一无所获。</p><figure class="kl km kn ko gt kp"><div class="bz fp l di"><div class="le kr l"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">根本没有子域:V</figcaption></figure><p id="4d6d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，像往常一样，我开始用SecList的<a class="ae ld" href="https://github.com/ffuf/ffuf" rel="noopener ugc nofollow" target="_blank"> <em class="kz"> ffuf </em> </a>使用<a class="ae ld" href="https://raw.githubusercontent.com/danielmiessler/SecLists/master/Discovery/Web-Content/dirsearch.txt" rel="noopener ugc nofollow" target="_blank"> <em class="kz">这个</em> </a>单词表来模糊主域，期望得到一些有用的东西。</p><figure class="kl km kn ko gt kp"><div class="bz fp l di"><div class="lf kr l"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">让我们模糊它:V</figcaption></figure><p id="e709" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">过了一段时间，我发现了一个不寻常的公开文件，这是我从未在任何目标上看到过的。该文件是:</p><blockquote class="kw kx ky"><p id="90a0" class="jn jo kz jp b jq jr js jt ju jv jw jx la jz ka kb lb kd ke kf lc kh ki kj kk ij bi translated">/wp-config.swp</p></blockquote><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/d4972c990624b79983c36331ee568d8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*Dg2pX-IN08ab3q8sax3Spg.jpeg"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">得去看看:V</figcaption></figure><p id="59ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">发现端点后，我在浏览器上打开它，它在我的电脑上下载了一个名为wp-config.swp的文件，基本上包含编辑器名称、版本、根目录和用户名，如下图所示:</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi lj"><img src="../Images/085c0dda29b52c5ddaf3e8cbf138c1ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W2zv7TPt6Lm3tkOc7zhDog.png"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">用户名模糊:V</figcaption></figure><p id="0de6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">看到这种情况，我很快谷歌了一下。swp文件，并了解到系统使用<em class="kz">交换文件将内存暂时“交换”到磁盘。</em></p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi lo"><img src="../Images/5b686ee1e3e508d643a047ec95d2c6d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/0*cy2Gq_0s1d67kkqf.jpg"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">文件似乎很有趣:V</figcaption></figure><p id="1e88" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了避免重复，我很快就报告了，因为我们都知道这是非常痛苦的。但是我的概念验证不够充分，因为没有显示合理的文件，他们将其标记为需要更多信息。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi lp"><img src="../Images/c45ff72c795eb2db8e5deb3cfb505ace.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tHllgkLdp2j0nqdj2a17SA.png"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">需要更多信息:V</figcaption></figure><figure class="kl km kn ko gt kp"><div class="bz fp l di"><div class="le kr l"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">好的:V</figcaption></figure><p id="ac8a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有了这个回复，我有点高兴知道它不是重复的。所以现在我必须更加努力地研究来展示它的影响。然后我开始了我的研究，过了一段时间，我得到了<a class="ae ld" href="https://webdevetc.com/blog/how-to-get-someones-database-credentials-while-they-are-editing-config-files-on-a-live-server/#section_proof-of-concept" rel="noopener ugc nofollow" target="_blank"> <em class="kz">这篇</em> </a>文章，解释了某人如何利用同一个漏洞获取数据库凭证。我就像哇哦，很有趣！！</p><figure class="kl km kn ko gt kp"><div class="bz fp l di"><div class="lq kr l"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">兴趣:V</figcaption></figure><p id="2e2a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后在读了那篇有趣的文章后，我开始创建自己的概念证明。我很快在我的VPS中安装了WordPress，然后制作了一个视频，展示了如果用vim编辑文件，有人如何获得数据库凭证。在此，我附上了我发给他们的POC:</p><blockquote class="kw kx ky"><p id="325c" class="jn jo kz jp b jq jr js jt ju jv jw jx la jz ka kb lb kd ke kf lc kh ki kj kk ij bi translated">总结:</p><p id="2ea2" class="jn jo kz jp b jq jr js jt ju jv jw jx la jz ka kb lb kd ke kf lc kh ki kj kk ij bi translated">设置一个脚本，保持每秒下载几次http://target.com/.wp-config.php.swp。如果有人正在Vim中编辑服务器上的文件，并且您下载了该URL，您将获得交换文件。下载完成后，只需运行vim -r .wp-config.php.swp，在vim对话框中按enter键，您应该会看到他们对文件所做的任何更改。这其实没什么大不了的，但是如果您知道某人正在编辑公共目录(/public，/public_html/ etc)中的文件，并且使用Vim而不改变默认的交换文件目录，那么他就可能会利用这一点。</p></blockquote><figure class="kl km kn ko gt kp"><div class="bz fp l di"><div class="lr kr l"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">概念验证:五</figcaption></figure><p id="9806" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">经过几天的审查，它得到了审判。但这让我有点困惑。因为我以前从未在任何报道/黑客活动中见过类似的报告，<br/>所以我不知道严重性，所以我以低严重性报告了它，但他们在分类时的评论让我感到困惑，因为敏感信息实际上并没有被披露，但这是可能的。所以我很担心。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ls"><img src="../Images/1ee74f66bea1cebc96faa64facdaf97d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kidav7lVZQ61inhkZxIb_w.png"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">严重性可能会发生变化: (</figcaption></figure><p id="2c31" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为他们提到“严重性是可以改变的”，我也觉得他们可能会在某个地方将其更改为信息性的并关闭它。我祈祷上帝不要发生这样的事</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi lt"><img src="../Images/785c4a5680dba0694322c86d4d453921.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/0*yAggOXIFI8_rncjD.jpg"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">我担心的是</figcaption></figure><p id="d8be" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是感谢上帝，可能是我的祈祷起作用了，所以它没有发生，几天后嘣！！！，严重性被改为中等，他们奖励我$ 🥳🥳</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi lu"><img src="../Images/35125ed80c406e70a669c56be856ff9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-QIQWcMldkQyAPQQkpjAWw.png"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">波利时代🥳🥳</figcaption></figure><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/5ec1f03d13d7eea689663f8a4b0a7055.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/1*y1F6sHBYf55pnp0Mjezumw.gif"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">快乐的我跳舞:V</figcaption></figure><blockquote class="kw kx ky"><p id="df10" class="jn jo kz jp b jq jr js jt ju jv jw jx la jz ka kb lb kd ke kf lc kh ki kj kk ij bi translated">时间线:</p><p id="399f" class="jn jo kz jp b jq jr js jt ju jv jw jx la jz ka kb lb kd ke kf lc kh ki kj kk ij bi translated">报道时间:2021年04月08日17时49分</p><p id="eed3" class="jn jo kz jp b jq jr js jt ju jv jw jx la jz ka kb lb kd ke kf lc kh ki kj kk ij bi translated">需要更多信息:2021年4月9日11:09</p><p id="f39a" class="jn jo kz jp b jq jr js jt ju jv jw jx la jz ka kb lb kd ke kf lc kh ki kj kk ij bi translated">POC视频发送时间:2021年4月9日12:07</p><p id="205a" class="jn jo kz jp b jq jr js jt ju jv jw jx la jz ka kb lb kd ke kf lc kh ki kj kk ij bi translated">已分类:2021年4月27日10时59分</p><p id="532c" class="jn jo kz jp b jq jr js jt ju jv jw jx la jz ka kb lb kd ke kf lc kh ki kj kk ij bi translated">将安全级别从低更新为中:2021年5月2日08:27</p><p id="f06e" class="jn jo kz jp b jq jr js jt ju jv jw jx la jz ka kb lb kd ke kf lc kh ki kj kk ij bi translated">奖励$ $:2021年05月02日08:27</p></blockquote><p id="2785" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">外卖:</p><ol class=""><li id="9ed4" class="lw lx iq jp b jq jr ju jv jy ly kc lz kg ma kk mb mc md me bi translated">永不放弃，永远努力证明影响。</li><li id="29ef" class="lw lx iq jp b jq mf ju mg jy mh kc mi kg mj kk mb mc md me bi translated">当什么都没有了，模糊的。</li></ol><p id="47e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你愿意，可以在<a class="ae ld" href="https://twitter.com/GhimireVeshraj" rel="noopener ugc nofollow" target="_blank"> <em class="kz">推特</em> </a>和我联系。</p><p id="f73a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">再见，直到下一篇文章，保持安全，保持快乐。和平✌️✌️</p></div></div>    
</body>
</html>