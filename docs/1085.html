<html>
<head>
<title>Bragging Rights(Part 1): Short story of a bug wave</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">吹牛的权利(第1部分):一个bug浪潮的小故事</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/bragging-rights-part-1-short-story-of-a-bug-wave-dbb88f48b604?source=collection_archive---------0-----------------------#2021-01-27">https://infosecwriteups.com/bragging-rights-part-1-short-story-of-a-bug-wave-dbb88f48b604?source=collection_archive---------0-----------------------#2021-01-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/fe4b1bc66df52b5584c0bbee4441b75d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8cRgAugTpKVnggZmo75mcA.jpeg"/></div></div></figure><p id="379d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">嗨，我的黑客伙伴们，我希望你们都做得很好。我们(终于)进入了新的一年，可能我们都为今年设定了一些目标。我祈祷你能实现这些愿望。我开始写一系列的文章和博客，在那里我会张贴我的发现&amp;一些有趣的阅读。我称之为吹牛的权利！我希望你喜欢并从中学习。</p><p id="42a3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第一部分是基于我最近的bug搜索，我在一个目标上发现了6个bug。我会试着解释这些错误，让我说清楚<strong class="ka ir">我的动机不是告诉你</strong>例如，什么是IDOR。你可能已经知道了，虫子的种类。这个博客是关于在哪里你可以在野外找到它们，这就是为什么我们喜欢报道和文章，不是吗？所以让我们继续前进:)</p><p id="59b5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好吧，让我们称目标为“target.com”(由于他们的政策和NDA)。我从一些谷歌呆子中选择了一个目标(即“负责任的披露奖励”)，并开始丢弃我能为这个目标侦察到的任何数据。我选择周末，这样我可以有更多的时间去打猎。经过两个周末和近30个小时的工作，我发现:</p><p id="9ab0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 2个伊多尔斯</strong></p><p id="32a2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 1储存的XSS </strong></p><p id="5775" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 1 Azure子域接管</strong></p><p id="2683" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 1 SSRF </strong></p><p id="4294" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">以及在他们的android应用中为第三方硬编码的凭证</strong></p><p id="0fb1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">荣誉提及:“WP-JSON/WP/v2/users”xD</strong></p><p id="e077" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">先说<strong class="ka ir">第一个</strong>也是我的最爱。伊多斯。在我们开始之前，我已经用<em class="kw"> WordPress用户名枚举</em>得到了一些用户名，有时它会帮助你链接很酷的bug。所以应用程序只有一个用户角色。您只能创建多个低权限用户。如果你认为这是一个简单的2004-2005 IDOR，它不是。让我告诉你，一旦你登录到应用程序，有一个功能，你可以生成和下载你的报告卡，其中将包含你的PII。因此，一旦你点击生成报告卡，一个带有JSON的POST请求将会如下所示:</p><p id="b26e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kw">{请求ID: "username_base64 value"} </em></p><p id="4f54" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你拿到了吗？是的，你做到了！如果没有，只需解码base64值并将其更改为另一个ID。再次编码，一旦你下载了别人的成绩单，我们就得到我们的第一个IDOR:)外卖？<strong class="ka ir">确保检查base64/散列值:)</strong></p><p id="71e3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第二个很简单。我可以通过交换用户id来更改密码。就像我们在正常情况下做的那样。但由于网站上有认证，我不能接手。总之，我改了密码。同样，它是base64解码，做同样的事情。唯一的区别是它是序列化的，报告卡是基于拥有报告卡的用户的。</p><p id="715b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">3号</strong>臭虫被存放在XSS。我们有一个讨论箱，在那里我们可以提出关于医疗医院和服务的建议。这是一个很酷的旁路，我最近才知道。我建议你们都学习XSS旁路技术，即<strong class="ka ir">一些Javascript </strong>，而不是到处扔一吨的有效载荷。所以网站过滤了特殊字符和<em class="kw">脚本标签以及提示。</em>我玩了一会儿，然后制作了这个有效载荷:</p><p id="6d31" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">“”；！—"&lt;xs here&gt;=&amp;{()}</strong></p><p id="dd7e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我参考了Intigriti的 XSS挑战赛，我不得不说这些太棒了。你可以在这里找到一篇好文章:- <a class="ae kx" href="https://www.valbrux.it/blog/2020/12/16/intigriti-december-xss-challenge-2/" rel="noopener ugc nofollow" target="_blank">挑战</a>。他们还有几个。谷歌一下就知道了，伙计:)</p><p id="bb34" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">清单上的第四个是azure子域名的收购，我早些时候在一位同事的帮助下为我的公司完成了这件事。这对我很有帮助。我用<em class="kw">子查找器</em>做了一些侦查，发现了一些子域名。展望未来，我使用<em class="kw">nucleus</em>进行低悬挂，最终得到了这个托管在Azure云服务上的子域。想要一个好的博客吗？开始了- <a class="ae kx" href="https://blog.cystack.net/subdomain-takeover-chapter-two-azure-services/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">接管</strong> </a> <strong class="ka ir">。所以，我检查了CNAME，它很容易受到攻击，所以我继续在azure services上拥有它。太酷了..简单:P</strong></p><p id="0ca3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第五名是这个列表中花费时间最多、回报最高的bug。是的，一个SSRF！我的第一个SSRF来自这个目标。该网站有一个选项，您可以添加您的网站链接，是的，我想同样的方式，你现在正在做的事情。我们可以把我们自己的领域，并尝试在那里或我们可以爆破一个内部SSRF？所以这很有效，我在一个到处都是合作者的扩展的帮助下得到了一个HTTP pingback。耗费我时间的是，它不接受简单的SSRF有效负载，如<a class="ae kx" href="http://localhost," rel="noopener ugc nofollow" target="_blank"> http://localhost、</a> <a class="ae kx" href="http://127.1," rel="noopener ugc nofollow" target="_blank"> http://127.1 </a>等。我尝试了几乎一整天，就在我准备放弃的时候，我想起我们可以实际上组合IP地址，并尝试它是否可行，然后嘣！！！！成功了。有效载荷会像这样:</p><p id="b9f6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kx" href="http://1.1.1.1" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">http://1.1.1.1</strong></a><strong class="ka ir">&amp;@2.2.2.2#@3.3.3.3/</strong></p><p id="fd81" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我不明白这是如何工作的，如果有人知道，请在Twitter上用解决方案DM。我进行了端口扫描，获取了ss，然后发送出去。</p><p id="65de" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是我对web部件的研究。他们也有一个android应用程序，我想如果我能找到什么，就试一试。所以最后一个也是第六个bug是web应用下的硬编码凭证。我下载了APK并用<strong class="ka ir"> apktool </strong>反编译了它。自从我们第一次访问strings.xml，我也做了同样的事情，但什么也没有。在搜索这里&amp;那里的时候，我在<strong class="ka ir">资产</strong>下找到了一个文件夹，哦，天哪！有一些app_key和secert_key。我真的不知道该做什么，我只是简单地报告了一下。</p><p id="e63b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这些是我在那里发现的虫子。幸运的是我得到了一大笔赏金。那是:</p><p id="41a9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2元:300+300= 600元</p><p id="1bcf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 1 Azure收购= 150美元</strong></p><p id="186e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> XSS: 300美元</strong></p><p id="ccf0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> SSRF: 450美元</strong></p><p id="64a7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">和硬编码凭证:50美元</strong></p><p id="c4d1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">{总计1550美元)</strong></p><p id="ecab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最重要的是，你的思维能力和黑客技术能走多远都是关于利用东西的独特方式。你越好奇，你得到的结果就越好。坚持一个项目真的帮助我以更好的方式提高了自己，我相信这对你也一样。此外，我敢打赌，一旦你在一个目标上花些时间，你就能得到好的bug。不过，完全看什么适合你的心态:)</p><p id="9a6b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以这将是这篇文章的结尾。我已经有一段时间没有发布它们了，所以今天我把它们打了出来。希望对你有所帮助。如果你没有发现错误，不要气馁。三个月了，我一只虫子都没发现。它没有对我做任何事。但是，我希望你能定期发现bug</p><p id="8d2f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你喜欢它并且学到了一些东西，你可以点击下面的拍手图标。你也可以用这个用户名在Twitter上关注我:<strong class="ka ir"> @manash4rsh </strong>。</p><p id="2644" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">小心黑客们！狩猎愉快:)</p><p id="9125" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">再见，❤</p></div></div>    
</body>
</html>