<html>
<head>
<title>Alternatives to Extract Tables and Columns from MySQL and MariaDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从MySQL和MariaDB中提取表和列的替代方法</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/alternatives-to-extract-tables-and-columns-from-mysql-and-mariadb-813171d3c8bc?source=collection_archive---------0-----------------------#2020-01-28">https://infosecwriteups.com/alternatives-to-extract-tables-and-columns-from-mysql-and-mariadb-813171d3c8bc?source=collection_archive---------0-----------------------#2020-01-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="51b9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我以前发表过一个关于当'<em class="kp">/或/i' </em>被过滤时提取表名的<a class="ae ko" href="https://osandamalith.com/2017/02/03/alternative-for-information_schema-tables-in-mysql/" rel="noopener ugc nofollow" target="_blank">帖子</a>，这导致了单词information_schema的过滤。我自己对这个领域做了一些研究，发现了许多其他的表，在这些表中可以提取表名。这些是我找到的所有数据库和表，除了‘information _ schema . tables’之外，我们还可以从中提取表名。我在5.7.29 MySQL和10.3.18 MariaDB中测试过以下内容。总共有39个查询，正如我在之前的<a class="ae ko" href="https://osandamalith.com/2017/02/03/alternative-for-information_schema-tables-in-mysql/" rel="noopener ugc nofollow" target="_blank">帖子</a>中提到的，这些可以在一次查询中与dump结合。</p><h1 id="517b" class="kq kr it bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">[计]系统复制命令（system的简写）</h1><p id="6019" class="pw-post-body-paragraph jq jr it js b jt lo jv jw jx lp jz ka kb lq kd ke kf lr kh ki kj ls kl km kn im bi translated">这些视图是在MySQL 5.7.9中添加的。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="a93a" class="mc kr it ly b gy md me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> object_name <strong class="ly iu">FROM</strong> `sys`.`x$innodb_buffer_stats_by_table` <strong class="ly iu">WHERE</strong> object_schema = <strong class="ly iu">DATABASE</strong>();<br/>+-------------+<br/>| object_name |<br/>+-------------+<br/>| emails      |<br/>| flag        |<br/>| referers    |<br/>| uagents     |<br/>| users       |<br/>+-------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.04 sec)</span><span id="4ad8" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> TABLE_NAME <strong class="ly iu">FROM</strong> `sys`.`x$schema_flattened_keys` <strong class="ly iu">WHERE</strong> TABLE_SCHEMA = <strong class="ly iu">DATABASE</strong>();<br/>+------------+<br/>| TABLE_NAME |<br/>+------------+<br/>| emails     |<br/>| flag       |<br/>| referers   |<br/>| uagents    |<br/>| users      |<br/>+------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.01 sec)</span><span id="e7ce" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> TABLE_NAME <strong class="ly iu">FROM</strong> `sys`.`x$ps_schema_table_statistics_io` <strong class="ly iu">WHERE</strong> TABLE_SCHEMA = <strong class="ly iu">DATABASE</strong>();<br/>+------------+<br/>| TABLE_NAME |<br/>+------------+<br/>| db         |<br/>| emails     |<br/>| flag       |<br/>| referers   |<br/>| uagents    |<br/>| users      |<br/>+------------+<br/>6 rows in <strong class="ly iu">set</strong> (0.04 sec)</span><span id="c013" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> TABLE_NAME <strong class="ly iu">FROM</strong> `sys`.`x$schema_index_statistics` <strong class="ly iu">WHERE</strong> TABLE_SCHEMA = <strong class="ly iu">DATABASE</strong>();<br/>+------------+<br/>| table_name |<br/>+------------+<br/>| users      |<br/>| emails     |<br/>| referers   |<br/>| uagents    |<br/>| flag       |<br/>+------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.00 sec)</span><span id="61f0" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> TABLE_NAME <strong class="ly iu">FROM</strong> `sys`.`x$schema_table_statistics` <strong class="ly iu">WHERE</strong> TABLE_SCHEMA = <strong class="ly iu">DATABASE</strong>();<br/>+------------+<br/>| TABLE_NAME |<br/>+------------+<br/>| emails     |<br/>| users      |<br/>| flag       |<br/>| referers   |<br/>| uagents    |<br/>+------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.03 sec)</span><span id="9c28" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> TABLE_NAME <strong class="ly iu">FROM</strong> `sys`.`x$schema_table_statistics_with_buffer` <strong class="ly iu">WHERE</strong> TABLE_SCHEMA = <strong class="ly iu">DATABASE</strong>();<br/>+------------+<br/>| TABLE_NAME |<br/>+------------+<br/>| referers   |<br/>| uagents    |<br/>| emails     |<br/>| users      |<br/>| flag       |<br/>+------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.07 sec)</span><span id="1e47" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> object_name <strong class="ly iu">FROM</strong> `sys`.`innodb_buffer_stats_by_table` <strong class="ly iu">WHERE</strong> object_schema = <strong class="ly iu">DATABASE</strong>();<br/>+-------------+<br/>| object_name |<br/>+-------------+<br/>| emails      |<br/>| flag        |<br/>| referers    |<br/>| uagents     |<br/>| users       |<br/>+-------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.05 sec)</span><span id="550a" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> TABLE_NAME <strong class="ly iu">FROM</strong> `sys`.`schema_auto_increment_columns` <strong class="ly iu">WHERE</strong> TABLE_SCHEMA = <strong class="ly iu">DATABASE</strong>();<br/>+------------+<br/>| table_name |<br/>+------------+<br/>| referers   |<br/>| flag       |<br/>| emails     |<br/>| users      |<br/>| uagents    |<br/>+------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.14 sec)</span><span id="9264" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> TABLE_NAME <strong class="ly iu">FROM</strong> `sys`.`schema_index_statistics` <strong class="ly iu">WHERE</strong> TABLE_SCHEMA = <strong class="ly iu">DATABASE</strong>();<br/>+------------+<br/>| table_name |<br/>+------------+<br/>| users      |<br/>| emails     |<br/>| referers   |<br/>| uagents    |<br/>| flag       |<br/>+------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.00 sec)</span><span id="dfc0" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> TABLE_NAME <strong class="ly iu">FROM</strong> `sys`.`schema_table_statistics` <strong class="ly iu">WHERE</strong> TABLE_SCHEMA = <strong class="ly iu">DATABASE</strong>();<br/>+------------+<br/>| TABLE_NAME |<br/>+------------+<br/>| users      |<br/>| emails     |<br/>| referers   |<br/>| uagents    |<br/>| flag       |<br/>+------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.04 sec)</span><span id="d9e4" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> TABLE_NAME <strong class="ly iu">FROM</strong> `sys`.`schema_table_statistics_with_buffer` <strong class="ly iu">WHERE</strong> TABLE_SCHEMA = <strong class="ly iu">DATABASE</strong>();<br/>+------------+<br/>| TABLE_NAME |<br/>+------------+<br/>| users      |<br/>| emails     |<br/>| flag       |<br/>| referers   |<br/>| uagents    |<br/>+------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.09 sec)</span></pre><p id="fcee" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用这些查询，您可以获得存储在本地磁盘上的表文件路径，同时我们可以提取表名。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="132c" class="mc kr it ly b gy md me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> <strong class="ly iu">FILE</strong> <strong class="ly iu">FROM</strong> `sys`.`io_global_by_file_by_bytes` <strong class="ly iu">WHERE</strong> <strong class="ly iu">FILE</strong> REGEXP <strong class="ly iu">DATABASE</strong>();<br/>+---------------------------------+<br/>| file                            |<br/>+---------------------------------+<br/>| @@datadir\security\emails.ibd   |<br/>| @@datadir\security\flag.ibd     |<br/>| @@datadir\security\referers.ibd |<br/>| @@datadir\security\uagents.ibd  |<br/>| @@datadir\security\users.ibd    |<br/>| @@datadir\security\uagents.frm  |<br/>| @@datadir\security\referers.frm |<br/>| @@datadir\security\users.frm    |<br/>| @@datadir\security\emails.frm   |<br/>| @@datadir\security\flag.frm     |<br/>| @@datadir\security\db.opt       |<br/>+---------------------------------+<br/>11 rows in <strong class="ly iu">set</strong> (0.22 sec)</span><span id="b29c" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> <strong class="ly iu">FILE</strong> <strong class="ly iu">FROM</strong> `sys`.`io_global_by_file_by_latency` <strong class="ly iu">WHERE</strong> <strong class="ly iu">FILE</strong> REGEXP <strong class="ly iu">DATABASE</strong>();<br/>+---------------------------------+<br/>| file                            |<br/>+---------------------------------+<br/>| @@datadir\security\flag.ibd     |<br/>| @@datadir\security\uagents.ibd  |<br/>| @@datadir\security\flag.frm     |<br/>| @@datadir\security\emails.frm   |<br/>| @@datadir\security\emails.ibd   |<br/>| @@datadir\security\referers.ibd |<br/>| @@datadir\security\referers.frm |<br/>| @@datadir\security\users.frm    |<br/>| @@datadir\security\users.ibd    |<br/>| @@datadir\security\uagents.frm  |<br/>| @@datadir\security\db.opt       |<br/>+---------------------------------+</span><span id="2c6c" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> <strong class="ly iu">FILE</strong> <strong class="ly iu">FROM</strong> `sys`.`x$io_global_by_file_by_bytes` <strong class="ly iu">WHERE</strong> <strong class="ly iu">FILE</strong> REGEXP <strong class="ly iu">DATABASE</strong>();<br/>+-----------------------------------------------------------------------------+<br/>| file                                                                        |<br/>+-----------------------------------------------------------------------------+<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\emails.ibd   |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\flag.ibd     |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\referers.ibd |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\uagents.ibd  |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\users.ibd    |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\uagents.frm  |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\referers.frm |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\users.frm    |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\emails.frm   |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\flag.frm     |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\db.opt       |<br/>+-----------------------------------------------------------------------------+</span><span id="dc83" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> <strong class="ly iu">FILE</strong> <strong class="ly iu">FROM</strong> `sys`.`x$io_global_by_file_by_latency` <strong class="ly iu">WHERE</strong> <strong class="ly iu">FILE</strong> REGEXP <strong class="ly iu">DATABASE</strong>();<br/>+-----------------------------------------------------------------------------+<br/>| file                                                                        |<br/>+-----------------------------------------------------------------------------+<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\flag.ibd     |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\uagents.ibd  |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\flag.frm     |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\emails.frm   |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\emails.ibd   |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\referers.ibd |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\referers.frm |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\users.frm    |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\users.ibd    |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\uagents.frm  |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\db.opt       |<br/>+-----------------------------------------------------------------------------+<br/>11 rows in <strong class="ly iu">set</strong> (0.00 sec)</span></pre><p id="4b9d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下表像日志一样存储以前使用的查询。你可以用正则表达式找到你需要的东西。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="b767" class="mc kr it ly b gy md me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> <strong class="ly iu">QUERY</strong> <strong class="ly iu">FROM</strong> sys.x$statement_analysis <strong class="ly iu">WHERE</strong> <strong class="ly iu">QUERY</strong> REGEXP <strong class="ly iu">DATABASE</strong>();<br/>+-----------------------------------------------------------------------------------------------------------------------------------+<br/>| query                                                                                                                             |<br/>+-----------------------------------------------------------------------------------------------------------------------------------+<br/>| <strong class="ly iu">SHOW</strong> <strong class="ly iu">TABLE</strong> <strong class="ly iu">STATUS</strong> <strong class="ly iu">FROM</strong> `security`                                                                                                 |<br/>| <strong class="ly iu">SHOW</strong> <strong class="ly iu">CREATE</strong> <strong class="ly iu">TABLE</strong> `security` . `emails`                                                                                           |<br/>| <strong class="ly iu">SHOW</strong> <strong class="ly iu">CREATE</strong> <strong class="ly iu">TABLE</strong> `security` . `users`                                                                                            |<br/>| <strong class="ly iu">SHOW</strong> <strong class="ly iu">CREATE</strong> <strong class="ly iu">TABLE</strong> `security` . `referers`                                                                                         |<br/>+-----------------------------------------------------------------------------------------------------------------------------------+</span><span id="2436" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> <strong class="ly iu">QUERY</strong> <strong class="ly iu">FROM</strong> `sys`.`statement_analysis` <strong class="ly iu">where</strong> <strong class="ly iu">QUERY</strong> REGEXP <strong class="ly iu">DATABASE</strong>();<br/>+-----------------------------------------------------------+<br/>| query                                                     |<br/>+-----------------------------------------------------------+<br/>| <strong class="ly iu">SHOW</strong> <strong class="ly iu">TABLE</strong> <strong class="ly iu">STATUS</strong> <strong class="ly iu">FROM</strong> `security`                         |<br/>| <strong class="ly iu">SHOW</strong> <strong class="ly iu">CREATE</strong> <strong class="ly iu">TABLE</strong> `security` . `emails`                   |<br/>| <strong class="ly iu">SHOW</strong> <strong class="ly iu">CREATE</strong> <strong class="ly iu">TABLE</strong> `security` . `users`                    |<br/>| <strong class="ly iu">SHOW</strong> <strong class="ly iu">CREATE</strong> <strong class="ly iu">TABLE</strong> `security` . `referers`                 |<br/>| <strong class="ly iu">SELECT</strong> * <strong class="ly iu">FROM</strong> `security` . `users` <strong class="ly iu">LIMIT</strong> ?                |<br/>| <strong class="ly iu">SHOW</strong> <strong class="ly iu">CREATE</strong> <strong class="ly iu">TABLE</strong> `security` . `uagents`                  |<br/>| <strong class="ly iu">SHOW</strong> <strong class="ly iu">CREATE</strong> <strong class="ly iu">PROCEDURE</strong> `security` . `select_first_column`  |<br/>| <strong class="ly iu">SHOW</strong> <strong class="ly iu">CREATE</strong> <strong class="ly iu">TABLE</strong> `security` . `users`                    |<br/>| <strong class="ly iu">SHOW</strong> <strong class="ly iu">OPEN</strong> <strong class="ly iu">TABLES</strong> <strong class="ly iu">FROM</strong> `security` <strong class="ly iu">WHERE</strong> `in_use` != ?      |<br/>| <strong class="ly iu">SHOW</strong> <strong class="ly iu">TRIGGERS</strong> <strong class="ly iu">FROM</strong> `security`                             |<br/>| <strong class="ly iu">USE</strong> `security`                                            |<br/>| <strong class="ly iu">USE</strong> `security`                                            |<br/>+-----------------------------------------------------------+<br/>12 <strong class="ly iu">rows</strong> <strong class="ly iu">in</strong> <strong class="ly iu">set</strong> (0.01 sec)</span></pre><h1 id="dccb" class="kq kr it bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">性能模式</h1><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="2246" class="mc kr it ly b gy md me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> object_name <strong class="ly iu">FROM</strong> `performance_schema`.`objects_summary_global_by_type` <strong class="ly iu">WHERE</strong> object_schema = <strong class="ly iu">DATABASE</strong>();<br/>+---------------------+<br/>| object_name         |<br/>+---------------------+<br/>| emails              |<br/>| referers            |<br/>| uagents             |<br/>| users               |<br/>| flag                |<br/>| select_first_column |<br/>+---------------------+<br/>6 rows in <strong class="ly iu">set</strong> (0.00 sec)</span><span id="2a14" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> object_name <strong class="ly iu">FROM</strong> `performance_schema`.`table_handles` <strong class="ly iu">WHERE</strong> object_schema = <strong class="ly iu">DATABASE</strong>();<br/>+-------------+<br/>| object_name |<br/>+-------------+<br/>| emails      |<br/>| referers    |<br/>| uagents     |<br/>| users       |<br/>| users       |<br/>| users       |<br/>| users       |<br/>| users       |<br/>| users       |<br/>| users       |<br/>| emails      |<br/>| flag        |<br/>| referers    |<br/>| uagents     |<br/>| users       |<br/>| emails      |<br/>| flag        |<br/>| referers    |<br/>| uagents     |<br/>| users       |<br/>+-------------+<br/>20 rows in <strong class="ly iu">set</strong> (0.00 sec)</span><span id="1c92" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> object_name <strong class="ly iu">FROM</strong> `performance_schema`.`table_io_waits_summary_by_index_usage` <strong class="ly iu">WHERE</strong> object_schema = <strong class="ly iu">DATABASE</strong>();<br/>+-------------+<br/>| object_name |<br/>+-------------+<br/>| emails      |<br/>| referers    |<br/>| uagents     |<br/>| users       |<br/>| users       |<br/>| flag        |<br/>+-------------+<br/>6 rows in <strong class="ly iu">set</strong> (0.00 sec)</span><span id="5439" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> object_name <strong class="ly iu">FROM</strong> `performance_schema`.`table_io_waits_summary_by_table` <strong class="ly iu">WHERE</strong> object_schema = <strong class="ly iu">DATABASE</strong>();<br/>+-------------+<br/>| object_name |<br/>+-------------+<br/>| emails      |<br/>| referers    |<br/>| uagents     |<br/>| users       |<br/>| flag        |<br/>+-------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.00 sec)</span><span id="8d52" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> object_name <strong class="ly iu">FROM</strong> `performance_schema`.`table_lock_waits_summary_by_table` <strong class="ly iu">WHERE</strong> object_schema = <strong class="ly iu">DATABASE</strong>();<br/>+-------------+<br/>| object_name |<br/>+-------------+<br/>| emails      |<br/>| referers    |<br/>| uagents     |<br/>| users       |<br/>| flag        |<br/>+-------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.00 sec)</span></pre><p id="4253" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如前所述，下面包含所有类型化SQL查询的日志。有时您可能会找到表名。为了简单起见，我使用正则表达式来匹配当前的数据库名称。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="cfab" class="mc kr it ly b gy md me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> digest_text <strong class="ly iu">FROM</strong> `performance_schema`.`events_statements_summary_by_digest` <strong class="ly iu">WHERE</strong> digest_text REGEXP <strong class="ly iu">DATABASE</strong>();<br/>+-----------------------------------------------------------------------------------------------------------------------------------+<br/>| digest_text                                                                                                                       |<br/>+-----------------------------------------------------------------------------------------------------------------------------------+<br/>| <strong class="ly iu">SHOW</strong> <strong class="ly iu">CREATE</strong> <strong class="ly iu">TABLE</strong> `security` . `emails`                                                                                           |<br/>| <strong class="ly iu">SHOW</strong> <strong class="ly iu">CREATE</strong> <strong class="ly iu">TABLE</strong> `security` . `referers`                                                                                         |<br/>| <strong class="ly iu">SHOW</strong> <strong class="ly iu">CREATE</strong> <strong class="ly iu">PROCEDURE</strong> `security` . `select_first_column`                                                                          |<br/>| <strong class="ly iu">SHOW</strong> <strong class="ly iu">CREATE</strong> <strong class="ly iu">TABLE</strong> `security` . `uagents`                                                                                          |<br/>+-----------------------------------------------------------------------------------------------------------------------------------+<br/>17 <strong class="ly iu">rows</strong> <strong class="ly iu">in</strong> <strong class="ly iu">set</strong> (0.00 sec)</span></pre><p id="12c8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">就像之前我们获取本地表文件路径一样。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="638a" class="mc kr it ly b gy md me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> file_name <strong class="ly iu">FROM</strong> `performance_schema`.`file_instances` <strong class="ly iu">WHERE</strong> file_name REGEXP <strong class="ly iu">DATABASE</strong>();<br/>+-----------------------------------------------------------------------------+<br/>| file_name                                                                   |<br/>+-----------------------------------------------------------------------------+<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\emails.ibd   |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\flag.ibd     |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\referers.ibd |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\uagents.ibd  |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\users.ibd    |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\emails.frm   |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\referers.frm |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\db.opt       |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\uagents.frm  |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\users.frm    |<br/>| D:\MySQL\mysql-5.7.29-winx64\mysql-5.7.29-winx64\data\security\flag.frm     |<br/>+-----------------------------------------------------------------------------+<br/>11 rows in <strong class="ly iu">set</strong> (0.00 sec)</span></pre><h1 id="bbc7" class="kq kr it bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">关系型数据库</h1><p id="6f45" class="pw-post-body-paragraph jq jr it js b jt lo jv jw jx lp jz ka kb lq kd ke kf lr kh ki kj ls kl km kn im bi translated">查看我之前关于这两个查询的<a class="ae ko" href="https://osandamalith.com/2017/02/03/alternative-for-information_schema-tables-in-mysql/" rel="noopener ugc nofollow" target="_blank">帖子</a>以及一次查询中的转储。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="314b" class="mc kr it ly b gy md me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> table_name <strong class="ly iu">FROM</strong> `mysql`.`innodb_table_stats` <strong class="ly iu">WHERE</strong> database_name = <strong class="ly iu">DATABASE</strong>();<br/>+------------+<br/>| table_name |<br/>+------------+<br/>| emails     |<br/>| flag       |<br/>| referers   |<br/>| uagents    |<br/>| users      |<br/>+------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.00 sec)</span><span id="f71a" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> table_name <strong class="ly iu">FROM</strong> `mysql`.`innodb_index_stats` <strong class="ly iu">WHERE</strong> database_name = <strong class="ly iu">DATABASE</strong>();<br/>+------------+<br/>| table_name |<br/>+------------+<br/>| emails     |<br/>| emails     |<br/>| emails     |<br/>| flag       |<br/>| flag       |<br/>| flag       |<br/>| referers   |<br/>| referers   |<br/>| referers   |<br/>| uagents    |<br/>| uagents    |<br/>| uagents    |<br/>| users      |<br/>| users      |<br/>| users      |<br/>+------------+<br/>15 rows in <strong class="ly iu">set</strong> (0.00 sec)</span></pre><h1 id="38ae" class="kq kr it bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">信息模式</h1><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="0131" class="mc kr it ly b gy md me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> TABLE_NAME <strong class="ly iu">FROM</strong> `information_schema`.`KEY_COLUMN_USAGE` <strong class="ly iu">WHERE</strong> CONSTRAINT_SCHEMA = <strong class="ly iu">DATABASE</strong>();<br/>+------------+<br/>| TABLE_NAME |<br/>+------------+<br/>| emails     |<br/>| flag       |<br/>| referers   |<br/>| uagents    |<br/>| users      |<br/>+------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.07 sec)</span><span id="7a0b" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> TABLE_NAME <strong class="ly iu">FROM</strong> `information_schema`.`KEY_COLUMN_USAGE` <strong class="ly iu">WHERE</strong> table_schema = <strong class="ly iu">DATABASE</strong>();<br/>+------------+<br/>| TABLE_NAME |<br/>+------------+<br/>| emails     |<br/>| flag       |<br/>| referers   |<br/>| uagents    |<br/>| users      |<br/>+------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.00 sec)</span></pre><p id="71ab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但是，在这种情况下，可以检索第一列值。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="dbc5" class="mc kr it ly b gy md me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> COLUMN_NAME <strong class="ly iu">FROM</strong> `information_schema`.`KEY_COLUMN_USAGE` <strong class="ly iu">WHERE</strong> table_schema = <strong class="ly iu">DATABASE</strong>();<br/>+-------------+<br/>| COLUMN_NAME |<br/>+-------------+<br/>| id          |<br/>| id          |<br/>| id          |<br/>| id          |<br/>| id          |<br/>+-------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.00 sec)</span><span id="04f7" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> TABLE_NAME <strong class="ly iu">FROM</strong> `information_schema`.`PARTITIONS` <strong class="ly iu">WHERE</strong> TABLE_SCHEMA = <strong class="ly iu">DATABASE</strong>();<br/>+------------+<br/>| TABLE_NAME |<br/>+------------+<br/>| emails     |<br/>| flag       |<br/>| referers   |<br/>| uagents    |<br/>| users      |<br/>+------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.01 sec)</span></pre><p id="04c6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在该表中，您还可以使用列“column_name”来获取所有表的第一列。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="a805" class="mc kr it ly b gy md me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> TABLE_NAME <strong class="ly iu">FROM</strong> `information_schema`.`STATISTICS` <strong class="ly iu">WHERE</strong> TABLE_SCHEMA = <strong class="ly iu">DATABASE</strong>();<br/>+------------+<br/>| TABLE_NAME |<br/>+------------+<br/>| emails     |<br/>| flag       |<br/>| referers   |<br/>| uagents    |<br/>| users      |<br/>+------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.00 sec)</span><span id="fb02" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> TABLE_NAME <strong class="ly iu">FROM</strong> `information_schema`.`TABLE_CONSTRAINTS` <strong class="ly iu">WHERE</strong> TABLE_SCHEMA = <strong class="ly iu">DATABASE</strong>();<br/>+------------+<br/>| TABLE_NAME |<br/>+------------+<br/>| emails     |<br/>| flag       |<br/>| referers   |<br/>| uagents    |<br/>| users      |<br/>+------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.00 sec)</span><span id="00fd" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> file_name <strong class="ly iu">FROM</strong> `information_schema`.`FILES` <strong class="ly iu">where</strong> file_name regexp <strong class="ly iu">database</strong>();<br/>+-------------------------+<br/>| file_name               |<br/>+-------------------------+<br/>| .\security\emails.ibd   |<br/>| .\security\flag.ibd     |<br/>| .\security\referers.ibd |<br/>| .\security\uagents.ibd  |<br/>| .\security\users.ibd    |<br/>+-------------------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.00 sec)</span></pre><p id="74e2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">从MySQL 5.6开始，InnoDB存在于Information_Schema中。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="9bd3" class="mc kr it ly b gy md me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> TABLE_NAME <strong class="ly iu">FROM</strong> `information_schema`.`INNODB_BUFFER_PAGE` <strong class="ly iu">WHERE</strong> TABLE_NAME REGEXP  <strong class="ly iu">DATABASE</strong>();<br/>+-----------------------+<br/>| TABLE_NAME            |<br/>+-----------------------+<br/>| `security`.`emails`   |<br/>| `security`.`referers` |<br/>| `security`.`uagents`  |<br/>| `security`.`users`    |<br/>| `security`.`flag`     |<br/>+-----------------------+</span><span id="6d80" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> TABLE_NAME <strong class="ly iu">FROM</strong> `information_schema`.`INNODB_BUFFER_PAGE_LRU` <strong class="ly iu">WHERE</strong> TABLE_NAME REGEXP <strong class="ly iu">DATABASE</strong>();<br/>+-----------------------+<br/>| TABLE_NAME            |<br/>+-----------------------+<br/>| `security`.`emails`   |<br/>| `security`.`referers` |<br/>| `security`.`uagents`  |<br/>| `security`.`users`    |<br/>| `security`.`flag`     |<br/>+-----------------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.06 sec)</span><span id="2861" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> <strong class="ly iu">path</strong> <strong class="ly iu">FROM</strong>  `information_schema`.`INNODB_SYS_DATAFILES` <strong class="ly iu">WHERE</strong> <strong class="ly iu">path</strong> REGEXP <strong class="ly iu">DATABASE</strong>();<br/>+-------------------------+<br/>| path                    |<br/>+-------------------------+<br/>| .\security\users.ibd    |<br/>| .\security\emails.ibd   |<br/>| .\security\uagents.ibd  |<br/>| .\security\referers.ibd |<br/>| .\security\flag.ibd     |<br/>+-------------------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.00 sec)</span><span id="eec0" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> <strong class="ly iu">NAME</strong> <strong class="ly iu">FROM</strong> `information_schema`.`INNODB_SYS_TABLESPACES` <strong class="ly iu">WHERE</strong> <strong class="ly iu">NAME</strong> REGEXP <strong class="ly iu">DATABASE</strong>();<br/>+-------------------+<br/>| NAME              |<br/>+-------------------+<br/>| security/users    |<br/>| security/emails   |<br/>| security/uagents  |<br/>| security/referers |<br/>| security/flag     |<br/>+-------------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.04 sec)</span><span id="b9b6" class="mc kr it ly b gy mh me l mf mg">mysql&gt; <strong class="ly iu">SELECT</strong> <strong class="ly iu">NAME</strong> <strong class="ly iu">FROM</strong> `information_schema`.`INNODB_SYS_TABLESTATS` <strong class="ly iu">WHERE</strong> <strong class="ly iu">NAME</strong> REGEXP <strong class="ly iu">DATABASE</strong>();<br/>+-------------------+<br/>| NAME              |<br/>+-------------------+<br/>| security/emails   |<br/>| security/flag     |<br/>| security/referers |<br/>| security/uagents  |<br/>| security/users    |<br/>+-------------------+<br/>5 rows in <strong class="ly iu">set</strong> (0.00 sec)</span></pre><h1 id="3cae" class="kq kr it bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">列名</h1><p id="8d06" class="pw-post-body-paragraph jq jr it js b jt lo jv jw jx lp jz ka kb lq kd ke kf lr kh ki kj ls kl km kn im bi translated">大多数时候人们问我是否有提取列名的方法？您实际上不需要知道列名。</p><p id="7100" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果显示了错误，您可以使用下面的第一个查询直接获得列数，该查询等于1，返回给我们错误。要确定布尔盲注入场景中的列数，您可以使用这个技巧，它将返回0(因为值不相等)。之后，使用下面的第三个查询提取数据</p><figure class="lt lu lv lw gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mi"><img src="../Images/c402b437183ebccc4a91f1f7f9c638b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*REVzMZgF86j6YWWK.png"/></div></div></figure><p id="538f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我希望这些能在你下一次考试中派上用场:)</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><p id="13f4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="kp">关注</em> <a class="ae ko" href="https://medium.com/bugbountywriteup" rel="noopener"> <em class="kp"> Infosec报道</em> </a> <em class="kp">获取更多此类精彩报道。</em></p><div class="mx my gp gr mz na"><a href="https://medium.com/bugbountywriteup" rel="noopener follow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd iu gy z fp nf fr fs ng fu fw is bi translated">信息安全报道</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">收集了世界上最好的黑客的文章，主题从bug奖金和CTF到vulnhub…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">medium.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no mo na"/></div></div></a></div></div></div>    
</body>
</html>