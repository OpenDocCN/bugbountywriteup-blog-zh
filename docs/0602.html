<html>
<head>
<title/>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1/>
<blockquote>原文：<a href="https://infosecwriteups.com/lian-yu-try-hack-me-walkthrough-ce8783c21bb2?source=collection_archive---------0-----------------------#2020-05-24">https://infosecwriteups.com/lian-yu-try-hack-me-walkthrough-ce8783c21bb2?source=collection_archive---------0-----------------------#2020-05-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><p id="e0a4" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated"><strong class="ir jn">莲_玉:TryHackme攻略</strong></p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi jo"><img src="../Images/188d44f5faac51dbd7e26b1251906d43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NNcKSqF30pmMNp37KbwC7A.png"/></div></div></figure><p id="f139" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">玉莲是根据电视连续剧Tryhackme上的初级房间。</p><p id="cb78" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">这台机器需要大量的模糊化、隐写术和权限提升。</p><h1 id="92fe" class="ka kb iq bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">网络服务器</h1><p id="58d6" class="pw-post-body-paragraph io ip iq ir b is ky iu iv iw kz iy iz ja la jc jd je lb jg jh ji lc jk jl jm ij bi translated">tryhackme上的第一个问题是关于web服务器的，所以我对网站运行了Gobuster</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi ld"><img src="../Images/01b66b8beb7330990e18e7347395c64a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*apgqY2OGuBJtU9nplAXCNg.png"/></div></div></figure><p id="0c26" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">所以我找到了一个目录，源代码如下:</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi le"><img src="../Images/b5bcc7c0e0b0d5c5c15d51ea4a587d49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ys_VZnAlOMSd9Xwmjj8ZzQ.png"/></div></div></figure><p id="b3bf" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">我们看到一个评论，它看起来像一个关键字或名称，我们稍后将使用它。</p><p id="60b6" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">现在我们对找到的目录运行Gobuster</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi lf"><img src="../Images/bcf5201b1241429a643b763e69bec3f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bq-peDFUqMKJhxKQpSkTXQ.png"/></div></div></figure><p id="acc6" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">我们发现了一个子目录</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi lg"><img src="../Images/a2583b3b4ee5d345b0773473b1350ad2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NCl5GnQpmczD7t6Gi6B4DQ.png"/></div></div></figure><p id="d12e" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">在查看了源页面后，我们得到了一些扩展名的提示，我们可以使用gobuster来查找带有该扩展名的文件名，方法是使用-x参数，这让我们可以搜索文件扩展名。</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi lh"><img src="../Images/5e9d15da0e637f95b224334b09c1e4b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HyUJbwRArU6vnNlsf4bIPw.png"/></div></div></figure><p id="6579" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">当我们用。我们找到了一个文件，让我们看看它是什么。</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi li"><img src="../Images/6efb712af98cd660867c6bd21e8b692b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gOnm4kcq1_eOzHFrTQ0NGA.png"/></div></div></figure><p id="e3a0" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">我们得到了一些字符，但它是由tryhackme的提示编码的，我们可以使用CyberChef来解码</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi lj"><img src="../Images/5d3f27d9418e06d7710ee77e57542f1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hq6l4AZF8GIWb0WyYbXIkQ.png"/></div></div></figure><p id="5126" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">该字符串是用Base-58加密的。您可以通过Cyberchef中的魔法模块检查编码类型</p><p id="16f9" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">我们已经创建了一个用户名v******e。</p><p id="767f" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">我们可以尝试登录FTP</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi lk"><img src="../Images/5335aa7523c0568a252a113055965365.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_li9GMrTBd2kccg5jOHJkg.png"/></div></div></figure><p id="8cde" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">好吧，我们进去了。我们可以看到有3个图像文件，我们可以使用get命令下载所有文件</p><p id="454f" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">下载文件后，一个名为“别管我”的图片</p><p id="8105" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">所以我们用exiftool来检查图像。</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi ll"><img src="../Images/4e331a8980d0e8426d1ef6de687a4145.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6O2g8F09CX2mNFeKFJhgPQ.png"/></div></div></figure><p id="6e48" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">我们从Exiftool得到的图像有些错误。这意味着图像的标题可能被破坏，我们可以谷歌的PNG图像的十六进制表来检查值，也可以用Hexeditor修改图像。</p><p id="66e2" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">我们在谷歌上搜索，找到了PNG图像的正确值</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div class="gh gi lm"><img src="../Images/32555a91007229c037af8cbc5c5bb281.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/format:webp/1*e8xra0jOpql5llb5QMf9LA.png"/></div></figure><p id="09a3" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">在我们用PNG图像文件运行Hexeditor之后</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi ln"><img src="../Images/9098ce3478aeb5b8f9a7cf6df07c139d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y1tbQiPJM8NxKeQ7UGEmjA.png"/></div></div></figure><p id="0679" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">十六进制标题PNG图像的值不匹配，因此我们必须修改这些值并保存它。</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi lo"><img src="../Images/9f36b6712c28162e9b78379483cc4808.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LjYa6lDFx_q3yGhIncvYZg.png"/></div></div></figure><p id="97a1" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">保存后，我们可以再次使用ExifTool进行验证</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi lp"><img src="../Images/3c18df5d9cedc9cd9ed711840e80ec3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ezVfG-MDxIKGqsDATuwuVA.png"/></div></div></figure><p id="ba2e" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">错误已经消失了</p><p id="be30" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">现在，让我们试着打开图像</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi lq"><img src="../Images/e0435030abf63a35a16886ed0d189e44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Els7R5GAVtjQhh26MOckxA.png"/></div></div></figure><p id="1701" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">上面说我们想要的东西是pa******。另外两张图片可能也包含一些有用的信息，让我们检查一下。</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi lr"><img src="../Images/a1c4aebdce2e00428709dd38c74888d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5en3pb655xcNcDdZimxEOA.png"/></div></div></figure><p id="2523" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">据说它包含一个zip文件</p><p id="d404" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">当我们使用从图像中获得的密码时，我可以获得zip文件</p><p id="0ebb" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">让我们解压缩zip文件</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi lm"><img src="../Images/d93e53dedc9854cc1acee50d2d6505e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/format:webp/1*g_tIL3yjdVRLY1SPu4CruQ.png"/></div></div></figure><p id="960d" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">文件pa******包含一些信息，另一个文件s***包含SSH的密码，但是我们不知道用户名，我们可以检查FTP目录来获得一些信息</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi ls"><img src="../Images/de100282a6e80bc2a72df7d5dbe0f84a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*knTSLk-XEKEFV-mVeCOPzg.png"/></div></div></figure><p id="72d1" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">我们有了新用户名。现在，我们可以SSH进入系统</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi lf"><img src="../Images/859490f5fccb643b9fe14ca7099480b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pHaX8kEIYxh8jLKTDvPWNw.png"/></div></div></figure><p id="3bcc" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">现在，您可以执行“ls-la”和“cat user.txt”来获取用户标志</p><p id="2ac8" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">获得权限提升的用户标志后，让我们看看新用户拥有什么权限</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi lk"><img src="../Images/45534e564a7d1b63bfdeeef61faacb6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aec-J5fYkAiVPfdHf-P5IA.png"/></div></div></figure><p id="8980" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">看起来我们可以使用root权限运行“pkexec”。</p><p id="2a46" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">我通过在终端中键入“man pkexec”看到了pkexec的手册页，它告诉我们pkexec允许授权用户作为另一个用户执行程序，如果没有指定用户，它将作为root运行程序。</p><p id="b858" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">现在，我们将以root用户身份运行“/bin/bash”程序，以获得root访问权限。</p><figure class="jp jq jr js gt jt gh gi paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="gh gi lt"><img src="../Images/3027398fd3c1aa8a1c1264608a8bb3c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WN7Mqm4LSK2u9-TqtDEAFw.png"/></div></div></figure><p id="d3f9" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">现在，我们有了根访问权限，我们可以执行“cat root.txt”来获取根标志。</p><p id="4be9" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">我们已经成功完成了房间！</p><p id="e951" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">Instagram:- <a class="ae lu" href="https://www.instagram.com/akshaykerkar_/" rel="noopener ugc nofollow" target="_blank">阿克谢·卡卡尔</a></p></div></div>    
</body>
</html>