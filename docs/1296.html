<html>
<head>
<title>Pentesting ISP 101 | How I hacked &amp; fixed My ISP</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">测试ISP 101 |我如何入侵和修复我的ISP</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/pentesting-isp-101-how-i-hacked-fixed-my-isp-643e9201f7e9?source=collection_archive---------0-----------------------#2021-05-06">https://infosecwriteups.com/pentesting-isp-101-how-i-hacked-fixed-my-isp-643e9201f7e9?source=collection_archive---------0-----------------------#2021-05-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1c35" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这篇博客是关于我使用的ISP配置错误的问题。在Shodan上工作时，我发现<strong class="jp ir"> ISP </strong>将WiFi调制解调器/路由器留有公共IP和默认密码。这可能导致恶意攻击者对多个ISP客户进行黑客攻击。我试着通过推特联系他们。<br/>没有一个用户受到剥削或困扰。数据被屏蔽，仅用于POC和报告目的。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/fbebc6c3be6e3c5cfacf91aa5c627aef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zOTFITgmznj-zwboYzS28g.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated"><a class="ae lb" href="https://www.itrelease.com/wp-content/uploads/2010/12/ISP.jpg" rel="noopener ugc nofollow" target="_blank">信用</a></figcaption></figure><h1 id="7fce" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">描述:</h1><p id="d246" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">有一个<strong class="jp ir">路由器</strong>/调制解调器的登录<strong class="jp ir">页面</strong>将出现在192.168.1.1，然后我不知道我的路由器控制台的用户名或密码。作为一名安全工程师，我输入了admin/admin，我在路由器内部。我登录到我的路由器的管理控制台(192.168.1.1)，直接进入显示互联网连接的页面(<a class="ae lb" href="http://techterms.com/definition/pppoe" rel="noopener ugc nofollow" target="_blank"> PPPOE </a>)。在广域网状态下，它显示网关地址。网关IP地址是的IP地址，所有internet流量都通过它路由到外部网络。我开始扫描，但后来我看到公共IP分配给我的路由器/调制解调器。我复制并打开了它。我可以看到同样的路由器控制台。然后，我启动了nmap，对整个范围进行了ping扫描。我发现了多个活跃的IP。令我惊讶的是，所有的路由器都可以公开访问。然后，所有这些路由器都有一个版本，其版本与我的路由器相似，然后我通过admin/admin登录。之后，我使用shodan并输入所有分配给路由器的公共IP，令我惊讶的是，我只能找到容易受到错误配置的路由器版本，从而简化了我的攻击面，我可以看到所有设备及其密码等。很容易改变他们的DNS，使用手机密码喷雾和路由器密码，等等。</p><p id="3d32" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我试图通过Twitter联系ISP，但当我向cert-in报告该问题时，没有任何响应，问题已经解决。</p><blockquote class="mf mg mh"><p id="5f77" class="jn jo mi jp b jq jr js jt ju jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj kk ij bi translated">也有可能使用他人的凭证直接连接到服务器，并通过存储在路由器连接页面的ISP凭证获得互联网连接。</p></blockquote><h1 id="ae40" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">影响:</h1><p id="aee7" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">此漏洞的影响很大，因为任何恶意实体都可以使用公开可用的结果，并通过登录WiFi调制解调器/路由器来利用所有客户。</p><blockquote class="mf mg mh"><p id="01c0" class="jn jo mi jp b jq jr js jt ju jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj kk ij bi translated">作为分配给调制解调器的公共IP，具有登录面板的默认凭证，由于中兴路由器，通过192.168.1.1访问，具有默认的管理员/管理员密码。任何人都可以登录到调制解调器，窃取数据，毒害和改变dns，以执行基于DNS的攻击，影响通过设备连接的所有用户。</p><p id="245e" class="jn jo mi jp b jq jr js jt ju jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj kk ij bi translated"><strong class="jp ir">执行ping扫描- &gt;查找正常运行的路由器- &gt;通过管理员/管理员登录- &gt;利用受害者。</strong></p></blockquote><ol class=""><li id="7a99" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk mr ms mt mu bi translated">攻击者可以通过默认用户名密码(即admin/admin)登录，查看密码和设备，并使用Nmap将其公开。</li><li id="d06d" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">攻击者可以找到wifi调制解调器的SSID，如果在SSID或密码中使用，还可以获得用户的个人详细信息(如手机号码等)。</li><li id="33bf" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">向攻击者毒害DNS网关DNS可导致基于大型网络钓鱼的攻击，从而通过大量攻击窃取银行凭证以及社交网络凭证。</li><li id="313f" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">它会完全接管受害者的无线调制解调器。</li></ol><h1 id="6071" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">易受攻击的URL:</h1><p id="8501" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated"><a class="ae lb" href="http://192.168.1.1/start.ghtml" rel="noopener ugc nofollow" target="_blank">http://Public-IP-Address/start . ghtml</a></p><h1 id="cf66" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">复制步骤:</h1><ol class=""><li id="9d8e" class="mm mn iq jp b jq ma ju mb jy na kc nb kg nc kk mr ms mt mu bi translated">通过ifconfig和route -n检查您的本地IP和调制解调器网关。</li><li id="5862" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">通过Nmap运行<a class="ae lb" href="https://www.binarytides.com/ping-sweep-network-nmap/" rel="noopener ugc nofollow" target="_blank"> ping sweep </a>命令。</li></ol><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nd"><img src="../Images/e9fb0674a6ec7c5639bdd46637822bc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6DKwjQMIpJPsWCRrHqqFbA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">nmap ping扫描</figcaption></figure><p id="7256" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.保存IP并打开IP列表。这也可以自动化。</p><p id="92cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.打开公共IP后，会出现可访问的路由器登录页面。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ne"><img src="../Images/bb897ee5ea20a543710a0e6371110917.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ox5N7XQeVQilj6ISDyuc3Q.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">使用公共IP地址登录</figcaption></figure><p id="3270" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">5.然后尝试默认路由器凭证(admin/admin)。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nd"><img src="../Images/5130f520d5d3281e361027875df89ac0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*--OnGskxd2zJE6OWZk_Q6w.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">Wifi认证面板</figcaption></figure><p id="3e0f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">6.嘣！我们在别人的设备里。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nf"><img src="../Images/6a6a463c062d5d44fcc5087bf47b160e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J7abkw3zPmyD_7-KPboSCw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">WIFI密码</figcaption></figure><p id="fa95" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">7.检查受害者的连接设备和其他详细信息。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ng"><img src="../Images/efb6aacddb3a31e7513a8ac458ac1fc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k9yeKGAQhMukirqTZs993g.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">受害者的设备</figcaption></figure><p id="43de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">8.同样在<a class="ae lb" href="http://shodan.io" rel="noopener ugc nofollow" target="_blank"> shodan.io </a>中搜索这些IP会给你路由器的名称和型号。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nh"><img src="../Images/eea563f9afbc56db17a0f67be0c40887.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tXqLYaFph0qp66Gy4D4zpA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">Shodan搜索结果</figcaption></figure><p id="91dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">9.搜索路由器的默认用户名和密码，即admin/admin。</p><p id="583f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">10.攻击者可以转储这些数据或公开发布这些数据，还可以利用这些数据来嗅探流量，甚至尝试密码喷射攻击。</p><h1 id="b361" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">补救措施:</h1><ul class=""><li id="0d3e" class="mm mn iq jp b jq ma ju mb jy na kc nb kg nc kk ni ms mt mu bi translated">不允许网络中的ping扫描。</li><li id="bf3f" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk ni ms mt mu bi translated">更改所有WiFi调制解调器的默认凭据。</li><li id="415c" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk ni ms mt mu bi translated">基于公共IP的访问应仅限于ISP的IP，因此不允许任何其他IP通过端口80访问。</li></ul><p id="c5cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下一篇教程中，我们将看到其他攻击和通过多种工具和python脚本实现的进一步自动化。</p><blockquote class="nj"><p id="c9f2" class="nk nl iq bd nm nn no np nq nr ns kk dk translated">此问题已通过cert-in报告给ISP，也通过Twitter联系了ISP，但他们没有回应。</p></blockquote><p id="457e" class="pw-post-body-paragraph jn jo iq jp b jq nt js jt ju nu jw jx jy nv ka kb kc nw ke kf kg nx ki kj kk ij bi translated">终于过了一段时间，我收到了一封关于这个问题的邮件。<br/>无论如何，问题已经解决，这是一个好消息。</p><blockquote class="mf mg mh"><p id="4871" class="jn jo mi jp b jq jr js jt ju jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj kk ij bi translated">免责声明:所有提供的信息仅用于教育目的。本页面上与道德黑客和信息安全相关的信息无意被恶意/非法使用，作者对所提供信息的任何误用概不负责。<br/>如果您是ISP，请在问题被利用之前测试并修复它。</p></blockquote><figure class="km kn ko kp gt kq gh gi paragraph-image"><a href="https://www.buymeacoffee.com/justmorpheus"><div class="gh gi ny"><img src="../Images/4bc5de35955c00939383a18fb66b41d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/1*9vg3-OY14aZN1UpKwIxxZg.png"/></div></a></figure></div></div>    
</body>
</html>