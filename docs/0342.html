<html>
<head>
<title>Pwndbg + GEF + Peda — One for all, and all for one</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">pwn dbg+GEF+Peda——我为人人，人人为我</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/pwndbg-gef-peda-one-for-all-and-all-for-one-714d71bf36b8?source=collection_archive---------0-----------------------#2019-07-24">https://infosecwriteups.com/pwndbg-gef-peda-one-for-all-and-all-for-one-714d71bf36b8?source=collection_archive---------0-----------------------#2019-07-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5644" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">同时安装所有插件，并通过简单的命令进行切换。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/25c6592db66438780042c1178956f4fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qNjH3uJxpLcTUcFToKjkOw.jpeg"/></div></div></figure><p id="3da0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">毫无疑问，GDB是一个神奇的工具，几乎每个网络安全专业人士、实习生、爱好者和研究人员都用过它。它是程序调试的瑞士军刀，然而有一个问题。香草GDB在用户体验方面很糟糕。</p><p id="9744" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这就是开发许多插件的原因，这些插件可以使反向和调试的过程变得容易得多。也就是说，三个最受欢迎的是:</p><blockquote class="ln"><p id="298e" class="lo lp iq bd lq lr ls lt lu lv lw lm dk translated">https://github.com/pwndbg/pwndbg</p><p id="0725" class="lo lp iq bd lq lr ls lt lu lv lw lm dk translated">佩达:https://github.com/longld/peda</p><p id="d771" class="lo lp iq bd lq lr ls lt lu lv lw lm dk translated">全球环境基金:<a class="ae lx" href="https://github.com/hugsy/gef" rel="noopener ugc nofollow" target="_blank">https://github.com/hugsy/gef</a></p></blockquote><p id="116d" class="pw-post-body-paragraph kr ks iq kt b ku ly jr kw kx lz ju kz la ma lc ld le mb lg lh li mc lk ll lm ij bi translated">当然，它们都有利弊。也许是为了任务，也许是功能，甚至是界面。我们都有自己的偏好。就我个人而言，我更喜欢Pwndbg的界面，但说真的，Peda的循环模式创建和偏移搜索功能非常方便。</p><p id="4d53" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">尽管如此，我讨厌每当我想使用不同的插件时不得不手动更改或替换<code class="fe md me mf mg b">.gdbinit</code>文件。这不是时间和精力的问题，而是因为它分散了我主要任务的注意力，这是我想要避免的。</p><p id="2b8b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，这篇博文的目的是描述一种非常简单的在单一命令中切换插件的方法。</p><h1 id="9789" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">TL；DR；</h1><p id="1387" class="pw-post-body-paragraph kr ks iq kt b ku mz jr kw kx na ju kz la nb lc ld le nc lg lh li nd lk ll lm ij bi translated">我已经创建了一个bash脚本，它在一个命令中执行下面的指令，所以为了快速设置，克隆下面的库并运行<code class="fe md me mf mg b">install.sh</code>。</p><div class="ne nf gp gr ng nh"><a href="https://github.com/apogiatzis/gdb-peda-pwndbg-gef" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">apogiatzis/gdb-peda-pwndbg-gef</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">这是一个在单一命令中安装Pwndbg、GEF和Peda GDB插件的脚本。运行install.sh，然后使用一个…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">github.com</p></div></div></div></a></div><h1 id="8479" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">装置</h1><p id="e5bc" class="pw-post-body-paragraph kr ks iq kt b ku mz jr kw kx na ju kz la nb lc ld le nc lg lh li nd lk ll lm ij bi translated">最初，需要下载和安装插件。因此，请遵循以下命令:</p><p id="d0c0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> Pwndbg </strong></p><pre class="kg kh ki kj gt nq mg nr ns aw nt bi"><span id="eb17" class="nu mi iq mg b gy nv nw l nx ny">git clone <a class="ae lx" href="https://github.com/pwndbg/pwndbg" rel="noopener ugc nofollow" target="_blank">https://github.com/pwndbg/pwndbg</a><br/>cd pwndbg<br/>./setup.sh<br/>cd ..<br/>mv pwndbg ~/pwndbg-src<br/>echo "source ~/pwndbg-src/gdbinit.py" &gt; ~/.gdbinit_pwndbg</span></pre><h2 id="c42b" class="nu mi iq bd mj nz oa dn mn ob oc dp mr la od oe mt le of og mv li oh oi mx oj bi translated">佩达</h2><pre class="kg kh ki kj gt nq mg nr ns aw nt bi"><span id="5c27" class="nu mi iq mg b gy nv nw l nx ny">git clone https://github.com/longld/peda.git ~/peda</span></pre><p id="0c9c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">全球环境基金</strong></p><pre class="kg kh ki kj gt nq mg nr ns aw nt bi"><span id="bc43" class="nu mi iq mg b gy nv nw l nx ny">wget -q -O ~/.gdbinit-gef.py https://github.com/hugsy/gef/raw/master/gef.py<br/>echo source ~/.gdbinit-gef.py &gt;&gt; ~/.gdbinit</span></pre><h1 id="5a1d" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">集所有功能于一身</h1><p id="5ec2" class="pw-post-body-paragraph kr ks iq kt b ku mz jr kw kx na ju kz la nb lc ld le nc lg lh li nd lk ll lm ij bi translated">本质上，这些插件修改了<code class="fe md me mf mg b">.gdbinit</code>文件，并随gdb一起启动。现在，这里有一个技巧，如果我们有一个包含所有插件配置的<code class="fe md me mf mg b">.gdbinit</code>文件，这样它们就可以基于gdb命令被有条件地激活，会怎么样？这正是我们将要做的。</p><p id="340c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">打开您的<code class="fe md me mf mg b">.gdbinit</code>文件，删除任何内容并粘贴以下配置:</p><pre class="kg kh ki kj gt nq mg nr ns aw nt bi"><span id="0261" class="nu mi iq mg b gy nv nw l nx ny">define init-peda<br/>source ~/peda/peda.py<br/>end<br/>document init-peda<br/>Initializes the PEDA (Python Exploit Development Assistant for GDB) framework<br/>end<br/><br/>define init-pwndbg<br/>source ~/.gdbinit_pwndbg<br/>end<br/>document init-pwndbg<br/>Initializes PwnDBG<br/>end<br/><br/>define init-gef<br/>source ~/.gdbinit-gef.py<br/>end<br/>document init-gef<br/>Initializes GEF (GDB Enhanced Features)<br/>end</span></pre><p id="eda1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，在您的<code class="fe md me mf mg b">/usr/bin</code>文件夹中创建以下3个文件:</p><p id="c6b3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先创建<code class="fe md me mf mg b">/usr/bin/gdb-peda</code>并粘贴以下内容:</p><pre class="kg kh ki kj gt nq mg nr ns aw nt bi"><span id="2dea" class="nu mi iq mg b gy nv nw l nx ny">#!/bin/sh<br/>exec gdb -q -ex init-peda "$@"</span></pre><p id="aba5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后<code class="fe md me mf mg b">/usr/bin/gdb-pwndbg</code></p><pre class="kg kh ki kj gt nq mg nr ns aw nt bi"><span id="ddfe" class="nu mi iq mg b gy nv nw l nx ny">#!/bin/sh<br/>exec gdb -q -ex init-pwndbg "$@"</span></pre><p id="acbd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，<code class="fe md me mf mg b">/usr/bin/gdb-gef</code></p><pre class="kg kh ki kj gt nq mg nr ns aw nt bi"><span id="eebc" class="nu mi iq mg b gy nv nw l nx ny">#!/bin/sh<br/>exec gdb -q -ex init-gef "$@"</span></pre><p id="00ca" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后一步是为前面创建的所有三个文件授予可执行权限。为此，运行:</p><pre class="kg kh ki kj gt nq mg nr ns aw nt bi"><span id="82a6" class="nu mi iq mg b gy nv nw l nx ny">chmod +x /usr/bin/gdb-*</span></pre><p id="66d1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">仅此而已。你看到了吗？简单。</p><p id="940f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，您可以通过运行以下三个命令之一来测试它:</p><pre class="kg kh ki kj gt nq mg nr ns aw nt bi"><span id="1cd0" class="nu mi iq mg b gy nv nw l nx ny">gdb-peda<br/>gdb-pwndbg<br/>gdb-gef</span></pre><p id="6046" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">希望这对人们有所帮助。下次见。</p></div><div class="ab cl ok ol hu om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ij ik il im in"><p id="1777" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="or">关注</em> <a class="ae lx" href="https://medium.com/bugbountywriteup" rel="noopener"> <em class="or"> Infosec报道</em> </a> <em class="or">获取更多此类精彩报道。</em></p><div class="ne nf gp gr ng nh"><a href="https://medium.com/bugbountywriteup" rel="noopener follow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">信息安全报道</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">收集了世界上最好的黑客的文章，主题从bug奖金和CTF到vulnhub…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">medium.com</p></div></div><div class="os l"><div class="ot l ou ov ow os ox kp nh"/></div></div></a></div></div></div>    
</body>
</html>