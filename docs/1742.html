<html>
<head>
<title>TryHackme LFI Writeup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TryHackme LFI报道</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/tryhackme-lfi-writeup-a3fff2fb5009?source=collection_archive---------1-----------------------#2021-12-27">https://infosecwriteups.com/tryhackme-lfi-writeup-a3fff2fb5009?source=collection_archive---------1-----------------------#2021-12-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c257" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何发现和开发LFI</h2></div><p id="06fc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">欢迎回到酷炫的黑客博客，我将向你展示一个有趣的话题本地文件包含Tryhackme演练。不浪费时间，让我们进入主题。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/27eb8c8b1a049b54b1ef28a780613843.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wTxj_b5XveVEicfi"/></div></div></figure><p id="c76f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">部署目标机器后，我看到了目标网页。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/ba4b962e6a533cc5231187ba4ade4c9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*zI_YCdZai0WhQ4wqPIyxBg.png"/></div></figure><p id="ee31" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我得到了一个端点<strong class="kh ir">？由此，我得出结论，这可能是一个易受攻击的参数。</strong></p><p id="d689" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">？文件=../../../../etc/passwd </strong>用于查看密码文件<strong class="kh ir"> </strong>，如果它对攻击者可见，会导致密码文件的敏感泄露。</p><p id="3af1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我输入了<strong class="kh ir"> passwd </strong>，它给出了结果，然后它容易受到本地文件包含的攻击。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/47a7020836b03d81abe3cb62afc5703a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*br1wceBESyzMchHc7PnSkw.png"/></div></figure><p id="9f04" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我开始知道这里泄露了用户名列表。falcon是名字泄露出去的用户之一。</p><p id="1f72" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了找到用户的密码，我们需要寻找<strong class="kh ir"> /etc/shadow </strong>文件。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lp"><img src="../Images/a68b2a93811edcf6f6d6bdf608da26e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*plvxJ9184HO0JvICAGz6Kw.png"/></div></div></figure><p id="3029" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后每个哈希格式的密码文件我们都要解密才能得到用户密码。对于猎鹰，我们哈希</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lq"><img src="../Images/c1499be516699e36daa1b5d79fa6b54a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H5x5do6rdrUm-zFHEwhWwQ.png"/></div></div></figure><p id="2b7f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">哈希格式以$6$……开头。)这种格式。在hashcat模式的帮助下，我们知道它在shacrypt中。</p><p id="054e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要解码这个Shacrypt，我们使用以下命令:</p><blockquote class="lr ls lt"><p id="1801" class="kf kg lu kh b ki kj jr kk kl km ju kn lv kp kq kr lw kt ku kv lx kx ky kz la ij bi translated"><strong class="kh ir">hashcat-m 1800 hash . txt rock you . txt</strong></p></blockquote><p id="f132" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，您将获得这种散列类型的密码。</p><p id="2683" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，是时候使用登录到falcon id</p><p id="3944" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">终于找到密码的ssh falcon@target_ip。</p><p id="bf14" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后就可以看到falcon账号里的user.txt文件了。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/7772e24e18e4bbdfb4e677f555e12e39.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/1*kkYIYnS4RBvrEyO_ANa5jg.png"/></div></figure><p id="a9c0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下一个任务是找到root.txt文件，为此我们必须提升root权限。</p><p id="ab32" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我在终端中键入<strong class="kh ir">“sudo-l”</strong>，它给出了<strong class="kh ir"> journalctl作为提示。</strong></p><p id="e141" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">journalctl —可用于查询systemd(1)的内容。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lz"><img src="../Images/f734c090e2baad5c481b756f894421fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dSOnYC7SdIyMGqxD6Nt2Gg.png"/></div></div></figure><p id="26bc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在GTFO·宾斯的帮助下，我们可以升级为root。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi ma"><img src="../Images/fbafc3b395afb7cbfed0bd9b096e3012.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zdmNg3eb0EZ7xd5yiGrBJw.png"/></div></div></figure><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mb"><img src="../Images/11a37384a43c45d13bef362760bc08e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HbcYZckuvFOt3ixi_3xo5g.png"/></div></div></figure><p id="f323" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这就是我们如何以root身份进入目标机器的方法。最后，我们拿到了根旗。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/5916e99f38ea7f27ccc0973672e5a256.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*LyeuDUmsn0TQyIxofw8__Q.png"/></div></figure></div></div>    
</body>
</html>