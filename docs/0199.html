<html>
<head>
<title>Security Headers for ASP.Net and .Net CORE</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ASP.Net和的安全标头。网络核心</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/security-headers-1c770105940b?source=collection_archive---------0-----------------------#2018-11-15">https://infosecwriteups.com/security-headers-1c770105940b?source=collection_archive---------0-----------------------#2018-11-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="e2a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于那些不关注我自己或<a class="ae kl" href="https://twitter.com/bufrasch" rel="noopener ugc nofollow" target="_blank">弗兰齐斯卡·布勒</a>的人，我们有一个名为<a class="ae kl" href="https://devslop.co" rel="noopener ugc nofollow" target="_blank"> OWASP DevSlop </a>的开源项目，在这个项目中，我们通过编写易受攻击的应用程序、创建管道、发布概念证明以及记录我们在<a class="ae kl" href="https://aka.ms/DevSlopShow" rel="noopener ugc nofollow" target="_blank"> YouTube频道</a>和我们的博客上所了解的内容来探索DevSecOps。在本文中，我们将探索如何向我们的概念验证网站<a class="ae kl" href="https://devslop.co" rel="noopener ugc nofollow" target="_blank">DevSlop.co</a>添加安全头。这篇博客文章与Franziska的文章<a class="ae kl" href="https://medium.com/@franbuehler/owasp-devslops-journey-to-tls-and-security-headers-aa892f1ac851" rel="noopener"> OWASP DevSlop的TLS和安全头之旅</a>密切相关。如果你喜欢这本，也看看她的。:)</p><p id="bd6a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://twitter.com/bufrasch" rel="noopener ugc nofollow" target="_blank">我和Franziska Bühler </a>在<a class="ae kl" href="https://www.youtube.com/watch?v=-il28nDFgBg&amp;t=3s" rel="noopener ugc nofollow" target="_blank">第2集</a>、<a class="ae kl" href="https://www.youtube.com/watch?v=6-mqK3jr6Jg&amp;t=3s&amp;list=PLI9RITMnVbyg-OEn2vbsDnzWi9jGd6_5u&amp;index=5" rel="noopener ugc nofollow" target="_blank"> 2.1 </a>和<a class="ae kl" href="https://www.youtube.com/watch?v=uJeUodTRCEs" rel="noopener ugc nofollow" target="_blank"> 2.2 </a>的<a class="ae kl" href="http://aka.ms/DevSlopshow" rel="noopener ugc nofollow" target="_blank"> OWASP DevSlop Show </a>期间安装了几个安全头。不幸的是我们发现。Net Core没有web.config，所以下一次我们发布的时候，它删除了我们添加的漂亮的标题。虽然这不是个好消息，但这是另一个学习的机会，也给了我一个很好的借口，让我最终写下了我一直承诺的<strong class="jp ir"> Security Headers </strong>博文。开始了。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/6d2e5ee80495e30b705fdaec0115994c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3AgIok349W9tvYMrnSdPww.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">我们的web.config看起来太…空的。</figcaption></figure><p id="d77a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">刚才，<a class="ae kl" href="https://www.youtube.com/watch?v=uJeUodTRCEs" rel="noopener ugc nofollow" target="_blank">我加回了头文件</a>，但是我把它们添加到了我的。<a class="ae kl" href="https://docs.microsoft.com/dotnet/core/?WT.mc_id=SheHacksPurple-Blog-tajanca" rel="noopener ugc nofollow" target="_blank">网芯</a> app，你可以在这里观看<a class="ae kl" href="https://www.youtube.com/watch?v=uJeUodTRCEs" rel="noopener ugc nofollow" target="_blank">。特别感谢</a><a class="ae kl" href="https://damienbod.com/2018/02/08/adding-http-headers-to-improve-security-in-an-asp-net-mvc-core-application/" rel="noopener ugc nofollow" target="_blank">达米恩·博德</a>的帮助。<a class="ae kl" href="https://docs.microsoft.com/dotnet/core/?WT.mc_id=SheHacksPurple-Blog-tajanca" rel="noopener ugc nofollow" target="_blank">网芯</a>麻花。</p><p id="0c05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你想深入了解我们在节目中做了什么，以及每个安全标题意味着什么，你应该阅读Franziska的博客文章。她解释了每一个步骤，如果你第一次尝试添加安全头到你的web . config(<a class="ae kl" href="https://docs.microsoft.com/dotnet/standard/?WT.mc_id=SheHacksPurple-Blog-tajanca" rel="noopener ugc nofollow" target="_blank">ASP.Net</a>，而不是<a class="ae kl" href="https://docs.microsoft.com/dotnet/core/?WT.mc_id=SheHacksPurple-Blog-tajanca" rel="noopener ugc nofollow" target="_blank">)。网芯</a>)，你一定要看。</p><p id="5591" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">web.config中ASP.Net的新代码如下所示:</p><p id="6fa8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">&lt;http protocol&gt;<br/>&lt;custom headers&gt;<br/>&lt;add name = " X-XSS-保护" value = " 1；mode = block "/&gt;<br/>&lt;add name = " Content-Security-Policy " value = " default-src ' self ' "/&gt;<br/>&lt;add name = " X-frame-Options " value = " same origin "/&gt;<br/>&lt;add name = " X-Content-Type-Options " value = " nosniff "/&gt;<br/>&lt;add name = " Referrer-Policy " value = " strict-origin-when-cross-origin "/【添加名称—结束安全标题→</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lc"><img src="../Images/b3687cd2593df66908baef47fafdc79b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VdEAyZ6lQXeHX4Ur0k65hw.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">我们新改进的网络。配置！</figcaption></figure><p id="3c46" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还有我的startup.cs的新代码(<a class="ae kl" href="https://docs.microsoft.com/dotnet/core/?WT.mc_id=SheHacksPurple-Blog-tajanca" rel="noopener ugc nofollow" target="_blank">)。网芯</a>)，长这样(谢谢<a class="ae kl" href="https://damienbod.com/2018/02/08/adding-http-headers-to-improve-security-in-an-asp-net-mvc-core-application/" rel="noopener ugc nofollow" target="_blank">达米恩Bod </a>):</p><p id="1837" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">//安全头让我开心<br/> app。使用Hsts(hsts = &gt; hsts。MaxAge(365)。include subdomain())；<br/> app。UseXContentTypeOptions()；<br/> app。UseReferrerPolicy(opts =&gt;opts。nore Ferrer())；<br/> app。UseXXssProtection(options = &gt;选项。EnabledWithBlockMode())；<br/> app。UseXfo(options = &gt;选项。deny())；</p><p id="bc5a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">app。UseCsp(opts =&gt; opts <br/>。BlockAllMixedContent() <br/>。style sources(s =&gt;s . Self())<br/>。style sources(s =&gt;s . unsafeline())<br/>。font sources(s =&gt;s . Self())<br/>。FormActions(s =&gt;s . Self())<br/>。frame ancestors(s =&gt;s . Self())<br/>。image sources(s =&gt;s . Self())<br/>。script sources(s =&gt;s . Self())<br/>)；<br/>//结束安全头</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ld"><img src="../Images/ab38b86af27493628627e00fa2372ce3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jq5xBCgnzF1Tq5X1RututA.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">我们漂亮的安全标题！</figcaption></figure><p id="507f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在未来的剧集中，我们还将添加:</p><ul class=""><li id="1f48" class="le lf iq jp b jq jr ju jv jy lg kc lh kg li kk lj lk ll lm bi translated">我们的<a class="ae kl" href="https://blog.dareboost.com/en/2016/12/secure-cookies-secure-httponly-flags/" rel="noopener ugc nofollow" target="_blank"> cookies </a>的安全设置</li><li id="3fb3" class="le lf iq jp b jq ln ju lo jy lp kc lq kg lr kk lj lk ll lm bi translated">x-允许的跨域策略:无</li><li id="c299" class="le lf iq jp b jq ln ju lo jy lp kc lq kg lr kk lj lk ll lm bi translated">Expect-CT:(我们的提供商目前不支持)</li><li id="a93f" class="le lf iq jp b jq ln ju lo jy lp kc lq kg lr kk lj lk ll lm bi translated">功能策略:摄像机“无”；麦克风“无”；说话人“自己”；振动“无”；地理位置“无”；加速度计“无”；环境光传感器“无”；自动播放“无”；加密媒体“无”；陀螺仪‘无’；磁力计‘无’；midi“无”；付款“无”；画中画“无”；usb“无”；VR‘无’；全屏*；</li></ul><p id="7842" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有关所有这些安全头的更多信息，我强烈建议您阅读<a class="ae kl" href="https://www.owasp.org/index.php/OWASP_Secure_Headers_Project#xpcdp" rel="noopener ugc nofollow" target="_blank"> OWASP安全头指南</a>。</p><p id="85d4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在在所有重要的地方都取得了好成绩，https://securityheaders.com、https://www.ssllabs.com、T21、http://hardenize.com，但是我们希望能进一步提高我们的分数。</p><p id="b15f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">更多信息，请观看我们的节目！美国东部时间每周日下午1-2点，在<a class="ae kl" href="http://aka.ms/devslop-mixer" rel="noopener ugc nofollow" target="_blank">混音器</a>和<a class="ae kl" href="http://aka.ms/devsloptwitch" rel="noopener ugc nofollow" target="_blank"> Twitch </a>上，录像稍后可在我们的<a class="ae kl" href="http://aka.ms/DevSlopShow" rel="noopener ugc nofollow" target="_blank"> YouTube </a>频道上获得。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ls"><img src="../Images/32e509fee4765148c9deebfeb062cdb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nnKTG6hZYkvJDor7Nbh84w.png"/></div></div></figure><p id="1fb6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请使用所有适用于您的安全标题。</p><h1 id="8d6d" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated"><strong class="ak">像这样的内容还有更多，查看我的书，</strong> <a class="ae kl" href="https://aliceandboblearn.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">爱丽丝和鲍勃学习应用安全</strong> </a> <strong class="ak">和我的在线培训学院，</strong> <a class="ae kl" href="https://academy.wehackpurple.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">我们黑紫色</strong> </a> <strong class="ak">！</strong></h1><h2 id="ce69" class="mr lu iq bd lv ms mt dn lz mu mv dp md jy mw mx mh kc my mz ml kg na nb mp nc bi translated">我有一个邮件列表，请订阅，这是免费的！</h2></div></div>    
</body>
</html>