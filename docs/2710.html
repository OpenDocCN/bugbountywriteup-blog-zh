<html>
<head>
<title>Using Paramiko to Create a Python FTP Client</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Paramiko创建Python FTP客户端</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/using-paramiko-to-create-a-python-ftp-client-5a1c74f79d84?source=collection_archive---------4-----------------------#2022-12-27">https://infosecwriteups.com/using-paramiko-to-create-a-python-ftp-client-5a1c74f79d84?source=collection_archive---------4-----------------------#2022-12-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/f03e399f123f78a74a023b3d70d591dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*M0i6bAGkaBt67kelGpYlxw.jpeg"/></div></figure><h2 id="f3b2" class="ju jv iq bd jw jx jy dn jz ka kb dp kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">介绍</h2><p id="e1df" class="pw-post-body-paragraph kq kr iq ks b kt ku kv kw kx ky kz la kd lb lc ld kh le lf lg kl lh li lj lk ij bi translated">FTP或文件传输协议是一种广泛使用的网络协议，用于在计算机之间传输文件。它已经存在了几十年，今天仍然被广泛使用，尽管出现了像SFTP和HTTPS这样的新协议。FTP客户端用于连接到FTP服务器并在它们之间传输文件。</p><p id="d8f2" class="pw-post-body-paragraph kq kr iq ks b kt ll kv kw kx lm kz la kd ln lc ld kh lo lf lg kl lp li lj lk ij bi translated">Python是一种流行的编程语言，适用于各种应用，包括web开发、数据分析和自动化。它有一套丰富的库和框架，可以轻松快速地构建强大的应用程序。其中一个库是paramiko，它是SSH协议的Python实现。</p><p id="6dbe" class="pw-post-body-paragraph kq kr iq ks b kt ll kv kw kx lm kz la kd ln lc ld kh lo lf lg kl lp li lj lk ij bi translated">Paramiko是一个强大的库，允许Python开发人员连接到远程服务器并执行各种任务，包括文件传输。在本文中，我们将探索如何使用paramiko创建一个Python FTP客户端。我们将研究使用paramiko连接到FTP服务器、传输文件和执行各种其他任务的不同方法。</p><h2 id="6f1d" class="ju jv iq bd jw jx jy dn jz ka kb dp kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">Paramiko入门</h2><p id="e13e" class="pw-post-body-paragraph kq kr iq ks b kt ku kv kw kx ky kz la kd lb lc ld kh le lf lg kl lh li lj lk ij bi translated">在我们开始使用paramiko创建FTP客户端之前，我们需要安装它。我们可以使用Python包管理器pip来做到这一点。打开终端，输入以下命令:</p><pre class="lq lr ls lt gt lu lv lw bn lx ly bi"><span id="cb19" class="lz jv iq lv b be ma mb l mc md">pip install paramiko</span></pre><p id="e633" class="pw-post-body-paragraph kq kr iq ks b kt ll kv kw kx lm kz la kd ln lc ld kh lo lf lg kl lp li lj lk ij bi translated">这将在您的系统上安装paramiko库。一旦安装完成，我们就可以开始在Python脚本中使用它了。</p><p id="5686" class="pw-post-body-paragraph kq kr iq ks b kt ll kv kw kx lm kz la kd ln lc ld kh lo lf lg kl lp li lj lk ij bi translated">连接到FTP服务器:</p><p id="0972" class="pw-post-body-paragraph kq kr iq ks b kt ll kv kw kx lm kz la kd ln lc ld kh lo lf lg kl lp li lj lk ij bi translated">使用paramiko创建FTP客户端的第一步是连接到FTP服务器。我们可以使用由paramiko库提供的SSHClient类来实现这一点。SSHClient类允许我们使用SSH协议连接到远程服务器。</p><p id="3493" class="pw-post-body-paragraph kq kr iq ks b kt ll kv kw kx lm kz la kd ln lc ld kh lo lf lg kl lp li lj lk ij bi translated">要使用paramiko连接到FTP服务器，我们需要导入SSHClient类并创建它的一个实例。然后，我们可以使用connect()方法建立到服务器的连接。connect()方法接受几个参数，包括服务器的主机名、端口号以及用于身份验证的用户名和密码。</p><p id="2ae1" class="pw-post-body-paragraph kq kr iq ks b kt ll kv kw kx lm kz la kd ln lc ld kh lo lf lg kl lp li lj lk ij bi translated">以下是如何使用paramiko连接到FTP服务器的示例:</p><pre class="lq lr ls lt gt lu lv lw bn lx ly bi"><span id="af38" class="lz jv iq lv b be ma mb l mc md">import paramiko<br/>#Create an SSHClient object<br/>client = paramiko.SSHClient()<br/>#Connect to the server<br/>client.connect(hostname=’ftp.example.com’, port=22, username=’user’, password=’pass’)<br/></span></pre><p id="62fc" class="pw-post-body-paragraph kq kr iq ks b kt ll kv kw kx lm kz la kd ln lc ld kh lo lf lg kl lp li lj lk ij bi translated">这段代码创建一个SSHClient对象，并使用指定的主机名、端口、用户名和密码连接到FTP服务器。FTP服务器的默认端口号是21，但有些服务器使用不同的端口号。确保在连接到服务器时使用正确的端口号。</p><h2 id="aa64" class="ju jv iq bd jw jx jy dn jz ka kb dp kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">传输文件</h2><p id="750b" class="pw-post-body-paragraph kq kr iq ks b kt ku kv kw kx ky kz la kd lb lc ld kh le lf lg kl lh li lj lk ij bi translated">一旦我们连接到FTP服务器，我们就可以使用paramiko在服务器和我们的本地机器之间传输文件。Paramiko提供了几种传输文件的方法，包括</p><pre class="lq lr ls lt gt lu lv lw bn lx ly bi"><span id="559a" class="lz jv iq lv b be ma mb l mc md">sftp_client.put()<br/>sftp_client.get()<br/></span></pre><h2 id="5289" class="ju jv iq bd jw jx jy dn jz ka kb dp kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">将文件上传到服务器</h2><pre class="lq lr ls lt gt lu lv lw bn lx ly bi"><span id="7275" class="lz jv iq lv b be ma mb l mc md">sftp_client.put('/path/to/local/file.txt', '/path/on/server/file.txt')<br/></span></pre><h2 id="20f3" class="ju jv iq bd jw jx jy dn jz ka kb dp kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">从服务器下载文件</h2><pre class="lq lr ls lt gt lu lv lw bn lx ly bi"><span id="df21" class="lz jv iq lv b be ma mb l mc md">sftp_client.get('/path/on/server/file.txt', '/path/to/local/file.txt')<br/><br/></span></pre><h2 id="1f79" class="ju jv iq bd jw jx jy dn jz ka kb dp kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">监听文件</h2><pre class="lq lr ls lt gt lu lv lw bn lx ly bi"><span id="6083" class="lz jv iq lv b be ma mb l mc md">sftp_client.listdir()<br/></span></pre><p id="d697" class="pw-post-body-paragraph kq kr iq ks b kt ll kv kw kx lm kz la kd ln lc ld kh lo lf lg kl lp li lj lk ij bi translated">使用这种方法，我们可以列出服务器目录中的文件。该方法返回指定目录中的文件名列表。</p><p id="7b43" class="pw-post-body-paragraph kq kr iq ks b kt ll kv kw kx lm kz la kd ln lc ld kh lo lf lg kl lp li lj lk ij bi translated">以下是如何使用sftp_client.listdir()列出服务器上根目录中的文件的示例:</p><p id="c842" class="pw-post-body-paragraph kq kr iq ks b kt ll kv kw kx lm kz la kd ln lc ld kh lo lf lg kl lp li lj lk ij bi translated">列出服务器根目录中的文件</p><pre class="lq lr ls lt gt lu lv lw bn lx ly bi"><span id="1091" class="lz jv iq lv b be ma mb l mc md">files = sftp_client.listdir('/')<br/>print(files)<br/></span></pre><p id="b620" class="pw-post-body-paragraph kq kr iq ks b kt ll kv kw kx lm kz la kd ln lc ld kh lo lf lg kl lp li lj lk ij bi translated">这将打印服务器根目录中的文件名列表。我们可以使用这个方法来浏览服务器上的文件结构并执行各种任务。</p><h2 id="8649" class="ju jv iq bd jw jx jy dn jz ka kb dp kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">执行FTP命令</h2><p id="e635" class="pw-post-body-paragraph kq kr iq ks b kt ku kv kw kx ky kz la kd lb lc ld kh le lf lg kl lh li lj lk ij bi translated">除了传输文件，我们还可以使用paramiko向服务器发送FTP命令。paramiko库提供了FTPClient类，它允许我们使用SSH协议向服务器发送FTP命令。</p><p id="cbaf" class="pw-post-body-paragraph kq kr iq ks b kt ll kv kw kx lm kz la kd ln lc ld kh lo lf lg kl lp li lj lk ij bi translated">要使用FTPClient类，我们需要创建它的一个实例，并向它传递我们之前创建的SSHClient对象。然后，我们可以使用FTPClient对象向服务器发送FTP命令。</p><p id="8162" class="pw-post-body-paragraph kq kr iq ks b kt ll kv kw kx lm kz la kd ln lc ld kh lo lf lg kl lp li lj lk ij bi translated">以下是如何使用FTPClient类向服务器发送FTP命令的示例:</p><pre class="lq lr ls lt gt lu lv lw bn lx ly bi"><span id="9b7d" class="lz jv iq lv b be ma mb l mc md"># Create an FTPClient object<br/>ftp_client = paramiko.FTPClient(client)<br/># Send an FTP command to the server<br/>response = ftp_client.sendcmd('PWD')<br/>print(response)<br/><br/></span></pre><p id="b865" class="pw-post-body-paragraph kq kr iq ks b kt ll kv kw kx lm kz la kd ln lc ld kh lo lf lg kl lp li lj lk ij bi translated">这段代码创建一个FTPClient对象，并将PWD(打印工作目录)命令发送到服务器。服务器将以服务器上的当前工作目录作为响应，该目录将被打印到屏幕上。</p><p id="7e12" class="pw-post-body-paragraph kq kr iq ks b kt ll kv kw kx lm kz la kd ln lc ld kh lo lf lg kl lp li lj lk ij bi translated">我们可以使用FTPClient对象向服务器发送任何FTP命令。一些常见的命令包括CD(更改目录)、LS(列出目录内容)和MKDIR(创建目录)。</p><h2 id="d9b3" class="ju jv iq bd jw jx jy dn jz ka kb dp kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">结论</h2><p id="de74" class="pw-post-body-paragraph kq kr iq ks b kt ku kv kw kx ky kz la kd lb lc ld kh le lf lg kl lh li lj lk ij bi translated">在本文中，我们探讨了如何使用paramiko创建Python FTP客户端。我们研究了使用paramiko连接到FTP服务器、传输文件和执行各种其他任务的不同方法。</p><p id="8039" class="pw-post-body-paragraph kq kr iq ks b kt ll kv kw kx lm kz la kd ln lc ld kh lo lf lg kl lp li lj lk ij bi translated">Paramiko是一个强大的库，允许Python开发人员使用SSH协议连接到远程服务器并执行各种任务。通过使用paramiko，我们可以轻松地创建一个Python FTP客户端，它可以连接到FTP服务器、传输文件和执行各种其他任务。</p><p id="34ee" class="pw-post-body-paragraph kq kr iq ks b kt ll kv kw kx lm kz la kd ln lc ld kh lo lf lg kl lp li lj lk ij bi translated">总的来说，对于任何希望在远程服务器上自动化任务或使用Python执行文件传输的人来说，paramiko都是一个有用的工具。无论您是web开发人员、数据分析师还是自动化工程师，paramiko都可以帮助您更高效地完成任务。</p></div></div>    
</body>
</html>