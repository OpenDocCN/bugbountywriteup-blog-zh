<html>
<head>
<title>Killing Sudo, Getting Root</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">杀死须藤，得到根</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/killing-sudo-getting-root-5c476381fddd?source=collection_archive---------0-----------------------#2020-03-25">https://infosecwriteups.com/killing-sudo-getting-root-5c476381fddd?source=collection_archive---------0-----------------------#2020-03-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f748" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Sudo黑仔获得Root访问权限</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/0d2b21a92c9e6d5a2aa102ad84c874f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/1*YM_42XzBNpVvLFABGT8HAw.jpeg"/></div></figure><p id="832c" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">如果你是黑客、开发者或者系统管理员，你很可能用过Sudo。</p><p id="2fb1" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">Sudo代表“超级用户do ”,是Unix类系统中的一个程序。如果用户提供root密码，它允许用户以超级用户的安全权限执行程序。(如果用户拥有超级用户权限，则为该用户的密码！)</p><p id="d202" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">由于Sudo的强大功能，程序中的任何弱点或错误配置都可能是灾难性的。恶意用户可以将其权限提升到root用户，从而完全控制服务器。今天，我们来谈谈一个旨在利用Sudo程序弱点的工具。</p><h1 id="11a6" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">介绍Sudo黑仔</h1><p id="0201" class="pw-post-body-paragraph kq kr it ks b kt me ju kv kw mf jx ky kz mg lb lc ld mh lf lg lh mi lj lk ll im bi translated">Sudo黑仔是一个工具，它可以识别和利用Sudo程序中的错误配置和漏洞，帮助您将权限提升到Root用户。</p><p id="2ec8" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">Sudo killer将首先在系统上执行检查，检查错误配置、危险的二进制文件、与CVE相关的易受攻击的Sudo版本、危险的环境变量、带有脚本的可写目录、可能被替换的二进制文件等等。然后，它将为您提供一个命令或漏洞列表，您可以使用这些命令或漏洞来生成根shell。</p><p id="c008" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">Sudo黑仔shell脚本可以在此下载:</p><div class="mj mk gp gr ml mm"><a href="https://github.com/TH3xACE/SUDO_KILLER" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd iu gy z fp mr fr fs ms fu fw is bi translated">th3 xace/SUDO _杀手</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">sudo剥削#滥用Sudo #利用Sudo #Linux权限提升Linux权限提升通过SUDO…</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">github.com</p></div></div><div class="mv l"><div class="mw l mx my mz mv na ko mm"/></div></div></a></div><h1 id="aab0" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">使用须藤黑仔</h1><p id="73f3" class="pw-post-body-paragraph kq kr it ks b kt me ju kv kw mf jx ky kz mg lb lc ld mh lf lg lh mi lj lk ll im bi translated">将须藤黑仔脚本上传或下载到目标机器后，不需要额外的设置。是时候开始检测一些漏洞了！</p><h2 id="971a" class="nb ln it bd lo nc nd dn ls ne nf dp lw kz ng nh ly ld ni nj ma lh nk nl mc nm bi translated">扫描服务器</h2><p id="33a7" class="pw-post-body-paragraph kq kr it ks b kt me ju kv kw mf jx ky kz mg lb lc ld mh lf lg lh mi lj lk ll im bi translated">您可以通过运行以下命令来扫描机器:</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="5161" class="nb ln it no b gy ns nt l nu nv">./sudo_killer.sh -c -e -r report.txt -p /tmp</span></pre><p id="da06" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">看起来很困惑？别担心，下面是选项含义的分类:</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="729e" class="nb ln it no b gy ns nt l nu nv">-c : include CVE checks for that sudo version</span><span id="d6bd" class="nb ln it no b gy nw nt l nu nv">-i : import from extract.sh (used for offline mode)</span><span id="f395" class="nb ln it no b gy nw nt l nu nv">-e : export /etc/sudoers</span><span id="e9bb" class="nb ln it no b gy nw nt l nu nv">-r : generated report name </span><span id="0a66" class="nb ln it no b gy nw nt l nu nv">-p : path to save exports and generated report</span><span id="923a" class="nb ln it no b gy nw nt l nu nv">-s : supply user password for sudo checks </span><span id="9fcf" class="nb ln it no b gy nw nt l nu nv">-h : help</span></pre><p id="80a6" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">有时，您还应该通过运行以下命令来更新苏多黑仔的CVE数据库:</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="56c6" class="nb ln it no b gy ns nt l nu nv">./cve_update.sh</span></pre><p id="55e7" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">请注意，运行Sudo黑仔脚本本身不会获得根shell。它只是扫描系统中可能存在的弱点，并为您指出下一步。</p><h2 id="5091" class="nb ln it bd lo nc nd dn ls ne nf dp lw kz ng nh ly ld ni nj ma lh nk nl mc nm bi translated">CVE利用权限升级</h2><p id="7e53" class="pw-post-body-paragraph kq kr it ks b kt me ju kv kw mf jx ky kz mg lb lc ld mh lf lg lh mi lj lk ll im bi translated">那么，我们如何着手获得须藤黑仔的根壳呢？</p><p id="4015" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">一种方法是扫描机器上的特权提升CVE并利用CVE。要使用Sudo黑仔扫描CVE，您可以运行:</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="d68f" class="nb ln it no b gy ns nt l nu nv">./sudo_killer.sh -c</span></pre><p id="0d4b" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这将输出一个报告，其中包含一些有价值的信息，包括机器上当前使用的Sudo版本，以及与该Sudo版本相关的CVEs。</p><p id="42c2" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在报告中，须藤黑仔将链接到有关CVE的信息。它还会链接到存储在。/利用目录。运行该脚本将利用该漏洞，并为您提供根外壳。</p><h2 id="0ae7" class="nb ln it bd lo nc nd dn ls ne nf dp lw kz ng nh ly ld ni nj ma lh nk nl mc nm bi translated">特权提升的其他方法</h2><p id="595d" class="pw-post-body-paragraph kq kr it ks b kt me ju kv kw mf jx ky kz mg lb lc ld mh lf lg lh mi lj lk ll im bi translated">还有其他的东西，须藤黑仔可以检查。Sudo黑仔还将扫描易受攻击的环境变量、危险的二进制文件、可写脚本等等。扫描后，须藤黑仔将为其执行的每项检查生成一份报告。</p><p id="3001" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">即使黑仔的Sudo没有包含自动利用该漏洞的脚本，它通常也会在报告中提供说明，或者指向一个单独的文本文件，教您如何利用该漏洞。</p><p id="c70d" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">对于一些苏多黑仔演示和例子，观看视频教程在这里:</p><p id="77e4" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><a class="ae nx" href="https://www.youtube.com/watch?v=Q8iO9mYrfv8&amp;list=PLQPKPAuCA40FMpMKWZLxQydLe7rPL5bml" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=Q8iO9mYrfv8&amp;list = plqpkppauca 40 fmpmkwzlxqydle 7 RP l5 bml</a></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><h1 id="c4ce" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">结论</h1><p id="fd4b" class="pw-post-body-paragraph kq kr it ks b kt me ju kv kw mf jx ky kz mg lb lc ld mh lf lg lh mi lj lk ll im bi translated">Sudo黑仔对pentesters和系统管理员都是一个有价值的工具。它帮助您识别Sudo程序中的错误配置和漏洞，并帮助您利用这些漏洞。</p><p id="fa42" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">通过探索这些可能性来测试您自己的系统可以使您的系统更强地抵御可能的攻击。</p></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><p id="3201" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">感谢阅读！我错过了什么吗？请随时在Twitter上告诉我:</p><div class="mj mk gp gr ml mm"><a href="https://twitter.com/vickieli7" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd iu gy z fp mr fr fs ms fu fw is bi translated">李薇薇</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">Vickie Li的最新推文(@ vickieli7)。书呆子的专业调查员。黑客和安全。创造上帝…</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">twitter.com</p></div></div><div class="mv l"><div class="oh l mx my mz mv na ko mm"/></div></div></a></div></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><p id="4020" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><em class="oi">关注</em> <a class="ae nx" href="https://medium.com/bugbountywriteup" rel="noopener"> <em class="oi"> Infosec报道</em> </a> <em class="oi">获取更多此类精彩报道。</em></p><div class="mj mk gp gr ml mm"><a href="https://medium.com/bugbountywriteup" rel="noopener follow" target="_blank"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd iu gy z fp mr fr fs ms fu fw is bi translated">信息安全报道</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">收集了世界上最好的黑客的文章，主题从bug奖金和CTF到vulnhub…</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">medium.com</p></div></div><div class="mv l"><div class="oj l mx my mz mv na ko mm"/></div></div></a></div></div></div>    
</body>
</html>