<html>
<head>
<title>Update: Want to take over the Java ecosystem? All you need is a MITM!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">更新:想接管Java生态系统？你需要的只是一个MITM！</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/update-want-to-take-over-the-java-ecosystem-all-you-need-is-a-mitm-d069d253fe23?source=collection_archive---------0-----------------------#2020-01-08">https://infosecwriteups.com/update-want-to-take-over-the-java-ecosystem-all-you-need-is-a-mitm-d069d253fe23?source=collection_archive---------0-----------------------#2020-01-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div class="gh gi io"><img src="../Images/48d6e772cd00535b50eedf5a17085b5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*NfH520q6hlfu8eoNnG2CZA.jpeg"/></div></figure><div class=""/><div class=""><h2 id="3176" class="pw-subtitle-paragraph ju iw ix bd b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl dk translated">2020年1月13日至15日，将打破行业Java构建基础设施的21%。自从我的第一篇文章披露这个行业范围的漏洞以来，六个月过去了，我们现在在哪里，未来会怎样？</h2></div><p id="5f2a" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">2019年6月10日，我在一篇题为“<a class="ae li" href="https://medium.com/bugbountywriteup/want-to-take-over-the-java-ecosystem-all-you-need-is-a-mitm-1fc329d898fb?source=friends_link&amp;sk=3c99970c55a899ad9ef41f126efcde0e" rel="noopener">想接管Java生态系统吗？”的文章中公开披露了一个影响Java生态系统的行业漏洞？你需要的只是一个MITM！在那篇文章中，我详细介绍了有多少最流行的基于JVM的库通过HTTP而不是HTTPS的构建工具来解决它们的依赖关系。</a></p><p id="8edf" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">作为这项研究的一部分，我联系了Java生态系统中几个最常用的工件服务器的安全团队，在2020年1月15日，许多工件服务器将放弃对HTTP的支持，只支持HTTPS。重要的是要记住，截至2019年6月，25%的Maven Central下载仍在使用HTTP。截至2019年12月12日，21%的Sonatype Maven Central下载仍在使用HTTP。</p><figure class="lk ll lm ln gt is gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/b030fb5c97096245dd479e57457b0fe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*yt4QvqJIY1g-1_S6ZGOrDw.jpeg"/></div></figure><blockquote class="lo"><p id="ccfa" class="lp lq ix bd lr ls lt lu lv lw lx lh dk translated">21%的Sonatype Maven Central下载仍在使用HTTP</p></blockquote><p id="6144" class="pw-post-body-paragraph km kn ix ko b kp ly jy kr ks lz kb ku kv ma kx ky kz mb lb lc ld mc lf lg lh ij bi translated">需要强调的是，这种破坏将迫使Java生态系统供应链的安全性发生非常健康和重要的转变。</p><h1 id="04f9" class="md me ix bd mf mg mh mi mj mk ml mm mn kd mo ke mp kg mq kh mr kj ms kk mt mu bi translated">工件服务器主机公告</h1><p id="c7b3" class="pw-post-body-paragraph km kn ix ko b kp mv jy kr ks mw kb ku kv mx kx ky kz my lb lc ld mz lf lg lh ij bi translated">下面列出了我联系过的工件服务器以及它们当前的反应。</p><h2 id="453e" class="na me ix bd mf nb nc dn mj nd ne dp mn kv nf ng mp kz nh ni mr ld nj nk mt nl bi translated">Maven Central — Sonatype</h2><p id="3ad7" class="pw-post-body-paragraph km kn ix ko b kp mv jy kr ks mw kb ku kv mx kx ky kz my lb lc ld mz lf lg lh ij bi translated">Maven Central将于2020年1月15日停止对HTTP的支持。<br/>你可以在这里阅读他们的<a class="ae li" href="https://central.sonatype.org/articles/2019/Apr/30/http-access-to-repo1mavenorg-and-repomavenapacheorg-is-being-deprecated/" rel="noopener ugc nofollow" target="_blank">完整公告。</a></p><h2 id="c3a7" class="na me ix bd mf nb nc dn mj nd ne dp mn kv nf ng mp kz nh ni mr ld nj nk mt nl bi translated">JCenter — JFrog</h2><p id="e35a" class="pw-post-body-paragraph km kn ix ko b kp mv jy kr ks mw kb ku kv mx kx ky kz my lb lc ld mz lf lg lh ij bi translated">JCenter将于2020年1月13日停止对HTTP的支持。<br/>你可以在这里阅读他们的<a class="ae li" href="https://jfrog.com/blog/secure-jcenter-with-https/" rel="noopener ugc nofollow" target="_blank">完整公告。</a></p><h2 id="65dd" class="na me ix bd mf nb nc dn mj nd ne dp mn kv nf ng mp kz nh ni mr ld nj nk mt nl bi translated">纸盒— JFrog</h2><p id="c0b7" class="pw-post-body-paragraph km kn ix ko b kp mv jy kr ks mw kb ku kv mx kx ky kz my lb lc ld mz lf lg lh ij bi translated">JFrog通知我，他们不会让dl.bintray.com的HTTP退役，因为它用于解析其他生态系统的工件。我恳求他们重新考虑这个决定，但是现在他们不愿意做出这个重大的改变。</p><h2 id="930c" class="na me ix bd mf nb nc dn mj nd ne dp mn kv nf ng mp kz nh ni mr ld nj nk mt nl bi translated">Gradle插件门户— Gradle</h2><p id="821f" class="pw-post-body-paragraph km kn ix ko b kp mv jy kr ks mw kb ku kv mx kx ky kz my lb lc ld mz lf lg lh ij bi translated">Gradle插件门户将于2020年1月15日停止对HTTP的支持。<br/>你可以在这里阅读他们的<a class="ae li" href="https://blog.gradle.org/decommissioning-http" rel="noopener ugc nofollow" target="_blank">完整公告。</a></p><h2 id="f5ff" class="na me ix bd mf nb nc dn mj nd ne dp mn kv nf ng mp kz nh ni mr ld nj nk mt nl bi translated">弹簧—枢轴</h2><p id="80c3" class="pw-post-body-paragraph km kn ix ko b kp mv jy kr ks mw kb ku kv mx kx ky kz my lb lc ld mz lf lg lh ij bi translated">Spring工件库将在2020年1月15日停止对HTTP的支持。<br/>你可以在这里阅读他们的<a class="ae li" href="https://spring.io/blog/2019/09/16/goodbye-http-repo-spring-use-https" rel="noopener ugc nofollow" target="_blank">完整公告。</a></p><h2 id="0972" class="na me ix bd mf nb nc dn mj nd ne dp mn kv nf ng mp kz nh ni mr ld nj nk mt nl bi translated">Eclipse——Eclipse基金会</h2><p id="2257" class="pw-post-body-paragraph km kn ix ko b kp mv jy kr ks mw kb ku kv mx kx ky kz my lb lc ld mz lf lg lh ij bi translated">虽然我已经联系了Eclipse基金会<a class="ae li" href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=550999" rel="noopener ugc nofollow" target="_blank">这里</a>，他们最初是接受的，但是目前他们还没有做出承诺。</p><h2 id="6185" class="na me ix bd mf nb nc dn mj nd ne dp mn kv nf ng mp kz nh ni mr ld nj nk mt nl bi translated">JetBrains</h2><p id="b0fd" class="pw-post-body-paragraph km kn ix ko b kp mv jy kr ks mw kb ku kv mx kx ky kz my lb lc ld mz lf lg lh ij bi translated">JetBrains不愿意在这一点上为他们用来托管工件的存储库承诺一个时间表。</p><h2 id="cf53" class="na me ix bd mf nb nc dn mj nd ne dp mn kv nf ng mp kz nh ni mr ld nj nk mt nl bi translated">美国红帽子的公司出品的计算机操作系统</h2><p id="9749" class="pw-post-body-paragraph km kn ix ko b kp mv jy kr ks mw kb ku kv mx kx ky kz my lb lc ld mz lf lg lh ij bi translated">我在多个场合与RedHat安全团队就该计划进行了接触，他们不愿意在此时承诺支持该计划的时间表。他们担心这样的改变会使他们的付费客户破产，因此不愿意在此时进行这种改变。</p><h2 id="5a3a" class="na me ix bd mf nb nc dn mj nd ne dp mn kv nf ng mp kz nh ni mr ld nj nk mt nl bi translated">推特</h2><p id="1ed6" class="pw-post-body-paragraph km kn ix ko b kp mv jy kr ks mw kb ku kv mx kx ky kz my lb lc ld mz lf lg lh ij bi translated">同样，Twitter安全团队也不愿意致力于这项计划。</p><h1 id="2756" class="md me ix bd mf mg mh mi mj mk ml mm mn kd mo ke mp kg mq kh mr kj ms kk mt mu bi translated">来自构建工具的警告</h1><p id="4023" class="pw-post-body-paragraph km kn ix ko b kp mv jy kr ks mw kb ku kv mx kx ky kz my lb lc ld mz lf lg lh ij bi translated">从Gradle 6.0和Scala Build Tool (SBT) 1.3.x开始，两者都将开始警告用户，他们正在使用HTTP而不是HTTPS来解决依赖性，并且能够在每个存储库的基础上禁用警告。<br/>此外，谷歌的Bazel build将要求用户为任何通过HTTP下载的资源指定一个SHA-256散列。</p><p id="1d45" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">不幸的是，目前还没有在Apache Maven中实现同样的警告。</p><div class="ip iq gp gr ir nm"><a href="https://issues.apache.org/jira/browse/MNG-6673" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iy gy z fp nr fr fs ns fu fw iw bi translated">不赞成HTTP下载和上传</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">此吉拉已启用LDAP，如果您是ASF提交者，请使用您的LDAP凭据登录。任何问题…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">issues.apache.org</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa it nm"/></div></div></a></div><h1 id="4ef9" class="md me ix bd mf mg mh mi mj mk ml mm mn kd mo ke mp kg mq kh mr kj ms kk mt mu bi translated">在开源中消除这一漏洞</h1><figure class="lk ll lm ln gt is gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/fe89af9fec9c05c19ecc7f465437bf6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*Ohh3rtSyfxMBt8As0irpJg.jpeg"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">有了GitHub的Semmle QL，我们可以为整个OSS生态系统做到这一点</figcaption></figure><h2 id="3d5e" class="na me ix bd mf nb nc dn mj nd ne dp mn kv nf ng mp kz nh ni mr ld nj nk mt nl bi translated">GitHub安全实验室:CodeQL</h2><p id="9ccc" class="pw-post-body-paragraph km kn ix ko b kp mv jy kr ks mw kb ku kv mx kx ky kz my lb lc ld mz lf lg lh ij bi translated">GitHub最近收购了Semmle和他们的查询语言QL。QL使安全研究人员能够针对给定的漏洞编写抽象查询，并在整个开源软件(oss)中找到该漏洞的所有变体。此外，GitHub最近宣布了一项新的开源Bug奖励计划，奖励提交查询的研究人员。Semmle的QL查询语言是针对GitHub上每个新的开源项目进行评估的。这意味着研究人员现在可以创建查询来消除整个oss生态系统中的各类漏洞。</p><p id="fffb" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">我最近提交了这个简单的QL查询，作为新的<a class="ae li" href="https://securitylab.github.com/" rel="noopener ugc nofollow" target="_blank"> GitHub安全实验室漏洞奖励计划</a>的一部分。臭虫奖励计划的提交可以在<a class="ae li" href="https://github.com/github/security-lab/issues/21" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><figure class="lk ll lm ln gt is"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="b941" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这个相当简单的查询将检测并标记所有使用HTTP或FTP的POM.xml文件。一旦该查询被合并和部署，它将开始在GitHub的所有未来开源贡献中检测该漏洞。</p><p id="423e" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">我强烈建议所有还没有应用LGTM GitHub集成的GitHub库应该这么做<a class="ae li" href="https://github.com/marketplace/lgtm" rel="noopener ugc nofollow" target="_blank">这里</a>！</p><figure class="lk ll lm ln gt is gh gi paragraph-image"><div role="button" tabindex="0" class="oj ok di ol bf om"><div class="gh gi oi"><img src="../Images/b7213b66a4d339e8260e9862f2c96543.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ChRiKtSB4zBwF00-7vj-Jg.png"/></div></div></figure><h2 id="fc91" class="na me ix bd mf nb nc dn mj nd ne dp mn kv nf ng mp kz nh ni mr ld nj nk mt nl bi translated">赏金！</h2><p id="307f" class="pw-post-body-paragraph km kn ix ko b kp mv jy kr ks mw kb ku kv mx kx ky kz my lb lc ld mz lf lg lh ij bi translated">对于上面的问题，<a class="ae li" href="https://securitylab.github.com/" rel="noopener ugc nofollow" target="_blank"> GitHub安全实验室</a>团队好心地奖励了我2300美元，作为“人人为我，我为人人”计划的一部分。</p><p id="3490" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">更多信息请点击这里:<a class="ae li" href="https://securitylab.github.com/bounties" rel="noopener ugc nofollow" target="_blank"> GitHub安全实验室Bug赏金计划</a>。</p><h1 id="0821" class="md me ix bd mf mg mh mi mj mk ml mm mn kd mo ke mp kg mq kh mr kj ms kk mt mu bi translated">我要做什么呢？</h1><p id="97c9" class="pw-post-body-paragraph km kn ix ko b kp mv jy kr ks mw kb ku kv mx kx ky kz my lb lc ld mz lf lg lh ij bi translated">作为软件开发人员、安全工程师或运营工程师，请主动检查您的Maven、Gradle、SBT、巴泽尔、巴克、JFrog Artifactory和/或Sonatype Nexus配置，以确保您的公司或项目在2020年1月13日至15日不会受到这一变化的影响。</p></div><div class="ab cl on oo hu op" role="separator"><span class="oq bw bk or os ot"/><span class="oq bw bk or os ot"/><span class="oq bw bk or os"/></div><div class="ij ik il im in"><p id="9fb5" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><em class="ou">关注</em> <a class="ae li" href="https://medium.com/bugbountywriteup" rel="noopener"> <em class="ou"> Infosec报道</em> </a> <em class="ou">获取更多此类精彩报道。</em></p><div class="ip iq gp gr ir nm"><a href="https://medium.com/bugbountywriteup" rel="noopener follow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iy gy z fp nr fr fs ns fu fw iw bi translated">信息安全报道</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">收集了世界上最好的黑客的文章，主题从bug奖金和CTF到vulnhub…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">medium.com</p></div></div><div class="nv l"><div class="ov l nx ny nz nv oa it nm"/></div></div></a></div></div></div>    
</body>
</html>