<html>
<head>
<title>ColddBox Easy Tryhackme Writeup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ColddBox简易试用版</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/colddbox-easy-tryhackme-writeup-c2924bc634ce?source=collection_archive---------5-----------------------#2021-04-30">https://infosecwriteups.com/colddbox-easy-tryhackme-writeup-c2924bc634ce?source=collection_archive---------5-----------------------#2021-04-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="869f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">作者Shamsher khan这是一篇关于try hackme room“cold box Easy”的文章</strong></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi kl"><img src="../Images/b576bf361e9dc15f8fbd04ed7bff315c.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*VfBntRur4gI-yPT-E8DIWw.png"/></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk translated">【https://tryhackme.com/room/colddboxeasy T2】号</figcaption></figure><p id="3515" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">难度</strong>:简单<br/> <strong class="jp ir">瞄准</strong>:黑掉这台机器，获得<em class="ky">用户</em>和<em class="ky">根</em>标志。</p><p id="f455" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">THM:</strong>T15】https://www.tryhackme.com/room/colddboxeasy</p><p id="a527" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">VulnHub:</strong>T19】https://www.vulnhub.com/entry/colddbox-easy,586/</p><p id="0f4f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">具有多种升级权限方式的简易关卡机。</p><h1 id="097c" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">情报收集</h1><p id="1cff" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated"><strong class="jp ir">目标:</strong>我的情况是10.10.196.79</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/8221705f91f8fbc4fea151991fb93dd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*xaT8VPUrQjho2y0RcLvi2Q.png"/></div></figure><p id="1a75" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后进一步扫描，在发现的端口上运行默认脚本和版本检测:</p><pre class="km kn ko kp gt md me mf mg aw mh bi"><span id="1fa4" class="mi la iq me b gy mj mk l ml mm">nmap -sC -sV -vvv -p 80,4512 10.10.196.79</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mn"><img src="../Images/a11bbd141f51f6653312eec6a49a836a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6hjAtHBjIM3s4pwNnmekZg.png"/></div></div></figure><p id="418b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由此我们可以看到以下端口和服务:</p><ul class=""><li id="d48c" class="ms mt iq jp b jq jr ju jv jy mu kc mv kg mw kk mx my mz na bi translated">端口80/TCP—HTTP—(Apache httpd 2 . 4 . 18—运行WordPress博客)</li><li id="2ebc" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">端口4512/tcp — SSH — (OpenSSH 7.2p2)</li></ul><h1 id="9b0a" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">列举</h1><p id="80ee" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">在浏览器中查看网页可以确认WordPress正在使用中。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi ng"><img src="../Images/87bcbb2634ddc630ec276041a65ab6fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MmVf-3JMe3y0ELkCQmJOhQ.png"/></div></div></figure><p id="1224" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">wpscan 可用于为用户、插件、主题等列举WordPress:</p><pre class="km kn ko kp gt md me mf mg aw mh bi"><span id="cb94" class="mi la iq me b gy mj mk l ml mm">wpscan --url http://<!-- -->10.10.196.79<!-- --> -e</span></pre><p id="8c4b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正在使用的主题是<strong class="jp ir"> <em class="ky">第二十五个</em> </strong>:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi nh"><img src="../Images/4447265ce50ca2e8ad062fb141a1cb00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TxGtD2ilZCsbtBHBtYD0Lg.png"/></div></div></figure><p id="72b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">确定了3个有效用户:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/3a6715b71eb2d6505c49c27aa8b1b51c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*9RgHhUooC_F-wDpG4z1adw.png"/></div></figure><p id="94c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以尝试使用<em class="ky"> rockyou.txt </em>单词表来破解这些用户的密码:</p><pre class="km kn ko kp gt md me mf mg aw mh bi"><span id="4a40" class="mi la iq me b gy mj mk l ml mm">wpscan --url <a class="ae kx" href="http://10.10.196.79" rel="noopener ugc nofollow" target="_blank">http://</a>10.10.196.79<a class="ae kx" href="http://10.10.196.79" rel="noopener ugc nofollow" target="_blank">/</a> -U philip,c0ldd,hugo -P /usr/share/wordlists/rockyou.txt</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/e98ddc7900aea699c9b7ae514f979214.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*PL6l4VKUH4ZgPc59speV4Q.png"/></div></figure><p id="55a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">成功！我们已经找到了<strong class="jp ir"> <em class="ky"> c0ldd </em>的密码。</strong></p><h1 id="86d2" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">获得访问权限</h1><p id="e8ef" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">我们现在可以用上面的凭证登录WordPress。</p><pre class="km kn ko kp gt md me mf mg aw mh bi"><span id="043b" class="mi la iq me b gy mj mk l ml mm"><a class="ae kx" href="http://10.10.196.79/wp-login.php" rel="noopener ugc nofollow" target="_blank">http://10.10.196.79/wp-login.php</a></span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/840f5d77157c7cfb18f039e09a8cc073.png" data-original-src="https://miro.medium.com/v2/resize:fit:734/format:webp/1*hlCU3p8yiy_Onlme6DlyMQ.png"/></div></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi nl"><img src="../Images/3acf6b37b91fd534cab9b03724752068.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8q4b6YJJBiIF2tdYDzy-fQ.png"/></div></div></figure><p id="7f1a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为反向外壳创建一个插件</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/835e7fb2ad155e98371d4544ddb25d5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*0eVyUMxpeCtjazv08G_m3A.png"/></div></figure><p id="a2f9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">压缩成zip文件</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/70326fd2887f37129190dd515f5316e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*J6VUnn2DbsV8H7w102v8Gw.png"/></div></figure><p id="7ef6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦我们把它压缩好，我们就转移到WordPress用户界面。在插件下，我们选择添加新插件:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi no"><img src="../Images/9d3cc24c5a2bca575e0d42982e325461.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*-qF9hFeaXuk3dHxZKrxETA.png"/></div></figure><p id="70dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">选择上传插件:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi np"><img src="../Images/3c2d6b12f7cb8b0bcdfa9a2e1ccebb0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*0l2BCWfN_vGkUonBJIRHQA.png"/></div></figure><p id="ae93" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们浏览新创建的插件:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/20be1448dac0728d86c4dc9ad846ca15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*5YVz8lTxk282ncg-QKCoiA.png"/></div></figure><p id="463c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在启动netcat shell</p><pre class="km kn ko kp gt md me mf mg aw mh bi"><span id="ca18" class="mi la iq me b gy mj mk l ml mm">nc -lvp 4444</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/002e7e2d274ecefd69132e8678a79167.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*aASGB7hEr5wQ5wEMqAjDAw.png"/></div></figure><p id="a6fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击激活获取外壳</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/749a5dc16ce5250ce99b478e633c0d17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*SM-6yL3y1TRbUCPAS5xgmg.png"/></div></figure><p id="8362" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嘣！我们有贝壳</p><p id="9350" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后可以从<em class="ky">config.php</em>文件中获得数据库用户和密码:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi nt"><img src="../Images/af24677c6eec1a63bcd75fad0a9f07ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n8DkVR1ddzkYOo7K9NQrAA.png"/></div></div></figure><p id="4300" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以通过运行以下命令将其升级为完全交互式的shell:</p><pre class="km kn ko kp gt md me mf mg aw mh bi"><span id="2671" class="mi la iq me b gy mj mk l ml mm">python3 -c 'import pty; pty.spawn("/bin/bash")'<br/>export TERM=xterm<br/>Ctrl + Z</span><span id="c62b" class="mi la iq me b gy nu mk l ml mm">stty raw -echo; fg   (from local terminal)<br/>&lt;enter&gt;</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi nv"><img src="../Images/d1919637a6f11add85cdfd260a41dfe2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VGWzWrmK6j8o71ASQqTA-A.png"/></div></div></figure><p id="e560" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用凭据登录</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/6179c726ac1ffec7e4a260a77efd99c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*ssQXyCcVTpgMdSiio_GWvA.png"/></div></figure><p id="2982" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">可以在主目录中找到<em class="ky"> user.txt </em>标志:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/007e0323d32a198f13bbe599c1ee3b7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*1nwgs-PyWWJLnI0Qy9Sydg.png"/></div></figure><p id="c9d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该标志以Base64格式编码，但在提交给THM时不需要解码。</p><p id="d004" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们可以检查用户<em class="ky"> c0ldd </em>是否拥有任何<em class="ky"> sudo </em>权限:</p><h1 id="8ac9" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">权限提升</h1><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi ny"><img src="../Images/9098f176bcdca7848f143398427f74e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p0pJtpFGDKP7RnNchJkFKw.png"/></div></div></figure><p id="d336" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ky"> c0ldd </em>拥有<strong class="jp ir"> vim、chmod </strong>和<strong class="jp ir"> ftp的sudo权限。</strong></p><p id="547a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里有多种选择…</p><p id="2a4e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">通过/usr/bin/vim进行权限提升:</strong></p><p id="9957" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kx" href="https://gtfobins.github.io/gtfobins/vim/#sudo" rel="noopener ugc nofollow" target="_blank">https://gtfobins.github.io/gtfobins/vim/#sudo</a></p><pre class="km kn ko kp gt md me mf mg aw mh bi"><span id="19d8" class="mi la iq me b gy mj mk l ml mm">sudo vim -c ':!/bin/sh'<br/>&lt;enter&gt;</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/83dd53e777fbcb7f9bff0a0a4c1ad43b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*tZV_Z_wIDV_U-EtZFCXvjQ.png"/></div></figure><p id="54a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">通过/usr/bin/chmod进行权限提升:</strong></p><p id="3d34" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">【https://gtfobins.github.io/gtfobins/chmod/#sudo T4】</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi oa"><img src="../Images/30dbfdaff11d578480569ca498cd3e17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8D7qx4BOsjab4vCLaT9s_A.png"/></div></div></figure><h1 id="54cb" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">文件传送协议</h1><div class="ob oc gp gr od oe"><a href="https://gtfobins.github.io/gtfobins/ftp/#sudo" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd ir gy z fp oj fr fs ok fu fw ip bi translated">ftp | GTFOBins</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">它可以通过生成交互式系统外壳来突破受限环境。它可以渗出…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">gtfobins.github.io</p></div></div></div></a></div><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi on"><img src="../Images/26910d0ad7e586a3cf87a9c40a761e01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*0yVMhR6k2REmEPCNe0meEg.png"/></div></figure><p id="88b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在:<br/><strong class="jp ir">LinkedIn:-</strong><a class="ae kx" href="https://www.linkedin.com/in/shamsher-khan-651a35162/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/shamsher-khan-651a35162/</a><br/><strong class="jp ir">Twitter:-</strong><a class="ae kx" href="https://twitter.com/shamsherkhannn" rel="noopener ugc nofollow" target="_blank">https://twitter.com/shamsherkhannn</a><br/><strong class="jp ir">Tryhackme:-</strong><a class="ae kx" href="https://tryhackme.com/p/Shamsher" rel="noopener ugc nofollow" target="_blank">https://tryhackme.com/p/Shamsher</a></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/09e5bbba06c7688a702aeec8570d243c.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/format:webp/1*Vve7XR6kstH7qA5iQQ-kYA.png"/></div></figure><p id="be8a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">更多演练敬请关注……<br/>出发前…</p><p id="4445" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">访问我的其他演练:-</p><p id="ab52" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢您花时间阅读我的演练。如果您觉得它有帮助，请点击👏按钮👏(高达40倍)并分享<br/>它来帮助其他有类似兴趣的人！+随时欢迎反馈！</p></div></div>    
</body>
</html>