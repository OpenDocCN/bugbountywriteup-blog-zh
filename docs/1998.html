<html>
<head>
<title>TryHackMe: Blaster</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">爆破手</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/tryhackme-blaster-2430255a4229?source=collection_archive---------1-----------------------#2022-04-10">https://infosecwriteups.com/tryhackme-blaster-2430255a4229?source=collection_archive---------1-----------------------#2022-04-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7511" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">游戏攻略</h2></div><p id="7233" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">嗨，大家好，今天我们要做的是Tryhackme <strong class="kh ir"> Blaster </strong>，这是一款windows机器认为简单的游戏。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/312a017894db5b68c10787ed68d11037.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EDdt2Ty3t01tvO9oyr9JDg.png"/></div></div></figure></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="f616" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">首字母</h1><pre class="lc ld le lf gt mm mn mo mp aw mq bi"><span id="918a" class="mr lv iq mn b gy ms mt l mu mv">export IP=10.10.184.13</span></pre><h2 id="39c4" class="mr lv iq bd lw mw mx dn ma my mz dp me ko na nb mg ks nc nd mi kw ne nf mk ng bi translated">枚举:</h2><p id="b55a" class="pw-post-body-paragraph kf kg iq kh b ki nh jr kk kl ni ju kn ko nj kq kr ks nk ku kv kw nl ky kz la ij bi translated">让我们从端口扫描开始，现在我想做的是执行<strong class="kh ir"> rustscan </strong>来获取开放的端口。</p><pre class="lc ld le lf gt mm mn mo mp aw mq bi"><span id="5dad" class="mr lv iq mn b gy ms mt l mu mv">rustscan -a $Ip --ulimit 5000</span></pre><p id="8582" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在将这些端口转移到<strong class="kh ir"> nmap </strong></p><pre class="lc ld le lf gt mm mn mo mp aw mq bi"><span id="ba7a" class="mr lv iq mn b gy ms mt l mu mv">nmap -T4 -sC -sV -p80,3389 -oN nmap $IP -Pn</span></pre><p id="0c00" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">结果是</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/0cca860ee1a31631d71675949916c2d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*Ym9GUegOEFe_CL88gb8VOw.png"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">nmap_results.png</figcaption></figure><p id="7230" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们找到了两个开放的端口，即<strong class="kh ir"> 80 </strong> ( <strong class="kh ir"> http </strong>)和<strong class="kh ir"> 3389 </strong> ( <strong class="kh ir"> RDP </strong>)</p><p id="06f0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我检查了端口80 (http ),因为我们没有任何RDP的凭证。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nr"><img src="../Images/bc7fca7ae68824696b1320b892f378d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pnIqbzMSazkTE_FeEo1kjA.png"/></div></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated"><a class="ae ns" rel="noopener ugc nofollow" target="_blank" href="/$IP"> http://$IP </a></figcaption></figure><p id="c8ce" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正常网页，然后我去做了目录暴力破解，发现<strong class="kh ir"> /retro </strong></p><pre class="lc ld le lf gt mm mn mo mp aw mq bi"><span id="e4ce" class="mr lv iq mn b gy ms mt l mu mv">feroxbuster -u <a class="ae ns" rel="noopener ugc nofollow" target="_blank" href="/$IP">http://$IP</a> -o feroscan.txt</span></pre><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/979a084b4c71a16f18d4e7f2820052c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:508/format:webp/1*lEmzGdtw9HBKz5P4kvtxgw.png"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">feroxbuster_scan.png</figcaption></figure><p id="da1f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在参观时，</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nu"><img src="../Images/e57f9acad37b51cde74ca95d763afcee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gVJsQMDuVb7kSLjiznal_g.png"/></div></div></figure><p id="8d1a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以这是我们的博客网站。检查博客时，我们发现用户在博客上评论了密码。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nv"><img src="../Images/b1e9e34afcc699c52b94cc3df2ca5c50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ULi-0BCh88EhUr8J1wl3zw.png"/></div></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">用户名和密码</figcaption></figure></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="aa91" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">User.txt</h1><p id="5be2" class="pw-post-body-paragraph kf kg iq kh b ki nh jr kk kl ni ju kn ko nj kq kr ks nk ku kv kw nl ky kz la ij bi translated">现在是通过RDP服务登录的时候了，在Windows中你可以使用<code class="fe nw nx ny mn b">rdp</code>，在linux中有很多工具，但我更喜欢<code class="fe nw nx ny mn b">rdesktop</code></p><pre class="lc ld le lf gt mm mn mo mp aw mq bi"><span id="a9b1" class="mr lv iq mn b gy ms mt l mu mv">rdesktop $IP -g 50%</span></pre><p id="355e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在桌面上，我们有用户标志</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/933b8cf6f8a9ade875f8f1d5e44d00fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*NXJyN3TWSzRDZB1t0pG5gA.png"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">userflag.png</figcaption></figure></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="705a" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">特权:</h1><p id="9f55" class="pw-post-body-paragraph kf kg iq kh b ki nh jr kk kl ni ju kn ko nj kq kr ks nk ku kv kw nl ky kz la ij bi translated">为了获得meterpreter外壳，我尝试了一些msfvenom有效载荷，但反病毒正在删除文件。但是在桌面上，有另一个名为<strong class="kh ir"> hhupd </strong>的user.txt文件</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/92253ab58e8576480cb2ded577aed0af.png" data-original-src="https://miro.medium.com/v2/resize:fit:250/format:webp/1*46-I_KJyf6WjCmqqldLLSQ.png"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">hhupd.png</figcaption></figure><p id="c156" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">谷歌了一下，发现了一个漏洞，允许普通用户以管理员身份运行cmd。</p><p id="37a5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个<a class="ae ns" href="https://www.youtube.com/watch?v=3BQKpPNlTSo" rel="noopener ugc nofollow" target="_blank">视频</a>将帮助你更好地理解(:</p><p id="c2f0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在是升级特权的时候了。</p><p id="0a0f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以管理员身份运行<code class="fe nw nx ny mn b">hhupd</code>应用程序，并检查发行者证书。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/c51f1f485ad8ef2cd9807619dda856fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*caNInmVh5zDRLNihpTQq6g.png"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">出版商certificate.png</figcaption></figure><p id="ad24" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在点击链接，一个网页就会打开。保存网页(忽略互联网不工作的错误)</p><pre class="lc ld le lf gt mm mn mo mp aw mq bi"><span id="6791" class="mr lv iq mn b gy ms mt l mu mv">CRTL+S</span></pre><p id="7ce7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">导航到cmd.exe或简单地运行顶部的cmd</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/c979d28cf99f61ad8856ef3f5e161fb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*BhpHN9nCYnEijVXoeh0b1g.png"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">导航到cmd</figcaption></figure><p id="6547" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">点击回车键，cmd将作为<strong class="kh ir">管理员</strong>打开</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi od"><img src="../Images/c0641b23ac3165865ff71a989e9f7145.png" data-original-src="https://miro.medium.com/v2/resize:fit:386/format:webp/1*dmd3Cc7AsSDWX8eFAIA0eg.png"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">管理命令</figcaption></figure><p id="08db" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在获取管理标志</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/4dcdb532badfe1b1189bdadb18e4d35e.png" data-original-src="https://miro.medium.com/v2/resize:fit:524/format:webp/1*ZH2Z1EXmSYmCnOI29G03Ng.png"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">管理标志</figcaption></figure><h1 id="b66d" class="lu lv iq bd lw lx of lz ma mb og md me jw oh jx mg jz oi ka mi kc oj kd mk ml bi translated">后期开发:</h1><p id="b039" class="pw-post-body-paragraph kf kg iq kh b ki nh jr kk kl ni ju kn ko nj kq kr ks nk ku kv kw nl ky kz la ij bi translated">所以也有一些后剥削，让我们也这样做。</p><p id="ae4f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于AV已启用，我们无法通过msfvenom获得管理外壳。</p><p id="2658" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以使用<strong class="kh ir"> Web Delivery </strong>，它是一个从shell (kidna :p)获取shell的metasploit模块</p><pre class="lc ld le lf gt mm mn mo mp aw mq bi"><span id="2f83" class="mr lv iq mn b gy ms mt l mu mv">msf&gt; use exploit/multi/script/web_delivery</span></pre><p id="4f9b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将照常使用paylaod</p><blockquote class="ok ol om"><p id="f718" class="kf kg on kh b ki kj jr kk kl km ju kn oo kp kq kr op kt ku kv oq kx ky kz la ij bi translated"><strong class="kh ir">windows/meter preter/reverse _ TCP</strong></p></blockquote><p id="ad81" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并将目标设置为powershell，因为我们将shell设置为powershell</p><p id="14db" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">设置其他详细信息，如LHOST、LPORT等。现在我们可以走了。</p><p id="a6ab" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">运行漏洞并复制结果</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi or"><img src="../Images/68d1fe1ff7805b4d3e2388dab8e179cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SqnEAzJ70rrOg2o2xgjoYw.png"/></div></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">web交付结果</figcaption></figure><p id="d4c8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将此粘贴到windows admin cmd上。</p><blockquote class="ok ol om"><p id="e1b4" class="kf kg on kh b ki kj jr kk kl km ju kn oo kp kq kr op kt ku kv oq kx ky kz la ij bi translated">如果不能从您的系统复制粘贴到RDP，那么您可以将它保存在本地机器上，并使用python服务器托管它。然后从RDP复制粘贴</p></blockquote><p id="a751" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到了管理meterpreter外壳</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi os"><img src="../Images/9eae069fd81a45221268893c19b45fdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dCVtqsmhBfdgtbZz3rUNSQ.png"/></div></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">仪表外壳</figcaption></figure><p id="a741" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以有了这个，我们成功开发了Blaster。感谢你阅读这篇文章，希望你觉得有用。如果有任何疑问，你可以在推特上发微博</p><p id="d0a0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">再见，我们在nxt博客上见</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><figure class="lc ld le lf gt lg gh gi paragraph-image"><a href="https://tryhackme.com/room/blaster"><div class="gh gi ot"><img src="../Images/1655c2c235a4d664d810a450af2de314.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*DaSEcbOsiCf4jgIy4FRprQ.png"/></div></a></figure><blockquote class="ou"><p id="8b5b" class="ov ow iq bd ox oy oz pa pb pc pd la dk translated">|| <a class="ae ns" href="https://tryhackme.com/room/blaster" rel="noopener ugc nofollow" target="_blank">房间</a> || <a class="ae ns" href="https://twitter.com/namx05" rel="noopener ugc nofollow" target="_blank">推特</a> ||</p></blockquote></div></div>    
</body>
</html>