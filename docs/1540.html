<html>
<head>
<title>Attacktive Directory: TryHackMe Walkthrough-Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">攻击目录:TryHackMe演练-第1部分</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/attacktive-directory-tryhackme-walkthrough-part-1-accfac4bf70f?source=collection_archive---------2-----------------------#2021-08-23">https://infosecwriteups.com/attacktive-directory-tryhackme-walkthrough-part-1-accfac4bf70f?source=collection_archive---------2-----------------------#2021-08-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8779da3ad2919aa2f5dacc905db30d9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d0eWSsZADo_WDu03SiPzfw.png"/></div></div></figure><p id="de67" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">大家好，我是苏迪帕·白朗塔卡。今天，我们要谈谈TryHackMe上的攻击性目录室。这是一个基于Windows活动目录的房间。在这里，我们应该利用并访问易受攻击的域控制器。在这个房间里，我们有8项任务要完成。在本文中，我们将完成前4个任务，第2部分将涵盖其他任务。</p><p id="f2c2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">任务01:部署机器</p><p id="92bc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">任务02:设置</p><p id="794f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">任务03:欢迎来到攻击目录</p><p id="5b41" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">任务04:通过Kerberos枚举用户</p><p id="b72f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">任务05:滥用Kerberos</p><p id="f6d1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">任务06:回到基础</p><p id="db6c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">任务07:提升域内的权限</p><p id="9e28" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">任务08:标志提交面板</p><p id="f1bc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在进入任务列表之前，让我们先看看术语AD(活动目录)。</p><p id="2d6b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">什么是AD(活动目录)？</strong></p><p id="170f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Active Directory支持多种功能，如身份验证、组和用户管理、策略管理等等。</p><p id="c0b3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">AD可以利用Kerberos和LDAP进行身份验证，这使它成为当今最常用的目录服务。单点登录(SSO)由AD提供，在VPN上使用时特别有效。公司选择安装认证管理软件的一个主要原因是AD和Kerberos不是跨平台的，这意味着它们必须在一个位置管理来自多个不同设备和平台的登录。AD仍然可以是整个访问管理策略的一个组成部分，因为它支持LDAP。</p><p id="5b48" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">任务01:部署机器</strong></p><p id="68df" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在任务01中，我们必须通过OpenVPN连接到TryHackMe并部署机器。如果你想知道如何通过OpenVPN连接，你可以参考下面的房间。</p><div class="kw kx gp gr ky kz"><a href="https://tryhackme.com/room/openvpn" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">TryHackMe | OpenVPN</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">使用OpenVPN连接到我们网络的指南。</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">tryhackme.com</p></div></div><div class="li l"><div class="lj l lk ll lm li ln jw kz"/></div></div></a></div><p id="9c69" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">任务02:设置</strong></p><p id="c442" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在任务02中，我们应该安装一些有助于进行活动目录枚举的工具。</p><p id="6b99" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装这些工具时，请确保您的Linux机器是最新的和升级的。否则，您可能会遇到一些存储库错误。因此，在安装以下工具之前使用以下命令总是好的。</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lo"><img src="../Images/b30af3c34c4f6b5a7524ad716a381032.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qz907AT7lVnQLeHGXi0M0Q.png"/></div></div></figure><p id="153c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们要安装的第一个工具是“<strong class="ka ir"> Impacket </strong>”。有时候impact已经安装在你的Linux系统中了，你就不想再安装了。</p><p id="cd1a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">安装插件:</strong></p><p id="5085" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将把下面的目录克隆到我们的/opt目录中。我们的任务02中提到了所有必要的步骤。因此，我不打算在这里重复这些事情。简单地说，您可以给出下面的命令来安装impacket。</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lt"><img src="../Images/b25715a86419c4b45b08e35b7be2518e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tGSSnQ3POx5tKODISXNa6w.png"/></div></div></figure><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lu"><img src="../Images/fcee0aeb084529553ca6f539bc82837e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xKjg-TLIiyCUnI2UdMHU3Q.png"/></div></div></figure><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lv"><img src="../Images/f5881ceedd3dda32f7a690bcb9299db1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iv7ct4ml9kDotMKrpFL7Yg.png"/></div></div></figure><p id="4ce0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">安装Bloodhound和Neo4j: </strong></p><p id="2318" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Bloodhound是我们在攻击攻击性目录时将使用的另一个工具。我们将在后面讨论该工具的具体特性，但是现在，我们需要用Apt安装两个包，分别是bloodhound和neo4j。您可以使用以下命令安装它:</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lw"><img src="../Images/0f5d8bb1e4a60662763a124a1d9d8c9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uVpdVHHrJd86OA9tLCJIJA.png"/></div></div></figure><p id="6a7e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">任务03:欢迎来到攻击目录</p><p id="dad6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在启动之前，机器会确保您的目标主机正在运行。</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lx"><img src="../Images/9d215ca0added1585ee75864408a3cf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*flIN6eowmDF8FJvfwcI3NA.png"/></div></div></figure><p id="b769" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们的主机运行良好，给出的TTL值为127😉。TTL=128 = Windows主机，同样，如果TTL为127，则跳数为1，并且是Windows机器。</p><p id="abec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们从nmap扫描开始我们的初始枚举。如果想了解nmap，可以参考下面的TryHackMe室。</p><div class="kw kx gp gr ky kz"><a href="https://tryhackme.com/room/furthernmap" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">TryHackMe | Nmap</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">深入了解使用功能强大的网络扫描工具Nmap进行扫描。</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">tryhackme.com</p></div></div></div></a></div><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ly"><img src="../Images/33c90f2b827d8826c921f3d5ff0db207.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZ3AP4WBlVJqBUk1t4bt6w.png"/></div></div></figure><ul class=""><li id="9277" class="lz ma iq ka b kb kc kf kg kj mb kn mc kr md kv me mf mg mh bi translated">-sV用于启用版本检测</li><li id="8917" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated">-sC用于使用默认NSE脚本运行</li><li id="0b79" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated">-A用于启用主动模式(启用操作系统检测、版本检测、跟踪路由、脚本扫描)</li><li id="fcee" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated">-T4，用于将扫描速度设置为模式4</li><li id="e310" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated">-打开以保存输出</li></ul><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/fb46515b8d14a2f2875d6b9918e56128.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KsL4enCffcXBFiRuu9N6HQ.png"/></div></div></figure><p id="915e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，我们为139/tcp和445/tcp开放了端口，这些是默认的SMB端口。</p><ul class=""><li id="a082" class="lz ma iq ka b kb kc kf kg kj mb kn mc kr md kv me mf mg mh bi translated"><strong class="ka ir">端口139 </strong> : SMB最初使用端口139运行在NetBIOS之上。NetBIOS是较早的传输层，它允许Windows计算机在同一网络上相互通信。</li><li id="26b8" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated"><strong class="ka ir">端口445:</strong>SMB的更高版本(Windows 2000之后)开始在TCP栈上使用端口445。使用TCP允许SMB在互联网上工作。</li></ul><p id="bef2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们还在389/tcp和3268/tcp上使用LDAP。</p><p id="4295" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">轻量级目录访问协议(LDAP) </strong></p><p id="7d00" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">LDAP(也称为轻量级目录访问技术)是一种开放的跨平台的目录服务认证协议。</p><p id="d435" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">LDAP是目录服务和应用程序之间的主要通信方式。就用户帐户而言，目录服务维护诸如名称、密码和计算机帐户等信息，并将这些信息提供给其他网络实体。</p><p id="68e8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">继续任务03，我们有三个问题要回答。</p><blockquote class="mo mp mq"><p id="9b5e" class="jy jz mr ka b kb kc kd ke kf kg kh ki ms kk kl km mt ko kp kq mu ks kt ku kv ij bi translated"><em class="iq">什么工具可以让我们列举端口139/445？</em></p></blockquote><p id="4f0b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于这个问题，我们可以使用谷歌的帮助🤗。因为谷歌是头号开源智能工具，而且完全免费。</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/6146d33c930cfaeb41f06b511364f3c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p6aYsMDSLKqAgGm4a1BpeA.png"/></div></div></figure><p id="c1c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">答案:</strong> enum4linux</p><p id="2258" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mr"> Enum4linux是一个从Windows和Samba系统枚举信息的工具。</em></p><p id="40b8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过使用该工具，我们可以识别共享信息、用户和用户组信息、DNS信息、识别远程操作系统、RID循环、密码策略检索、NetBIOS信息等。要安装这个工具，你可以使用下面的Github库。</p><div class="kw kx gp gr ky kz"><a href="https://github.com/CiscoCXSecurity/enum4linux" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">GitHub—CiscoCXSecurity/enum 4 linux:enum 4 Linux是用于枚举的enum.exe的Linux替代方案…</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">enum.exe的Linux替代品，用于枚举来自Windows和Samba主机的数据。Enum4linux是一个枚举工具…</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">github.com</p></div></div><div class="li l"><div class="mw l lk ll lm li ln jw kz"/></div></div></a></div><p id="4368" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装工具后，您可以简单地运行python脚本。</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mx"><img src="../Images/92e6edf6b1585fa00fcbbb831bec7277.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IavnznE-l3BjCQu8r-OUzQ.png"/></div></div></figure><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi my"><img src="../Images/3429a30fa1896a6832fab7fb439da00f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1l1ceZIcX40yOtKvYfCh4Q.png"/></div></div></figure><blockquote class="mo mp mq"><p id="c250" class="jy jz mr ka b kb kc kd ke kf kg kh ki ms kk kl km mt ko kp kq mu ks kt ku kv ij bi translated"><em class="iq">机器的NetBIOS域名是什么？</em></p></blockquote><p id="e359" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">enu4linux输出给出了这个问题的答案。</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mz"><img src="../Images/963d6c8b61da26327c6d8f783b6edff5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SLkjF1Edrbqms6Opb3MdFw.png"/></div></div></figure><p id="684d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">回答:</strong> THM-AD</p><blockquote class="mo mp mq"><p id="4a3f" class="jy jz mr ka b kb kc kd ke kf kg kh ki ms kk kl km mt ko kp kq mu ks kt ku kv ij bi translated"><em class="iq">人们通常将哪些无效TLD用于他们的活动目录域？</em></p></blockquote><p id="6560" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在谷歌上简单搜索一下，就会给出我们这个问题的答案。</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi na"><img src="../Images/1c8ac81a7c8e6ca775db3f9325912ef6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jYe3oddCj9MAcjHG5SHjNA.png"/></div></div></figure><p id="6f28" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">回答:</strong>。当地的</p><p id="0d37" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">任务04:通过Kerberos枚举用户</strong></p><p id="d2cb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">T5】简介:T7】</strong></p><p id="d1b3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mr">一大堆其他服务正在运行，包括</em><strong class="ka ir"><em class="mr">Kerberos</em></strong><em class="mr">。Kerberos是Active Directory中的一项关键身份验证服务。打开这个端口，我们就可以使用一个名为</em><a class="ae nb" href="https://github.com/ropnop/kerbrute/releases" rel="noopener ugc nofollow" target="_blank"><em class="mr">Kerbrute</em></a><em class="mr">(作者罗尼·弗拉瑟斯</em><a class="ae nb" href="https://twitter.com/ropnop" rel="noopener ugc nofollow" target="_blank"><em class="mr">@ ROP nop</em></a><em class="mr">)的工具来蛮力发现用户、密码甚至密码喷！</em></p><p id="1da6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"/></p><p id="6cee" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这一部分，我们将列举Kerberos。为此，我们使用Kerberos工具来强制用户名和密码。</p><div class="kw kx gp gr ky kz"><a href="https://github.com/ropnop/kerbrute/releases" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">发布ropnop/kerbrute</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">一个执行Kerberos预授权强制的工具。通过在…上创建一个帐户，为ropnop/kerbrute开发做出贡献</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">github.com</p></div></div><div class="li l"><div class="nc l lk ll lm li ln jw kz"/></div></div></a></div><p id="3d94" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是从上面的Git repo安装并运行这个工具并没有给我输出。当我想出另一个Git回购方案后，我在网上搜索了一下自己。您可以下载该工具以及用于暴力攻击的用户列表和密码列表。</p><div class="kw kx gp gr ky kz"><a href="https://github.com/Sq00ky/attacktive-directory-tools" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">GitHub-Sq00ky/attack active-directory-tools</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">在GitHub上创建一个帐户，为Sq00ky/attack-active-directory-tools的开发做出贡献。</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">github.com</p></div></div><div class="li l"><div class="nd l lk ll lm li ln jw kz"/></div></div></a></div><p id="5277" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下载完kerbrute工具后，我们应该给这个脚本可执行的权限。</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/d61ec9a606e2047fa8ec4109d7664cd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uBaayFMT8GKLDVFcamEo3A.png"/></div></div></figure><p id="6b16" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这里，我使用了777，这意味着我将最高权限(所有读、写、执行)授予任何用户组。</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/6722d19e7c94cb3acb90aa1808b5fe6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r_DlZ2iU6hVRjYGsi4OS5A.png"/></div></div></figure><blockquote class="mo mp mq"><p id="6fed" class="jy jz mr ka b kb kc kd ke kf kg kh ki ms kk kl km mt ko kp kq mu ks kt ku kv ij bi translated">Kerberos中的什么命令允许我们枚举有效的用户名？</p></blockquote><p id="9904" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为此，我们通过给出<em class="mr">来运行kerbrute。安装目录中的/kerbrute命令。</em></p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ng"><img src="../Images/203f14f9f40946e70b90a46f53e4aa74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*laj-RKlXn24LSrPC_pxngw.png"/></div></div></figure><p id="9292" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">回答:</strong> userenum</p><blockquote class="mo mp mq"><p id="18ae" class="jy jz mr ka b kb kc kd ke kf kg kh ki ms kk kl km mt ko kp kq mu ks kt ku kv ij bi translated">发现什么值得注意的账户？(这些应该会引起你的注意)</p></blockquote><p id="0b59" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这里，我们应该运行kerbrute并找到用户名。在此之前，我将把目标域添加到我的/etc/hosts中，这对于我来说很容易进行枚举。为此，您可以使用以下命令。在这里你应该有你的目标IP地址，而不是我的。</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/63844afd73440a56a5b8a030d94ae490.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H-p5vDiViuvmaK6i24qd0w.png"/></div></div></figure><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/17637bf80ca339ceae738859ebefa883.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5GE5uSyNlEEt1V36j8-oAA.png"/></div></div></figure><p id="7769" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我将使用userlist.txt运行该脚本。我已经将目标域添加到我的主机，然后我可以使用域名，而不是键入IP地址。</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/0eb67d07ea8426aed1aaa82fcb5fc880.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*up4qfj7NenPr6GxIx9qnjQ.png"/></div></div></figure><ul class=""><li id="31d2" class="lz ma iq ka b kb kc kf kg kj mb kn mc kr md kv me mf mg mh bi translated">— dc提供域控制器(KDC)目标的位置</li><li id="4485" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated">-d表示完整的域</li></ul><p id="3dca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将给出一些有效用户帐户的输出。</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/78b9c1c570edd4b0f31ead69f245a8b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w3TcKMV4mOGmSO_H0OD3pA.png"/></div></div></figure><p id="592a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">答案:</strong> svc-admin</p><blockquote class="mo mp mq"><p id="42de" class="jy jz mr ka b kb kc kd ke kf kg kh ki ms kk kl km mt ko kp kq mu ks kt ku kv ij bi translated">另一个值得注意的发现是什么？(这些应该会引起你的注意)</p></blockquote><p id="5ec4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">回答:</strong>备份</p><p id="97aa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以，我想今天到此为止。我们已经完成了TryHackMe上攻击目录的任务1到任务4，我们将讨论本文的第2部分。所以直到下一次，保持安全，再见👋。</p><p id="4674" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在上找到我😊：</p><p id="0460" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">领英:【www.linkedin.com/in/sudeepashiranthaka T4】</p><p id="1711" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">中:<a class="ae nb" href="https://sudeepashiranthaka97.medium.com/" rel="noopener">https://sudeepashiranthaka97.medium.com/</a></p><p id="5e4a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">推特:<a class="ae nb" href="https://twitter.com/sudeepashiran97" rel="noopener ugc nofollow" target="_blank">https://twitter.com/sudeepashiran97</a></p></div></div>    
</body>
</html>