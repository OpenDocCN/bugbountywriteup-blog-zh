<html>
<head>
<title>GraphQL Voyager as a tool for API security testing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GraphQL Voyager作为API安全性测试的工具</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/graphql-voyager-as-a-tool-for-security-testing-86d3c634bcd9?source=collection_archive---------0-----------------------#2019-04-04">https://infosecwriteups.com/graphql-voyager-as-a-tool-for-security-testing-86d3c634bcd9?source=collection_archive---------0-----------------------#2019-04-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9a8e1f595dcd203fa3908f178d6d868e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DIxps3fSGKUJ-2qzVp2mjg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">“航海家”查询的谷歌图片结果之一。图片<a class="ae kc" href="https://images.newscientist.com/wp-content/uploads/2017/09/12165539/04._-key-image-4-farthest-publicity-stills-from-film-voyager-float.jpg" rel="noopener ugc nofollow" target="_blank">来源</a>。</figcaption></figure><p id="a22b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你面对的是GraphQL API，想测试它的安全性。但是<a class="ae kc" href="https://graphql.org/learn/introspection/" rel="noopener ugc nofollow" target="_blank">自省查询</a>给你巨大的不可读的JSON，web应用只使用了GraphQL API的一部分，当然也没有公开文档。在这种情况下如何理解和测试GraphQL API？</p><p id="eee4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">幸运的是，有一个叫做<a class="ae kc" href="https://apis.guru/graphql-voyager/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> GraphQL Voyager </strong> </a>的工具可以可视化GraphQL模式。这对理解GraphQL API和查找授权漏洞特别有用。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="d627" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您是GraphQL的新手，以下是学习它的良好起点:</p><ol class=""><li id="6825" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la ln lo lp lq bi translated"><a class="ae kc" href="https://www.howtographql.com/" rel="noopener ugc nofollow" target="_blank">https://www.howtographql.com/</a>—采取互动的方式完成实际任务和里程碑。让您从零开始使用第一个GraphQL应用程序。</li><li id="9495" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><a class="ae kc" href="https://graphql.org/learn/" rel="noopener ugc nofollow" target="_blank">https://graphql.org/learn/</a>—利用文档方法。了解GraphQL的特定主题很有好处。</li><li id="5f9f" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><strong class="kf ir">【upd 04 . 07 . 19】</strong><a class="ae kc" href="https://ctf.hacker101.com/" rel="noopener ugc nofollow" target="_blank">https://ctf.hacker101.co</a>m—hacker one为GraphQL创建了两个任务。这是一个尝试航海家号的好地方。名为BugDB v1和BugDB v2的任务。</li></ol><h1 id="b4c0" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">为什么要使用GraphQL Voyager？</h1><p id="6a6a" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">测试GraphQL API的第一步是理解它做什么。通常没有包含文档的网页，因为GraphQL是自文档化的。这意味着您可以执行特制的自省查询来获取GraphQL模式。Schema包含所有关于GraphQL API的公共信息。</p><p id="26ab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不幸的是，schema通常以巨大的JSON返回，因此需要通过阅读来理解API。相同模式的可视化表示是完全不同的情况。百闻不如一见:</p><figure class="na nb nc nd gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mz"><img src="../Images/d101e9e44825b8982d22a74f35b88eed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1oZdjHtdp0WJhNT5gOuAVw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">JSON vs IMAGE</figcaption></figure><h1 id="fc76" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">如何使用</h1><p id="1db1" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">旅行者号的使用相对简单。例如，让我们得到<a class="ae kc" href="https://github.com/graphql/swapi-graphql" rel="noopener ugc nofollow" target="_blank"> SWAPI GraphQL </a>的可视化表示:</p><p id="ef5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ne">第一步</em>。获取巧尽心思构建的自省查询:</p><ul class=""><li id="e955" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la nf lo lp lq bi translated">去https://apis.guru/graphql-voyager/。</li><li id="38c1" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la nf lo lp lq bi translated">单击“自定义模式”。</li><li id="c69c" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la nf lo lp lq bi translated">点击“复制自检查询”。</li></ul><p id="86fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ne">第二步</em>。对目标GraphQL端点执行内省查询:</p><ul class=""><li id="089a" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la nf lo lp lq bi translated">去https://graphql.github.io/swapi-graphql。</li><li id="84c9" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la nf lo lp lq bi translated">将自省查询粘贴到请求中。</li><li id="2b7c" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la nf lo lp lq bi translated">发出请求。</li></ul><p id="9f67" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ne">第三步</em>。将获得的GraphQL模式复制并粘贴到Voyager。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="3b78" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">步骤2可能因目标而异，因为GraphQL请求可能以不同的方式实现，但您已经有了一个大致的概念。</p><h1 id="f9fd" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">结论</h1><p id="ef0c" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">GraphQL Voyager是帮助您理解GraphQL APIs的伟大工具。它让您全面了解了使用GraphQL API可以做些什么。</p><p id="ba4a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是可以通过添加“diff”特性来进一步改进。这个想法是，您可以监视目标的GraphQL API中的变化，然后可视化这些变化的差异。这将有助于您快速发现新功能并理解现有功能的变化。</p><p id="6158" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我为航海家的GitHub 上的diff功能创建了一个<a class="ae kc" href="https://github.com/APIs-guru/graphql-voyager/issues/113" rel="noopener ugc nofollow" target="_blank">问题。您可以通过以下方式为其发展做出贡献:</a></p><ol class=""><li id="8c85" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la ln lo lp lq bi translated">(简单方法)对<a class="ae kc" href="https://github.com/APIs-guru/graphql-voyager/issues/113" rel="noopener ugc nofollow" target="_blank">问题</a>进行投票表决。所以开发者会优先考虑它。</li><li id="12e5" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated">(艰难地)动手编写这个特性的代码，因为GraphQL Voyager是开源项目。</li></ol></div></div>    
</body>
</html>