<html>
<head>
<title>Understanding the NMAP methodology — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">理解NMAP方法—第二部分</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/understanding-the-nmap-methodology-part-2-3d0442f1c482?source=collection_archive---------2-----------------------#2022-09-24">https://infosecwriteups.com/understanding-the-nmap-methodology-part-2-3d0442f1c482?source=collection_archive---------2-----------------------#2022-09-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="7970" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从初级到高级理解NMAP方法论</p><h2 id="60a1" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">描述:</h2><p id="4bec" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">在今天的文章中，我们将学习Nmap的一些高级网络映射技术。如果你没有读过第一部分，那么我建议你在阅读这篇文章之前浏览一遍。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi lr"><img src="../Images/5ed2171b29624898c3a85015cd02aad1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BIIJ9ciIVSSFOe0NhO6qWA.jpeg"/></div></div></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><p id="8fc6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在你开始之前，<strong class="jp ir">你可以加入我们的discord服务器，与志同道合的人交流，分享你能与人分享的一切，帮助他们，让他们回答你的问题。</strong></p><div class="md me gp gr mf mg"><a href="https://discord.gg/VKJSmqDN5P" rel="noopener  ugc nofollow" target="_blank"><div class="mh ab fo"><div class="mi ab mj cl cj mk"><h2 class="bd ir gy z fp ml fr fs mm fu fw ip bi translated">加入赛博空间不和谐服务器！</h2><div class="mn l"><h3 class="bd b gy z fp ml fr fs mm fu fw dk translated">查看Discord上的CyberVerse社区——与106名其他成员一起玩，享受免费语音和文本聊天。</h3></div><div class="mo l"><p class="bd b dl z fp ml fr fs mm fu fw dk translated">不和谐. gg</p></div></div><div class="mp l"><div class="mq l mr ms mt mp mu mb mg"/></div></div></a></div><p id="1ae2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi mv translated"><span class="l mw mx my bm mz na nb nc nd di">正如</span>我们已经在第一部分看到了一些网络映射的基础知识，了解一些扫描和映射网络的高级和基本技术是值得的。</p><h1 id="6048" class="ne km iq bd kn nf ng nh kq ni nj nk kt nl nm nn kw no np nq kz nr ns nt lc nu bi translated">1.TCP空扫描</h1><p id="ea7f" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">顾名思义，TCP空扫描在向特定端口或服务发送数据包时不设置任何标志。没有设置标志的TCP数据包在到达开放端口时不会触发任何响应。这表示端口是打开的。</p><pre class="ls lt lu lv gt nv nw nx ny aw nz bi"><span id="9281" class="kl km iq nw b gy oa ob l oc od">nmap -sN &lt;ip&gt;</span><span id="f845" class="kl km iq nw b gy oe ob l oc od">-sN: TCP null scan flag<br/>1) NULL TCP Packet --&gt;<br/>   (If no response, port is open/filtered)<br/>2) NULL TCP Packet --&gt;<br/>   RST/ACK         &lt;--<br/>   (Port closed/filtered)</span></pre><p id="221d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们收到一个带有RST(复位)/ACK(确认)的数据包，表明端口被关闭或过滤。</p><h1 id="4a3f" class="ne km iq bd kn nf ng nh kq ni nj nk kt nl nm nn kw no np nq kz nr ns nt lc nu bi translated">2.TCP手指扫描</h1><p id="2eeb" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">TCP FIN扫描是与TCP NULL扫描相同类型的扫描。它们之间的主要区别是TCP FIN扫描。发送的数据包带有FIN(完成)标志。现在明白了，它是如何工作的？</p><pre class="ls lt lu lv gt nv nw nx ny aw nz bi"><span id="623f" class="kl km iq nw b gy oa ob l oc od">nmap -sF &lt;ip&gt;</span><span id="8464" class="kl km iq nw b gy oe ob l oc od">-sF: TCP FIN scan flag</span></pre><p id="6373" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我告诉你，“我很好。谢谢大家。”你也没问我"你好吗？"。很奇怪。同样的事情也发生在这里。FIN标志表示通信完成。如果我们没有发起任何通信，那么我们如何能够完成它，这就是为什么如果端口是开放的，它会响应我们的数据包，并指示端口是开放的。</p><h1 id="1370" class="ne km iq bd kn nf ng nh kq ni nj nk kt nl nm nn kw no np nq kz nr ns nt lc nu bi translated">3.TCP圣诞节扫描</h1><p id="4e42" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">TCP XMAS扫描与以前的扫描相同。不是设置单个标志，而是在数据包中设置FIN(完成)、PSH(推送)和URG(紧急)标志。与FIN扫描一样，如果端口打开，它会响应我们的数据包。</p><pre class="ls lt lu lv gt nv nw nx ny aw nz bi"><span id="478c" class="kl km iq nw b gy oa ob l oc od">nmap -sX &lt;ip&gt;</span><span id="18ff" class="kl km iq nw b gy oe ob l oc od">-sX : TCP XMAS scan flag</span></pre><blockquote class="of og oh"><p id="b682" class="jn jo oi jp b jq jr js jt ju jv jw jx oj jz ka kb ok kd ke kf ol kh ki kj kk ij bi translated">当目标位于无状态防火墙后时，这三种类型的扫描都很有效。</p></blockquote><p id="f178" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">无状态防火墙将检查传入的数据包是否设置了SYN标志，以检测连接尝试。使用与SYN数据包不匹配的标志组合有可能欺骗防火墙并到达防火墙后面的系统。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi om"><img src="../Images/7dfac59cd48b3cafbab00d6c923f32cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p1YV-71-HWCRy_HmV_ULcg.jpeg"/></div></div><figcaption class="on oo gj gh gi op oq bd b be z dk translated">抄袭自<a class="ae lj" href="https://ipwithease.com/" rel="noopener ugc nofollow" target="_blank">https://ipwithease.com/</a></figcaption></figure><h1 id="39d2" class="ne km iq bd kn nf ng nh kq ni nj nk kt nl nm nn kw no np nq kz nr ns nt lc nu bi translated">4.TCP确认扫描</h1><p id="386d" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">在TCP ACK扫描中，它将仅设置ACK标志。不管端口的状态如何，目标都将使用RST进行响应。但是如果目标前面有防火墙，这种扫描会很有帮助。我们可以找出哪些端口没有被防火墙阻止。发现防火墙规则和配置非常有用。</p><pre class="ls lt lu lv gt nv nw nx ny aw nz bi"><span id="b965" class="kl km iq nw b gy oa ob l oc od">nmap -sA &lt;ip&gt;</span><span id="0088" class="kl km iq nw b gy oe ob l oc od">-sA : Sets TCP ACK flag</span><span id="e014" class="kl km iq nw b gy oe ob l oc od">How does it work?<br/>1) ACK Packet  --&gt;<br/>   RST Packet  &lt;--</span></pre><h1 id="963a" class="ne km iq bd kn nf ng nh kq ni nj nk kt nl nm nn kw no np nq kz nr ns nt lc nu bi translated">5.TCP窗口扫描</h1><p id="8a20" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">TCP窗口扫描在某种程度上与TCP窗口扫描相同。在这种类型的扫描中，将检查RST数据包的窗口字段以获取有关端口的信息。在某些类型的系统上，它显示端口是打开的。</p><pre class="ls lt lu lv gt nv nw nx ny aw nz bi"><span id="5e2c" class="kl km iq nw b gy oa ob l oc od">nmap -sW &lt;ip&gt;</span><span id="224d" class="kl km iq nw b gy oe ob l oc od"># -sW : Sets TCP window flag</span></pre><h1 id="e6c5" class="ne km iq bd kn nf ng nh kq ni nj nk kt nl nm nn kw no np nq kz nr ns nt lc nu bi translated">6.TCP自定义扫描</h1><p id="1b43" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">在TCP自定义扫描中，我们可以自己设置标志。如果我们想用不同的旗帜组合来测试目标，这对我们很有帮助。但是，如果我们设置任何类型的标志组合，那么我们应该知道目标在不同条件下会如何响应。</p><pre class="ls lt lu lv gt nv nw nx ny aw nz bi"><span id="6583" class="kl km iq nw b gy oa ob l oc od">nmap --scanflags RSTACK &lt;ip&gt;</span><span id="da37" class="kl km iq nw b gy oe ob l oc od"># --scanflags : Set your custom flags.</span></pre></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><p id="2dd7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是今天的文章。如果你觉得它有趣且有启发性，那就和你的朋友分享吧。谢谢你读到这里。让我知道你的问题或者你想在回复部分阅读的文章的主题。尽管如此，网络地图的另一部分还没有发布。关注我并订阅，直接在您的电子邮件中获取有趣的文章。</p><blockquote class="of og oh"><p id="5832" class="jn jo oi jp b jq jr js jt ju jv jw jx oj jz ka kb ok kd ke kf ol kh ki kj kk ij bi translated">第三部分:<a class="ae lj" href="https://medium.com/@sudo0x18/understanding-the-nmap-methodology-part-3-bb377b7767e0" rel="noopener">https://medium . com/@ sudo 0x 18/understanding-the-nmap-methodology-part-3-bb 377 b 7767 e 0</a></p></blockquote><p id="c9c8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在这里的社交媒体上关注:<a class="ae lj" href="https://www.linkedin.com/in/jay-vadhaiya-3b74531b1/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>，<a class="ae lj" href="https://www.instagram.com/mr.jv_2407/" rel="noopener ugc nofollow" target="_blank"> Instagram </a>，<a class="ae lj" href="https://twitter.com/sudo0x18" rel="noopener ugc nofollow" target="_blank"> Twitter </a></p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h2 id="f46a" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">来自Infosec的报道:Infosec每天都有很多内容，很难跟上。<a class="ae lj" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank">加入我们的每周简讯</a>以5篇文章、4个线程、3个视频、2个GitHub Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</h2></div></div>    
</body>
</html>