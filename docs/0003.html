<html>
<head>
<title>Broken Access Control in bingmapsportal</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">bingmapsportal中的中断访问控制</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/broken-access-control-in-bingmapsportal-a012bffd2c43?source=collection_archive---------2-----------------------#2016-01-23">https://infosecwriteups.com/broken-access-control-in-bingmapsportal-a012bffd2c43?source=collection_archive---------2-----------------------#2016-01-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="c9ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">大家好，</p><p id="090d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这篇博文是关于我向微软报告的第三个漏洞。</p><p id="60ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在<a class="ae kl" href="https://www.bingmapsportal.com/" rel="noopener ugc nofollow" target="_blank"> bingmapsportal </a>中管理你的Bing maps API密钥，在更新应用程序的名称时，一些东西引起了我的注意。</p><p id="7ad3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">概念验证:- </strong></p><p id="df0f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每当你改变一些东西，比如应用程序的名字等等，网站就会使用一个<strong class="jp ir"> PUT </strong>请求来执行更新。</p><p id="f332" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">看起来是这样的。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/68ccc7454ee3b4ebf789e6c8d02017d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wmpf-0p1ijLYu8dchfmPGQ.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">屏幕上显示程序运行的图片</figcaption></figure><p id="cc4b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如您所见，它是这样发送JSON数据的</p><blockquote class="lc ld le"><p id="af9c" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated"><code class="fe lj lk ll lm b">{“applicationId”:1707630,”applicationName”:”testing xml”,”applicationUri”:null,”ticket”:”bjc7REBGwm6NNTL3Ot5R~INcJpFU5r-KxjNtDZK2Nkg~ApWBovtZEhj4-Uodq6qTluDURLTLmTpJVOTl_V-4l8f6fnFO1KQlIlmLAijCJgXL”,”accountId”:1418767,”keyTypeId”: 2,“keyType”:”Basic”,”keySubtypeId”:39,”keySubtype”:”Universal Windows App”,”validFrom”:”12/23/2015″,”validTo”:”None”,”isMutable”:true,” showButtonTextEnable”:false,”keyStatus”:”Enabled”,”showKeyEnableDisableButton”:true}</code></p></blockquote><p id="6292" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> PUT </strong>和<strong class="jp ir"> POST </strong>请求的区别在于，PUT会覆盖之前存在的内容。</p><p id="eec3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">引起我注意的是<strong class="jp ir"><em class="lf">application id</em></strong><em class="lf"/>和<strong class="jp ir"><em class="lf">account id</em></strong><em class="lf">。</em>如果我更改应用程序ID会怎么样？谁知道让我们试试。</p><p id="6de6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，我让我妹妹使用她的outlook帐户，并用她的帐户创建了一个应用程序密钥。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/56afd059d43d942c0b6957a5db607c60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sA2cfzTqScxsj-sA-mq8sw.png"/></div></div></figure><p id="44d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在我的账户中创建了一个名为<strong class="jp ir"> <em class="lf"> bounty_1 </em> </strong>的应用，在她的账户中创建了一个名为<strong class="jp ir"> <em class="lf"> bounty_2 </em> </strong>的应用。</p><p id="f2df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我截取了一个<strong class="jp ir">用我姐姐的账号放</strong>的请求，把<strong class="jp ir"><em class="lf">Application Id</em></strong>从<strong class="jp ir"> <em class="lf"> bounty_2的</em> </strong> <em class="lf"> </em>应用ID改为<strong class="jp ir"> <em class="lf"> bounty_1的</em> </strong>应用ID</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/f4af2f3308af0c4da6630194b9cfcccf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y2j6y2pMquNaMkji2igc3w.png"/></div></div></figure><p id="595c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">而回应是“<code class="fe lj lk ll lm b"><em class="lf">Key updated successfully</em></code>”。</p><p id="07e6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我就像什么！！！！还刷新了我的账号。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/e27bfe6c87f71c363079abc5f6eee6ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sZdEvjllknePfWX4aIeLdw.png"/></div></div></figure><p id="85d0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">令我惊讶的是，申请从我的账户转到了我姐姐的账户。</p><p id="4ea0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">后端不会验证攻击者是否拥有该应用程序。</p><p id="bf1a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我向微软报告了这个问题，现在已经打了补丁。</p><p id="0350" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">时间线:- </strong></p><p id="cd51" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2015年12月23日—发送初步报告。</p><p id="bd8f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在接下来的几天里做了一些后续工作</p><p id="da91" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2016年5月1日—询问任何更新。</p><p id="8403" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2016年6月1日—得到回复说没有更新。</p><p id="b81d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2016年1月21日—再次询问是否有任何更新</p><p id="1238" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">22-01–2016-收到回复称问题已修复</p><p id="b455" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将于2016年1月<strong class="jp ir">月</strong>被列入微软<a class="ae kl" href="https://technet.microsoft.com/en-in/security/cc308575" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">名人堂</strong> </a> <strong class="jp ir"> </strong></p><p id="9cb6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢您的阅读。</p><p id="6f2f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你有任何疑问，请随时联系我。</p><p id="9cd1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">和平:D</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><p id="d729" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lf">原载于2016年1月23日kmskrishna.wordpress.com</em><em class="lf">的</em> <a class="ae kl" href="https://kmskrishna.wordpress.com/2016/01/23/microsoft-hall-of-fame-for-the-2nd-time/" rel="noopener ugc nofollow" target="_blank"> <em class="lf">。</em></a></p></div></div>    
</body>
</html>