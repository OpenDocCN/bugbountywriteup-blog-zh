<html>
<head>
<title>Exploiting API with AuthToken</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用AuthToken开发API</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/exploiting-api-with-authtoken-3bea7b1fb6a9?source=collection_archive---------1-----------------------#2020-11-15">https://infosecwriteups.com/exploiting-api-with-authtoken-3bea7b1fb6a9?source=collection_archive---------1-----------------------#2020-11-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9dd0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">大家好，研究员们，</p><p id="15ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我自己，<strong class="jp ir">拉菲阿哈迈德</strong>。我是来自孟加拉国的网络安全研究员。我喜欢以不同的方式做事。无论如何，事不宜迟，让我们进入今天的主题。</p><p id="5cc6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">今天的主题是关于使用AuthToken开发API端点。不是找一个。</strong></p><p id="e25a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们中的许多人在侦察过程中发现了<strong class="jp ir"> AuthToken </strong>，但是由于不能显示任何影响，这个重要的发现经常被拒绝。我自己也被拒绝了几次。</p><h1 id="7c54" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">什么是API？</h1><blockquote class="lj lk ll"><p id="8283" class="jn jo lm jp b jq jr js jt ju jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj kk ij bi translated">API是应用程序编程接口的首字母缩写，它是一个软件中介，允许两个应用程序相互通信。每次你使用脸书这样的应用程序，发送即时消息，或者在手机上查看天气，你都在使用API。</p></blockquote><h1 id="a53a" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">假设</h1><p id="e0d8" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">让我们假设您在侦察过程中发现了任何用户的AuthToken或API token。简单的汇报会给你一个<strong class="jp ir"> <em class="lm">在大多数情况下不适用</em> </strong>。</p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/dabdd0b08555d5830d231ee80bf3bfcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1186/format:webp/1*AK4sSmMcCHLBAl_imxiGSg.jpeg"/></div></figure><h1 id="80fe" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">通过AuthToken利用API</h1><p id="7ad6" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">最近我在<strong class="jp ir"> Bugcrowd </strong>中测试了一个私人程序，在我的侦察过程中，我发现了一个<strong class="jp ir"> AuthToken </strong>，你总能得到它。但是最难的是利用它。首先，程序没有提供任何<strong class="jp ir"> <em class="lm">凭证</em> </strong>进行测试，也没有办法让<strong class="jp ir"> <em class="lm">注册</em> </strong>。所以，我不知道他们的基础设施实际上是如何工作的。</p><p id="13bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我的侦察中，我发现的令牌是一个<strong class="jp ir"> AuthToken </strong>(写在代码中)，它可以替代API用于认证的<strong class="jp ir">认证载体</strong>令牌。现在，我得到了一个提示，这个令牌更像是一个API令牌。但我不知道他们的API基础设施是如何工作的，因为我无法访问任何用户帐户或任何东西。所以，我放弃了。</p><p id="505b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，当我测试另一个web应用程序时，我在更新用户信息时看到一个API调用。我想也许我可以用这个API调用来利用昨天的调用。因此，我使用<strong class="jp ir">打嗝</strong>将该请求发送给<strong class="jp ir">中继器</strong>。用我在侦察过程中发现的一个端点更改了主机&amp;请求端点。这给了我如下的回应:</p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi md"><img src="../Images/cbd676cb5c0352456060a33e9202fb71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fSca_4iMRVpJpx92w-KhBA.png"/></div></div></figure><p id="3c27" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我得了<strong class="jp ir"> 403禁</strong>。但这给了我们一些信息，什么头丢失了。然后，我添加了使用响应显示的<strong class="jp ir">头名称</strong>获得的令牌。这给了我如下的回应:</p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi mi"><img src="../Images/6d79b2339c41ca4c07facdaf5bedd745.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sPL7IMzk2Tpx3cPAzfjtRA.png"/></div></div></figure><p id="19a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 500内部服务器错误！！</strong></p><p id="0264" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这意味着我和API有联系。如您所见，该请求是一个POST请求，请求中没有POST数据。这就是应用程序显示<strong class="jp ir"> 500内部服务器错误的原因。</strong>然后我又侦察了一下&amp;得到了一些可以用来测试端点的POST数据。我添加了帖子数据，再次发送请求，看到回复时我震惊了。</p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi mj"><img src="../Images/8d75c8493d497db793a8fc290e5e770f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4KeIEyHrBMBJ_DVSuPOKpw.png"/></div></div></figure><p id="3398" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我得到了100个客户的数据。那一刻我就像爆炸了🤯</p><blockquote class="lj lk ll"><p id="80b1" class="jn jo lm jp b jq jr js jt ju jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj kk ij bi translated"><em class="iq">我很快向</em><strong class="jp ir"><em class="iq">bug crowd</em></strong><em class="iq">&amp;举报了这个bug，并被归类为</em><strong class="jp ir"><em class="iq">【P1】</em></strong><em class="iq">以及一笔可观的4位数赏金。</em></p></blockquote><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/339e395e878089939cdcf8c06c341059.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*wYU2hda06wUEx7U4.gif"/></div></figure><p id="dafc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">报道:</strong>11月10日。</p><p id="cc17" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">不适用</strong>:11月13日。</p><p id="9217" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">三月:</strong>十一月十三日。</p><p id="f6ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">已解决:</strong>11月14日。</p><p id="d0d0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">希望你们喜欢这个。如有任何问题，请随时联系我，电话:<a class="ae ml" href="https://www.facebook.com/rafiahamed.rupak.3" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"/></a><strong class="jp ir"/>或<a class="ae ml" href="https://www.linkedin.com/in/rafi-ahamed" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> LinkedIn </strong> </a>。</p></div></div>    
</body>
</html>