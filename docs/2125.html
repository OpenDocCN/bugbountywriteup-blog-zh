<html>
<head>
<title>Get yourself a rooted Android Virtual Device (AVD)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">给你自己一个有根的Android虚拟设备(AVD)</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/get-yourself-a-rooted-android-virtual-device-avd-fb443d590dfa?source=collection_archive---------0-----------------------#2022-06-11">https://infosecwriteups.com/get-yourself-a-rooted-android-virtual-device-avd-fb443d590dfa?source=collection_archive---------0-----------------------#2022-06-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8883" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">总结<br/> </strong>在文章中，我将演示如何用最新的Android (AVD)版本(本文写作时的Android 12)创建一个新的根Android虚拟设备。根设备在渗透测试或逆向工程过程中非常有用。</p><p id="0aca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">免责声明<br/> </strong>本文仅用于信息和教育目的，并面向那些愿意并好奇了解安全性和渗透测试的人。内容不得用于非法目的。如果你准备好学习新的好东西，那么继续读下去。</p><p id="4b90" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">详情<br/> </strong>给物理(Android)设备找根的过程可能会非常困难。难度取决于设备供应商和硬件版本。有一点是肯定的，设备版本越新，就越难root。除了对物理设备进行根操作，还可以使用现成的Android根映像。这些现成的图片由谷歌在谷歌Play商店发布。</p><p id="77f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一节将展示如何在Kali Linux上安装Android Studio。然后，我们将向您展示如何创建自己的根Android虚拟设备(avd)。继续为Linux安装Android Debug Bridge (avd ),最后以root身份连接到目标设备。</p><p id="25bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此概念验证由1台机器组成:</p><p id="af4b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">- Kali Linux <br/> - IP地址:192.168.62.161</p><p id="a44d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意:安装需要大约10GB的磁盘空间。</p><p id="b9bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">安装开放的JDK (Java开发工具包)</strong></p><ol class=""><li id="4336" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">安装开放式JDK</li></ol><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="8f84" class="ld le iq kz b gy lf lg l lh li">sudo apt update &amp;&amp; sudo apt install openjdk-11-jdk</span></pre><p id="844a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">安装Android Studio </strong></p><p id="780c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Android Studio是为Android开发应用程序的官方集成开发环境。</p><p id="80af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.下载Android Studio tar文件(撰写本文时版本为2021.2.1.15)</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="4fa9" class="ld le iq kz b gy lf lg l lh li">firefox <a class="ae lj" href="https://developer.android.com/studio" rel="noopener ugc nofollow" target="_blank">https://developer.android.com/studio</a></span></pre><p id="92a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">或者</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="6ec8" class="ld le iq kz b gy lf lg l lh li">wget <a class="ae lj" href="https://redirector.gvt1.com/edgedl/android/studio/ide-zips/2021.2.1.15/android-studio-2021.2.1.15-linux.tar.gz" rel="noopener ugc nofollow" target="_blank">https://redirector.gvt1.com/edgedl/android/studio/ide-zips/2021.2.1.15/android-studio-2021.2.1.15-linux.tar.gz</a> -O $HOME/Downloads/android-studio-2021.2.1.15-linux.tar.gz</span></pre><p id="6418" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.将tar文件解压到/opt(或者您喜欢的其他目录)</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="2835" class="ld le iq kz b gy lf lg l lh li">cd $HOME/Downloads<br/>sudo tar -xvf android-studio-2021.2.1.15-linux.tar.gz -C /opt/</span></pre><p id="279d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.启动Android Studio并下载所有默认组件</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="0e79" class="ld le iq kz b gy lf lg l lh li">cd /opt/android-studio/bin<br/>./studio.sh</span></pre><p id="9fde" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在Android Studio安装的剩余过程中，会出现直观的提示和弹出窗口。我不打算把它们中的一些放在那里，这很容易。</p><p id="28e1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">-选择“不导入设置”<br/> -选择:标准设置<br/> -接受两个许可证</p><p id="1774" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦安装了Android Studio，您就可以创建您的第一个项目了。</p><p id="9b5f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">在Android Studio中创建一个新项目</strong></p><p id="27a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">5.点击按钮[新建项目]</p><figure class="ku kv kw kx gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lk"><img src="../Images/4dbe7a1a0f7512e688ff5553ec459952.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cLg8xAT0friWRvLC0Ows8w.png"/></div></div></figure><p id="40e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">6.选择电话/桌子和无活动</p><figure class="ku kv kw kx gt ll gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/e9373548d07c7c9af4b1185dd5eacde5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*epZWmtQjBrf-uiYLpOibQQ.png"/></div></figure><p id="d193" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">7.保留所有默认设置，然后单击[完成]</p><figure class="ku kv kw kx gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lt"><img src="../Images/9da63010347213748617c2aabf6edce7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vM9yu_hRhBFSvFRbi7xxcw.png"/></div></div></figure><p id="d750" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">8.可选；将主题改为浅色(我不喜欢深色主题)</p><p id="1651" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">转到视图&gt;快速切换方案..&gt;编辑配色方案&gt;智能照明</p><p id="c0d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">9.在工具栏中打开设备管理器</p><figure class="ku kv kw kx gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lu"><img src="../Images/ea66f81897c58b77b0b258b53557431c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vKtGlXbyNPGtB-q17RGqUg.png"/></div></div></figure><p id="9b55" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">10.选择虚拟选项卡，然后单击[创建设备]</p><figure class="ku kv kw kx gt ll gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/02491ba9150f235c33f02cf024951f2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*gvLX1wDIELep5zaATm7oFw.png"/></div></figure><p id="8687" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">11.选择类别电话，并选择您的硬件。例如像素2</p><figure class="ku kv kw kx gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lw"><img src="../Images/adbc30ee3056d21dca49a2ee064a149b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y67ie_vjlcerBfpAqQdu2w.png"/></div></div></figure><p id="282c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一步很重要！您需要选择一个Android映像来部署到Pixel2 Android虚拟硬件。选择名称中不包含“(GoogleAPI)”的图像。</p><p id="0823" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">12.突出显示x86 Images选项卡，并选择一个名称中没有“(Google APIs)”的映像。单击“下载”链接开始下载。这可能需要一些时间。</p><p id="dc48" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意下面的截图，我们已经下载了Android 12的图片。我们将继续这一形象。</p><figure class="ku kv kw kx gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lw"><img src="../Images/b9d541f7045e7bfaab972ae812655980.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lEedR2cZsoip6occtQ5k5Q.png"/></div></div></figure><p id="6f05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">13.从谷歌Play商店下载图像后，单击[下一步]。</p><figure class="ku kv kw kx gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lw"><img src="../Images/ef7d4e7647633e33a8c01f1d3f562489.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_jZZrhkUIY06OBzyWwfIkA.png"/></div></div></figure><p id="d72e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">14.提供一个AVD名称(例如“Pixel 2 API 31 root”)，然后单击Finish。</p><figure class="ku kv kw kx gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lw"><img src="../Images/576b78be049790624298d23abaf40fac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yrLEvm0DwpdvS1WXaMwEJQ.png"/></div></div></figure><p id="36e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在你已经准备好使用这个根AVD了。</p><p id="3849" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">启动根AVD </strong></p><p id="cb6e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以从Android Studio设备管理器中启动你的AVD。只需点击&gt;符号。</p><figure class="ku kv kw kx gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lw"><img src="../Images/a296b9418ee46ae79150b6c65680ee4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KVjpKOY47Pg0eIuImcGU6w.png"/></div></div></figure><p id="8a8b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就个人而言，我喜欢使用Android SDK工具中可用的仿真器命令行工具。Android SDK是一个软件开发工具包，包含一套全面的开发工具。其中包括调试器、库、基于QEMU的手机仿真器、文档、样本代码和教程。</p><p id="57bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">15.安装Android SDK</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="374f" class="ld le iq kz b gy lf lg l lh li">sudo apt update &amp;&amp; sudo apt install android-sdk</span></pre><p id="e65f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">16.列出可用的avd</p><p id="98e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">转到Android SDK工具目录($HOME/Android/Sdk/tools)并使用emulator命令列出avd</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="5c16" class="ld le iq kz b gy lf lg l lh li">cd /home/kali/Android/Sdk/tools/<br/>./emulator -list-avds</span></pre><figure class="ku kv kw kx gt ll gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/62d996e3a38d74612a80a0ff33af3482.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/1*Z4BZbiK__K36aHeKHERdfw.png"/></div></figure><p id="e3c7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">17.启动AVD“Pixel _ 2 _ API _ 31 _ root”</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="59ab" class="ld le iq kz b gy lf lg l lh li">./emulator @Pixel_2_API_31_root</span></pre><figure class="ku kv kw kx gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi ly"><img src="../Images/8cb29f0ecf2ae4940e9751e0daa1dfae.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*oJj3AO3v21s4s6oMOb2EQg.png"/></div></div></figure><p id="ccb1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">结果:</p><p id="3f13" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是带有Android API-31 (Android 12)的root Pixel-2。</p><figure class="ku kv kw kx gt ll gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/1109647884b520d6b6af279b623f82e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*Sl6wbFCVrK2ZVA6qGMV99A.png"/></div></figure><p id="b1cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以确认它安装的是最新的Android版本。</p><figure class="ku kv kw kx gt ll gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/0e2f0165986407133116d3d31903c912.png" data-original-src="https://miro.medium.com/v2/resize:fit:686/format:webp/1*a7k-_qQAPGVEJqrZaFGUJQ.png"/></div></figure><p id="0704" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">以root身份连接到AVD</strong></p><p id="a873" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后一步是使用Android Debug Bridge (adb)连接到这个设备，并切换到root用户。Android Debug Bridge是一个用于调试Android设备的工具。Android设备上的守护程序通过USB或TCP连接到主机PC上的服务器，主机PC通过TCP连接到最终用户使用的客户端。</p><p id="a681" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">18.安装Android调试桥</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="2d91" class="ld le iq kz b gy lf lg l lh li">sudo apt install android-tools-adb</span></pre><p id="1175" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">19.使用adb列出可用设备</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="0e02" class="ld le iq kz b gy lf lg l lh li">adb devices</span></pre><figure class="ku kv kw kx gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi mb"><img src="../Images/fb9ad8e677d4339d1fe38b1b579ac306.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RRJSP3rRkXf_H7MXI6WN4g.png"/></div></div></figure><p id="3f03" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">20.使用adb命令获得一个shell并切换到root</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="e5a4" class="ld le iq kz b gy lf lg l lh li">adb shell<br/>su</span></pre><figure class="ku kv kw kx gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi mc"><img src="../Images/76d67d81e168022a975aedbd39f86765.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wfM4dFtBHnV5kIo0fUnMBw.png"/></div></div></figure><p id="c469" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就是这样！</p><p id="b669" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望你喜欢这个博客。如果你去了，别忘了跟着我。此外，请查看我关于创建Android RAT的故事(https://medium . com/system-weakness/convert-a-legal-Android-app-to-an-Android-RAT-e 69 EB 8 cc 913d)</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h2 id="e6d6" class="ld le iq bd mk ml mm dn mn mo mp dp mq jy mr ms mt kc mu mv mw kg mx my mz na bi translated">来自Infosec的报道:Infosec每天都有很多内容，很难跟上。<a class="ae lj" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank">加入我们的每周时事通讯</a>以5篇文章、4个线程、3个视频、2个GitHub Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</h2></div></div>    
</body>
</html>