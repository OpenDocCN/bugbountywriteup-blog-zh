<html>
<head>
<title>Sticky Notes — H@cktivityCon 2021 CTF</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">便利贴2021年世界杯</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/sticky-notes-h-cktivitycon-2021-ctf-c0b6242a80fd?source=collection_archive---------1-----------------------#2021-09-18">https://infosecwriteups.com/sticky-notes-h-cktivitycon-2021-ctf-c0b6242a80fd?source=collection_archive---------1-----------------------#2021-09-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a357f3bed396b5b0c2385886df7d162a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5pYjV8kcCjW6mcqoA3uCIg.png"/></div></div></figure><p id="f840" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我是这次挑战中能够抓住旗帜的8支队伍之一，如果你试图黑掉它，但你做不到，别担心，我差点就放弃了。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kw"><img src="../Images/3ae16c5c172db335a60f9429a2e2c417.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*69ws1pfjff26Ekk-3EWY8A.png"/></div></div></figure><p id="00c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，侦察。</p><p id="d00f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们有两个服务，认证和便利贴应用。稍后您会看到OAuth有点棘手(它让我很头疼)。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/61551d4890b024c82746b48db314488f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5L71AFOxx-zq7FyrmxHXXg.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">便笺应用程序—主页面</figcaption></figure><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lg"><img src="../Images/41629f73a1d0f935650f28717044d5e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BWUKJdLQnyomS9M8pFwERw.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">便笺应用程序—ProFi ie</figcaption></figure><p id="faba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">像往常一样，我开始侦察创建一个帐户，并测试应用程序的主要功能。很快我向自己提出了一个问题，为什么ctf创建者在那个平台中加入了一个报告问题的特性？那没有意义…那个服务没有人为了阅读我的令人烦恼的问题而工作…</p><p id="a2a6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是……机器人呢？也许他们会放一些脚本来读取问题，也许我可以在那里执行一些代码。让我们试试…</p><p id="414b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我编写了一个简单的xss有效负载，并等待在我的burp collaborator客户机中收到请求。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lh"><img src="../Images/725b68da59e341e12cca13d5cff13668.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lgC8Tb5EWtQVboT82Jjqtg.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">这是一个无头铬合金(我之前以为)</figcaption></figure><p id="90dc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好了，现在我们知道这部分容易受到XSS的攻击，我们需要升级到该客户。所以我首先试图获得更多关于机器人背景的信息。易受攻击容器的Cookies、路径和Html..</p><figure class="kx ky kz la gt jr"><div class="bz fp l di"><div class="li lj l"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">用于从机器人窃取信息的脚本。</figcaption></figure><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lk"><img src="../Images/56be8a7bec1797f7937b725ae3440295.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-HVg281PcKBUs4FKfjgUTA.png"/></div></div></figure><p id="f75d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，看起来没有要检索的cookies，这是因为httponly标志，好吧，我们不能窃取会话并模拟它，但是……那么做一个xhr请求并泄漏笔记的内容或帐户的元数据呢？</p><div class="kx ky kz la gt ab cb"><figure class="ll jr lm ln lo lp lq paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/9faa4add62998873d94ffeb31a0874cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:914/format:webp/1*enmSFvOQcCte8GmBG39erQ.png"/></div></figure><figure class="ll jr lr ln lo lp lq paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/117b44864070307493f83833e3e6aa9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*NgBS7ST39W08gK63mc8o7Q.png"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk ls di lt lu translated">该机器人似乎没有登录:(</figcaption></figure></div><p id="9ad1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这里，我尝试了两件事，第一件是将用户重定向到oauth流，自定义重定向url到我的xss中毒页面，然后窃取代码，稍后在我这边使用……但是由于状态参数，这一操作失败了。每个用户在请求登录时都有一个独特的状态，当我使用一个时，页面说redirect_url无效…</p><p id="dd19" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我尝试的最后一件事是加载一个iframe，它将在后台为我登录用户，请求个人资料页面，并最终将其发送给burp collaborator。</p><figure class="kx ky kz la gt jr"><div class="bz fp l di"><div class="li lj l"/></div></figure><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lv"><img src="../Images/a5aadf371db8cc860dc15975e511c677.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mozrFpt405zKJ2vtglH-1Q.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">我们终于拿到了旗子！</figcaption></figure></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><p id="ae74" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就是所有的人！</p><p id="5665" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">跟我上去！—</p><p id="4c8b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae md" href="https://twitter.com/corraldev" rel="noopener ugc nofollow" target="_blank">https://twitter.com/corraldev</a></p><p id="1f6c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">https://hackerone.com/corraldev?type=user<a class="ae md" href="https://hackerone.com/corraldev?type=user" rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>