<html>
<head>
<title>TryHackMe- Chocolate Factory CTF Writeup (Detailed)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TryHackMe-CTF巧克力工厂报道(详细)</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/tryhackme-chocolate-factory-writeup-detailed-906767867be8?source=collection_archive---------0-----------------------#2021-01-21">https://infosecwriteups.com/tryhackme-chocolate-factory-writeup-detailed-906767867be8?source=collection_archive---------0-----------------------#2021-01-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/19900f91a9f7227fd73d7a1e85150f22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fLLe175VbHCtWGeDLs3XpA.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">CTF报道#26</figcaption></figure><p id="7f1b" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">欢迎各位！！<br/>我们将在<a class="ld le ep" href="https://medium.com/u/dc49a0a3cb16?source=post_page-----906767867be8--------------------------------" rel="noopener" target="_blank"> TryHackMe </a>做巧克力工厂CTF室。这是一个有趣，简单，美妙的盒子。您将学习侦察、枚举、隐写术、哈希破解、获取外壳和权限提升。</p><p id="9168" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">CTF链接:</p><p id="ffee" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><a class="ae lf" href="https://tryhackme.com/room/chocolatefactory" rel="noopener ugc nofollow" target="_blank">https://tryhackme.com/room/chocolatefactory</a></p><p id="f019" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">CTF由以下作者创作:</p><p id="c11a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><a class="ae lf" href="https://twitter.com/andyinfosec_?lang=en" rel="noopener ugc nofollow" target="_blank">https://twitter.com/andyinfosec_?lang=en</a></p><p id="8b5a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">为您的CTF计算机创建一个目录，并为Nmap创建一个目录来存储您的Nmap扫描输出。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lg"><img src="../Images/959429e59dcf94944a48629c0e03efd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ayuXmQWRasDqbBJ7-Tdbng.png"/></div></div></figure><p id="5d4f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">让我们潜入巧克力工厂吧！！享受冒险吧！！</p><figure class="lh li lj lk gt ju"><div class="bz fp l di"><div class="ll lm l"/></div></figure><h1 id="94c5" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">任务1-简介:</h1><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ml"><img src="../Images/8890ed59106c737c04f31bfc36e82339.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZCD15uu61vVpFGLnQAzRxA.png"/></div></div></figure><p id="fc48" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">最容易的任务😄。</p><blockquote class="mm mn mo"><p id="aec6" class="kf kg mp kh b ki kj kk kl km kn ko kp mq kr ks kt mr kv kw kx ms kz la lb lc im bi translated">部署机器。答:不需要回答。</p></blockquote><p id="2fae" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">威利·旺卡，查理来了！！继续前进…</p><figure class="lh li lj lk gt ju"><div class="bz fp l di"><div class="mt lm l"/></div></figure><h1 id="4c84" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">任务2-挑战:</h1><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mu"><img src="../Images/474915e8531e94425abe924ce10e6a03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B-ahv8s-CiqsDWtXZdN2oQ.png"/></div></div></figure><figure class="lh li lj lk gt ju"><div class="bz fp l di"><div class="mv lm l"/></div></figure><p id="1cdc" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">像往常一样，我们将从用我们最喜爱的扫描工具“Nmap”扫描目标开始。</p><h2 id="083b" class="mw lo it bd lp mx my dn lt mz na dp lx kq nb nc mb ku nd ne mf ky nf ng mj nh bi translated">Nmap扫描:</h2><p id="1018" class="pw-post-body-paragraph kf kg it kh b ki ni kk kl km nj ko kp kq nk ks kt ku nl kw kx ky nm la lb lc im bi translated">对于非常彻底的扫描(需要一点时间):</p><blockquote class="mm mn mo"><p id="c036" class="kf kg mp kh b ki kj kk kl km kn ko kp mq kr ks kt mr kv kw kx ms kz la lb lc im bi translated"><em class="it">nmap-sC-sV-p--在nmap/allports上&lt; TARGET_IP &gt; </em></p><p id="9a0b" class="kf kg mp kh b ki kj kk kl km kn ko kp mq kr ks kt mr kv kw kx ms kz la lb lc im bi translated">-sC:默认脚本<br/> -sV:版本检测<br/> -oN:输出将存储在您之前创建的“nmap”目录中<br/> -p-:要扫描的所有端口</p></blockquote><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nn"><img src="../Images/eedd7b610971755d8ad628c2adbff54c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ya7dj5DWoe6bdqZUbNQWTw.png"/></div></div></figure><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi no"><img src="../Images/d13a84fe67f69ddb8eec50d1bfdbd88c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2S-Wjf9L9MvjTHGJJDFTHg.png"/></div></div></figure><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi np"><img src="../Images/8ce32b2168bb7ed5da048736c62d27da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3ad1YubLBiTj4r3pycz6TQ.png"/></div></div></figure><p id="c2aa" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如果您仔细观察扫描输出，虽然它有点混乱，但可读性足够好，可以理解。旺卡先生暗示我们去别处看看，他希望我们不要淹死奥古斯都。虽然☺.的暗示没有用</p><p id="1051" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">快速识别开放端口(仅需2秒钟):</p><blockquote class="mm mn mo"><p id="6601" class="kf kg mp kh b ki kj kk kl km kn ko kp mq kr ks kt mr kv kw kx ms kz la lb lc im bi translated"><em class="it">nmap-Pn&lt;TARGET _ IP&gt;T14】</em></p><p id="70a4" class="kf kg mp kh b ki kj kk kl km kn ko kp mq kr ks kt mr kv kw kx ms kz la lb lc im bi translated">-Pn:没有ping，只有主机发现</p></blockquote><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nq"><img src="../Images/b062413bd6823e161f96ce22292c585b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zuW4sPRWhdoOfOsEWhbQaQ.png"/></div></div></figure><p id="2beb" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们将重点关注3个开放且最有趣的端口:<br/> 21/ftp- vsftpd 3.0.3(允许匿名登录)<br/>22/ssh-OpenSSH 7.6 P1<br/>80/http-Apache httpd 2 . 4 . 19</p><p id="2937" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">厉害！！让我们不要急于列举网络服务器。首先，让我们列举FTP，并找到任何潜在的信息或文件为我们布局。也许不是。我们最终会发现的。</p><h2 id="9bf0" class="mw lo it bd lp mx my dn lt mz na dp lx kq nb nc mb ku nd ne mf ky nf ng mj nh bi translated">FTP枚举:</h2><p id="f592" class="pw-post-body-paragraph kf kg it kh b ki ni kk kl km nj ko kp kq nk ks kt ku nl kw kx ky nm la lb lc im bi translated">我们将以“匿名”用户的身份使用“匿名”密码登录FTP。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/02a40d282062c35515e5262bfa4f0040.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*4ioeVzzaxI8kjT5fdXUPNQ.png"/></div></figure><p id="3447" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">太棒了！！所以我们登录了FTP。我们可以使用' ls '来列出文件。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ns"><img src="../Images/4b2e5e6d9f1139ee0af7c0761904b610.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uWowzuK8Cb2E82UiqqR_Ew.png"/></div></div></figure><p id="5c95" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">只有一个图像文件。我们可以把它转移到我们的主机上。</p><blockquote class="mm mn mo"><p id="469e" class="kf kg mp kh b ki kj kk kl km kn ko kp mq kr ks kt mr kv kw kx ms kz la lb lc im bi translated">获取<file_name/></p></blockquote><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nt"><img src="../Images/7689123fa432cfa74092716e2215f0a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AujPWsTK60cHIx7S4amUCw.png"/></div></div></figure><p id="63f6" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">请记住，在我们退出之前，一定要检查FTP中隐藏的文件或目录。有时我们可能会错过一些包含重要信息的东西。我们使用' ls -la '列出所有文件，包括隐藏文件。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nu"><img src="../Images/d4b722f2719f115fd85ba1738a3bb73d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dNWo2ONvx1IzksJOeR_QQA.png"/></div></div></figure><p id="dddf" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">没有隐藏。没关系，我们可以继续了。</p><p id="abf0" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">让我们分析一下我们得到的文件。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nv"><img src="../Images/b791d457f7db401b81c251384dcd98d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wEqpHEhCA0lWDRHe6tWtkg.png"/></div></div></figure><p id="7913" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">不错！！只是一个众所周知的口香糖的图像，我们可能至少试过一次。不管怎样，我们也许可以在这幅图像中寻找隐藏的东西。我的首选steg工具是steghide和exiftool。Steghide将从图像中提取信息/文件，exiftool将从图像中提取元数据。</p><p id="82c1" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如果您尚未安装这两种软件，您可以通过以下方式进行安装:</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/3ea2f39894cb5a5709fa2330c5d9cd85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*TjKutIfZgdt2ZvOIGYMQzQ.png"/></div></figure><p id="98a6" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">让我们用隐藏来隐藏它。</p><blockquote class="mm mn mo"><p id="1bf3" class="kf kg mp kh b ki kj kk kl km kn ko kp mq kr ks kt mr kv kw kx ms kz la lb lc im bi translated">隐写提取物-sf <file _name=""/></p></blockquote><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/6b184baf6d4b45ab47adc191715c1ac0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*OdnzqPk4HQ9mmPex6JY7-g.png"/></div></figure><p id="ef70" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">太棒了。！该图像未受密码保护。点击回车键，隐藏的文件被提取出来。我们去看看！看起来像是base64编码的哈希。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ny"><img src="../Images/6dab96c9287d861a72d72c1cb838b557.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NsTwc3z1tGmnJNqzKm-p3A.png"/></div></div></figure><p id="5d51" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">是的，是base64。我们需要解码。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/c4111b0ca59b667c3a84dd57ab256810.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*JWHIXciWKeBWF1YMbvtzLg.png"/></div></figure><p id="c6a7" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">哇！！那是编码成base64的/etc/shadow文件。向下滚动一点，我们将找到用户“charlie”的散列。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oa"><img src="../Images/64367376bfaaee339ec074d22d618f08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GSkWIY0U51I4JG-v1DcnGw.png"/></div></div></figure><p id="72b9" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">复制它，保存在一个文件中。使用nano编辑器。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ob"><img src="../Images/c8f5ecf78749e71ed06f4f9a538959f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GFDEb5Mg_J0ZpVyMu3wXvw.png"/></div></div></figure><p id="2c89" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们可以旋转臭名昭著的“开膛手约翰”工具来解密哈希。以$6$开始的散列是SHA-512地穴。我使用“rockyou”单词表进行解密。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oc"><img src="../Images/02d3bbd56e5b55300b3dec80f1446935.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*THz9VndfJeNtce8Xx856Hg.png"/></div></div></figure><figure class="lh li lj lk gt ju"><div class="bz fp l di"><div class="od lm l"/></div></figure><p id="9939" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">太棒了，我们已经得到了用户“查理”的密码。注意:解密用了7分14秒。因此我会建议你让它在后台运行。</p><p id="d625" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">让我们提交任务的答案。</p><blockquote class="mm mn mo"><p id="e5f5" class="kf kg mp kh b ki kj kk kl km kn ko kp mq kr ks kt mr kv kw kx ms kz la lb lc im bi translated">查理的密码是什么？<br/>答:XXXXXX</p></blockquote><p id="d032" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们可以开始枚举运行在端口80上的web服务器。😄我们到现在都没有检查过网络服务器。</p><p id="abfc" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们可以在网络服务器上快速启动gobuster。</p><h2 id="66cd" class="mw lo it bd lp mx my dn lt mz na dp lx kq nb nc mb ku nd ne mf ky nf ng mj nh bi translated">Gobuster:</h2><blockquote class="mm mn mo"><p id="7b2d" class="kf kg mp kh b ki kj kk kl km kn ko kp mq kr ks kt mr kv kw kx ms kz la lb lc im bi translated"><em class="it">gobuster dir-u http://&lt;TARGET _ IP&gt;-w&lt;PATH _ TO _ word list&gt;-o&lt;OUTPUT _ FILE _ NAME&gt;-x&lt;EXTENSIONS&gt;T3】</em></p><p id="2e3a" class="kf kg mp kh b ki kj kk kl km kn ko kp mq kr ks kt mr kv kw kx ms kz la lb lc im bi translated">-u : URL <br/> -w:单词列表<br/> -q:安静，无声扫描。将隐藏横幅<br/> -o:输出将存储在目录<br/> -x:搜索扩展名，如html，txt，php，phtml等</p></blockquote><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oe"><img src="../Images/4ea48392aeaa0dc7d675573aff2a9e1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rert84-Uzf78rhZ4T4i_mw.png"/></div></div></figure><blockquote class="mm mn mo"><p id="2edb" class="kf kg mp kh b ki kj kk kl km kn ko kp mq kr ks kt mr kv kw kx ms kz la lb lc im bi translated">导航到http:// <target_ip/></p></blockquote><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi of"><img src="../Images/548545c9ee89d172be88b63094ae47a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O1UflIDQP83tVEetlO1yIA.png"/></div></div></figure><p id="e054" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们有一个登录提示。我们有用户名“查理”和密码是XXXXX。输入凭据并登录。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi og"><img src="../Images/d007761a7eb6d2cfb982db653fbfe54c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*nvp5Db5eBepAZFrP0loDAQ.png"/></div></figure><blockquote class="mm mn mo"><p id="487f" class="kf kg mp kh b ki kj kk kl km kn ko kp mq kr ks kt mr kv kw kx ms kz la lb lc im bi translated">重定向至http:// <target_ip> /home.php</target_ip></p></blockquote><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oh"><img src="../Images/fac8d33170dd75e8054427e3f98187b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*toEQFocAlcYj-7jLTyqZJw.png"/></div></div></figure><p id="24c5" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们重定向到的页面早些时候被gobuster发现了。我们可以在机器中发出命令，这些命令将在目标的web服务器上执行。厉害！！我们继续吧。始终使用基本命令来查看一些是否被列入黑名单。以“ls”开头。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oi"><img src="../Images/5faf084fcb3cf9b8fa008d452c6ec060.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vvoxvgYI2EY0h60jWLs0QQ.png"/></div></div></figure><p id="8b7b" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">伟大的so 'ls作品。嗯。看起来key_rev_key文件有我们在任务中需要提交的密钥。我们能“猫”吗？</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oj"><img src="../Images/2a5b20f1d603a4dc1fbe7a90afc2f5b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t96psaGKx4OyhsKIpejV6Q.png"/></div></div></figure><p id="9c27" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这是一个可执行文件，它是乱码，因此我们将尝试'字符串',所以它可以显示我们人类可读格式的输出。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ok"><img src="../Images/8277519a51b2e2d3022481f721fdb6e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XVJHqpItVGyOMT5GkWk8OA.png"/></div></div></figure><p id="9918" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">仔细看，你会看到关键。<br/>提交吧。</p><blockquote class="mm mn mo"><p id="9224" class="kf kg mp kh b ki kj kk kl km kn ko kp mq kr ks kt mr kv kw kx ms kz la lb lc im bi translated">输入您找到的密钥！<br/>答:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</p></blockquote><p id="a076" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">太好玩了！！目标是在目标机器上获得立足点或外壳。我们可以通过注入一个恶意的反向shell脚本来实现这一点，该脚本将使用“netcat”监听器执行并获得一个shell。我找到反向shell脚本的途径是pentestmonkey网站。</p><div class="ol om gp gr on oo"><a href="http://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">反向外壳备忘单</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">如果你足够幸运，在渗透测试中发现了一个命令执行漏洞，不久之后…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">pentestmonkey.net</p></div></div></div></a></div><p id="aa59" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">复制python反向shell脚本并粘贴，修改主机的IP和端口值。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ox"><img src="../Images/f1e954e06f8f869ee5de4463815de32a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d-eXzNIdMyKCq6dd9bJC9A.png"/></div></div></figure><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/be836fee00cb7c8b142b6a83ec56c7e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*C6Axv39YHpwAg50StfKVJg.png"/></div></figure><p id="0467" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">启动netcat监听器。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/f4e1b6038e55921cf96bd00bfcb76982.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*64ouSzTx7AAZh_5zP5w74Q.png"/></div></figure><p id="2702" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">单击执行。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/a941d69750c67028d755b3f73cafa941.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*AWlpXpeQzfbs8suKde4o2Q.png"/></div></figure><p id="fa00" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">检查回监听器。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pb"><img src="../Images/3b86a78d447e55ec3467085c98156ba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kwrNY_vLAk9kWkjZgyKEvw.png"/></div></div></figure><figure class="lh li lj lk gt ju"><div class="bz fp l di"><div class="pc lm l"/></div></figure><p id="4801" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">瞧啊。我们成功获得了壳牌。<br/>但是壳不是稳定的壳。<br/>我们如何获得稳定的外壳？让我给你带路。</p><blockquote class="mm mn mo"><p id="06f3" class="kf kg mp kh b ki kj kk kl km kn ko kp mq kr ks kt mr kv kw kx ms kz la lb lc im bi translated">$ python-c ' import pty；pty . spawn("/bin/bash ")'<br/>Ctrl+Z<br/>stty raw-echo<br/>fg<br/>export TERM = xterm</p></blockquote><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pd"><img src="../Images/fe9c7e289c95b2890301cdf737eb9eb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JiGwdatVc_IYkaQSIpRIEQ.png"/></div></div></figure><p id="19f9" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们现在有一个稳定的外壳。<br/>上面的命令可以让你通过TAB键自动完成，清空屏幕，在shell中轻松导航。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/69b632fc692a8f15d78a07d7eeabb9a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*wAIiOf40vRvNlwYnkQCERw.png"/></div></figure><p id="be75" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们在“查理”的主目录中有3个文件。我们需要用户标志。我假设它不会让我们执行它，因为我们是用户“查理”。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/1c91863e723b43e8715bbebe90084b90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*adsNB_pfDKbA9ka0PDYL6Q.png"/></div></figure><p id="92b5" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">确实不会。让我们检查一下其他文件。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pg"><img src="../Images/acde0d6682453a97b1026a586e913a49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EJhJqVjjf5YZkmktRSSDYA.png"/></div></div></figure><p id="45ac" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">宏伟！！我们已经获得了SSH密钥，用于以用户“charlie”的身份登录。</p><p id="c8fa" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">让我们完成它。而且，它回答下一个任务。</p><p id="d4d2" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">复制SSH密钥，使用nano创建文件，粘贴密钥，保存[Ctrl+O]并退出[Ctrl+X]。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ph"><img src="../Images/2416e4a39afbee43aa6111a08111d354.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dvspH4Ce38hmxKGqGN_x4Q.png"/></div></div></figure><p id="95de" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在我们SSH之前，我们需要给密钥权限</p><blockquote class="mm mn mo"><p id="cf48" class="kf kg mp kh b ki kj kk kl km kn ko kp mq kr ks kt mr kv kw kx ms kz la lb lc im bi translated">chmod 600 id_rsa</p></blockquote><p id="1a1c" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">然后我们就可以用钥匙登录查理了。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/8be1c45df0c42e365838b088ddd169f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1348/format:webp/1*pWm6sPJe8rvvdUcpSVew4Q.png"/></div></figure><figure class="lh li lj lk gt ju"><div class="bz fp l di"><div class="pj lm l"/></div></figure><p id="2c46" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">不错！！我们现在是查理了。因此，完成下一个任务，我们走了。</p><blockquote class="mm mn mo"><p id="75bf" class="kf kg mp kh b ki kj kk kl km kn ko kp mq kr ks kt mr kv kw kx ms kz la lb lc im bi translated">将用户改为charlie <br/>答:不需要回答。</p></blockquote><p id="28a7" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">让我们捕获用户标志。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/dc80667fa5cce5b4d29c8968b693c541.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*HNXpmjzKqzKBf3lYPW5TzA.png"/></div></figure><p id="c0b9" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">干得好！！我们已经得到了用户标志。在任务中提交。</p><blockquote class="mm mn mo"><p id="f414" class="kf kg mp kh b ki kj kk kl km kn ko kp mq kr ks kt mr kv kw kx ms kz la lb lc im bi translated">输入用户标志<br/>Ans:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</p></blockquote><p id="4299" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在怎么办？是的，你认为是对的。像任何其他CTF的最终目标是成为根通过升级特权和检索根旗帜。</p><p id="13b9" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们将开始列举任何潜在的攻击媒介。我总是使用“sudo -l”命令来查看是否有用户有权以root身份执行的命令或二进制文件。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pl"><img src="../Images/b8380fc8a85d2d94d786e71a370357e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CAQa6fkZeK2pILNOdbmndw.png"/></div></div></figure><p id="8fc0" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">太好了！“vi”二进制文件可以由用户charlie以root用户身份运行。<br/>GTFObins是我查找权限提升命令的首选。很多时候，这些命令非常管用，可以帮助我们提升权限。</p><div class="ol om gp gr on oo"><a href="https://gtfobins.github.io/" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">GTFOBins</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">GTFOBins是Unix二进制文件的精选列表，可用于在错误配置的环境中绕过本地安全限制…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">gtfobins.github.io</p></div></div><div class="pm l"><div class="pn l po pp pq pm pr jz oo"/></div></div></a></div><p id="97ce" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">搜索“vi”。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ps"><img src="../Images/947965de4d3e38f0a9c867562a3b1716.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HoHLlbWSeFGUNa1FNd6e7Q.png"/></div></div></figure><p id="91e5" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">复制命令。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pt"><img src="../Images/1e621f749ef588f6d7110b5e4502cb53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NfuWNOWmbMkRxDkNz40y5w.png"/></div></div></figure><p id="f6be" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">将它粘贴到终端中，然后按回车键。手指交叉！</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pu"><img src="../Images/cb74a69b4729a435694739f59fb18b2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n5EF3_dwapPbRu-2nS0BYQ.png"/></div></div></figure><p id="74b3" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们已经成功提升了权限。让我们抓住根旗，我们可以给巧克力工厂的冒险一个快乐的结局。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi pv"><img src="../Images/e3ae6a40a1d3471282dea03004c397ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:288/format:webp/1*NObLKh2hv4sKD6P2CZmNSw.png"/></div></figure><p id="85eb" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">嗯（表示踌躇等）..有一个python脚本，而不是带有根标志的文本文件。<br/>我们可以执行脚本并查看它的交互。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi pw"><img src="../Images/3c8dd43ad9931a047f03b6eef5b742a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*gMq42pxjfCBVxfbbfSJ0mQ.png"/></div></figure><p id="ee8a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">它需要输入一个有效的密钥，以便为我们提供根标志。阿汉！钥匙！也许它需要的密钥就是我们在任务中提交的密钥。让我们从任务列表中复制它，并将其作为一个键粘贴到“root.py”脚本中，看看它是否有效。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi px"><img src="../Images/0e74a3256859d22dd2582f17d937ed05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UHUNP8uboUmK80IqAsZBNA.png"/></div></div></figure><p id="5922" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">进入！</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi py"><img src="../Images/fbaaaa877e0a88cf0cf9e333e7eaa4c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sn73sbiOw9z0oZak_rA-lQ.png"/></div></div></figure><figure class="lh li lj lk gt ju"><div class="bz fp l di"><div class="pz lm l"/></div></figure><p id="8909" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">SuP3r-Aw3s0mE！！</p><p id="f9c9" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们已经拿到了钥匙。提交吧。</p><blockquote class="mm mn mo"><p id="e02b" class="kf kg mp kh b ki kj kk kl km kn ko kp mq kr ks kt mr kv kw kx ms kz la lb lc im bi translated">输入根标志<br/>Ans:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</p></blockquote><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi qa"><img src="../Images/2e625e2e2a75bc754019b9958ef923d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/0*TMtQSydUftUEGRRT.png"/></div></figure><p id="b1ea" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">祝贺我们完成了房间。那是史诗般的乐趣。</p><p id="556d" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我相信很多人可以在相当短的时间内完成盒子，但我的方法是列举出一个盒子。然而，我非常喜欢扎根于此，而不是写一篇详细的文章来帮助我的有志黑客同伴学习网络安全。</p><p id="94e5" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我会建议每个人都尝试一下这个房间，我相信你会学到一些新的东西。</p><p id="f988" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如果你喜欢这篇文章，并且这篇文章对你有所帮助，请在评论中告诉我，或者用掌声分享你的爱。</p><figure class="lh li lj lk gt ju"><div class="bz fp l di"><div class="qb lm l"/></div></figure><p id="f322" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">谢谢你抽出时间。</p><p id="bf29" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">跟着我。</p><p id="c17b" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在推特上关注我:<br/><a class="ae lf" href="https://twitter.com/hhassansheikhh" rel="noopener ugc nofollow" target="_blank">https://twitter.com/hhassansheikhh</a></p><p id="a04b" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">给我买杯咖啡:<br/>【https://www.buymeacoffee.com/hshoscp2021 T4】</p><p id="9c9a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">更多的报道正在进行中。</p><p id="a419" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">保重，注意安全，继续黑！</p><p id="9399" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu">-哈桑·谢赫</strong></p></div></div>    
</body>
</html>