<html>
<head>
<title>Pentesting in the Clouds: Introducing AriaCloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">云中的测试:引入AriaCloud</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/pentesting-in-the-clouds-introducing-ariacloud-58cb5cc1c50d?source=collection_archive---------3-----------------------#2020-08-01">https://infosecwriteups.com/pentesting-in-the-clouds-introducing-ariacloud-58cb5cc1c50d?source=collection_archive---------3-----------------------#2020-08-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="c5d0" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">今天的天气预报说会有一个多云和红色的对手</h2><div class=""/><div class=""><h2 id="4f32" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">用于远程测试的Docker容器</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/5594ac71ac7e1788b1f1bf4b91ec544e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s6yGdXwsLc7OMESHYgJaHQ.jpeg"/></div></div></figure><p id="150a" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi lw translated">一个 <a class="ae mf" href="https://github.com/iknowjason/ariacloud" rel="noopener ugc nofollow" target="_blank"> riaCloud </a>是为远程测试而构建的Docker容器。从它的Github <a class="ae mf" href="https://github.com/iknowjason/ariacloud" rel="noopener ugc nofollow" target="_blank">主页</a>:</p><blockquote class="mg mh mi"><p id="95b5" class="la lb mj lc b ld le ka lf lg lh kd li mk lk ll lm ml lo lp lq mm ls lt lu lv ij bi translated">Aria Cloud是一个Docker容器，非常适合通过SSH或RDP进行远程测试，主要侧重于云安全工具，其次是活动目录工具。在需要通过RDP或SSH进行远程访问的情况下，将它用于假定的违规测试，或者用于简单的AD实验室测试。它是为需要使用SSH或RDP远程访问容器，然后运行其安全工作流(即云环境)的使用情形而构建的。该报告还包括一个自动化的Terraform模板+ Ansible剧本，以部署Aria Cloud作为运行在Ubuntu Linux虚拟机上的容器，通过RDP远程访问。</p></blockquote></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><p id="c4b8" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在这篇文章中，我将快速介绍它是什么，并展示一个演示。完整的文档可以在<a class="ae mf" href="https://github.com/iknowjason/ariacloud" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="619e" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">免责声明</strong>:请不要将你在本文中学到的任何东西用于未经授权或非法的目的。在对网络运行此工具之前，请确保获得网络所有者的许可。</p><h1 id="d73c" class="mu mv iq bd mw mx my mz na nb nc nd ne kf nf kg ng ki nh kj ni kl nj km nk nl bi translated">用例</h1><p id="8396" class="pw-post-body-paragraph la lb iq lc b ld nm ka lf lg nn kd li lj no ll lm ln np lp lq lr nq lt lu lv ij bi lw translated"><span class="l lx ly lz bm ma mb mc md me di"> B </span>除了有一个有趣的研究工具来试验Docker网络，我还想为以下用例开发一个基础设施测试工具:</p><ol class=""><li id="51d0" class="nr ns iq lc b ld le lg lh lj nt ln nu lr nv lv nw nx ny nz bi translated"><strong class="lc ja">云渗透测试工具:</strong>一个docker pentest容器，包含了很多云安全pentest工具。这使得该容器对于以云为中心的安全评估非常有用。您可以随意派生、克隆它，并添加您想要的任何工具。</li><li id="b87e" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv nw nx ny nz bi translated"><strong class="lc ja">支持RDP和SSH的远程测试:</strong> SSH或RDP进入容器，通过内部局域网运行您的任务。该项目提供了两个独立的映像，它们是为使用SSH或RDP进行远程访问而预先构建的。该容器通过主机IP地址公开一个SSH或RDP服务，并且只需要一个docker run命令。RDP配置使用XRDP，并已被证实与微软RDP客户端和Rdesktop linux客户端配合良好。</li><li id="be73" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv nw nx ny nz bi translated"><strong class="lc ja">假定违规渗透测试:</strong>围绕“假定违规渗透测试”服务或“假定凭据泄露”服务的需求日益增长。特别是在新冠肺炎疫情，更换现场顾问是必不可少的。有了这个，评估员可能会运送一台笔记本电脑或一个小型机箱(例如，英特尔NUC、System76 Meerkat)。pentest box可以建立到pentest基础设施的持久auto-ssh反向外壳，避免入站NAT或防火墙问题。或者，他们可能只是使用客户端的VPN，远程访问为pentest准备的虚拟机。这个docker容器可以帮助满足这些需求，但方式不同。客户端简单地安装Docker，您为容器提供一些简单的运行时指令。然后，您可以通过SSH或RDP进入它，并访问客户端的网络。您甚至可以配置容器来运行到您的基础设施的自动SSH反向SSH隧道，或者(更简单的选项)使用<a class="ae mf" href="https://ngrok.com/" rel="noopener ugc nofollow" target="_blank"> ngrok </a>来暴露防火墙后面的RDP/SSH隧道。与运送硬件或装载虚拟机相比，容器更加轻量、灵活和便携。</li><li id="09af" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv nw nx ny nz bi translated"><strong class="lc ja">云培训实验室或网络靶场:</strong> AriaCloud支持使用Terraform模板在Azure中自动部署。它也包含在活动目录网络<a class="ae mf" href="https://github.com/iknowjason/juliart" rel="noopener ugc nofollow" target="_blank">范围</a>中。您可以在自己的云环境中使用它进行训练和攻击模拟。</li></ol></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><p id="0668" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">但是这与其他docker容器和虚拟化安全工具有什么不同呢？我很高兴你问了这个问题，因为我总是喜欢在决定构建新的东西之前对现有的工具做一些研究。首先，进攻性安全部门的优秀人员已经并将继续用Kali Linux做出惊人的成绩。大声喊出来，向那些人脱帽致敬。所以这个容器是建立在Kali Linux上的，当然:-)如果你需要的话，Azure和Amazon市场上都有Kali Linux VM。</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><p id="25dd" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">AriaCloud支持RDP，它是一个docker容器。如果您还没有玩过容器，它们非常灵活、可移植，而且功能强大。它包含了包中的所有依赖项，可以轻松快速地共享或定制。还有几个其他社区pentesting码头集装箱。这款产品的不同之处在于，它打包了许多云评估工具，并且还支持远程RDP，这与其他产品略有不同。您可以用一个命令运行它，而不必在启动支持远程访问的服务之前先连接到控制台。SSH或RDP服务自动启动，XRDP配置已经调优并与容器捆绑在一起。提供Kali Linux菜单是显而易见的，不仅仅是对喜欢GUI的人。问题是有一些我喜欢的图形数据库工具，比如需要Neo4J的Bloodhound。新的RoadTools Azure评估工具在localhost上使用web浏览器，因此该功能对于其他需要在localhost上使用本地UI的基于浏览器的工具来说非常好。</p><h1 id="252d" class="mu mv iq bd mw mx my mz na nb nc nd ne kf nf kg ng ki nh kj ni kl nj km nk nl bi translated">图像中包含的工具</h1><ul class=""><li id="9ebf" class="nr ns iq lc b ld nm lg nn lj of ln og lr oh lv oi nx ny nz bi translated">元包:kali-linux-core、kali-linux-top10、kali-desktop-core</li><li id="d570" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">xRDP和SSH(用于远程访问)</li><li id="4068" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">socat，powershell 7，smbclient</li><li id="6742" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">AWS cli工具(AWS、s3cmd)</li><li id="3acf" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">Azure cli工具(az)</li><li id="f5bf" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">谷歌云平台cli工具(gcloud，kubectl)</li><li id="caab" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">道路工具(<a class="ae mf" href="https://github.com/dirkjanm/ROADtools" rel="noopener ugc nofollow" target="_blank">https://github.com/dirkjanm/ROADtools</a>)</li><li id="4eb2" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">风暴观察者(【https://github.com/Azure/Stormspotter】T2</li><li id="2de9" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">童子军套件(【https://github.com/nccgroup/ScoutSuite】T4</li><li id="428f" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">云_枚举(<a class="ae mf" href="https://github.com/initstring/cloud_enum" rel="noopener ugc nofollow" target="_blank">https://github.com/initstring/cloud_enum</a>)</li><li id="cd1c" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">cloud mapper(<a class="ae mf" href="https://github.com/duo-labs/cloudmapper" rel="noopener ugc nofollow" target="_blank">https://github.com/duo-labs/cloudmapper</a>)</li><li id="8f10" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">桶流(<a class="ae mf" href="https://github.com/eth0izzle/bucket-stream" rel="noopener ugc nofollow" target="_blank">https://github.com/eth0izzle/bucket-stream</a>)</li><li id="24cd" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">帕库(<a class="ae mf" href="https://github.com/RhinoSecurityLabs/pacu" rel="noopener ugc nofollow" target="_blank">https://github.com/RhinoSecurityLabs/pacu</a>)</li><li id="404c" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">维达尔(<a class="ae mf" href="https://github.com/carnal0wnage/weirdAAL" rel="noopener ugc nofollow" target="_blank">https://github.com/carnal0wnage/weirdAAL</a></li><li id="51fa" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">邪恶-winrm(<a class="ae mf" href="https://github.com/Hackplayers/evil-winrm" rel="noopener ugc nofollow" target="_blank">https://github.com/Hackplayers/evil-winrm</a>)</li><li id="a4a6" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">Impacket Python库和工具(<a class="ae mf" href="https://github.com/SecureAuthCorp/impacket" rel="noopener ugc nofollow" target="_blank">https://github.com/SecureAuthCorp/impacket</a>)</li><li id="a353" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">尼奥4j(<a class="ae mf" href="https://neo4j.com/" rel="noopener ugc nofollow" target="_blank">https://neo4j.com/</a>)</li><li id="9eaf" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">猎犬号(【https://github.com/BloodHoundAD/BloodHound】T2</li><li id="8760" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">猎犬(【https://github.com/DefensiveOrigins/PlumHound】T4</li><li id="b3ea" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">Fox-IT Bloodhound-python数据入口(<a class="ae mf" href="https://github.com/fox-it/BloodHound.py" rel="noopener ugc nofollow" target="_blank">https://github.com/fox-it/BloodHound.py</a>)</li><li id="236a" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">git leaks(<a class="ae mf" href="https://github.com/zricethezav/gitleaks" rel="noopener ugc nofollow" target="_blank">https://github.com/zricethezav/gitleaks</a>)</li><li id="baeb" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">shh git(<a class="ae mf" href="https://github.com/eth0izzle/shhgit" rel="noopener ugc nofollow" target="_blank">https://github.com/eth0izzle/shhgit</a></li><li id="23e0" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">吉特罗布(<a class="ae mf" href="https://github.com/michenriksen/gitrob" rel="noopener ugc nofollow" target="_blank">https://github.com/michenriksen/gitrob</a>)</li><li id="03ec" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">松露猪(<a class="ae mf" href="https://github.com/dxa4481/truffleHog" rel="noopener ugc nofollow" target="_blank">https://github.com/dxa4481/truffleHog</a>)</li><li id="136a" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">探秘(<a class="ae mf" href="https://github.com/Yelp/detect-secrets" rel="noopener ugc nofollow" target="_blank">https://github.com/Yelp/detect-secrets</a>)</li><li id="9e4b" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">风疹(<a class="ae mf" href="https://github.com/GhostPack/Rubeus" rel="noopener ugc nofollow" target="_blank">https://github.com/GhostPack/Rubeus</a>)</li><li id="af90" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv oi nx ny nz bi translated">米米卡茨(<a class="ae mf" href="https://github.com/gentilkiwi/mimikatz" rel="noopener ugc nofollow" target="_blank">https://github.com/gentilkiwi/mimikatz</a></li></ul><h1 id="5199" class="mu mv iq bd mw mx my mz na nb nc nd ne kf nf kg ng ki nh kj ni kl nj km nk nl bi translated">浏览在RDP支持下构建它的演示</h1><p id="d4c1" class="pw-post-body-paragraph la lb iq lc b ld nm ka lf lg nn kd li lj no ll lm ln np lp lq lr nq lt lu lv ij bi translated">现在是有趣的事情。让我们展示一个在RDP支持下部署它的演示。在这个例子中，我们将从我的Docker Hub容器注册中心下载它，并在RDP用例中运行它。我目前正在安装了docker的Ubuntu Linux 20.04虚拟机上运行这个测试。</p><p id="c581" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">步骤1: </strong>发出docker pull命令，从容器存储库中下载它:</p><pre class="kp kq kr ks gt oj ok ol om aw on bi"><span id="1e05" class="oo mv iq ok b gy op oq l or os">docker pull iknowjason/aria-rdp:latest</span></pre><p id="4124" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">拉取完成后，它应该是这样的:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ot"><img src="../Images/671b470f993385bb438b024093e0f650.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YGxpe0_wC0zYEcmtqCxSHA.png"/></div></div></figure><p id="0d68" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">步骤2: 发出这个命令来运行它。这将绑定RDP端口，并在运行Docker:</p><pre class="kp kq kr ks gt oj ok ol om aw on bi"><span id="a7b2" class="oo mv iq ok b gy op oq l or os">docker run -d --name myname2 -p 3389:3389 iknowjason/aria-rdp:latest</span></pre><p id="5908" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">步骤3: </strong>验证监听端口:</p><pre class="kp kq kr ks gt oj ok ol om aw on bi"><span id="7d89" class="oo mv iq ok b gy op oq l or os">docker port myname2</span></pre><p id="43d6" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">结果应该是这样的:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/dc32e316f7c9f8e7ff9a1a9d41fb975e.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*3ZKxjlfqurad7I01fJbBHQ.png"/></div></figure><p id="36f5" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">步骤4: </strong>获取您的Docker主机的IP地址，该地址将用于RDP客户端。在我的例子中，我运行的是带NAT的Ubuntu虚拟机，我的虚拟机主机实际上是Windows 10。我会RDP到Ubuntu虚拟机访客的NAT IP地址。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/99b82eda49ba27adfe1283d2a1cf97a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*b63njbhp21215CLCXFqAow.png"/></div></figure><p id="1f7f" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">第5步:</strong>使用您的RDP客户端将RDP放入容器，让神奇的事情发生。在这种情况下，我使用如下所示的<strong class="lc ja"> <em class="mj"> mstsc </em> </strong>:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/456ee5ba3d3ae1cb4db020e5dfaed156.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*3hq4D9ZYpjyiUr9q9R2uZQ.png"/></div></figure><p id="ae9f" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">选择“是”接受默认证书。</p><p id="2c00" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">RDP提示符将如下所示。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/8c99c5b9dd06c278a2ec41a14e3f04d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*Z20yEY6M1AMqBMYirbyfDg.png"/></div></figure><p id="4870" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">用户名:</strong>咏叹调</p><p id="33db" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">密码:</strong>！aria123！</p><p id="8d10" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">认证后，你会看到几个小错误(在我的任务列表上)，但之后你会看到一个漂亮的Kali Linux菜单:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oy"><img src="../Images/1c7de27571221e8d2c472acf19d0a9d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NG79K7bf5J6Ufprasqy7gQ.png"/></div></div></figure><p id="d148" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">大多数工具都被安装到一个标准的<strong class="lc ja"> <em class="mj"> /usr/local/bin </em> </strong>路径中。对于一些特殊的工具，它们被安装到<strong class="lc ja"> <em class="mj"> /opt </em> </strong>目录中，如下图所示:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/0cce180b2c5ef889cc50c86495513502.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*xABhkfNZ7k1KAALuXCoEjQ.png"/></div></figure><h1 id="8b8e" class="mu mv iq bd mw mx my mz na nb nc nd ne kf nf kg ng ki nh kj ni kl nj km nk nl bi translated">Azure广告:道路工具</h1><p id="1b5b" class="pw-post-body-paragraph la lb iq lc b ld nm ka lf lg nn kd li lj no ll lm ln np lp lq lr nq lt lu lv ij bi translated">Dirk-jan <a class="ae mf" href="https://dirkjanm.io/introducing-roadtools-and-roadrecon-azure-ad-exploration-framework/" rel="noopener ugc nofollow" target="_blank"> Mollema </a>创建了一个名为ROADTools的Azure AD pentesting框架和库。我非常喜欢这个工具和Azure pentesting，所以我将使用AriaCloud快速浏览一下ROADTools。容器捆绑了这个非常好的工具。请注意，Azure pentesting工具是新生事物，这个特定的工具相对较新。</p><p id="759b" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">步骤1: </strong>使用正确的选项向Azure租户帐户进行身份验证。在我的实验中，我启用了MFA，所以我使用了设备代码身份验证流程。这会将authtoken写入<strong class="lc ja"> <em class="mj">。roadtools_auth </em> </strong>，如下图。按照说明进行操作，并使用您的web浏览器进行身份验证。</p><pre class="kp kq kr ks gt oj ok ol om aw on bi"><span id="7af7" class="oo mv iq ok b gy op oq l or os">roadrecon auth --device-code</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pa"><img src="../Images/3305b79d8c9ec742f9c4111231d653a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*10jjkcZkTBq7QDLduTWvlw.png"/></div></div></figure><p id="2fa8" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">第二步:</strong>运行road tools<strong class="lc ja"><em class="mj"/></strong>命令同<strong class="lc ja"><em class="mj">road recon</em></strong>。这将转储我们稍后将探索的所有Azure对象。如果您使用了设备代码身份验证，请指定要使用的文件—令牌文件。</p><pre class="kp kq kr ks gt oj ok ol om aw on bi"><span id="9296" class="oo mv iq ok b gy op oq l or os">roadrecon gather --tokenfile .roadtools_auth</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/939cf637767769879478a6089448088f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*5a1flSoU2S0YkqE3w2laWw.png"/></div></figure><p id="e72d" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">步骤3: </strong>验证工作目录中创建的roadrecon.db文件。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/56250547bb88eba9d3c04041734ea959.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*w4A0Ggl3N8lS5EqHgot0Kg.png"/></div></figure><p id="35fa" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">第4步:</strong>启动ROADRecon GUI并浏览数据。确保运行指定的命令来打开在步骤2中创建的roadrecon.db文件。</p><pre class="kp kq kr ks gt oj ok ol om aw on bi"><span id="5a3c" class="oo mv iq ok b gy op oq l or os">roadrecon-gui --database roadrecon.db</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/3129bba227d235185f709e510ae522a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*h9X8XAoP5Z33Oc2XLkUwwQ.png"/></div></figure><p id="d635" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">第五步:</strong>启动火狐浏览器，导航到<a class="ae mf" href="http://127.0.0.1:5000." rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:5000。</a>探索数据。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pe"><img src="../Images/db01b6f144232be642bd4d2ce90e5f14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YWKiBeqfOpphTg86qHVR5w.png"/></div></div></figure><h1 id="b7d0" class="mu mv iq bd mw mx my mz na nb nc nd ne kf nf kg ng ki nh kj ni kl nj km nk nl bi translated">后续步骤</h1><ol class=""><li id="2c36" class="nr ns iq lc b ld nm lg nn lj of ln og lr oh lv nw nx ny nz bi translated">Kubernetes工具</li><li id="694d" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv nw nx ny nz bi translated">修复初始认证后的小RDP错误</li><li id="b51c" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv nw nx ny nz bi translated">修复Mac OS RDP客户端黑屏(微软远程桌面)</li><li id="4710" class="nr ns iq lc b ld oa lg ob lj oc ln od lr oe lv nw nx ny nz bi translated">用于AWS部署的Terraform模板</li></ol><h1 id="8660" class="mu mv iq bd mw mx my mz na nb nc nd ne kf nf kg ng ki nh kj ni kl nj km nk nl bi translated">结论</h1><p id="25b6" class="pw-post-body-paragraph la lb iq lc b ld nm ka lf lg nn kd li lj no ll lm ln np lp lq lr nq lt lu lv ij bi translated">感谢您阅读本文，我希望您能像我喜欢调试和创建它一样喜欢这个工具。集装箱是未来。网络安全容器的使用案例将继续增长。叉起来！克隆它！让我知道未来用例的任何想法。</p></div></div>    
</body>
</html>