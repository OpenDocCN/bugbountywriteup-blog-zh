<html>
<head>
<title>IDE - TryHackMe Writeup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">IDE - TryHackMe书面报告</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/ide-tryhackme-writeup-b0f4922c80f?source=collection_archive---------0-----------------------#2021-10-22">https://infosecwriteups.com/ide-tryhackme-writeup-b0f4922c80f?source=collection_archive---------0-----------------------#2021-10-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/b3cb5d018ba9a6ceb22a9afcda009b30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*GXeh7cvJ4SjRUS9y.png"/></div></figure><p id="914f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">大家好，今天我们将在TryHackMe的IDE房间进行讨论。它被评为简单，房间的描述说:“一个简单的盒子来提高你的计数技能！”</p><p id="2be3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">因此，在nmap扫描中，我们获得了四种服务:</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi kt"><img src="../Images/881253c021875c950a8e5cd7d0b59f72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2KbNz4ZFJNTXSa5e3DSadg.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">Nmap输出</figcaption></figure><h1 id="c1fc" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">FTP服务器:</h1><p id="4544" class="pw-post-body-paragraph ju jv iq jw b jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn mi kp kq kr ij bi translated">根据nmap扫描，允许匿名登录。使用以下凭证登录:<strong class="jw ir">匿名</strong> : <strong class="jw ir">匿名</strong>。</p><p id="20ce" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">登录后，我们必须遍历到<code class="fe mj mk ml mm b">...</code>目录，然后下载名为<code class="fe mj mk ml mm b">-</code>的文件。要下载该文件，只需使用<code class="fe mj mk ml mm b">get ./-</code>命令。</p><p id="5d89" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">为了方便，下载后我把它改名为ftp-file。ftp文件的内容:</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi mn"><img src="../Images/91a584471a6e4f695a18ddcbdcfe4a88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jqrx6V-tuwf8OqswsDGHDg.png"/></div></div></figure><p id="f8bd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这暗示了我们两件事:</p><ol class=""><li id="8f87" class="mo mp iq jw b jx jy kb kc kf mq kj mr kn ms kr mt mu mv mw bi translated">至少有两个不同的用户名为<code class="fe mj mk ml mm b">drac</code>和<code class="fe mj mk ml mm b">john</code>。</li><li id="30f7" class="mo mp iq jw b jx mx kb my kf mz kj na kn nb kr mt mu mv mw bi translated">用户<code class="fe mj mk ml mm b">john</code>的密码是默认密码(因此很容易被破解)</li></ol><h1 id="38f2" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">网络服务器</h1><ul class=""><li id="b400" class="mo mp iq jw b jx me kb mf kf nc kj nd kn ne kr nf mu mv mw bi translated">端口80:它有默认的Apache网页。经过目录破坏，我们找不到任何有用的东西。</li><li id="216f" class="mo mp iq jw b jx mx kb my kf mz kj na kn nb kr nf mu mv mw bi translated">端口62337:我们得到一个Codiad的登录页面(版本:2.8.4)。Codiad是一个基于web的IDE和代码编辑器。</li></ul><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ng"><img src="../Images/90c9c57b9d6700a921df5d2df3ac6f8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ejddatFeW2GGu11F-C0v3A.png"/></div></div></figure><p id="c64a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">从上面我们知道用户<code class="fe mj mk ml mm b">john</code>有默认密码。我尝试了一些密码，并能够使用凭证登录:<strong class="jw ir">约翰</strong> : <strong class="jw ir">密码</strong>。</p><p id="5c26" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在浏览网站时，我用绝对路径<code class="fe mj mk ml mm b">/var/www/html/codiad/xplo1t</code>创建了一个项目</p><h1 id="d469" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">搜索漏洞:</h1><p id="5fb1" class="pw-post-body-paragraph ju jv iq jw b jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn mi kp kq kr ij bi translated">我用searchsploit在Codiad中搜索任何已知的漏洞。</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi nh"><img src="../Images/aac18af6a2c75bef97d0763c688f23f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wwkt8viAvg-xpDHBdUAyiw.png"/></div></div></figure><p id="cfba" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">对我来说，经过一些调整后，最后一个漏洞发挥了作用。</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ni"><img src="../Images/8b13478f05c65d953ce2fb33b81e1ed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e3sZhQX1sPDmvtwHHhSjsA.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">不得不在漏洞上改变这些</figcaption></figure><p id="b45e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">运行漏洞。</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi nj"><img src="../Images/aea30c4510388ad51a44679880bfe798.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zlrpHkKrc0MClbXjBnG4dQ.png"/></div></div></figure><p id="6680" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">将Codiad的路径设置为<code class="fe mj mk ml mm b">/</code>，将实际项目的名称设置为<code class="fe mj mk ml mm b">xplo1t</code>(我们之前已经创建了一个同名的项目。记得吗？)这将在<code class="fe mj mk ml mm b">/xplo1t/shell.php</code>中上传一个webshell <code class="fe mj mk ml mm b">shell.php</code></p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi nk"><img src="../Images/a26ef24b6e99b910496d6a9add91e92a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XTuqtLbYalJsQQXFVNhZRw.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">我们得到一个漂亮的网络外壳</figcaption></figure><p id="7d08" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们现在有一个外壳作为<code class="fe mj mk ml mm b">www-data</code>为了得到一个合适的外壳，我使用了一个来自<a class="ae ks" href="https://www.revshells.com/" rel="noopener ugc nofollow" target="_blank">revshells.com</a>的反向外壳。<br/>在用户<code class="fe mj mk ml mm b">drac</code>的<code class="fe mj mk ml mm b">.bash_history</code>文件中，我找到了密码。</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/aa5e7463255ba97891dddc2c32fa50bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/format:webp/0*IekuxXPrZ16GmTps.png"/></div></figure><p id="09e2" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">使用此密码切换到drac(密码重用)。用户<code class="fe mj mk ml mm b">drac</code>可以作为sudo运行如下:</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi kt"><img src="../Images/0b76d7b93a51c9828616b050d737ebc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*noEiFbiua3Fum2er.png"/></div></div></figure><p id="0292" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">检查与vsftpd服务相关的文件:</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi nm"><img src="../Images/15d4f00fcdffc6ba9ec2bf1058dfb16d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*r5Qg7-RfbKLfm0fZ.png"/></div></div></figure><p id="827b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">文件<code class="fe mj mk ml mm b">/lib/systemd/system/vsftpd.service</code>可由<code class="fe mj mk ml mm b">drac</code>写入。让我们改变服务文件，使<code class="fe mj mk ml mm b">/bin/bash</code>成为SUID，这样我们就可以得到根。</p><p id="643e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们可以这样做:</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi nn"><img src="../Images/9ac2d87aecd51aac99f67de545ad37c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gkCFcx62uTCLjK1e.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">Pwned！</figcaption></figure><p id="9b84" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们现在拥有这个系统。如果你被困在这个房间里，希望对你有帮助。如果您对本演练有任何问题或有任何建议，请告诉我。</p><p id="2f42" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在推特上联系我，电话是<a class="ae ks" href="https://twitter.com/manash036" rel="noopener ugc nofollow" target="_blank"> @manash036 </a></p><p id="359f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">再见👋</p></div></div>    
</body>
</html>