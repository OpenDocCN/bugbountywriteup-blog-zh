<html>
<head>
<title>How Did I Leak 5.2k Customer Data From a Large Company? (via Broken Access Control)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我是怎么泄露大公司5.2k客户资料的？(通过破坏访问控制)</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/how-did-i-leak-5-2k-customer-data-from-a-large-company-via-broken-access-control-709eb4027409?source=collection_archive---------1-----------------------#2022-03-11">https://infosecwriteups.com/how-did-i-leak-5-2k-customer-data-from-a-large-company-via-broken-access-control-709eb4027409?source=collection_archive---------1-----------------------#2022-03-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="abbb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">大家好！</p><p id="fd40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天我们来谈谈我几个月前发现的漏洞。该漏洞直接针对公司的客户和供应商，也是一家大型护肤品公司的子域。(此报告已解决，但我无法提供有关该公司的信息，因为它运行一个私人程序)我将尝试向您简要说明此漏洞。我希望我能为你的专有技术的发展做出贡献。所以让我们开始吧。</p><blockquote class="kl km kn"><p id="a08e" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><strong class="jp ir">侦察兵没有死！</strong></p></blockquote><p id="394d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我在crt.sh上，在几次对其他子域名的黑客攻击失败后，我发现了这个子域名。子域只是一个员工面板，没有其他功能。它只介绍了登录面板。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ks"><img src="../Images/323cee72da5402a2ece3881da4fafac4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b3q2Uzy-4Z49VRUSOSdpOg.png"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">(看起来挺直的。)</figcaption></figure><p id="b5e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在那个面板上运行LinkFinder，从应用程序中找到了一些JS文件。其中一个JS文件赢得了我的优先权，因为文件名包含单词“login”。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi li"><img src="../Images/c2d4c67b9dd301419c04086a5b4c2dfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1OXzG2j1TlPngiVMiIkdXw.png"/></div></div></figure><p id="bd7d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">href部分很有意思。如果我们成功登录，它会将我们重定向到<strong class="jp ir">的App/Index/#！/仪表板'</strong>。但是真的能控制吗？现在是测试被破坏的访问控制的时候了。</p><p id="a859" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我没有登录就直接进入了href地址，并成功地访问了应用程序的仪表板！无需登录。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lj"><img src="../Images/ae796144634f44a3dbc216a0e4998efc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U6vSEAUJeK1_s7_t05CRVA.png"/></div></div></figure><p id="61a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但这还不是全部。因为出了问题。应用程序仪表板未返回任何数据。我只能看到界面。一切都是零。</p><blockquote class="kl km kn"><p id="6e60" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><strong class="jp ir">更多侦察得到结果&amp;黑客时间到了！</strong></p></blockquote><p id="1f34" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">激动人心的部分来了。我需要更多的端点，因为JS文件不包含任何其他端点。我回到Linkfinder，开始检查我找到的所有JS文件。不久，我到达了以下终点。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lk"><img src="../Images/1344b674aeb2b51342f520b7511f0ea2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SykHXGhwlGYr271bfvJwyg.png"/></div></div></figure><p id="b269" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我尝试了几个端点，得到了一些“入站”和“出站”的结果。(这意味着客户和供应商。)</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ll"><img src="../Images/a05bafd4c231eb42350ad2c993325c8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8EeD32OUqO0fVfMjRKD0eA.png"/></div></div></figure><p id="79cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我碰到过这样的标签页，文件上传功能无效。但是,“下载模板”选项卡中的“客户”按钮是有效的。(同样，在Inbound中的“供应商”按钮)<strong class="jp ir">答对了！</strong></p><p id="e353" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在应用程序中获得了所有(5200多个)客户和供应商的PII信息。(两个csv文件都包含<strong class="jp ir">客户代码、姓名、地址、电话</strong>。)</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lm"><img src="../Images/33d1d6bcaf40e8e775d3d10c16a7e230.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tRKd-zZAV3BgsEJYQMRaoA.png"/></div></div></figure><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ln"><img src="../Images/9a0c51a1002d293f5737f5ab7e49c05d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OjM-Wal-UI6DZX-ZHlDkLg.png"/></div></div></figure><p id="c52a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我不得不下载并搜索以检查数据是否真实。我没有走得更远。</p><p id="afa2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此报告被评定为高严重性，并在几个月前得到修复。这是我的推特:</p><p id="0ee0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae lo" href="https://twitter.com/canmustdie/status/1471101658679681024" rel="noopener ugc nofollow" target="_blank">https://twitter.com/canmustdie/status/1471101658679681024</a></p><p id="51f6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">目前就这些。感谢阅读。下次再见了！</p><p id="d3f4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在推特上关注我:<a class="ae lo" href="https://twitter.com/canmustdie" rel="noopener ugc nofollow" target="_blank">https://twitter.com/canmustdie</a></p></div></div>    
</body>
</html>