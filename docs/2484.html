<html>
<head>
<title>Blind SSRF in Skype (Microsoft)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Skype中的盲人SSRF(微软)</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/blind-ssrf-in-skype-microsoft-6639f4961052?source=collection_archive---------0-----------------------#2022-10-28">https://infosecwriteups.com/blind-ssrf-in-skype-microsoft-6639f4961052?source=collection_archive---------0-----------------------#2022-10-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="da79" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">服务器端请求伪造是一个漏洞，使得攻击者能够向攻击者控制的网络位置/路径发出服务器请求。</p><p id="e25a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在分析Skype for Web的Burp中的请求时，在*找到一个端点。*.skype.com/path？url=https://example.com，因为url参数看起来很有趣，所以我试图用我的ngrok实例来更改URL &amp;结果成功了！</p><p id="44ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过查看ngrok inspect web控制台，验证收到的用户代理标题(Skype)和who.is中的IP地址，确认是Skype点击了url。</p><p id="90a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然我能够让服务器点击任意网页，但我无法获得完整的响应。我只能从几个选定的HTML标签中获得状态代码、内容类型、响应的内容长度(大小)和文本内容。也就是说，它不是预期中的完整的SSRF，而是一个盲目的/部分的SSRF。</p><p id="92bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">试图进入下面的路径—</p><ol class=""><li id="82b3" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">本地主机/内部ip地址-&gt;失败</li><li id="f7ed" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">尝试使用url重定向/url缩写方法绕过本地主机/内部ip地址-&gt;失败</li><li id="95be" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">外部ip地址/网页-&gt;成功</li><li id="1853" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">通用Azure/AWS/DigitalOcean元数据IP地址-&gt;失败</li><li id="7d6b" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">不常用，Azure相关的IP地址(168.63.129.16)-&gt;成功--&gt;此IP可用于通过使用<a class="ae kz" href="http://168.63.129.16/metadata/v1/maintenance" rel="noopener ugc nofollow" target="_blank">http://168.63.129.16/metadata/v1/maintenance</a>端点来确定虚拟机的健康状况，如果虚拟机正在运行，该端点应返回OK (200状态代码)。(更多信息请参考<a class="ae kz" href="https://learn.microsoft.com/en-us/azure/virtual-network/what-is-ip-address-168-63-129-16?WT.mc_id=docs-azuredevtips-azureappsdev" rel="noopener ugc nofollow" target="_blank">本</a></li></ol><p id="988c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">尝试将url参数值更改为http://168.63.129.16/metadata/v1/maintenance的<a class="ae kz" href="http://168.63.129.16/metadata/v1/maintenance" rel="noopener ugc nofollow" target="_blank"/>，得到200 Ok响应，响应大小为2字节，这确认了响应文本可能包含Ok响应。</p><p id="4719" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">做了一份很好的报告，提到了所有的细节，然后坐等微软复制并修改报告。</p><p id="eca3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">幸运的是，这是在M365赏金计划的范围内，并且得到了一笔可观的赏金！</p><figure class="lb lc ld le gt lf gh gi paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gh gi la"><img src="../Images/29333279843a710709e529802718fc29.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/1*JHiDr9GAmSo_2dj369y1hw.gif"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk translated">尽情狂欢吧！</figcaption></figure><p id="8132" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">报告时间表:</p><ol class=""><li id="190d" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">已报告—2022年9月23日</li><li id="d13c" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">更多详细信息已更新—2022年10月3日</li><li id="1f9e" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">赏金奖励—2022年10月8日</li><li id="8676" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">固定—2022年10月12日</li></ol><h1 id="fe19" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">喜欢我的文章吗？<strong class="ak">在Twitter(</strong><a class="ae kz" href="https://twitter.com/jayateerthaG" rel="noopener ugc nofollow" target="_blank"><strong class="ak">)@ jayaterthag</strong></a><strong class="ak">)和medium上关注我，了解更多关于bugbounty、Infosec、网络安全和黑客攻击的内容。</strong></h1></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h2 id="3723" class="mv lr iq bd ls mw mx dn lw my mz dp ma jy na nb me kc nc nd mi kg ne nf mm ng bi translated">来自Infosec的报道:Infosec每天都有很多内容，很难跟上。<a class="ae kz" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank">加入我们的每周简讯</a>以5篇文章、4条线索、3个视频、2个GitHub Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</h2></div></div>    
</body>
</html>