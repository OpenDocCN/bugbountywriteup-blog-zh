<html>
<head>
<title>Uncaptured Challenges from c0c0n XI CTF by RedTeamVillage</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">红队村来自CTF Xi的未被捕获的挑战</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/uncaptured-challenges-from-c0c0n-xi-ctf-by-redteamvillage-b45b53a65c79?source=collection_archive---------1-----------------------#2018-10-24">https://infosecwriteups.com/uncaptured-challenges-from-c0c0n-xi-ctf-by-redteamvillage-b45b53a65c79?source=collection_archive---------1-----------------------#2018-10-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/423208318e7486adc90a57fe0dc8a65c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3MTTm-KT7vZ-UbVWOJzqIw.png"/></div></div></figure><p id="277d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是由RedTeamVillage组织的c0c0n XI CTF挑战赛的演练。</p><p id="5083" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不会有太多的截图，因为我忘记拍了，请道歉</p><h1 id="e8ba" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated"><strong class="ak">挑战1阿根廷</strong></h1><p id="36d9" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">在这个挑战中，我们只需要发布我们团队的照片，发推文，并通过电报将链接发送给管理员，以方便大家</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lz"><img src="../Images/503381200a322f6bcd0a595aa17c81db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y4wXs5aXi6MBAUA1xJ8nZA.png"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">愚蠢的权利</figcaption></figure><h1 id="b3e8" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">挑战2刚果</h1><p id="1f69" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">这是在根类别中，我们只有一个网站节点。victimcorp.xyz</p><p id="f763" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">枚举</strong></p><p id="7714" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">开始进行nmap扫描，显示mongodb正在运行，mongoexpress是一种基于web的管理工具，因此是时候将其连接到robomongo或robo3t，并通过集合成功登录搜索，我注意到一个条目。让我们试试宋承宪和…</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2a7daea6040a0fd31f841c1c7424daa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yqnSaDQtdGe7uXT5qf3BvQ.png"/></div></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/cd07f941940f0e81df486a2a0a4101aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GsKHfahos_d6R7bckjtufg.png"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">那是旗子</figcaption></figure><h1 id="9dc7" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated"><strong class="ak">挑战三加拿大</strong></h1><p id="8a1e" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">挑战型网站</p><p id="1c33" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这个挑战中，我们有一个运行HTTP和SSH的url blog.victimcorp.xyz服务</p><p id="2aa0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">访问blog.victimcorp.xyz时，我们看到了apache的默认索引页面</p><p id="1fe9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用dirsearch进一步枚举wordpress目录，发现了phpmyadmin，但是没有太多信息，比如备份文件或易受攻击的插件等，所以接下来的事情是强行登录</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/68320d7e1a0e2f023f2a9c9cbf25018d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yDgATmKlAjRPwG-oeM2HJg.png"/></div></div></figure><p id="e14c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们有一个登录，所以获得一个反向外壳很容易只是编辑一个模板或插件，我们有一个外壳作为www-data检查<strong class="ka ir"> passwd </strong>文件有一个用户约翰，但约翰没有一个奇怪的主目录，但我们可以从www-data改变到约翰，但我们需要一个密码wp-config.php有一个密码尝试，让我们访问约翰，因为约翰是在sudoers列表中找到的，所以我们可以使用<strong class="ka ir"> sudo -i </strong>切换到root并读取标志</p><h1 id="a1f5" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated"><strong class="ak">挑战4印度</strong></h1><p id="54e7" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">这是一个相当困难但有趣的挑战类别<strong class="ka ir"> RedTeamIt </strong></p><p id="7c3a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们有一个网站websrv1.victimcorp.xyz，通过访问它，我们会看到默认的IIS页面。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mi"><img src="../Images/4ef3208b5326e186ee149619ecfa9c40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dVi1KaakJ_iG7EBaCX7G_g.png"/></div></div></figure><p id="4c2e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过运行Nmap，它显示只有3个服务正在运行</p><p id="e8df" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">HTTP、TELNET和RDP</p><p id="c5a0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">连接到Telnet，我们看到一个微软的登录，显然需要用户名和密码…我在哪里可以得到没有别的尝试运行DIRB对HTTP和一无所获</p><p id="f5de" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">嗯，我遗漏了一些东西，我检查了源代码，映像名称是IIS 8–5.jpg，这是IIS 8.5，这是Windows Server 2012，这引发了一些问题“我在哪里见过这个..哦，黑客盒子”的IIS代字号漏洞，我不知道它是否是脆弱的地狱，我会尝试它</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/cb04fb90d4c1facbdce321c0d7bd9cb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sYejPW5VohRgIJsT1V1bcg.png"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">然而需要一些猜测工作</figcaption></figure><p id="2cca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以我又有了一个主目录，它返回了4个目录资产、配置和图像</p><p id="ba72" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我对websrv1.victimcorp.xyz/victimcorp/config运行了相同的IIS短名称扫描程序，它发现了一个文件WEBCON~1。BAK</p><p id="c283" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">哦，一个备份文件读取<a class="ae mj" href="https://support.detectify.com/customer/portal/articles/1711520-microsoft-iis-tilde-vulnerability" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">这个</strong> </a>会得到一些信息，所以我寻找web.config.bak，有一个文件并下载它打开它，我有用户名和密码</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mk"><img src="../Images/f07dbdf9fb248568a01335dffdd65cc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Jr_epc45sjae4qp7H8ogw.png"/></div></div></figure><p id="b8fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这允许我连接到telnet并获得一个系统外壳</p><p id="dd05" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以我访问了文档目录，其中有一个web.admin.rdp文件</p><p id="30fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">里面有一些与RDP有关的证书</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b4345529878b59c20852e194a8843377.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gAODqjhZyyYeuaPr9fcpQw.png"/></div></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/613a6e2971842c6cee0a79fda8645705.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0WjulWc03oH2dyCnzajPlQ.png"/></div></div></figure><p id="e999" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">酷，我现在在里面，有一个keepass文件，现在我需要找到主密码，首先我试图强行破解，但失败了，然后我试图用RDP的密码来对付它，嘣，我真傻</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ad4b4b600782a576b7c332ee21f3bd75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p7zKXnpmdJmPll3MNS6vHg.png"/></div></div></figure><p id="0fef" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，在这一点上，我不知道下一步该做什么，我迷路了，但组织者激励我列举更多，所以我开始进一步列举，但我错过了一些可以帮助我解决这个问题的东西，那就是arp表:(</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/21f9cc432cfc7d4682fd461705dbac81.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*pbRZeCdmXNrSR6WKhTe6ug.jpeg"/></div></figure><p id="3b82" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这时候另一队已经进入了RDP，解决了这个问题</p><p id="0281" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那么，如何解决这个问题呢？10.0.0.5上的枚举服务具有elliot的文件系统共享，它们使用密码连接到文件系统，该文件系统在组策略中有一个配置文件，其中包含cpassword和用户名。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/512d6ef5256dee459ecaf616cdd543b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cNJR_vbYTpnEnGtZIKqYbA.png"/></div></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/57d03c675088f462eba876063f60f993.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*36Ruj794DN0fDfPvddW5HQ.png"/></div></div></figure><p id="3419" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该密钥可以在微软发布解密密钥时被解密</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mm"><img src="../Images/3a18e7f2968bc986c5ccffe1ccfc78fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wUdQhdSljN1s80H5683vGw.jpeg"/></div></div></figure><p id="6edc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们有了用户名和密码，RDP在那台机器上是开放的，我们需要做的就是连接并获取标志</p><p id="c9d9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">随着比赛的结束，从新手的角度来看，我们获得了第二名，这是一件大事</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/eac25c934b7e89e4245a5499575aef9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G__6lj11v4Odshd6LeK-4A.png"/></div></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/799ab241cb352e340088f8244a165bcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*Q1NpNGhRoaJfYUloaQEhCA.png"/></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/71931291d36c111c6c00a09275a7ba4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*BkmD8XKpJbgKK7d8s54h5g.png"/></div></figure><p id="5592" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢团队IOTA，感谢RedTeamVillage和<a class="ae mj" href="https://twitter.com/abhijithbr" rel="noopener ugc nofollow" target="_blank"> Abhijith </a>组织这次活动，感谢我的队友<a class="ae mj" href="https://twitter.com/Hemanthvj" rel="noopener ugc nofollow" target="_blank"> Hemanth Joseph </a>、<a class="ae mj" href="https://twitter.com/joeldeleep" rel="noopener ugc nofollow" target="_blank"> Joel Deleep </a></p></div></div>    
</body>
</html>