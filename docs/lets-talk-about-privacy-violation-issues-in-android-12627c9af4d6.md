# 让我们来谈谈 android 中的隐私侵犯问题

> 原文：<https://infosecwriteups.com/lets-talk-about-privacy-violation-issues-in-android-12627c9af4d6?source=collection_archive---------2----------------------->

当安全和隐私需求发生冲突时，通常应该给予隐私更高的优先级。要实现这一点并仍然保持所需的安全信息，请在退出程序之前清除任何私有信息。

为了实施良好的隐私管理，制定并严格遵守内部隐私指南。指南应该具体描述应用程序应该如何处理私有数据。如果您的组织受联邦或州法律监管，请确保您的隐私准则足够严格以满足法律要求。即使您的组织不受监管，您也必须保护私人信息，否则会有失去客户信任的风险

这个例子有几个问题。首先，借助 default，WebView 凭据存储在不可否认的文本中，没有经过哈希处理。因此，如果一个人有一个根设备(或使用模拟器)，她就能够读取给定网站的密码。第二，不可否认的文本内容凭证被广播给所有注册的接收者，这意味着任何注册来收听具有 SEND_CREDENTIALS 动作的意图的接收者将获取该消息。广播甚至不总是被权限所覆盖，以限制各种各样的接收者，尽管事实上在这种情况下，我们不建议使用权限作为修复。

![](img/0521f40bd68581b418380734cbe52788.png)

**示例 1:** 下面的代码包含一个日志语句，它通过将记录存储在日志文件中来跟踪添加到数据库中的记录的内容。在存储的其他值中，`getPassword()`函数返回用户提供的与帐户相关联的明文密码。

```
pass = getPassword();
...
dbmsLog.println(id+":"+pass+":"+type+":"+tstamp);
```

上面示例中的代码将明文密码记录到文件系统中。尽管许多开发人员相信文件系统是数据的安全存储位置，但它不应该被隐含地信任，尤其是在隐私受到关注的时候。

隐私是移动世界最大的问题之一，原因有几个。其中之一是设备丢失的几率更高。另一个与移动应用程序之间的进程间通信有关。移动平台的本质是从不同来源下载的应用程序，这些应用程序在同一设备上并行运行。在银行应用程序旁边运行恶意软件的可能性很高，这就是为什么应用程序作者需要小心在发送给设备上运行的其他应用程序的消息中包含什么信息。敏感信息不应该成为移动应用程序之间的进程间通信的一部分。

**示例 2:** 下面的代码从 Android WebView 商店读取给定站点的用户名和密码，并将它们广播给所有注册的接收者。

```
...
webview.setWebViewClient(new WebViewClient() {
public void onReceivedHttpAuthRequest(WebView view,
HttpAuthHandler handler, String host, String realm) {
String[] credentials = view.getHttpAuthUsernamePassword(host, realm);
String username = credentials[0];
String password = credentials[1];
Intent i = new Intent();
i.setAction("SEND_CREDENTIALS");
i.putExtra("username", username);
i.putExtra("password", password);
view.getContext().sendBroadcast(i);
}
});
...
```

这个例子有几个问题。首先，默认情况下，WebView 凭据以明文形式存储，没有经过哈希处理。因此，如果用户有一个根设备(或使用模拟器)，她就能够读取给定网站的存储密码。第二，明文凭证被广播给所有注册的接收者，这意味着任何注册监听带有`SEND_CREDENTIALS`动作的意图的接收者都将接收到消息。广播甚至不受限制接收者数量的权限的保护，尽管在这种情况下，我们不建议使用权限作为修复方法。

私有数据可以通过多种方式进入程序:

-以密码或个人信息的形式直接从用户处获得

-由应用程序从数据库或其他数据存储中访问

-间接来自合作伙伴或其他第三方

通常，在移动环境中，这些私人信息包括(以及密码、社会安全号码和其他一般个人信息):

-位置

-手机号码

-序列号和设备 id

-网络运营商信息

-语音邮件信息

有时，未标记为隐私的数据在不同的上下文中可能具有隐私含义。例如，学生身份证号码通常不被认为是私有的，因为不存在到单个学生的个人信息的明确且公开可用的映射。但是，如果学校根据学生的社会安全号码生成识别号，那么识别号应该被认为是私有的。

安全和隐私问题似乎经常相互竞争。从安全的角度来看，您应该记录所有重要的操作，以便以后可以识别任何异常活动。但是，当涉及到私有数据时，这种做法会带来风险。

虽然有许多方法可以不安全地处理私人数据，但一个常见的风险来自错误的信任。程序员通常信任程序运行的操作环境，因此认为将私有信息存储在文件系统、注册表或其他本地控制的资源中是可以接受的。但是，即使对某些资源的访问受到限制，这也不能保证拥有访问权限的个人是可信的。例如，在 2004 年，AOL 的一名不道德的雇员将大约 9200 万个私人客户电子邮件地址卖给了一个推销离岸赌博网站的垃圾邮件发送者。

**示例 3:** 下面的代码将用户的明文密码存储到本地存储中。

```
localStorage.setItem('password', password);
```

尽管许多开发人员将本地存储视为数据的安全位置，但是不应该完全信任它，尤其是在隐私受到关注的情况下。

关于私有数据的最佳策略是最小化其暴露程度。不应授予应用程序、流程和员工访问任何私有数据的权限，除非他们要执行的任务需要这种访问权限。正如最小特权原则规定任何操作都不应该使用超过必要的特权来执行一样，对私有数据的访问应该限制在尽可能小的组中。

# 技巧

作为任何隐私侵犯彻底审计的一部分，确保已经编写了自定义规则来识别进入程序的所有隐私或其他敏感信息的来源。大多数私人数据的来源无法自动识别。如果没有自定义规则，您对隐私侵犯的检查很可能是不完整的。