# 这就是你如何通过 pentest 报告实现真正价值的方法

> 原文：<https://infosecwriteups.com/this-is-how-you-can-deliver-true-value-through-your-pentest-reports-3c329372f556?source=collection_archive---------3----------------------->

您的客户想要的只有两件事:他们的业务如何受到对漏洞的有效利用的影响，以及他们如何防止这种情况发生？

# 场景

假设您受雇对客户面向互联网的主要 web 应用程序进行为期两周的渗透测试。他们有兴趣知道它是否有任何可以被恶意演员利用的缺陷。另外，他们希望你尽可能地扮演真正的威胁角色，也就是说，你的测试将是[黑盒](https://resources.infosecinstitute.com/topic/what-are-black-box-grey-box-and-white-box-penetration-testing/)。

你开始准备适合工作要求的[战术、技术和程序](https://attack.mitre.org/)工具箱，并在约定的日期开始玩应用程序。酷，我们走吧！

两个星期很快就过去了，你已经有了一定数量的可以成功利用和记录的漏洞。

现在您已经完成了有趣的部分，您开始将所有的发现放入报告中，这样您的客户就可以尽快修复缺陷。这应该很容易做到，对不对？您只需将每个发现放入类似表格/列表的格式中，给出[概念验证](https://en.wikipedia.org/wiki/Proof_of_concept)代码，就大功告成了。小菜一碟。

# 问题是

现在到了演示的日子，您将能够展示您的 leet 技能，展示您如何能够绕过他们的 [WAF](https://www.cloudflare.com/learning/ddos/glossary/web-application-firewall-waf/) ，以及这如何允许他们的 [Active Directory (AD)](https://docs.microsoft.com/pt-br/windows-server/identity/ad-ds/get-started/virtual-dc/active-directory-domain-services-overview) 以及由此导致的他们整个环境的完全妥协。你向他们展示了一个很好的模糊的 [XXE](https://portswigger.net/web-security/xxe) 的有效载荷，还展示了你如何使用 [CrackMapExec](https://github.com/byt3bl33d3r/CrackMapExec) 来枚举广告，最后你展示了一个非常好的 [BloodHound](https://github.com/BloodHoundAD/BloodHound) 图，显示了你用来危害环境的所有薄弱配置。

在演示结束时，负责了解漏洞以便修复它们的技术人员都惊呆了，因为他们确切地知道你已经完成了什么，但他们开始询问有关该过程各个部分的几个问题，因为对他们来说，不清楚你是如何做到这些的。你告诉他们查看报告中的技术细节以进一步澄清，但你从他们的脸上看到这并没有多大帮助。

更糟糕的是，会议上的首席级别，也就是最初雇用你的那个人，一开始面无表情，你没有注意到，但很快他也开始问几个问题，关于你可以用你发现的东西做什么。他已经阅读了整份报告，尽管如此，他还是不明白你在陈述中想要表达的观点。

在你试图回答那些对你来说显而易见的问题之后，比如“你可以用[域管理员](https://docs.microsoft.com/en-us/windows/security/identity-protection/access-control/active-directory-security-groups#bkmk-domainadmins)证书做什么？”或者“有效载荷中用于 XXE 的那些符号是什么？”，你回家问自己哪里出了问题。为什么他们有这么多问题？你以为你会搞定演示。

# 解释

现在，我将向您展示为什么会发生这种情况，以及如何解决这个问题。我将把这一部分分成两部分:执行和技术交流。

**技术交流**

这里我们有几个可能发生这种情况的原因。第一个是关于你高估了技术成员的进攻安全知识。你必须明白，我们的工作有点独特，也就是说，我们知道这是一个非常多样化的领域；我们有程序员、系统管理员、蓝色团队、红色团队、技术支持、[打印机魔术师](https://vidadesuporte.com.br/wp-content/uploads/2019/11/Suporte_2398.jpg)等等。重点是每个人的学习领域不同，背景不同。你不能假设每个与你交谈的 IT 专业人员都会 100%理解你所说的。

要解决这个具体问题，您可以做一些事情:

*   详细解释你所做的一切。假装你正在和一个孩子谈论一个复杂的话题，这样你可以接近有一个非常详细和说教式的解释；
*   组织你的开发流程。这是关于有一个好的和容易跟随一个故事，在那里你能连接每一个单独的行动并且让他们彼此交谈。这样你可以更容易地在环境中传达你的路径；
*   一切都要有参考。请记住，你不能假设技术团队会理解你抛给他们的每一个术语，所以请确保你将使用的每一个声明或每一个术语都包含**可靠的来源**。这也是有帮助的，这样你可以向他们展示你没有编造任何东西，每件事都有一个理由和一个适当的**值得信赖的**来源；
*   建议是最重要的部分。你必须确保他们会得到最好的建议来修复你发现的漏洞。这意味着要详细解释为什么这个建议是正确的。此外，确保包括他们的适当来源；
*   截图很多，都是免费的！然而，你拍摄的每一张截图都必须有三个项目，这样它们才不会变得无用或制造困难，而不是有所帮助:

1.  **详细描述**:你听过“一幅图像胜过千言万语”这句话吗？这在这种情况下非常适用，因为你不能认为仅仅一张图片就足以解释你试图展示的某种技术。所以，当你截图的时候，描述它，告诉你刚刚做了什么，以及这和过程有什么联系；
2.  **不要截图你的整个显示器**。多余的无用信息不会有任何帮助。当然，有些情况下你不得不这样做，但在大多数情况下，你只需要捕捉足够多的信息来**使**读者和**显示你想要显示的信息**。为了帮助解决这个问题，使用截图工具会很有帮助，比如 [flameshot](https://github.com/flameshot-org/flameshot) (我的私人伴侣和推荐)或 [greenshot](https://getgreenshot.org/) 。这两者都为你解决了这个问题，因为你可以在屏幕上拖动一个矩形来标记你想要捕捉的内容；
3.  **突出重要的东西**。说到截图工具，你也可以使用它们轻松地在你的图片上画画。当你想这样做时，有两种关键情况:隐藏你不想显示的信息(密码、姓名等)和指出图片上的特定信息以吸引读者的注意，这样他们就不会不知道去哪里看而感到迷失。

我认为，如果你解决了这些话题，你就能提升你的技术报告，这样你的听众就能更好地理解你想要传达的内容。

**高管沟通**

现在是你工作中最重要的部分:能够有效地与雇佣你的人沟通。还记得他们问你的所有问题吗？这意味着他们不理解你的语言，无论是在报告中还是在陈述中。记住:他们不是技术人员，他们是业务人员。所以如果你想让他们理解你的发现的重要性，你必须会说他们的语言。这意味着您必须:

*   使用非技术术语。不管你是否解释了什么是 XXE 攻击，或者你是否能够侵入域管理员帐户。他们没有兴趣知道这些。对他们来说，重要的是这会如何损害他们的业务、他们的客户或他们客户的数据；
*   展示**真实的商业** **冲击**。这就是他们当初雇佣你的原因。因此，如果你不向他们展示你所发现的东西是如何影响他们的业务的，那么你的工作是不完整的。要做到这一点，你首先要知道他们的业务是什么。在第一次见面时，花些时间问几个问题，关于他们做什么，他们如何运作，对他们来说什么是最重要的。即使得到肤浅的回答，也比没有强。这样，您就能够将您发现的一切与它们各自的业务影响联系起来。一些例子可能包括:

1.  客户数据盗窃(可能导致法律问题)；
2.  秘密窃取(专利、源代码等)；
3.  员工数据盗窃(可能导致法律问题)；
4.  股票市场表现可能会受到严重影响(给出一些例子)；

关于业务影响，您可以提及的另一件事是，根据巴西 LGPD 法(或任何其他有关数据保护的法律)，这些缺陷有多严重。它们会导致巨额罚款和公司的其他严重后果。

*   最后，关于高管沟通的最后一件事是你的报告的写作。你能写得很好，这是经验性的。书面交流对于正确理解你想要传递的信息是必不可少的。这意味着你必须有良好的语法技能，以及能够清楚地传达你想要的。为此，你可以随时参加母语课程，甚至寻找一些免费的在线资源来学习并更加精通。请记住，最好的员工以关注细节而闻名，你的语言和写作技巧是你用来交付客户想要的产品的主要工具。最后一点，这部分不仅仅适用于你报告的执行部分。不用说，整个文档必须受益于清晰简洁的写作。

# 结论

经过这次旅程，我们可以清楚地看到，如果你想成为一名专业的 pentester，你需要做的不仅仅是成为一名 leet 黑客。我们还可以看到，所有的细节总结起来提供了一个伟大的最终产品，一个你会感到自豪，你会知道你的客户会得到他们期望的价值。

一份好的 pentest 报告是一份不言自明的报告，也就是说，它能与管理层和技术人员有效沟通。