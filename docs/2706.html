<html>
<head>
<title>The Big Danger With Laravel ( .env file )</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Laravel的最大危险是。环境文件)</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/the-big-danger-with-laravel-env-file-403ca60aaf14?source=collection_archive---------0-----------------------#2022-12-27">https://infosecwriteups.com/the-big-danger-with-laravel-env-file-403ca60aaf14?source=collection_archive---------0-----------------------#2022-12-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/98ca1142d6891656b0aa931cc4e0f083.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NvGkKsssl9cRU2oliw8vGA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Laravel的最大危险是。环境文件)</figcaption></figure><p id="b544" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在本文中，我将讨论Laravel带来的一种危险。Laravel中的<code class="fe la lb lc ld b">.env</code>文件是一个配置文件，包含数据库凭证和API密钥等敏感信息。确保该文件的安全并防止未经授权的用户接触是非常重要的。</p><p id="1d4a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Laravel中的<code class="fe la lb lc ld b">.env</code>文件的一个潜在安全漏洞是，默认情况下，它不包含在版本控制系统(例如Git)中。这意味着，如果您对您的Laravel项目使用版本控制，那么<code class="fe la lb lc ld b">.env</code>文件将不会被跟踪，对它所做的任何更改都不会反映在版本控制历史中。这使得跟踪对<code class="fe la lb lc ld b">.env</code>文件的更改并使其在不同环境(如开发、试运行、生产)之间保持同步变得困难。</p><p id="204f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为了解决这个问题，您可以将<code class="fe la lb lc ld b">.env</code>文件添加到带有<code class="fe la lb lc ld b">!</code>前缀的<code class="fe la lb lc ld b">.gitignore</code>文件中，从而将它包含在版本控制中。这将告诉Git跟踪<code class="fe la lb lc ld b">.env</code>文件，即使它通常被忽略。</p><blockquote class="le lf lg"><p id="6043" class="kc kd lh ke b kf kg kh ki kj kk kl km li ko kp kq lj ks kt ku lk kw kx ky kz ij bi translated"><strong class="ke ir">例如:</strong></p></blockquote><pre class="ll lm ln lo gt lp ld lq bn lr ls bi"><span id="ff8b" class="lt lu iq ld b be lv lw l lx ly"># Ignore everything in the root except the .env file<br/>/*<br/>!.env</span></pre><p id="585f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">将<code class="fe la lb lc ld b">.env</code>文件放在web服务器的文档根目录之外也是一个很好的做法。这将防止未经授权的用户能够通过web直接访问该文件。</p><p id="c6cb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">除了这些措施，您还应该确保保持您的Laravel安装和所有依赖项是最新的，以确保您免受已知漏洞的攻击。您可以使用诸如Laravel安全检查器(<a class="ae lz" href="https://security.laravel.com/" rel="noopener ugc nofollow" target="_blank">https://security.laravel.com/</a>)之类的工具来检查您的应用程序是否存在已知漏洞，并在发现新漏洞时接收相关通知。</p><p id="13bb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">总之，Laravel中的<code class="fe la lb lc ld b">.env</code>文件包含敏感信息，确保其安全非常重要。您可以将<code class="fe la lb lc ld b">.env</code>文件包含在版本控制中，将其保存在web服务器的文档根目录之外，并保持您的Laravel安装和依赖项是最新的，以帮助防范潜在的安全漏洞。</p><blockquote class="le lf lg"><p id="bc66" class="kc kd lh ke b kf kg kh ki kj kk kl km li ko kp kq lj ks kt ku lk kw kx ky kz ij bi translated">安里面有什么。env文件？</p></blockquote><pre class="ll lm ln lo gt lp ld lq bn lr ls bi"><span id="d1c4" class="lt lu iq ld b be lv lw l ma ly">APP_NAME=My App<br/>APP_ENV=local<br/>APP_KEY=base64:yN/2x7bTc/KG/T0BZvL8s1W4N4+Y87PXRvJm8iPWzE=<br/>APP_DEBUG=true<br/>APP_URL=http://localhost<br/><br/>LOG_CHANNEL=stack<br/><br/>DB_CONNECTION=mysql<br/>DB_HOST=127.0.0.1<br/>DB_PORT=3306<br/>DB_DATABASE=my_database<br/>DB_USERNAME=root<br/>DB_PASSWORD=password<br/><br/>BROADCAST_DRIVER=log<br/>CACHE_DRIVER=file<br/>QUEUE_CONNECTION=sync<br/>SESSION_DRIVER=file<br/>SESSION_LIFETIME=120<br/><br/>REDIS_HOST=127.0.0.1<br/>REDIS_PASSWORD=null<br/>REDIS_PORT=6379<br/><br/>MAIL_MAILER=smtp<br/>MAIL_HOST=smtp.mailtrap.io<br/>MAIL_PORT=2525<br/>MAIL_USERNAME=null<br/>MAIL_PASSWORD=null<br/>MAIL_ENCRYPTION=null<br/>MAIL_FROM_ADDRESS=null<br/>MAIL_FROM_NAME="${APP_NAME}"<br/><br/>AWS_ACCESS_KEY_ID=<br/>AWS_SECRET_ACCESS_KEY=<br/>AWS_DEFAULT_REGION=us-east-1<br/>AWS_BUCKET=<br/><br/>PUSHER_APP_ID=<br/>PUSHER_APP_KEY=<br/>PUSHER_APP_SECRET=<br/>PUSHER_APP_CLUSTER=mt1<br/><br/>MIX_PUSHER_APP_KEY="${PUSHER_APP_KEY}"<br/>MIX_PUSHER_APP_CLUSTER="${PUSHER_APP_CLUSTER}"</span></pre><p id="6469" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">保持该文件的安全很重要，以防止对应用程序敏感数据的未授权访问。</p><p id="c396" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">以下是您可以采取的一些步骤来修复您的<code class="fe la lb lc ld b">.env</code>文件中的漏洞:</p><ol class=""><li id="5caa" class="mb mc iq ke b kf kg kj kk kn md kr me kv mf kz mg mh mi mj bi translated">确保您的<code class="fe la lb lc ld b">.env</code>文件不会被公开访问。这意味着它不应该存储在可公开访问的目录中，比如Laravel项目中的<code class="fe la lb lc ld b">public</code>文件夹。</li><li id="9744" class="mb mc iq ke b kf mk kj ml kn mm kr mn kv mo kz mg mh mi mj bi translated">对所有数据库和第三方API帐户使用强而唯一的密码。</li><li id="96b3" class="mb mc iq ke b kf mk kj ml kn mm kr mn kv mo kz mg mh mi mj bi translated">通过在您的<code class="fe la lb lc ld b">.env</code>文件中添加下面一行来使用Laravel的内置环境变量保护:</li></ol><pre class="ll lm ln lo gt lp ld lq bn lr ls bi"><span id="75f6" class="lt lu iq ld b be lv lw l ma ly">APP_KEY=</span></pre><p id="faf8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">4.通过在Laravel项目的根目录下运行以下命令来生成新的应用程序密钥:</p><pre class="ll lm ln lo gt lp ld lq bn lr ls bi"><span id="2086" class="lt lu iq ld b be lv lw l ma ly">php artisan key:generate</span></pre><p id="9bb8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">5.定期检查应用程序的环境变量，并删除任何不再需要的变量。</p><p id="237b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">通过遵循这些步骤，您可以帮助保护您的Laravel应用程序的敏感数据，并防止您的<code class="fe la lb lc ld b">.env</code>文件中的漏洞。</p><p id="9c8b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果env文件不是安全问题。如果你认为这是一篇很垃圾的博文。我推荐阅读一篇关于昆虫赏金的文章。</p><div class="mp mq gp gr mr ms"><a href="https://rudrasarkar.medium.com/how-i-takeover-a-company-whole-database-after-got-laravel-env-file-and-protect-to-breach-data-e999148ed4d4" rel="noopener follow" target="_blank"><div class="mt ab fo"><div class="mu ab mv cl cj mw"><h2 class="bd ir gy z fp mx fr fs my fu fw ip bi translated">我是如何在得到Laravel后接管整个公司数据库的。env文件和保护以防止数据泄露</h2><div class="mz l"><h3 class="bd b gy z fp mx fr fs my fu fw dk translated">这是我的第二次大黑客攻击，之前我发布了另一篇文章“我是如何利用……</h3></div><div class="na l"><p class="bd b dl z fp mx fr fs my fu fw dk translated">rudrasarkar.medium.com</p></div></div><div class="nb l"><div class="nc l nd ne nf nb ng jw ms"/></div></div></a></div><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/19464aa9e3e8577c47b78506ce6f73c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*Y5D_XjkQxISMlE1G_hiwHQ.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">杰克·斯派洛船长——加勒比海盗</figcaption></figure><p id="d823" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在这篇文章中，我一直在谈论Laravel带来的一种危险。保重，在我的下一篇文章中再见。</p></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h2 id="10f3" class="np lu iq bd nq nr ns dn nt nu nv dp nw kn nx ny nz kr oa ob oc kv od oe of og bi translated">来自Infosec的报道:Infosec每天都有很多内容，很难跟上。<a class="ae lz" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank">加入我们的每周时事通讯</a>以5篇文章、4个线程、3个视频、2个GitHub Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</h2></div></div>    
</body>
</html>