<html>
<head>
<title>Deploy to Kubernetes in Google Cloud: Challenge Lab</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">部署到Google Cloud中的Kubernetes:挑战实验室</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/deploy-to-kubernetes-in-google-cloud-challenge-lab-47c301b1fccc?source=collection_archive---------0-----------------------#2021-11-13">https://infosecwriteups.com/deploy-to-kubernetes-in-google-cloud-challenge-lab-47c301b1fccc?source=collection_archive---------0-----------------------#2021-11-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/dccf9fd603219e805344ce1df720c1f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*a6viPmzTQebT5dLT.png"/></div></figure><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div class="gh gi ju"><img src="../Images/0055ec86d8280bdc2b8008f4490053b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/0*IIykBfToiTnkX-Mw.png"/></div><figcaption class="jz ka gj gh gi kb kc bd b be z dk translated">您可以在这里找到您的项目id</figcaption></figure><h1 id="c6dd" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">任务1:创建Docker映像并存储Docker文件</h1><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/b00665711cc524a37b95d23b42c23bd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/0*KsBCUxGhhA3rbGzk.png"/></div></figure><h1 id="b060" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">解决办法</h1><p id="bff4" class="pw-post-body-paragraph lc ld iq le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们需要运行这个命令<code class="fe ma mb mc md b">source &lt;(gsutil cat gs://cloud-training/gsp318/marking/setup_marking.sh)</code>来安装谷歌检查我们进度所需的脚本</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi me"><img src="../Images/b4b60cf25cb34bd4ccf56b48595fbb27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Qp0ptWGjroGh_uis.png"/></div></div></figure><p id="781d" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">现在我们需要运行这个命令来克隆来自github <code class="fe ma mb mc md b">gcloud source repos clone valkyrie-app --project={put your project id here}</code> <br/>的任务文件(不要忘记输入你的项目id)</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi mo"><img src="../Images/f9089abd1e129aaf850f82cd382ecbe8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_fUaSgjsqG3GtJZg.png"/></div></div></figure><p id="6813" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">现在我们将转到valkyrie-app目录<code class="fe ma mb mc md b">cd valkyrie-app</code>，用这个命令<code class="fe ma mb mc md b">cat &gt; Dockerfile &lt;&lt;EOF</code>创建一个docker文件</p><p id="ed24" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">我们将粘贴任务说明中给出的配置:</p><pre class="jv jw jx jy gt mp md mq mr aw ms bi"><span id="4f7b" class="mt ke iq md b gy mu mv l mw mx">FROM golang:1.10<br/>WORKDIR /go/src/app<br/>COPY source .<br/>RUN go install -v<br/>ENTRYPOINT ["app","-single=true","-port=8080"]<br/>EOF</span></pre><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div class="gh gi my"><img src="../Images/0d236aa40b1e2eb16f8b69ce8b0e5176.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/0*M-iSKxjLNC2sQ9kb.png"/></div></figure><p id="7031" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">现在使用这个命令<code class="fe ma mb mc md b">docker build -t valkyrie-app:v0.0.1 .</code>构建图像</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi mz"><img src="../Images/28f03904b19e3c65e63d9410ae47220d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cXk-oLBM5K_e1GTa.png"/></div></div></figure><p id="10b7" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">现在，我们将运行之前下载的脚本，以便检查我们是否做了所有正确的事情</p><pre class="jv jw jx jy gt mp md mq mr aw ms bi"><span id="4e8d" class="mt ke iq md b gy mu mv l mw mx">cd ~/marking                       <br/>./step1.sh</span></pre><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div class="gh gi na"><img src="../Images/ec453ec1ac173865384780357b592176.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/0*ypGI4jlZaBBw_VwR.png"/></div></figure><p id="1eee" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">现在按下实验页面上的<code class="fe ma mb mc md b">check my progress</code>，它应该会变成绿色</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/50ca151bf9d38635de1c51239b0c85d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/0*rQ_sRexRMEFdKwll.png"/></div></figure><h1 id="e34b" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">解决办法</h1><p id="3aa6" class="pw-post-body-paragraph lc ld iq le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我使用这个命令将我的目录更改为<code class="fe ma mb mc md b">valkyrie-app</code></p><pre class="jv jw jx jy gt mp md mq mr aw ms bi"><span id="e46c" class="mt ke iq md b gy mu mv l mw mx">cd ..                      <br/>cd valkyrie-app</span></pre><p id="2733" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">现在我们将使用这个命令<code class="fe ma mb mc md b">docker run -p 8080:8080 --name valkyrie-app valkyrie-app:v0.0.1 &amp;</code>来运行我们在任务1中构建的docker映像</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nc"><img src="../Images/50bae814cce6f02ca5db9509ba7647a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kOzaqYTQxkwbbbOL.png"/></div></div></figure><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nd"><img src="../Images/fcf27137870f31ea6cbb114977185f90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IVNjprOUpY6pZFWA.png"/></div></div><figcaption class="jz ka gj gh gi kb kc bd b be z dk translated">现在单击web预览</figcaption></figure><p id="ada6" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">现在打开一个新的云shell，运行我们之前下载的脚本，这样它会检查我们是否做对了所有事情</p><pre class="jv jw jx jy gt mp md mq mr aw ms bi"><span id="653c" class="mt ke iq md b gy mu mv l mw mx">cd ~/marking                     <br/>./step2.sh</span></pre><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi ne"><img src="../Images/9b05929f12d6dbcfc2962188fb681b13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GEU0TLkLmJFFW2fV.png"/></div></div></figure><p id="ebc0" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">现在按下实验页面上的<code class="fe ma mb mc md b">check my progress</code>，它应该会变成绿色</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/6574492f14885df45357ddb3b72cdfab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/0*zgcfsQ__pLHEY-9V.png"/></div></figure><h1 id="2d7d" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">解决办法</h1><p id="696f" class="pw-post-body-paragraph lc ld iq le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在我们将推送Docker图像</p><p id="d5ba" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated"><code class="fe ma mb mc md b">docker tag valkyrie-app:v0.0.1 gcr.io/{put your project id here}/valkyrie-app:v0.0.1</code></p><p id="4ca2" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">(不要忘记填写您的项目id)</p><p id="2702" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated"><code class="fe ma mb mc md b">docker images</code></p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi ng"><img src="../Images/9ff04411a68b6542cef59d74beb1adc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*k5SRvabA60KK7BMV.png"/></div></div></figure><p id="822d" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated"><code class="fe ma mb mc md b">docker push gcr.io/{put your project id here}/valkyrie-app:v0.0.1</code></p><p id="d960" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">(不要忘记填写您的项目id)</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nh"><img src="../Images/a7b3fb9e553814c6c35bba5b1bff3c97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6hVJIUtHF6N9Tuqj.png"/></div></div></figure><p id="bed9" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">现在按下实验页面上的<code class="fe ma mb mc md b">check my progress</code>，它应该会变成绿色</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/54c4218974b152a38d115ebc252d1986.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/0*UFVQqJP27DC3rYjx.png"/></div></figure><h1 id="1603" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">解决办法</h1><p id="4626" class="pw-post-body-paragraph lc ld iq le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">首先，通过使用这些命令，我们应该在<code class="fe ma mb mc md b">valkyrie-app/</code>中的<code class="fe ma mb mc md b">k8s</code>目录中</p><p id="de45" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated"><code class="fe ma mb mc md b">cd valkyrie-app/</code></p><p id="1982" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated"><code class="fe ma mb mc md b">cd k8s</code></p><p id="49da" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">使用<code class="fe ma mb mc md b">gcloud container clusters get-credentials valkyrie-dev --zone us-east1-d</code>获取集群的身份验证凭据</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nj"><img src="../Images/2f13d0d070493ccfe5f19f91dd9b25a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_sjxNe7kB6y6bODD.png"/></div></div></figure><p id="3ab8" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">现在我们需要使用<code class="fe ma mb mc md b">nano deployment.yaml</code>编辑<code class="fe ma mb mc md b">deployment.yaml</code></p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nk"><img src="../Images/cd54a2ce49df710d5a666e018eacecd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8pAjjQrD0TyG6bw5.png"/></div></div></figure><p id="8d2a" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">将<code class="fe ma mb mc md b">IMAGE_HERE</code>更改为<a class="ae nl" href="http://gcr.io/" rel="noopener ugc nofollow" target="_blank">gcr.io/</a>{在此输入你的项目id }/瓦尔基里-app:v0.0.1</p><p id="44cd" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">(不要忘记填写您的项目id)</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nm"><img src="../Images/774e818c78a5f82fce2f551fde79242f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*I7rk9VzCRiIq2juF.png"/></div></div></figure><p id="e024" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">然后按<code class="fe ma mb mc md b">Ctrl o</code>保存然后按<code class="fe ma mb mc md b">enter</code>然后按<code class="fe ma mb mc md b">Ctrl x</code>退出</p><p id="8a0f" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">现在我们将使用:</p><pre class="jv jw jx jy gt mp md mq mr aw ms bi"><span id="890b" class="mt ke iq md b gy mu mv l mw mx">kubectl create -f deployment.yaml                      <br/>kubectl create -f service.yaml</span></pre><p id="6c27" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">部署部署。YAML和服务。YAML</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nn"><img src="../Images/02e9fdaa565c738fb65446afb545e7eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QeWwGfmoQkhLRRob.png"/></div></div></figure><p id="e472" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">现在按下实验页面上的<code class="fe ma mb mc md b">check my progress</code>，它应该会变成绿色</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div class="gh gi no"><img src="../Images/a3c9147a8075c8145fba9ae4d1ab96ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/0*LWhMUHoiLX3-hG_X.png"/></div></figure><h1 id="e816" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">解决办法</h1><p id="dd3c" class="pw-post-body-paragraph lc ld iq le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">将副本从1个增加到3个</p><p id="6cbc" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">kubectl规模部署瓦尔基里-开发-副本3</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi np"><img src="../Images/f53592c5f2a8382724b439abb086c7e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1xKUA1SzoXmxe6yF.png"/></div></div></figure><p id="5494" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">现在我们使用<code class="fe ma mb mc md b">cd ..</code>进入<code class="fe ma mb mc md b">valkyrie-app</code>目录</p><p id="7736" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">并使用下面的git命令将名为kurt-dev的分支合并到master中:</p><p id="8dbd" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated"><code class="fe ma mb mc md b">git merge origin/kurt-dev</code></p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nq"><img src="../Images/980fc42dbb99c63154d2323cddb73856.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kIcZD4IUrwU5cJzS.png"/></div></div></figure><p id="e43a" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">现在我们将构建并推送标签为<code class="fe ma mb mc md b">2.0.0</code>的新版本</p><p id="39da" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated"><code class="fe ma mb mc md b">docker build -t valkyrie-app:v0.0.2 .</code></p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nr"><img src="../Images/cc1daab165341fbe93dc0fb0d529dbf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZgutLiZ9WMpxH29C.png"/></div></div></figure><p id="3a0e" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated"><code class="fe ma mb mc md b">docker tag valkyrie-app:v0.0.2 gcr.io/{put your project id here}/valkyrie-app:v0.0.2</code></p><p id="1212" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">(不要忘记填写您的项目id)</p><p id="39f3" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated"><code class="fe ma mb mc md b">docker images</code></p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi ns"><img src="../Images/e8102cb2fa532617c07daef3a764ca28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5mYQochTsHVuRd2-.png"/></div></div></figure><p id="08a7" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated"><code class="fe ma mb mc md b">docker push gcr.io/{put your project id here}/valkyrie-app:v0.0.2</code></p><p id="d438" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">(不要忘记填写您的项目id)</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nt"><img src="../Images/3f16d51bc0746d642b8ccc74aef523ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qwIbIZIW_2Gf-0H6.png"/></div></div></figure><p id="47bf" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">使用以下命令将后端和前端的图像标签从<code class="fe ma mb mc md b">v0.0.1</code>更改为<code class="fe ma mb mc md b">v0.0.2</code>:</p><p id="8f76" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated"><code class="fe ma mb mc md b">kubectl set image deployment valkyrie-dev backend=gcr.io/{put your project id here}/valkyrie-app:v0.0.2 frontend=gcr.io/{put your project id here}/valkyrie-app:v0.0.2</code> <br/>(别忘了写上你的项目id)</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nu"><img src="../Images/9df42fc9869421cc8c1f7482fbf61ffe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pcWmY3aDlzgVwAns.png"/></div></div></figure><p id="047d" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">现在，按下实验页面中的<code class="fe ma mb mc md b">check my progress</code>,它应该会变成绿色</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/e7966d561a1bd0877ef14097fc119340.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/0*1CoYO5YhtcBIUF2B.png"/></div></figure><h1 id="c34e" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">解决办法</h1><p id="4120" class="pw-post-body-paragraph lc ld iq le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">要知道密码，请运行以下命令</p><p id="ad98" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated"><code class="fe ma mb mc md b">printf $(kubectl get secret cd-jenkins -o jsonpath="{.data.jenkins-admin-password}" | base64 --decode);echo</code></p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nw"><img src="../Images/203a13fed160227e99dda1cb56157fc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9fuxl4unQSZCwueU.png"/></div></div></figure><p id="021f" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">为了避免以后出现错误，请运行以下命令来终止任何正在运行的容器</p><p id="f955" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">docker ps</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nx"><img src="../Images/f7efeee9879774144c7122a2a4dcdb6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zipJFLx1RcpWsWyo.png"/></div></div></figure><p id="14da" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">码头集装箱kill $(码头ps -aq)</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi ny"><img src="../Images/d9ccdf4c9ac4b2eb4c37087bc5d2c0a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aMJm3kP-O7p2-4X7.png"/></div></div></figure><p id="b31b" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">使用以下命令连接到Jenkins控制台:</p><pre class="jv jw jx jy gt mp md mq mr aw ms bi"><span id="2ee8" class="mt ke iq md b gy mu mv l mw mx">export POD_NAME=$(kubectl get pods --namespace default -l "app.kubernetes.io/component=jenkins-master" -l "app.kubernetes.io/instance=cd" -o jsonpath="{.items[0].metadata.name}")<br/>kubectl port-forward $POD_NAME 8080:8080 &gt;&gt; /dev/null &amp;</span></pre><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nk"><img src="../Images/c0a59b45946b9a9ac7af045713235bf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tLGSnzZHRBVXXshD.png"/></div></div></figure><p id="a78c" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">点击云壳中的Web预览按钮，然后点击“在8080端口上预览”连接到Jenkins控制台。</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nz"><img src="../Images/4b77950db837bbcb6ffc1e994516aec0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lACL89f7mNlWmuA1.png"/></div></div></figure><p id="f066" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">用户名:<code class="fe ma mb mc md b">admin</code></p><p id="c412" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">密码:我们之前运行了这个命令作为密码<code class="fe ma mb mc md b">printf $(kubectl get secret cd-jenkins -o jsonpath="{.data.jenkins-admin-password}" | base64 --decode);echo</code></p><p id="7794" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">在Jenkins用户界面中，点击左侧导航栏中的<code class="fe ma mb mc md b">Manage Jenkins</code>。</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oa"><img src="../Images/3cb5c55b1ecfb7db12c4fe39f42d0d39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7l1X3BuveCusnsXH.png"/></div></div></figure><p id="24cd" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">在Jenkins用户界面中，单击左侧导航栏中的<code class="fe ma mb mc md b">Manage Credentials</code>。</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oa"><img src="../Images/65825bb941a0928adb056e72731545f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZQ0oqWxTpgTv-Npr.png"/></div></div></figure><p id="2b57" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">点击<code class="fe ma mb mc md b">Jenkins</code></p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oa"><img src="../Images/b9f97770cd3239fc88998f7f9df19db6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RJHv8t3-hy_x-Gfx.png"/></div></div></figure><p id="f84c" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">点击<code class="fe ma mb mc md b">Global credentials (unrestricted).</code></p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oa"><img src="../Images/ecffdca44e03674347e314fe5b6d2bca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NyH0jpd7j_kaeME-.png"/></div></div></figure><p id="63cc" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">点击左侧导航栏中的<code class="fe ma mb mc md b">Add Credentials</code>。</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oa"><img src="../Images/efc00a4c200651ce9f5c5aa99c10c54b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RxIBBbr_biGPDly9.png"/></div></div></figure><p id="2d81" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">从<code class="fe ma mb mc md b">Kind drop-down</code>中选择<code class="fe ma mb mc md b">Google Service Account from metadata</code></p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oa"><img src="../Images/6a3215acb2d150e89e64c94eb80075eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4HdyebjZ7Pwf7qMQ.png"/></div></div></figure><p id="6ffe" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">点击<code class="fe ma mb mc md b">OK</code>。</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oa"><img src="../Images/4b2e2dd57680633c30596ff79824b2f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*m6RDlEz2V_uTGgwS.png"/></div></div></figure><p id="095e" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">再次进入仪表板，点击<code class="fe ma mb mc md b">new item</code></p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oa"><img src="../Images/ec0c5eb3f0116de46aad1707c9eb63ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*J0RH_bdCh_mZN26P.png"/></div></div></figure><p id="0971" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">将项目命名为<code class="fe ma mb mc md b">valkyrie-app</code>，然后选择<code class="fe ma mb mc md b">Multibranch Pipeline</code>选项并点击<code class="fe ma mb mc md b">OK</code>。</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oa"><img src="../Images/55f7f7dfcf244fadd1823e98e0e80dab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Q-ezMY_iSl7fGWOV.png"/></div></div></figure><p id="47f2" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">点击<code class="fe ma mb mc md b">Add Source</code>。</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oa"><img src="../Images/ccfaf2048d05f895c51f332fda1be19a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4vk6Tqfg7GtgO4Vg.png"/></div></div></figure><p id="c715" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">选择<code class="fe ma mb mc md b">git</code>。</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oa"><img src="../Images/96095c5d5f3b8aa4823025397fbade84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*i0aJKRJ1h1xnE3cf.png"/></div></div></figure><p id="5bc4" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">将您的样例应用程序存储库中的HTTPS克隆URL<code class="fe ma mb mc md b">https://source.developers.google.com/p/{put your project id here}/r/valkyrie-app</code>粘贴到项目存储库字段中</p><p id="f222" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">(不要忘记填写您的项目id)</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oa"><img src="../Images/42e7d6305331bbaadc17873df3bf4f40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fN6pVcSgv7LKq0pX.png"/></div></div></figure><p id="8f4d" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">从<code class="fe ma mb mc md b">Credentials</code>下拉列表中，选择您在前面的步骤中添加服务帐户时创建的凭据的名称。</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oa"><img src="../Images/536b6985a1988debbe8a4ed7c51138cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6vV1FihJLcbpRW_x.png"/></div></div></figure><p id="48ca" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">在<code class="fe ma mb mc md b">Scan Multibranch Pipeline Triggers</code>部分，勾选<code class="fe ma mb mc md b">Periodically if not otherwise run</code>框，将间隔值设置为<code class="fe ma mb mc md b">1 minute</code>。</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oa"><img src="../Images/7347aacb106a2a3703878b7314fdb419.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*h49o4oWzNF05Wpzu.png"/></div></div></figure><p id="44e8" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">点击<code class="fe ma mb mc md b">apply</code>然后点击<code class="fe ma mb mc md b">save</code>。</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oa"><img src="../Images/321867c9b9c62ad467ccd1ae6db191d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OMvzX_GEShwoLqfa.png"/></div></div></figure><p id="3d14" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">纳米<code class="fe ma mb mc md b">Jenkinsfile</code>。</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi ob"><img src="../Images/efe3e92ab1be8f9dd8e019aca49c77d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*x5dQRdtlm1CJmNIT.png"/></div></div></figure><p id="3dfa" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">用您的GCP项目ID替换<code class="fe ma mb mc md b">YOUR_PROJECT</code></p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nz"><img src="../Images/a8494d592ecfdca6860fc1e3b1cfd136.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QN_ivxOiPXc0Xer0.png"/></div></div></figure><p id="ff83" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">纳米<code class="fe ma mb mc md b">source/html.go</code></p><p id="63dd" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">提交并推动更改:</p><pre class="jv jw jx jy gt mp md mq mr aw ms bi"><span id="91f7" class="mt ke iq md b gy mu mv l mw mx">git config --global user.email $PROJECT<br/>git config --global user.name $PROJECT</span><span id="5b26" class="mt ke iq md b gy oc mv l mw mx">git add *<br/>git commit -m 'green to orange'<br/>git push origin master</span></pre><p id="0081" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">现在按下实验页面上的<code class="fe ma mb mc md b">check my progress</code>，它应该会变成绿色</p><h1 id="5809" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">我陷入困境时使用的资源</h1><p id="d357" class="pw-post-body-paragraph lc ld iq le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">chriskyfung GitHub回购</p><h1 id="1eb8" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">我喜欢与不同的人联系，所以如果你想打招呼，我会很高兴见到你！:)</h1><p id="97d6" class="pw-post-body-paragraph lc ld iq le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><a class="ae nl" href="https://www.linkedin.com/in/noureldin-ehab-a57940190/" rel="noopener ugc nofollow" target="_blank"> <strong class="le ir">领英</strong> </a></p><p id="d585" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated"><a class="ae nl" href="https://twitter.com/Nouureldin_Ehab" rel="noopener ugc nofollow" target="_blank"> <strong class="le ir">推特</strong> </a></p></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><p id="db5e" class="pw-post-body-paragraph lc ld iq le b lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv mn lx ly lz ij bi translated">🔈🔈Infosec Writeups正在组织其首次虚拟会议和网络活动。如果你对信息安全感兴趣，这是最酷的地方，有16个令人难以置信的演讲者和10多个小时充满力量的讨论会议。 <a class="ae nl" href="https://iwcon.live/" rel="noopener ugc nofollow" target="_blank"> <strong class="le ir">查看更多详情，在此注册。</strong> </a></p><div class="ok ol gp gr om on"><a href="https://iwcon.live/" rel="noopener  ugc nofollow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd ir gy z fp os fr fs ot fu fw ip bi translated">IWCon2022 - Infosec书面报告虚拟会议</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">与世界上最优秀的信息安全专家建立联系。了解网络安全专家如何取得成功。将新技能添加到您的…</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">iwcon.live</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb js on"/></div></div></a></div></div></div>    
</body>
</html>