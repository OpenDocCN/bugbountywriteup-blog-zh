<html>
<head>
<title>Bounty Hacker: CTF — TryHackMe Walkthrough</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">赏金黑客:CTF-TryHackMe演练</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/bounty-hacker-ctf-tryhackme-walkthrough-bb4f664c766d?source=collection_archive---------2-----------------------#2022-01-27">https://infosecwriteups.com/bounty-hacker-ctf-tryhackme-walkthrough-bb4f664c766d?source=collection_archive---------2-----------------------#2022-01-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/0cbf22f3502db87cec2fd4972a2ea94c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*trp6_k17oeWOylQFyyG4vw.png"/></div></div></figure><p id="98d6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="kz">免责声明:本文仅用于教育目的，未经被黑对象的事先同意，不要试图黑入任何人的设备，并且仅将这些信息用于道德目的。此外，不要侵入文章中显示的IP地址，因为你需要VPN访问才能看到它们，而且它总是在变化。</em></p><p id="e888" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">学习道德黑客的最好方法是实践。但是真的很难找到愿意同意你黑他们的人<strong class="kd iu">。这就是Capture the Flag(CTF)公司发挥作用的地方，这些公司(如TryHackMe)允许你合法地在他们的机器上进行道德黑客行为。在这篇文章中，我将带你浏览一下<strong class="kd iu">赏金黑客</strong> CTF在<strong class="kd iu"> TryHackMe的黑客活动。</strong></strong></p><h2 id="ba9e" class="la lb it bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated"><strong class="ak">扫描和计数</strong></h2><p id="617a" class="pw-post-body-paragraph kb kc it kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">我总是做的第一件事是用Nmap运行网络扫描，这样我就可以了解网络结构/架构，信息=能力。</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="96a4" class="la lb it md b gy mh mi l mj mk">nmap -A -T4 -v [IP]</span></pre><ul class=""><li id="e6d9" class="ml mm it kd b ke kf ki kj km mn kq mo ku mp ky mq mr ms mt bi translated">A =获取设备信息</li><li id="b360" class="ml mm it kd b ke mu ki mv km mw kq mx ku my ky mq mr ms mt bi translated">-T4 =跑得更快</li><li id="5232" class="ml mm it kd b ke mu ki mv km mw kq mx ku my ky mq mr ms mt bi translated">-v =扫描时打印输出</li></ul><figure class="ly lz ma mb gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/4636eca2a1426a94c2430b2a3c64e141.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GeJ5RFBGZ8Wmkmcs8PmFRQ.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">Nmap扫描结果</figcaption></figure><p id="3332" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我看到FTP对匿名访问开放。FTP是文件传输协议，帮助人们传输文件。</p><figure class="ly lz ma mb gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/e0467bdd8f0ff8aef8f05d59900c4c03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AURrv_3tOF7xNmVKVkMg2w.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">Nmap扫描显示允许匿名访问</figcaption></figure><p id="7871" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">所以我在FTP上做了更多的枚举，通过登录它(用户名=匿名，密码=匿名)</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="591d" class="la lb it md b gy mh mi l mj mk">ftp [ip]</span></pre><figure class="ly lz ma mb gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nf"><img src="../Images/46eebdaef5880c5dcc590631bfd0368e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dSVifrbU6MoGW3rFtzqVUw.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">登录FTP并获取文件</figcaption></figure><p id="96af" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我首先执行了一个<em class="kz"> ls </em>来查看目录中是否有任何内容。我看到了<em class="kz"> locks.txt </em>和<em class="kz"> task.txt. </em>然后我使用<em class="kz"> get c </em>命令将它们放到我的本地桌面上。</p><p id="0a8f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我先打开<em class="kz"> task.txt </em></p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="5445" class="la lb it md b gy mh mi l mj mk">cat task.txt</span></pre><figure class="ly lz ma mb gt ju gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/41b00c42c01db620bfc4d813192c0607.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/0*QHX8u5MMcA0o-U6N"/></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">阅读task.txt</figcaption></figure><p id="ded0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们现在有了一个可能的用户名的想法。然后我打开<em class="kz"> locks.txt </em></p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="0784" class="la lb it md b gy mh mi l mj mk">cat locks.txt</span></pre><figure class="ly lz ma mb gt ju gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/971a1951cf8f6e7c24935ca02475fa45.png" data-original-src="https://miro.medium.com/v2/resize:fit:378/0*Lqx7_4rOynP55T6J"/></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">阅读locks.txt</figcaption></figure><p id="b260" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">看起来我们有一个可能的密码列表。</p><h2 id="44ed" class="la lb it bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated"><strong class="ak">利用</strong></h2><p id="a396" class="pw-post-body-paragraph kb kc it kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">现在我们可以尝试使用密码喷涂ssh登录，因为我们已经有了用户名和密码列表。</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="f86c" class="la lb it md b gy mh mi l mj mk">hydra -l lin -P locks.txt [ip] ssh</span></pre><figure class="ly lz ma mb gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ni"><img src="../Images/e11a4d82cdd0fd4ba1ebd22ab4a71a00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hRVySSSTJqLdhQJE"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">密码喷射ssh</figcaption></figure><p id="ab64" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">成功了，现在我们有了登录ssh的密码和用户名。</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="7a32" class="la lb it md b gy mh mi l mj mk">ssh lin@[ip]</span></pre><figure class="ly lz ma mb gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nj"><img src="../Images/3db0ef7eff92e0cd984fd3d1c98ec4e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ez_0xxOOrbw797LYJuPhWg.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">通过ssh登录</figcaption></figure><p id="cc48" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们现在有了对机器的低级访问权限</p><h2 id="ea50" class="la lb it bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated"><strong class="ak">权限提升</strong></h2><p id="5a72" class="pw-post-body-paragraph kb kc it kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">当我想提升我的权限时，我做的第一件事就是检查sudo权限(例如:我可以作为root运行什么)</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="ebb8" class="la lb it md b gy mh mi l mj mk">sudo -l</span></pre><figure class="ly lz ma mb gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nk"><img src="../Images/41b1ca8a5e60e621a43885dcab7231b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RXec-lIqG8dhbzEP"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">寻找我们可以作为root运行的内容</figcaption></figure><p id="fa24" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我看到我们可以以root身份运行<strong class="kd iu"> tar </strong>，这样我们就可以去<a class="ae nl" href="https://gtfobins.github.io/" rel="noopener ugc nofollow" target="_blank"> GTFObins </a>寻找升级技术。</p><figure class="ly lz ma mb gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nm"><img src="../Images/5461a4df2c19906ccd1983487f913503.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ffEoe6L6aTobWlDBcdJy0Q.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">在GTFObins上查找tar命令</figcaption></figure><p id="5367" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">运行命令</p><figure class="ly lz ma mb gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nn"><img src="../Images/18fa0f5d458fa9a091d0899f50e4e73b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZlX8037ETVv2fteQ"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">运行tar升级技术</figcaption></figure><p id="05de" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们有了根用户权限</p><figure class="ly lz ma mb gt ju gh gi paragraph-image"><div class="gh gi no"><img src="../Images/7058228a44632fe58c662f20ea5d413d.png" data-original-src="https://miro.medium.com/v2/resize:fit:168/0*XGKvOc63XjejiWTw"/></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">发现我们是谁</figcaption></figure><p id="f927" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">恭喜你，你已经根了机器。感谢您阅读本CTF演练，请记住<strong class="kd iu">仅</strong>将此信息用于<strong class="kd iu">道德目的。</strong></p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="df55" class="nw lb it bd lc nx ny nz lf oa ob oc li od oe of ll og oh oi lo oj ok ol lr om bi translated">🔈 🔈Infosec Writeups正在组织其首次虚拟会议和网络活动。如果你对信息安全感兴趣，这是最酷的地方，有16个令人难以置信的演讲者和10多个小时充满力量的讨论会议。<a class="ae nl" href="https://iwcon.live/" rel="noopener ugc nofollow" target="_blank">查看更多详情并在此注册。</a></h1><div class="on oo gp gr op oq"><a href="https://iwcon.live/" rel="noopener  ugc nofollow" target="_blank"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd iu gy z fp ov fr fs ow fu fw is bi translated">IWCon2022 - Infosec书面报告虚拟会议</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">与世界上最优秀的信息安全专家建立联系。了解网络安全专家如何取得成功。将新技能添加到您的…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">iwcon.live</p></div></div><div class="oz l"><div class="pa l pb pc pd oz pe jz oq"/></div></div></a></div></div></div>    
</body>
</html>