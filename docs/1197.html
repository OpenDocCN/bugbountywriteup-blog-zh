<html>
<head>
<title>A weird XSS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">怪异的XSS</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/a-weird-xss-77c13d135c9f?source=collection_archive---------1-----------------------#2021-03-30">https://infosecwriteups.com/a-weird-xss-77c13d135c9f?source=collection_archive---------1-----------------------#2021-03-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/d5d0dddce373fe204317006b431cb14b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*E1izXr-kd23vbSFO.png"/></div></figure><p id="d584" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">嗨，朋友们，你们好吗？今天我来写我的第一篇文章，告诉你我是如何以一种稍微不同的方式停止在XSS的探索的，所以我们开始吧。</p><p id="4af1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">简单介绍一下，我的“黑客名字”gato (gato在巴西葡萄牙语中是猫，因为我想证明好奇心只会增强猫的力量)，我19岁，我热爱技术，最近开始从事信息安全领域的工作。</p><p id="aa08" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">所以加油吧！</p><p id="e078" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">由于错误没有被修复，出于道德原因，我将该网站命名为redacted.xxx.br！</p><h1 id="a9fc" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">第1部分:搜索</h1><p id="f4f7" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">这一切都是从一个简单的愿望开始的，那就是在某个网站上找到一个漏洞，赚点外快，这种情况在巴西并不容易…所以我在网上冲浪，直到它落到了一个. xxx.br网站上，我知道政府网站有非常糟糕的安全历史，我想我应该检查一下应用程序，看看是否有所发现。我开始在最简单的输入中注入恶意软件，但一切似乎都被很好地净化了，所以我决定增加一点。</p><h1 id="1371" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">第2部分:工具</h1><p id="84be" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">我开始用<a class="ae lv" href="https://github.com/aboul3la/Sublist3r" rel="noopener ugc nofollow" target="_blank"> Sublist3r </a>工具枚举子域，但是没什么奇怪的，于是我去用<a class="ae lv" href="https://github.com/devanshbatham/ParamSpider" rel="noopener ugc nofollow" target="_blank"> ParamSpider </a>工具分析找到的主机的参数。这个列表很大，特别是当我挑选了两个有200回报的喜欢和那些有404的(总是很好地看到一些东西反映在糟糕的404页面上)。</p><p id="6b42" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">由于我还没有尝试自动化这个过程，所以我打开了列表中的所有链接，看看它是否有反射(你可以使用<a class="ae lv" href="https://github.com/projectdiscovery/httpx" rel="noopener ugc nofollow" target="_blank"> Httpx </a>工具，使用参数-match-string和-match-regex，你可以搜索你的反射)，直到我找到下面的页面:</p><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi lw"><img src="../Images/8b9c6cfcf221c8bd68ff2dccf9900dab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oGQtuHJXConf6CED.png"/></div></div></figure><p id="f476" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">正如您所看到的，虽然参数都是小写的，但是它被反映为第一个字母是大写的，其余的是小写的，这是对专有名称的简单处理！</p><p id="334e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我试图注入一个有效负载来查看它是否会被执行，但是行为被应用在我的警报(1)中，并且方法没有被执行。</p><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/5cd0cf9336625714f6c0f025f4b216b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/0*6OStpZKcyAvDKYh2.png"/></div></figure><h1 id="d16b" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">第三部分:注射</h1><p id="ec07" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">当我失去耐心时，我做了每个小孩都会做的事情，我开始Ctrl + C和Ctrl + V我在互联网上找到的所有有效载荷。成功了吗？当然不是哈哈哈哈哈。</p><p id="1850" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我决定给我的头一些时间，我去喝点水，呼吸一下。正是在那里，我想起了我小时候学习下棋时，老师会设置挑战，棋子以特定的方式放在棋盘上，在一定数量的移动中，我必须将死(赢得比赛)。所以我回到电脑前，带着挑战国际象棋的心态，我开始用同样的方式看待XSS。我做的每一个动作，应用程序都可以以某种方式保护自己，如果我的动作没有积极的效果，我就撤销它，重新开始。</p><p id="6f77" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我开始研究一些执行HTML注入的方法，因为一开始它是有效的。在我到达<a class="ae lv" href="https://www.w3schools.com/html/html_charset.asp" rel="noopener ugc nofollow" target="_blank"> HTML Charset </a>表之前，使用字符的数值，前面加上“&amp;和“#”，可以在屏幕上显示字符。</p><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mg"><img src="../Images/5fe2de68c6e6cd6a3f9511e037502d10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tQVOvCc7mFgW6NB6.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">&amp; #字符编码在URL中(分别为%26和%23)，因此它们不会被视为URL构造符号</figcaption></figure><p id="e9aa" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">当我点击回车，看到我的字符没有被改为大写，我爆发出一个巨大的微笑。</p><p id="aa3c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">做完测试，我最终得到了如下的有效载荷:<em class="ml">&lt;img % 20 src = x % 20 on error = " % 26% 2397% 26% 23108% 26% 23101% 26% 23114% 26% 23116(1)"&gt;。</em>在该警报中，它以HTML编码发送。</p><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mm"><img src="../Images/87e6cd2eb740fc0d7331153eacabf21a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2J0TmMogD3lhXaro.png"/></div></div></figure><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/f381e0d59dc71793224015f6cb0f872d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/0*vrb0AeCm-RcQ0aNr.png"/></div></figure><p id="acbd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我给你的建议是:</p><ul class=""><li id="a857" class="mo mp iq jw b jx jy kb kc kf mq kj mr kn ms kr mt mu mv mw bi translated">工具是伟大的，但是是你使用它们的方式让它们变得伟大！</li><li id="dfde" class="mo mp iq jw b jx mx kb my kf mz kj na kn nb kr mt mu mv mw bi translated">耐心点，如果我需要离开电脑一会儿，扔点东西，然后头脑清醒的回来！</li><li id="1c91" class="mo mp iq jw b jx mx kb my kf mz kj na kn nb kr mt mu mv mw bi translated">保持好奇！</li></ul><p id="1ff1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">就是这样！我希望你喜欢！</p><p id="671e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><a class="ae lv" href="https://www.buymeacoffee.com/gatothehacker" rel="noopener ugc nofollow" target="_blank">给我买杯咖啡！</a>(请思考！美元价值是巴西雷亚尔的五倍)</p></div></div>    
</body>
</html>