# 基本的打嗝套件用法

> 原文：<https://infosecwriteups.com/basic-burp-suite-usage-c23cf65152f2?source=collection_archive---------0----------------------->

## 学习如何拦截和操纵入侵者和中继器的数据。

![](img/58ace55b55eacdb152d8358c15f20409.png)

Burp Suite intercept 的宣传封面——作者[pikisperstar](https://www.freepik.com/free-vector/steal-data-concept_7971765.htm#position=1)

他的教程将向你展示打嗝套件的基本用法。主要的焦点将是截取数据，以及入侵者和中继器的使用。我将使用 hacker101.com 的[和 CTF 的](https://ctf.hacker101.com/)进行一个关于如何使用 Burp Suite 基本工具的现场演示。

如果你觉得 CTF 很有趣，我建议你去看看这个页面，亲自尝试一下。因此，本文将包括一些挑战的剧透。但它也将为您提供一个如何使用 Burp Suite 进行进一步探索的好主意。

# 设置

让我们从基础开始，如何设置打嗝套件。继续从 https://portswigger.net/burp/communitydownload[下载你自己的副本。社区版是免费的，但没有专业版那么强大，它包括对保存和加载项目的限制以及对一些攻击的一些时间延迟。完成下载和安装后，打开它开始(PortSwigger，2021)。](https://portswigger.net/burp/communitydownload)

第一次打开它时，选择一个临时项目并继续。

![](img/c177c804bdfdf8f3c441d0b246b1a89d.png)

选择临时-按作者

![](img/dc1e693c437fbedccfd5fd2f6e06f530.png)

使用默认点击开始打嗝—按作者

# 介绍

Burp Suite 附带了各种工具，我们将在本介绍中重点介绍基本使用所需的工具:入侵者和中继器。但是首先，让我们设置代理。Burp Suite 使用本地代理来捕获数据。如果你想了解更多的代理服务器，我推荐[https://en.wikipedia.org/wiki/Proxy_server](https://en.wikipedia.org/wiki/Proxy_server)。

但是现在，请转到**代理选项卡**。

![](img/e4ca506cabaa289f2d93c04876d9640a.png)

代理选项卡—按作者

在这里你会看到拦截是打开的，如果不是翻转它。这样做的目的是允许 Burp 套件从您的 web 浏览器中截取数据。当你检查一个页面打嗝套件充当中间人。这意味着在你告诉 burp suite 它可以将数据传输到网页之前，页面不会加载。它中途停止所有流量，因此您可以丢弃它或将其转发到 Burp Suite 为您提供的众多工具之一。

在我们做任何事情之前，你需要设置你的浏览器。打开你喜欢的浏览器进入代理设置，输入如下:**地址:127.0.0.1** ，**端口:8080** 并启用。

> 今天的大部分网页都使用 HTTPS 流量。如果你没有正确的证书，你的浏览器几乎每次都会限制你进入。因此，您需要安装 Burp 套件 CA，以便能够拦截 HTTPS 流量。继续之前，请遵循本指南:
> 
> [https://portswigger . net/burp/documentation/desktop/getting-started/proxy-setup/certificate/Firefox](https://portswigger.net/burp/documentation/desktop/getting-started/proxy-setup/certificate/firefox)

快进完成指南。去访问 **127.0.0.1:80** ，点击 Burp Suite logo 下载 CA。打开你最喜欢的浏览器并安装它。

当这一切都完成后，我们准备开始。参观 yahoo.com**。您会注意到页面无法加载。这是因为 Burp 套件拦截了数据包，因此您可以检查数据。观察下面的例子。如果你不想捕捉所有东西，点击**关闭它，拦截打开**。**

**![](img/797b194f2918fa80bed2af07a164042a.png)**

**capture Traffic—按作者**

**我们现在可以右键单击数据包数据，并将其转发到 Burp Suite 提供的众多工具之一。**

**![](img/f30d20d9df2ab33a2dc33957fd839b39.png)**

**工具菜单—按作者**

# **干扰者**

**首先，我们来看看入侵者。这是您可以轻松注入您的漏洞或有效载荷的地方。在我的例子中，我将使用 CTF 表单黑客 101。这是因为这为 Burp Suite 提供了一个相对出色的可能性示例。因此，如果我泄露了太多的剧透，我很抱歉。**

**在第一个示例中，我们找到了一个登录页面:**

**![](img/4e49bc02b740960d6f759e46707b8d49.png)**

**CTF 示例—作者**

**当我们尝试登录时，我们收到一条显示错误用户名的错误消息。表单传递的数据告诉我们什么是对的，什么是错的。我们可以在 Burp Suite 中利用这一点，首先找到用户名，然后找到密码。**

**![](img/f0c458723316507e66e0d9deea320cef.png)**

**CTF 示例—作者**

**首先，在 Burp 套件上启用拦截。接下来尝试登录并捕获 Burp Suite 中的数据，然后将其转发给入侵者。**

**![](img/e9ce380d79e62bb65fced4fb1b1eb7a7.png)**

**截取-按作者**

**接下来发送给入侵者。**

**![](img/bdfded68cb01422c32eece8b5b9e50f3.png)**

**发送给入侵者—按作者**

**当您找到入侵者时，您会注意到 IP 和端口都已填写完毕，您已准备好继续前进。**

**![](img/67f2d3186680f7fedaf6822e36de52c8.png)**

**视图上的入侵者—作者**

**接下来，去阵地，你会看到已经有一些有效载荷的预填充空间。准确的说是 3。我们需要修改它来满足我们的需求。**

**![](img/d92187910f0b8315df3d5649d4e57176.png)**

**入侵者的位置—按作者**

**在攻击类型中，你也有一些选择。在这个例子中，我们将使用狙击手。但是不同的类型给你:**

*   ****狙击手**——这使用一套单独的有效载荷。它依次瞄准每个有效载荷位置，并将每个有效载荷依次放入该位置。不是给定请求的目标位置不受影响，位置标记将被移除，模板中出现在它们之间的任何包含的文本保持不变。这种攻击类型有助于针对常见漏洞分别模糊多个请求参数。攻击中生成的请求总数是有效载荷集中的位置数和有效载荷数的乘积(nullvoid，2021)。**
*   ****攻城锤**——这使用一套有效载荷。它遍历有效载荷，并将相同的有效载荷一次放入所有定义的有效载荷位置。当攻击要求在请求中的多个位置插入相同的输入(例如，Cookie 中的用户名和主体参数)时，这种攻击类型非常有用。攻击中生成的请求总数就是有效载荷集中的有效载荷数(nullvoid，2021)。**
*   ****干草叉** —这使用多个有效载荷集。每个定义的位置都有不同的有效负载设置(最多 20 个)。攻击者同时遍历所有有效载荷集，并将一个有效载荷放入每个定义的位置。换句话说，第一请求将把来自有效载荷集 1 的第一有效载荷放入位置 1，并且把来自有效载荷集 2 的第一有效载荷放入位置 2；第二请求将把来自有效载荷集 1 的第二有效载荷放入位置 1，把来自有效载荷集 2 的第二有效载荷放入位置 2，等等。当攻击需要在请求中的多个位置插入不同但相关的输入时(例如，一个参数中的用户名，另一个参数中对应于该用户名的已知 ID 号)，这种攻击类型非常有用。攻击中生成的请求总数是最小有效载荷集中的有效载荷数(nullvoid，2021)。**
*   **集束炸弹 —这种炸弹使用多种有效载荷。每个定义的位置都有不同的有效负载设置(最多 20 个)。攻击依次遍历每个有效载荷集，以便测试有效载荷组合的所有排列。即，如果有两个有效载荷位置，攻击将把来自有效载荷集 2 的第一个有效载荷放入位置 2，并遍历位置 1 的有效载荷集 1 中的所有有效载荷；然后，它将有效载荷集 2 中的第二个有效载荷放入位置 2，并遍历位置 1 中有效载荷集 1 中的所有有效载荷。当攻击需要在请求中的多个位置插入不同的、不相关的或未知的输入时(例如，猜测凭据、一个参数中的用户名和另一个参数中的密码)，这种攻击类型很有用。攻击中生成的请求总数是所有已定义有效载荷集中有效载荷数量的乘积——这可能非常大(nullvoid，2021)。**

**将其更改为只有一个针对用户名的有效负载。在将被改变的单词周围加上$,我们将在下一步进入该漏洞。**

**![](img/4743db4dfd253bd1e4c24c32d8170b66.png)**

**选择狙击手——作者**

**下一步是装载有效载荷。您可以手动输入用户名，也可以从电脑上的单词列表中加载用户名。在我们的例子中，我们测试了各种用户名和密码。但是您也可以加载针对脚本结构的漏洞来寻找弱点。例如，你可以加载各种类型的 SQL 注入，或者 XSS 呢？利用入侵者获取用户名和密码只是利用它的一种方式。**

**![](img/ed6508df50fe32b3c783a09eb344b739.png)**

**单击加载-按作者**

**![](img/969593e88e3964c588fb6a3277a064d6.png)**

**导航到您自己的用户名单词列表，然后单击打开—按作者**

**![](img/1ea7b4060b5c3f93acf73b68d0e76a4c.png)**

**现在你可以看到用户名已经被加载了——按作者**

**接下来，我们想捕捉一个特定的结果。我们想知道用户名是否正确，而不需要查看位和字节长度，也不需要猜测。这很容易做到。打嗝套件提供了一个点击修复。转到选项，向下滚动到 grep extract，选择添加，单击获取数据，标记要监控的文本，然后单击确定。Burp Suite 将为您生成一个 regex 字符串。**

**![](img/814cc147a80e6f4f0515121f02818c0b.png)**

**转到 grep，然后单击添加—按作者**

**![](img/71523f20bdb6105a3f26cb4a7c62e773.png)**

**选择提取数据-按作者**

**![](img/a78c806e2f55ceeeeb4a5384669b73ee.png)**

**标记您需要的文本，然后单击“确定—按作者”**

**![](img/9ff788509ce0ff6d9644a088df6a600f.png)**

**您现在可以看到为您生成的 regex 字符串——按作者**

**要发起攻击，回到目标并点击开始攻击。一个新窗口将会打开，有效负载将会运行。您现在可以看到所有的用户名都经过了测试。其中一个现在显示错误的密码。然后我们找到了正确的用户名。**

**![](img/30194f3c3fe20e5464e6cdcb15c07c7e.png)**

**转到目标并单击开始攻击—作者**

**![](img/61bea069e2c7022287061e1bd54d07bf.png)**

**让攻击运行，直到你没有得到任何错误-由作者**

**我们现在的下一步是改变位置，以密码而不是用户名为目标。然后加载包含密码的有效载荷，再次进行攻击。**

**![](img/3458672b90a11251f015f9a7f4eaf076.png)**

**将有效负载更改为攻击密码—按作者**

**当攻击完成时，会弹出一个没有返回无效密码的密码。然后我们找到了我们的用户名和密码。让我们试一试。**

**![](img/fa95ff97fd8991f45a64e6c31216306c.png)**

**您可以看到一个密码确实返回了 ok——按作者**

**这一部分仅仅是抓住了《打嗝组曲》中的闯入者给你提供的可能性。如前所述，您可以利用它来运行漏洞，测试各种入口点。我真诚地希望你已经获得了如何利用它的基本知识，并且到目前为止是快乐的。**

# **中继器**

**repeater 是一个很好的工具，当您想要在头中插入特定类型的代码时，可以使用它。或者只是四处闲逛，尝试不同的可能性。这个例子将演示如何在上传文件时使用它，并在其中包含我们自己的源代码。首先找到一个上传页面。**

**![](img/f90c6c63b796a7b4b3317dd53203621f.png)**

**CTF 示例—作者**

**然后，我们上传一个文件，看看它是否有效，并了解上传后文件是如何存储的。**

**![](img/9080927ccd3c20834388bbc2a080439d.png)**

**使用网站上传脚本—按作者**

**![](img/fbcb3b6e19ebf2f8f1dcbe674be43a6b.png)**

**上传图片 main.png-作者**

**现在让我们捕获数据并将其发送到中继器。**

**![](img/e59336aae0a08c2f47fdcb63691521fa.png)**

**文件已上传，让我们看看作者的打嗝组曲**

**![](img/2b1c3a996fea40639d0bf48809974f2b.png)**

**我们可以在 Intercept 中看到文件内容——按作者**

**![](img/5c4bb483d751c2b6cbb476180f872e15.png)**

**让我们将它发送给复读机——按作者**

**在 repeater 中，在开始编辑之前，首先通过按下 **go** 来测试数据，看看它是否正常工作。左边是你要传输给服务器的内容，右边是服务器给你的响应。您可以查看它的原始代码，十六进制，甚至得到它的样子预览。**

**![](img/8f6be8be812c3b5c0c71e2b03bd7655e.png)**

**按 go 确认数据已传输到服务器——按作者**

**一切都很顺利，我们可以看到文件被上传到上传文件夹，并且在它的前面添加了一个 MD5。我们现在可以实现的是改变上传的路径，同时修改文件的名称。该页面有一个块，所以如果你试图上传一个 PHP 文件，它会检查文件扩展名和数据。但是我们保留了所有的 png 数据，并添加了 HTML 代码和 PHP。**

**![](img/3087f31e1139c9d4a17ea6afcb8ec647.png)**

**文件已上传—由作者上传**

**![](img/5f1a1865108be65d23f7a0d1847f8433.png)**

**按作者更改文件和名称的上传路径**

**![](img/756ff6ed8539bdf75e5b5b7e2f93bac9.png)**

**作者将 PHP 代码添加到 PNG 文件的开头**

**我使用的 html 代码是一个简单的 php shell，具有用户友好的输入。**

**让我们去看看会发生什么。**

**![](img/9dd631bff5694b2eec974d19cf6aab1e.png)**

**将修改后的文件发送到服务器—按作者**

**文件上传成功，我们现在可以在根目录下访问它。因为我们用了**../../../** 将它放在文件夹的更下方。我们也可以尝试我们的 PHP 脚本，并实际读取包含的文件夹。**

**![](img/e51755a8b73d6a3a42b014c175bdbdcf.png)**

**打开我们上传的文件—按作者**

**![](img/c3d285bd4f9e86f88e993674cbb2f877.png)**

**运行 LS 命令查看文件夹中的文件—按作者**

**和前面的例子一样。我们只是触及了表面，但我已经尝试给你一些关于如何使用中继器的知识，以及它可以用来做什么。**

**继续尝试和开发你最喜欢的脚本，如果你喜欢阅读，如果你想看更多，请给这篇文章 50 个掌声。**

**你认为这是激动人心的，想继续读下去吗？在那种情况下，我建议你看看我的其他一些关于技术的文章。这里有一些你可能会喜欢的例子。**

**[](https://medium.com/geekculture/email-and-file-tracking-made-easy-274c200db4d) [## 轻松跟踪电子邮件和文件

### 允许吗？你会用吗？它是如何工作的？让我们进去看看吧，你不会失望的。

medium.com](https://medium.com/geekculture/email-and-file-tracking-made-easy-274c200db4d) [](https://knoph.medium.com/quick-and-easy-breadth-first-search-cbb961b69926) [## 快速简单的广度优先搜索

### 了解如何遍历社交网络或图表

knoph.medium.com](https://knoph.medium.com/quick-and-easy-breadth-first-search-cbb961b69926) 

# 参考

黑客 101。(2021, 03 10).*黑客 101* 。从 https://ctf.hacker101.com/[CTF 取回](https://ctf.hacker101.com/)

nullvoid。(2021, 03 10).*介绍打嗝套件第四部分(入侵者标签)*。检索自一号科技:[http://tech simple 1 . blogspot . com/2014/06/introduction-burp-suite-part-iv . html](http://techsimple1.blogspot.com/2014/06/introduction-burp-suite-part-iv.html)

PortSwigger。(2021, 03 10).*产品*。从 PortSwigger 中检索:[https://portswigger.net/burp](https://portswigger.net/burp)**