<html>
<head>
<title>How I Found My FIRST Vulnerability/Bug Bounty and How You Can Too: Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何发现我的第一个漏洞/Bug奖励，你也可以:第2部分</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/how-i-found-my-first-vulnerability-bug-bounty-and-how-you-can-too-part-2-2e8681f4e3b7?source=collection_archive---------1-----------------------#2022-09-17">https://infosecwriteups.com/how-i-found-my-first-vulnerability-bug-bounty-and-how-you-can-too-part-2-2e8681f4e3b7?source=collection_archive---------1-----------------------#2022-09-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0bcf" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">简单的黑客！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0e64922f1ad53ce17dd4d8320c5a76cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b1htFX-Uy2ieSGT-fol-Ag.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">DALL E AI制作的艺术作品“在我的大脑中混合在一起的多种软件问题的数字艺术”</figcaption></figure><p id="1967" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在第2部分中，我将回顾我是如何发现我的第一个真实世界的漏洞的。如果你没有读过第1部分，<a class="ae lu" href="https://medium.com/p/f2dd0b7d7665" rel="noopener">一定要去看看</a>！由于我不想公开发现这些漏洞的网站，我将提到虚构的网站<a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/www.victim.com">www.victim.com</a>。</p><p id="a3ab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我是<a class="ae lu" href="http://www.victim.com" rel="noopener ugc nofollow" target="_blank">www.victim.com</a>的常客，他们对他们的一些功能进行了修改。我知道他们有一个昆虫赏金计划，所以我决定开始四处打探，看看我是否能找到什么。</p><p id="8021" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">他们有一些新的搜索栏，搜索栏因一个叫做XSS的常见漏洞而臭名昭著。我将转贴一些我在另一篇文章<a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/this-simple-trick-will-exploit-image-uploads-2500-tiktok-bug-bounty-41fc01128ee">上发布的关于XSS的信息，“这个简单的技巧将利用图片上传——2500美元抖音虫赏金。</a>”:</p><blockquote class="lv"><p id="397c" class="lw lx it bd ly lz ma mb mc md me lt dk translated">跨站点脚本(XSS)是所有web应用程序开发人员头疼的安全问题。在这种类型的漏洞中，攻击者会以某种方式将恶意的JavaScript代码或“脚本”注入良性的web应用程序。如果攻击者能够成功嵌入该脚本，那么该脚本将拥有访问重要用户信息的权限。当受害者访问所述web应用时，恶意脚本可以窃取用户的cookies或其他帐户凭证。XSS的传统示例是测试一个输入字段并添加以下有效负载:<code class="fe mf mg mh mi b">&lt;script&gt; alert(“TEST”); &lt;/script&gt;</code>。如果弹出一个警告框说“测试”，那么XSS是可能的。这个脚本可能会被一个更危险的脚本所取代，它会将访问者的session <a class="ae lu" href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie" rel="noopener ugc nofollow" target="_blank"> document.cookie </a>发送给黑客。许多现代web框架都有某种针对易于发现的XSS攻击的防御措施，但黑客们不断想出有趣的方法来绕过这些过滤器。Ismail Tasdelen在Github 上为XSS编译了一个非常棒的有效载荷列表，并且<a class="ae lu" href="https://twitter.com/XssPayloads" rel="noopener ugc nofollow" target="_blank"> @XssPayloads </a>不断地在推特上发布新发现的有效载荷。(<a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/sometimes-times-the-best-hack-is-no-hack-at-all-2900-shopify-bug-bounty-38531b279c67">来源:me </a>)</p></blockquote><p id="9872" class="pw-post-body-paragraph ky kz it la b lb mj ju ld le mk jx lg lh ml lj lk ll mm ln lo lp mn lr ls lt im bi translated">既然已经介绍了XSS的一些基础知识，我将深入介绍我发现的漏洞。为了保护网站的匿名性，我将使用谷歌的XSS游戏来展示结果。</p><h1 id="7e24" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">第一个漏洞</h1><p id="a52e" class="pw-post-body-paragraph ky kz it la b lb ng ju ld le nh jx lg lh ni lj lk ll nj ln lo lp nk lr ls lt im bi translated">在我找到的第一个输入上，我决定测试最基本的XSS有效载荷:<code class="fe mf mg mh mi b">&lt;h1&gt; test &lt;/h1&gt;</code>。我没有立即尝试一个<code class="fe mf mg mh mi b">&lt;script&gt;</code>标签的原因是因为网站有时可以尝试防御<code class="fe mf mg mh mi b">&lt;script&gt;</code>标签，但不能防御<code class="fe mf mg mh mi b">&lt;h1&gt;</code>标签，因为<code class="fe mf mg mh mi b">&lt;h1&gt;</code>标签没有恶意。然而，一旦我知道HTML上呈现了&lt; h1 &gt;标签，我就知道解析没有正确完成。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/461b6de19572729b40f52f2f7989b963.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KjngoxM2itlzsTvW8gY6Dg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><h1>标签(左)和无<h1>标签(右)的区别</h1></h1></figcaption></figure><p id="05a4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以上并不一定意味着该网站是脆弱的，只是它没有正确地净化输入。相反，它接受任何用户输入并在HTML中显示它们。接下来，我尝试了最基本的恶意有效载荷:<code class="fe mf mg mh mi b">&lt;script&gt; alert(1); &lt;/script&gt;</code>。再次成功！现在我知道这个网站很容易受到XSS的攻击。因为<a class="ae lu" href="http://www.victim.com" rel="noopener ugc nofollow" target="_blank">www.victim.com</a>是一个经过认证的站点，所以我将警报的有效负载改为<code class="fe mf mg mh mi b">document.cookie</code>的值。<em class="nm">注意:在下面的网站中，没有cookie，所以我只添加了单词cookie而不是document.cookie，这样它就不会是空白的。</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/d6fd2c2900ee6f073ce9fb5adfeb328b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jtqe6MmjhqzmUe6UrEZDGg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">弹出警告(cookies)。XSS进攻！</figcaption></figure><h2 id="0e74" class="no mp it bd mq np nq dn mu nr ns dp my lh nt nu na ll nv nw nc lp nx ny ne nz bi translated">影响</h2><p id="942b" class="pw-post-body-paragraph ky kz it la b lb ng ju ld le nh jx lg lh ni lj lk ll nj ln lo lp nk lr ls lt im bi translated">证明这次攻击的重要性是很重要的。如上图所示，链接已经生成。如果您要访问该链接，那么在加载脚本时会立即弹出警告。同样的事情发生在<a class="ae lu" href="http://www.victim.com." rel="noopener ugc nofollow" target="_blank">www.victim.com</a>上，尽管<a class="ae lu" href="http://www.victim.com" rel="noopener ugc nofollow" target="_blank">www.victim.com</a>有双因素认证。与其让<code class="fe mf mg mh mi b">&lt;script&gt;</code>弹出警报，不如让&lt;脚本&gt;加载一段更复杂的JavaScript，读取登录用户的<code class="fe mf mg mh mi b">document.cookie</code>，然后将其发送到攻击者的服务器。攻击者将能够加载窃取的cookies，并以用户身份登录和执行操作。</p><h1 id="3a5f" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">第二个漏洞</h1><p id="6d34" class="pw-post-body-paragraph ky kz it la b lb ng ju ld le nh jx lg lh ni lj lk ll nj ln lo lp nk lr ls lt im bi translated">我在<a class="ae lu" href="http://www.victim.com" rel="noopener ugc nofollow" target="_blank">www.victim.com</a>的不同页面上发现了另一个新的输入框。我重复了上面同样的步骤。然而，当我尝试标准<code class="fe mf mg mh mi b">&lt;script&gt; alert(1); &lt;/script&gt;</code>时，不寻常的事情发生了。警告框没有弹出，但不知何故，网站开始在页面上呈现一些其他URL参数以及HTML文件的源代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/c56e956ec9b35c63abf087f0cd9dde6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TKI6J8enIpSyrra7lKlCaw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">不寻常的结果</figcaption></figure><p id="fdb1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">尽管最初的脚本在技术上并没有恶意，但我意识到，因为该网站将url的一部分呈现为纯HTML，所以可能会替换该URL以实际显示正在发生的事情。所以我从URL中删除了<code class="fe mf mg mh mi b">param2</code>,用一个<code class="fe mf mg mh mi b">&lt;script&gt; alert(2); &lt;/script&gt;</code>标签代替了它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/2223cfe9c72bc44d0703a90dc3420a1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HKqhHZMa8pUj--I7qhOjdg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">答对了。</figcaption></figure><h2 id="8edc" class="no mp it bd mq np nq dn mu nr ns dp my lh nt nu na ll nv nw nc lp nx ny ne nz bi translated">影响</h2><p id="5c78" class="pw-post-body-paragraph ky kz it la b lb ng ju ld le nh jx lg lh ni lj lk ll nj ln lo lp nk lr ls lt im bi translated">与之前的撞击相同。</p><h1 id="98a4" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">结论</h1><p id="89e4" class="pw-post-body-paragraph ky kz it la b lb ng ju ld le nh jx lg lh ni lj lk ll nj ln lo lp nk lr ls lt im bi translated">这些都是简单的漏洞，只需很少的时间就可以调查，严重性为中等。它仍然需要受害者用户点击这些链接，但由于网站的域名是合法的，它更容易欺骗别人点击它。我很幸运地知道，该网站正在推出功能更新，以便能够首先找到这些，但网站不断更新，并有漏洞。</p><p id="4f73" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您尚未查看第1部分，请务必前往<a class="ae lu" href="https://medium.com/p/f2dd0b7d7665" rel="noopener">查看</a>！希望这对您有所帮助！</p><pre class="kj kk kl km gt oc mi od oe aw of bi"><span id="9a14" class="no mp it mi b gy og oh l oi oj"><strong class="mi iu">Want to Connect?</strong></span><span id="ce35" class="no mp it mi b gy ok oh l oi oj">Please consider contacting me at roberto.cyberkid@gmail.com following me on Medium, <a class="ae lu" href="https://www.buymeacoffee.com/robertocyberkid" rel="noopener ugc nofollow" target="_blank">buying me a coffee</a>, following me on <a class="ae lu" href="https://twitter.com/CyberKidLama" rel="noopener ugc nofollow" target="_blank">twitter</a>, or connecting with me on <a class="ae lu" href="https://www.linkedin.com/in/roberto-lama-9a126a123/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>!</span></pre><h2 id="b4c5" class="no mp it bd mq np nq dn mu nr ns dp my lh nt nu na ll nv nw nc lp nx ny ne nz bi translated">来自Infosec的报道:Infosec每天都有很多内容，很难跟上。<a class="ae lu" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank">加入我们的每周简讯</a>以5篇文章、4个线程、3个视频、2个Github Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</h2></div></div>    
</body>
</html>