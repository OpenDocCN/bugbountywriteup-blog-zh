<html>
<head>
<title>Let’s Learn API Security: More about Excessive Data Exposure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们学习API安全性:更多关于过度数据暴露的内容</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/lets-learn-api-security-more-about-excessive-data-exposure-372fe2dd70c8?source=collection_archive---------2-----------------------#2022-08-12">https://infosecwriteups.com/lets-learn-api-security-more-about-excessive-data-exposure-372fe2dd70c8?source=collection_archive---------2-----------------------#2022-08-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/c2e1ab9ba3c59bec2fcd43e53fe31e7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*N7EWy7Ibg6xXN8W0"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/s/photos/programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae kf" href="https://unsplash.com/es/@altumcode?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> AltumCode </a>拍摄的照片</figcaption></figure><p id="dbf9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇为API安全而写的文章中，我们将讨论“过度的数据暴露”。但是在继续之前，您需要掌握什么是API以及它们是如何操作的；为此，你需要通读我在这之前写的博文。</p><p id="b58b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://securitylit.medium.com/lets-learn-api-security-more-about-broken-object-level-authorization-b5fd1d73e0d8" rel="noopener">了解关于API安全性的更多信息:关于对象级授权的更多信息</a></p><h1 id="da66" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">API安全:什么是过度数据暴露？</h1><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/e909711857cfe75bda0e8d3b6da418a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/0*uAzQKoC7jyAwEQjT"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://www.wallarm.com/what/excessive-data-exposure" rel="noopener ugc nofollow" target="_blank"> <strong class="bd lg">来源</strong> </a></figcaption></figure><p id="6768" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当应用程序编程接口(API)没有正确实现时，存在各种安全缺陷的风险更高。其中之一就是暴露了过量的数据。顾名思义，“过度数据暴露”就是在客户端泄露过多数据的漏洞。例如，在获取数据时，客户端可能会泄露一些其他信息，如用户密码哈希或其他个人身份信息(PII)，尽管这并不是其本意。</p><p id="6c9a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如:假设一个特定的API应该只检索用户的用户名，但是由于配置错误，它还检索用户的电话号码、电子邮件地址和其他敏感信息。在构建HTML页面的过程中，可能不会显示这些数据；然而，JSON将真正显示原始响应和所有数据。</p><h1 id="bd88" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">为什么会这样？</h1><p id="7178" class="pw-post-body-paragraph kg kh it ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">大多数情况下，API会接受用户的输入，然后，基于该输入，它会从后端检索信息。应用程序编程接口(API)被设计成当用户给它输入时用输出来回复。该输出通常包含一些预定义的参数以及这些参数的值。但是，在某些情况下，可能需要比必要信息更多的信息。如果开发人员将API直接推向生产，而不遗漏属性，这很可能是可以实现的。</p><p id="3aef" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">举例来说，在用户创建帐户后，从后端检索该用户的信息，并在前端提供给用户。用户可以访问名为“邀请”的功能，通过该功能，他们可以邀请其他用户加入他们的组织。当应用程序试图利用用户的电子邮件邀请用户时，它首先检查用户的电子邮件地址是否合法，是否已经存在于平台上。从后端API端点检索这些信息的过程揭示了大量信息，例如用户密码散列和最近登录的IP地址等。</p><p id="f3e7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">应用程序可能没有在网页上呈现信息(当从JSON构建HTML时)，但是如果您点击API，所有的信息都将在JSON响应中可见。该程序可能没有在网页上显示信息。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/dcf096ab229c53db3d9ca86e263710ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VaciqIwNAUNkpfKZ"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://blogs.mulesoft.com/dev-guides/api-security-ways-to-authenticate-and-authorize/" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><p id="5ce5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为大量的用户数据被暴露，所以对手可以开发一个脚本并从数据库中提取所有信息，如果他们愿意的话。如果应用程序使用的散列机制不是很健壮，那么对手可以很容易地破解散列并控制用户帐户。</p><p id="6e8f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设邀请系统发出这样的请求</p><blockquote class="mn mo mp"><p id="81aa" class="kg kh mq ki b kj kk kl km kn ko kp kq mr ks kt ku ms kw kx ky mt la lb lc ld im bi translated">发布/邀请用户</p><p id="f893" class="kg kh mq ki b kj kk kl km kn ko kp kq mr ks kt ku ms kw kx ky mt la lb lc ld im bi translated"><headers/></p><p id="df33" class="kg kh mq ki b kj kk kl km kn ko kp kq mr ks kt ku ms kw kx ky mt la lb lc ld im bi translated">电子邮件=<a class="ae kf" href="mailto:email@abc.com" rel="noopener ugc nofollow" target="_blank">email@abc.com</a></p></blockquote><p id="c63f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该请求的响应应该如下所示</p><blockquote class="mn mo mp"><p id="2b29" class="kg kh mq ki b kj kk kl km kn ko kp kq mr ks kt ku ms kw kx ky mt la lb lc ld im bi">{</p><p id="25ab" class="kg kh mq ki b kj kk kl km kn ko kp kq mr ks kt ku ms kw kx ky mt la lb lc ld im bi translated">“状态”:“已邀请”，</p><p id="cac6" class="kg kh mq ki b kj kk kl km kn ko kp kq mr ks kt ku ms kw kx ky mt la lb lc ld im bi translated"><strong class="ki iu"> "id": "2233 "，</strong></p><p id="dd0c" class="kg kh mq ki b kj kk kl km kn ko kp kq mr ks kt ku ms kw kx ky mt la lb lc ld im bi translated">"用户名":"安迪普拉诺"，</p><p id="ffca" class="kg kh mq ki b kj kk kl km kn ko kp kq mr ks kt ku ms kw kx ky mt la lb lc ld im bi translated"><strong class="ki iu">《真实姓名》:《安迪安东尼奥》，</strong></p><p id="8ff6" class="kg kh mq ki b kj kk kl km kn ko kp kq mr ks kt ku ms kw kx ky mt la lb lc ld im bi translated"><strong class="ki iu">“位置”:“德克萨斯州普莱诺”，</strong></p><p id="ee6c" class="kg kh mq ki b kj kk kl km kn ko kp kq mr ks kt ku ms kw kx ky mt la lb lc ld im bi translated">「电话号码」:「8314587458」，</p><p id="8008" class="kg kh mq ki b kj kk kl km kn ko kp kq mr ks kt ku ms kw kx ky mt la lb lc ld im bi translated">【地址】:“美国德克萨斯州任何一家山寨街头普莱诺”，</p><p id="d820" class="kg kh mq ki b kj kk kl km kn ko kp kq mr ks kt ku ms kw kx ky mt la lb lc ld im bi translated">“信用卡”:“4788254125682541”，</p><p id="0e82" class="kg kh mq ki b kj kk kl km kn ko kp kq mr ks kt ku ms kw kx ky mt la lb lc ld im bi translated">《CVV》:“一一一”，</p><p id="1ef6" class="kg kh mq ki b kj kk kl km kn ko kp kq mr ks kt ku ms kw kx ky mt la lb lc ld im bi translated">"有效期到":" 2027 "</p><p id="548e" class="kg kh mq ki b kj kk kl km kn ko kp kq mr ks kt ku ms kw kx ky mt la lb lc ld im bi translated">《SSN》:“123547569”</p><p id="b2b3" class="kg kh mq ki b kj kk kl km kn ko kp kq mr ks kt ku ms kw kx ky mt la lb lc ld im bi translated">“护照”:“Z547587”</p><p id="7fa9" class="kg kh mq ki b kj kk kl km kn ko kp kq mr ks kt ku ms kw kx ky mt la lb lc ld im bi">}</p></blockquote><p id="52ab" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这实际上暴露了大量不打算共享的用户信息。因此，威胁参与者很容易使用invite机制来获取用户信息。</p><h1 id="e58a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">如何预防？</h1><ul class=""><li id="ba65" class="mu mv it ki b kj mh kn mi kr mw kv mx kz my ld mz na nb nc bi translated">永远不要依赖客户端过滤器来保护敏感信息，因为客户端数据很容易被操纵。</li><li id="1fba" class="mu mv it ki b kj nd kn ne kr nf kv ng kz nh ld mz na nb nc bi translated">总是交叉检查来自API的响应，以确保没有敏感数据被泄露。</li><li id="047c" class="mu mv it ki b kj nd kn ne kr nf kv ng kz nh ld mz na nb nc bi translated">不要使用“to_json()”和“to_string()”等标准方法，而要使用精选的特定属性。</li><li id="6504" class="mu mv it ki b kj nd kn ne kr nf kv ng kz nh ld mz na nb nc bi translated">开发人员可以通过实现基于架构的响应验证来提供额外的安全性。根据API验证方法必须返回的数据由该机制定义和实施。它也包含了错误。</li></ul><h1 id="389b" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="52dd" class="pw-post-body-paragraph kg kh it ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">API是当前环境中应用程序开发的重要组成部分。应用程序的用户界面由前端用户处理，但后端应用程序在API的帮助下检索数据。因此，保护API以防过度数据泄漏是非常必要的。以下是一些保护数据处理和防止API过度暴露数据的基本步骤。众所周知，PII数据必须受到所有用户和应用程序的保护。</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><p id="73f8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">来自Infosec的报道:Infosec上每天都会出现很多难以跟上的内容。 <a class="ae kf" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iu"> <em class="mq">加入我们的每周简讯</em> </strong> </a> <em class="mq">以5篇文章、4个线程、3个视频、2个Github Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</em></p></div></div>    
</body>
</html>