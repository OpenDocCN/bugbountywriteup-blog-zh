<html>
<head>
<title>Add comment on a private Oculus Developer bug report</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">添加对Oculus开发者私人错误报告的评论</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/add-comment-on-a-private-oculus-developer-bug-report-93f35bc80b2c?source=collection_archive---------0-----------------------#2018-10-18">https://infosecwriteups.com/add-comment-on-a-private-oculus-developer-bug-report-93f35bc80b2c?source=collection_archive---------0-----------------------#2018-10-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/30edfc8e2d5cf4f1a7ae0212bd3e09eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*3Byefcy5eXa6F03K8kA4aw.jpeg"/></div></figure><p id="5d9b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">大家好，这一次我想和大家分享我是如何在Oculus开发者支持上的私人错误报告中添加评论的，所以让我们开始吧。:)</p><h1 id="1c51" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated"><strong class="ak">什么是Oculus </strong></h1><p id="318f" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">Oculus VR是一家美国科技公司，由Palmer Luckey、Brendan Iribe、Jack McCauley、Michael Antonov、Nate Mitchell于2012年7月在加州尔湾创立，现在由脸书拥有<strong class="jw ir">更多详情见此<a class="ae lv" href="https://en.wikipedia.org/wiki/Oculus_VR" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir">链接</strong> </a>。</strong></p><h1 id="45c3" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated"><strong class="ak">寻找的故事</strong></h1><p id="c3b3" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">几个月前我已经测试了oculus，但没有发现任何bug。然后在9月17日，我决定再次测试它，所以在四处闲逛<a class="ae lv" href="https://developer.oculus.com" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> Oculus开发者域</strong> </a>时，我注意到一个名为<strong class="jw ir">报告Bug、</strong>的选项，用户可以在这里向Oculus支持团队提交他们的Bug(不是安全Bug)。</p><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi lw"><img src="../Images/09390d6070e9b4a2d9e5fa801ce59f5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dfL8mtshDqAIF1MJ2t7IdQ.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">这是支持仪表板的样子，你可以看到其他用户的公共错误。</figcaption></figure><p id="f4bb" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">当我看到这个选项时，我决定测试它，但在此之前，让我们看看这个选项是如何工作的，让我们来分析一下:)</p><h1 id="b177" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">分析阶段</h1><p id="5012" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">在分析这个选项时，我注意到以下情况:</p><ul class=""><li id="7c49" class="mj mk iq jw b jx jy kb kc kf ml kj mm kn mn kr mo mp mq mr bi translated">用户可以通过两种方式提交bug，公共bug和私有bug。</li><li id="a570" class="mj mk iq jw b jx ms kb mt kf mu kj mv kn mw kr mo mp mq mr bi translated">在公共bug中，任何人都可以添加评论或回复其他评论。</li><li id="90c7" class="mj mk iq jw b jx ms kb mt kf mu kj mv kn mw kr mo mp mq mr bi translated">在私有bug中，除了bug的所有者和支持团队，没有人可以添加评论。</li><li id="d886" class="mj mk iq jw b jx ms kb mt kf mu kj mv kn mw kr mo mp mq mr bi translated">从其他用户的角度来看，私有bug不会出现在仪表板中。</li></ul><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mx"><img src="../Images/b6f860181e5247538907a677821454e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pr-qxWv-PyyznRtVXrnXMQ.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">如上所示，你可以通过勾选“保留私有选项”来将你的bug设为私有</figcaption></figure><h1 id="dac9" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated"><strong class="ak">测试阶段</strong></h1><p id="3cb8" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">我创建了一个公共bug，并在我的bug中添加了注释，之后我回复了我的注释，并用burpsuite拦截了请求，以查看我们在这个选项中有什么样的参数，请求如下所示:</p><blockquote class="my mz na"><p id="cc96" class="ju jv nb jw b jx jy jz ka kb kc kd ke nc kg kh ki nd kk kl km ne ko kp kq kr ij bi translated">POST /graphql？locale=user HTTP/1.1 <br/>主机:graph.oculus.com</p><p id="942a" class="ju jv nb jw b jx jy jz ka kb kc kd ke nc kg kh ki nd kk kl km ne ko kp kq kr ij bi translated">access _ Token = My-Acces-Token &amp; variables = { " input ":{ " client _ mutation _ id ":" 1 "，<strong class="jw ir">" comment _ parent _ id "</strong>:" 556190998150906 "，<strong class="jw ir">" external _ post _ id "</strong>:" 548709645565708 "，" message ":" what ever " } }&amp;blabla</p></blockquote><p id="f2cf" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">正如您在上面看到的，我们有两个有趣的参数:</p><p id="c10f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">1-<strong class="jw ir">“comment _ parent _ ID”</strong>= =&gt;指我的bug ID(你可以从URL链接中找到任何公开的bug ID为<a class="ae lv" href="https://developer.oculus.com/bugs/bug/your-bug-ID/)" rel="noopener ugc nofollow" target="_blank">https://developer.oculus.com/bugs/bug/your-bug-ID/)</a>。</p><p id="4311" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">2-<strong class="jw ir">“external _ post _ id”</strong>= = =&gt;是指我回复给它的评论(我的评论)的ID。</p><p id="d211" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">当我看到上面的要求<strong class="jw ir">时，我想到了两个计划【T30:)</strong></p><p id="2c1b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">计划A : </strong>我想通过把我的bug ID替换成其他用户的bug ID来添加对其他用户私有bug<strong class="jw ir">的评论，</strong>但是没用:(</p><p id="768a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">计划B: </strong>我想通过将<strong class="jw ir"> external_post_id </strong>值替换为其他用户值<strong class="jw ir">来添加对其他用户私有bug的评论，这是他们在私有bug </strong>中的评论id，我创建了两个测试帐户来重现这一点，这非常有效，我绕过了他们的保护，因为他们只检查<strong class="jw ir"> bug ID </strong>而不是<strong class="jw ir"> external_post_id(评论ID)。我在A计划阶段就知道B计划会成功，别问我怎么成功的！！，我就是感觉到了。</strong></p><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi nf"><img src="../Images/9d029c7447c650b685e0dcd60f1676a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ylgrf2JlQoi-fFTBsXjDxw.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">攻击者绕过oculus保护，并在受害者私有bug上添加评论。</figcaption></figure><h1 id="3f39" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated"><strong class="ak">缺陷限制</strong></h1><p id="db69" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">这个bug只有一个限制，问题是<strong class="jw ir">攻击者如何从其他用户的私有bug中获取评论ID</strong>因为他们的bug被设置为私有，正如我之前提到的，除了bug的所有者和支持团队，没有人可以看到私有bug！！！这确实是一个好问题，是的，这很难发现，但并非不可能，假设有人能够披露其他用户的评论id，或者攻击者可以列出随机评论id，可以进行随机攻击，并将他的评论添加到随机的私人错误中，谁知道呢？一切皆有可能:)，我也可以说修复这种错误总是正确的事情。</p><p id="d416" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我直接向<strong class="jw ir">脸书安全团队</strong>报告了这个bug，并认为它是有效的bug。</p><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/75598a306467bf644c62838ebfdb12d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*rmndIXRoDkSnMPNTfOzc3A.png"/></div></figure><p id="8779" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我要感谢脸书安全团队的赏金。</p><p id="f18a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">时间表:</strong><br/>2018年9月17日—初始报告<br/>2018年9月19日—报告已分类<br/>2018年10月5日—错误已修复<br/>2018年10月5日—修复已确认<br/>2018年10月10日—奖金已发放</p><p id="d11d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">概念验证视频:</strong></p><figure class="lx ly lz ma gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="148c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">武道:</strong></p><p id="0e1d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">1-试着像往常一样不时检查你的目标。</p><p id="9a26" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">2-了解web应用程序。工作以及你有什么权限。</p><p id="8dc9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">3-要有创意:)。</p><p id="f82a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">谢谢你</p><p id="12eb" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">萨尔马德·哈桑 ( <a class="ae lv" href="https://twitter.com/JubaBaghdad" rel="noopener ugc nofollow" target="_blank">朱巴巴格达</a>)</p></div></div>    
</body>
</html>