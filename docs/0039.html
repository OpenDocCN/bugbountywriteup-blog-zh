<html>
<head>
<title>#BugBounty — AWS S3 added to my “Bucket” list!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated"># BugBounty——AWS S3加入了我的“遗愿”清单！</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/bugbounty-aws-s3-added-to-my-bucket-list-f68dd7d0d1ce?source=collection_archive---------2-----------------------#2018-01-16">https://infosecwriteups.com/bugbounty-aws-s3-added-to-my-bucket-list-f68dd7d0d1ce?source=collection_archive---------2-----------------------#2018-01-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9149" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嗨伙计们，</p><p id="c38f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可能还记得价值<a class="ae kl" href="https://www.forbes.com/sites/thomasbrewster/2015/12/17/facebook-instagram-security-research-threats/#1ed5a3492fb5" rel="noopener ugc nofollow" target="_blank">百万美元的Instagram漏洞</a>，该漏洞允许安全研究员韦斯·温伯格访问Instagram上的每一张图片和账户。这一切之所以成为可能，是因为他获得了进入<em class="km"> Instagram的S3存储区</em>的权限，该公司在那里存储了从源代码到图像的所有东西。在这篇特别的博客中，我将向你解释“错误配置的AWS存储桶是如何成为巨大的安全风险的”。</p><p id="2d44" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最近在我搜索bug的时候，我遇到了一个错误配置的印度电子商务公司的AWS S3桶，它给了我完全访问他们的S3桶的权限，允许他们下载、上传和覆盖文件。让我们对此进行更深入的研究，看看我是如何做到这一点的——因此，在搜索网站的一些安全漏洞时，我看到了一个职业页面，用户可以在那里申请相关的工作并上传简历。我开始测试它，发现了一个端点(让我们把公司命名为xyz)</p><p id="3afb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">【https://xyz.s3.amazonaws.com/career%2Ftest.p】<a class="ae kl" href="https://zoomcar.s3.amazonaws.com/career%2Ftest.docx" rel="noopener ugc nofollow" target="_blank"><em class="km"/></a><em class="km">df "</em>没有ACL限制设置，任何未经认证的用户都可以访问任何文件，下面是curl请求—</p><p id="e720" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="km">curl-XGET’</em><a class="ae kl" href="https://zoomcar.s3.amazonaws.com/a.txt'" rel="noopener ugc nofollow" target="_blank"><em class="km">https://xyz.s3.amazonaws.com/career/test.pdf'</em></a></p><p id="934f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回应是test.pdf的内容。类似地，我发现在S3存储桶上启用了“PUT”方法，我可以简单地将任何文件写入S3存储桶，它是公开可写的。</p><p id="d69b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="km">curl-XPUT-d ' HACKED ' '</em><a class="ae kl" href="https://zoomcar.s3.amazonaws.com/a.txt'" rel="noopener ugc nofollow" target="_blank">【https://xyz.s3.amazonaws.com/career/test.pdf'】T21</a></p><p id="f4c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我对filename运行了一些暴力操作，并且能够读取其他用户的简历内容。:)，现在，我必须把这一个水平提高，我的下一个目标是列出并阅读S3桶上所有可用的文件。我连接到s3命令行并运行以下命令</p><p id="b108" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="km">“root @ logic bomb ~ # AWS S3 ls S3://</em><a class="ae kl" href="https://zoomcar.s3.amazonaws.com/a.txt'" rel="noopener ugc nofollow" target="_blank"><em class="km">xyz.s3.amazonaws.com</em></a><em class="km">”</em></p><p id="ef04" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">毫不奇怪，我能够访问完整的s3存储桶，所有用户的简历(也有更多敏感数据和目录)都是公开可访问和可读的:)我尝试了更多的命令</p><p id="2b17" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">root @ logic bomb:~ # AWS S3 RM<em class="km">S3://</em><a class="ae kl" href="https://zoomcar.s3.amazonaws.com/a.txt'" rel="noopener ugc nofollow" target="_blank"><em class="km">xyz.s3.amazonaws.com</em></a><em class="km">/career/test . pdf</em></p><p id="69fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">删除:<em class="km">S3://</em><a class="ae kl" href="https://zoomcar.s3.amazonaws.com/a.txt'" rel="noopener ugc nofollow" target="_blank"><em class="km">xyz.s3.amazonaws.com</em></a><em class="km">/career/test . pdf</em></p><p id="85f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我也可以删除这些文件。</p><p id="8f5b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">总之，错误配置的S3存储桶可能会使您的组织暴露敏感数据。</strong></p><p id="b96c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="km">缓解— </em> </strong> <em class="km">建议您及时检查您的S3存储桶及其内容，以确保您不会无意中向用户提供您不想要的对象。作为参考，你可以阅读下面的链接— </em></p><div class="kn ko gp gr kp kq"><a href="https://cloudacademy.com/blog/amazon-s3-security-master-bucket-polices-acls/" rel="noopener  ugc nofollow" target="_blank"><div class="kr ab fo"><div class="ks ab kt cl cj ku"><h2 class="bd ir gy z fp kv fr fs kw fu fw ip bi translated">亚马逊S3安全:主S3桶策略和ACL</h2><div class="kx l"><h3 class="bd b gy z fp kv fr fs kw fu fw dk translated">欢迎阅读我的AWS安全系列的第8部分。本周，我将介绍一些围绕…的安全特性</h3></div><div class="ky l"><p class="bd b dl z fp kv fr fs kw fu fw dk translated">cloudacademy.com</p></div></div><div class="kz l"><div class="la l lb lc ld kz le lf kq"/></div></div></a></div><p id="7bd4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="km">报告详情- </em></p><p id="c980" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2017年12月8日—向相关公司报告了错误。</p><p id="ffae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2017年12月29日—错误被标记为已修复。</p><p id="4571" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2018年1月1日—重新测试并确认了修复。</p><p id="851e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2018年1月7日—由公司授予。</p><p id="9677" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢阅读！</p><p id="85ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">~逻辑炸弹(<a class="ae kl" href="https://twitter.com/logicbomb_1" rel="noopener ugc nofollow" target="_blank">https://twitter.com/logicbomb_1</a>)</p></div></div>    
</body>
</html>