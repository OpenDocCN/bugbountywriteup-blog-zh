<html>
<head>
<title>Using Kubernetes Plugins for Better Security</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Kubernetes插件提高安全性</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/using-kubernetes-plugins-for-better-security-7b083cc3a7b7?source=collection_archive---------0-----------------------#2022-08-17">https://infosecwriteups.com/using-kubernetes-plugins-for-better-security-7b083cc3a7b7?source=collection_archive---------0-----------------------#2022-08-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6e0f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">扩展和维持集装箱安全</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/ff4b1549ff77b8821d3f3ca798b98364.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/0*dlYjnrGe4ZEMYhUq"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk translated">图片作者<a class="ae kr" href="https://www.linkedin.com/in/jayachandra-sekhar-reddy/" rel="noopener ugc nofollow" target="_blank">作者</a></figcaption></figure><p id="f2b7" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">利用可扩展性构建出色的行业标准容器编排的能力使Kubernetes成为最优秀和最值得称赞的工具之一。可扩展性是一种观点，产生于对现有系统进行更多添加和贡献以提供更好和更安全的功能的愿望。</p><p id="f14b" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">根据设计，Kubernetes通过消除对底层特性应用补丁的需要来支持定制配置和特定于用例的属性。插件是扩展Kubernetes特性和交付开箱即用产品的手段。</p><p id="91c2" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">保护Kubernetes吊舱使RBAC、更新的k8、防火墙、隔离吊舱和<a class="ae kr" href="https://www.armosec.io/blog/kubernetes-admission-controller/" rel="noopener ugc nofollow" target="_blank"> Kubernetes准入控制器</a>浮现在脑海中。虽然目前的特性是可行的选择，但是插件提供了一种值得信赖的、更简洁的方法来保护Kubernetes中的容器。</p><p id="0bbe" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">Kubernetes插件给平台带来了无数的安全好处:功能可以用你选择的语言动态开发。</p><h1 id="a451" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">插件提供了什么让它们变得优雅和实用？</h1><p id="0491" class="pw-post-body-paragraph ks kt iq ku b kv mg jr kx ky mh ju la lb mi ld le lf mj lh li lj mk ll lm ln ij bi translated">Kubernetes自身不断进化成一个连体生态系统。通过在DevOps中集成、重构和定制大多数排序后特性，Kubernetes现在几乎拥有了一切。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ml"><img src="../Images/95b52fe0e443a474f7ea68927bd5cf47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qaiTsQKhJE8s9_92"/></div></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk translated"><a class="ae kr" href="https://www.learnitguide.net/2020/05/kubernetes-services-explained-examples.html" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><p id="6e75" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">但是，在企业希望实现超出范围的功能，并且需要实现定制操作的情况下，Kubernetes的特性是不够的。虽然自定义实现是一种更好的可能性，但它并不总是安全的。</p><p id="3b72" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">考虑这样一个场景，我们的实现需要ssh到云上的一个正在运行的pod中，比如说GKE或AWS EKS，而不牺牲安全性。我们如何安全地访问来自多个证书颁发者的证书并更新或打印它们？</p><p id="8fd5" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">随着分布式和云不可知论者的采用，对定制特性的需求和需求激增。</p><p id="486e" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">从功能和安全性的角度来看，一个最佳的、经过计算的决策是利用插件。插件是对Kubernetes的扩展，它们是在考虑安全性的情况下精心设计和开发的。Kubernetes通过集成众多值得信赖的插件扩展了它的支持。</p><h1 id="a50f" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">使用插件扩展安全措施的不同方式</h1><h1 id="ef00" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">准入控制器插件</h1><p id="bc77" class="pw-post-body-paragraph ks kt iq ku b kv mg jr kx ky mh ju la lb mi ld le lf mj lh li lj mk ll lm ln ij bi translated">提交更改集群或对象状态的请求是一项常规操作。过滤哪个请求应该到达API服务器增强了安全性。</p><p id="c131" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">评估<a class="ae kr" href="https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/" rel="noopener ugc nofollow" target="_blank">准入控制者</a>可能非常有利可图，并且对安全有利。它们提供独有的管理和门控功能。</p><p id="840c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">准入控制器插件充当网关，通过在对象持久化之前拦截请求，对API服务器的请求进行认证和授权。插件代码驻留在API服务器中，在使用之前必须编译成二进制代码。</p><p id="8f2e" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">该插件可以变异和验证传入的请求，有时会在允许它们进入API服务器之前应用系统配置的默认值。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="8360" class="mv lp iq mr b gy mw mx l my mz">--admission-control=MutatingAdmissionWebhook, DenyEscalatingExec</span></pre><p id="2d0c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">KubeAPI标志允许用户启用准入控制器插件。</p><p id="a93d" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">在集群中进行修改之前，插件接受逗号分隔的有序准入控制选项列表。</p><h1 id="f64f" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">RBAC插件</h1><p id="0d5e" class="pw-post-body-paragraph ks kt iq ku b kv mg jr kx ky mh ju la lb mi ld le lf mj lh li lj mk ll lm ln ij bi translated">分发和编目是Kubernetes的核心。集群驻留在远程服务器上，可以通过Kubectl/gRPC访问。通过策略管理和限制访问是提高隐私和安全性的关键。</p><p id="7f5c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><a class="ae kr" href="https://blog.knoldus.com/rbac-in-kubernetes/" rel="noopener ugc nofollow" target="_blank"> RBAC插件</a>允许管理员设计一种基于角色设置和管理用户权限的机制。角色可以是全局、项目、节点或用户定义的级别。</p><p id="f4ea" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">Kubectl是一个设置RBAC、描述和修改对象的平台。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="0e91" class="mv lp iq mr b gy mw mx l my mz">--authorization-mode=node,RBAC — policies</span></pre><p id="6b25" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">KubeAPI标志—授权模式允许配置角色。</p><p id="c8b5" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">实施RBAC需要授权策略和配置列表。</p><h1 id="f1a1" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">容器网络接口插件</h1><p id="bc26" class="pw-post-body-paragraph ks kt iq ku b kv mg jr kx ky mh ju la lb mi ld le lf mj lh li lj mk ll lm ln ij bi translated">通过网络，保护集群之间的通信协议至关重要。为了消除复杂性，Kubernetes管理容器端口到主机端口的映射，并为集群中的每个pod分配唯一的集群范围的IP地址，从而形成向后兼容的沿袭。</p><p id="a3b4" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><a class="ae kr" href="https://github.com/containernetworking/cni" rel="noopener ugc nofollow" target="_blank"> CNI </a>是一个云原生的基础，提供了开发配置网络接口插件的专用规范库。</p><p id="b4dd" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">CNI仓库拥有大量插件。CNI旗下的插件遵循安全准则，并与容器网络连接有关。插件使用脚本完成工作。</p><p id="7cb8" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">注意: CNI插件是语言无关的。go lang支持利用插件功能。</p><h1 id="44e8" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">第三方插件</h1><p id="64c9" class="pw-post-body-paragraph ks kt iq ku b kv mg jr kx ky mh ju la lb mi ld le lf mj lh li lj mk ll lm ln ij bi translated">Kubernetes的广泛有用和可靠的命令行工具kubectl支持插件管理器<a class="ae kr" href="https://krew.sigs.k8s.io/plugins/" rel="noopener ugc nofollow" target="_blank"> KREW </a>，为开发人员提供了开发和托管特定用例插件的健壮选项。</p><p id="5cdc" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">KREW展示了选择插件开发语言的灵活性。使用Kubectl安装和实现插件非常简单。这些插件驻留在一个名为Krew-index的集中存储库中。</p><p id="f15c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">插件是值得信任的，因为插件是根据决策标准被集中存储库接受的，并由社区根据具体情况进行评估。</p><p id="847b" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">突出显示的插件是通用的，强烈推荐。Kubernetes生态系统提供了大量定制和内置选项来扩展您的集群功能和安全性。</p><h1 id="6b1e" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">结论</h1><p id="63cf" class="pw-post-body-paragraph ks kt iq ku b kv mg jr kx ky mh ju la lb mi ld le lf mj lh li lj mk ll lm ln ij bi translated">在部署和编排Kubernetes集群之前，安全性是要考虑的一个主要方面。插件提供了获得高级功能的可靠和安全的方法。</p><p id="038c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">Kubernetes插件只不过是为完成与专用K8s组件相关的特定任务而开发的可执行程序，例如准入控制器、RBAC、处理来自多个发行者的证书、进入云的ssh、网络连接等等。</p><p id="7956" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">组织可以在市场上买到各种各样的插件。存在多个插件来完成相同的任务，但提供不同的功能和安全性。挑选/开发正确的插件是管理员的任务。</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><p id="5346" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">来自Infosec的报道:Infosec上每天都会出现很多难以跟上的内容。 <a class="ae kr" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku ir"> <em class="nh">加入我们的每周简讯</em> </strong> </a> <em class="nh">以5篇文章、4个线程、3个视频、2个Github Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</em></p></div></div>    
</body>
</html>