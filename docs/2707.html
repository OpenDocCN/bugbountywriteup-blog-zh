<html>
<head>
<title>Efficient methodology to get P2 level - subdomain takeover vulnerability</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">获取P2级子域接管漏洞的有效方法</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/efficient-methodology-to-get-p2-level-subdomain-takeover-vulnerability-3a68b883b150?source=collection_archive---------1-----------------------#2022-12-27">https://infosecwriteups.com/efficient-methodology-to-get-p2-level-subdomain-takeover-vulnerability-3a68b883b150?source=collection_archive---------1-----------------------#2022-12-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1dd5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">大家好，我是一名网络安全爱好者和研究者。这是我的第一个博客，我将解释我是如何用我的<strong class="jp ir">简单</strong>和<strong class="jp ir">高效方法</strong>黑进一个组织的子域的。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi kl"><img src="../Images/733f0b4d71c2b5f1891c76d5df8c6632.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/0*xQu9WbJilRB-loDE.jpeg"/></div></figure><p id="d8ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你好，联邦调查局！！</p><p id="ea78" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在过去的几个月里，我一直在寻找并从一个节目切换到另一个节目。在我旅程的开始阶段，我得到了20多个重复的bug，感到疲惫和沮丧&amp;有很多精疲力竭。即使在那之后，我决定继续前进…<br/>有一天，我正在寻找一个负责任的漏洞披露项目(不能透露项目名称)，并对我的目标进行了彻底的侦察。<br/>现在，在跳转到该方法之前，我们将学习一点关于子域和漏洞存在的地方！！</p><p id="3a0b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">什么是子域？<br/> </strong>子域是加在域名上的前缀，用来区分你网站的不同部分。网站所有者通常使用子域来管理需要自己的内容层次结构的大型部分，如在线商店、博客或支持平台。</p><p id="7f71" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">什么是子域接管？</strong> <br/>子域接管是一种漏洞类型，攻击者可以通过这种漏洞获得公司子域的控制权。这是由于DNS配置不正确造成的。<br/>换句话说，假设你是一名公司开发人员，负责为即将到来的活动创建一个网站(这里是一个子域)。您设计了网站，使用适当的DNS配置托管了网站，现在网站可以运行了。<br/>活动结束后，公司指示您删除该网站，因为活动页面不再有用。开发者可以简单地删除子域并报告“是的，网站现在关闭了。”但是，DNS仍然没有关闭，所以它现在指向一个不存在的子域。我们，攻击者，将会攻击这里。我们将简单地创建一个相同名称的子域，在许多情况下，CNAME作为DNS记录指向的网站。<br/> <strong class="jp ir">轰！你控制了一个子域。</strong></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi kt"><img src="../Images/69b7fa743203a887545eda8410376ad1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/0*o4vHnCALajDojrpD.jpeg"/></div></figure><blockquote class="ku kv kw"><p id="ff3b" class="jn jo kx jp b jq jr js jt ju jv jw jx ky jz ka kb kz kd ke kf la kh ki kj kk ij bi translated"><em class="iq">我个人的侦察方法论和工作流程。</em></p></blockquote><p id="b154" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我想简单介绍一下我的侦察工作流程。我经常使用<em class="kx"> amass </em>、<em class="kx"> subfinder </em>、<em class="kx"> assetfinder </em>和<em class="kx"> chaos discovery数据集</em>、<strong class="jp ir">、</strong>进行子域枚举，我的下一步是解析发现的子域以检查是否有存活的主机，然后进行漏洞分析，最后进行手动测试。那天，我教使用<em class="kx"> crt.sh </em>作为<em class="kx"/>an<em class="kx"/>addon<em class="kx"/>step，因为我很好奇去探索它，并且正在学习这个工具是如何工作的，幕后是什么？这个工具列举了一些额外的子域，这些子域不是我在常规侦察阶段收集到的。好吧！！现在我把我列举的所有子域分解并分类到一个. txt文件中&amp;保存它。现在，我试图检查子域接管，因为这是我侦察阶段必须做的一部分。我使用subzy，subjack和nucleus/take over模板进行子域接管，因为这只是我的漏洞分析的一部分，它可能会给出假阳性。我尝试了subzy和subjack，但是没有成功。然后我用nucleus和nucleus-template/take over在几分钟内我得到了一个<em class="kx"> high </em>标题为<em class="kx"> tilda接管的警告。</em></p><pre class="km kn ko kp gt lb lc ld bn le lf bi"><span id="9a6d" class="lg lh iq lc b be li lj l lk ll">nuclie -l subdomain.txt -t $path/nuclei-templates/takeovers/</span></pre><p id="ff62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我手动访问该页面，它显示“域名已被分配”，这意味着该子域没有运行任何服务，但它是活跃的，我们也可以选择<em class="kx">404-未找到</em>，并开始知道该子域属于<strong class="jp ir">蒂尔达</strong>服务。由于我不能公开透露程序名，让我们假设<strong class="jp ir">example.com</strong>根域名<em class="kx">和易受攻击的子域看起来像；<strong class="jp ir">pdf.example.com</strong>。</em></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi lm"><img src="../Images/57f2c93ccd1d6f35a93d19a4c93f2cf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hj8UT2yJhL9Hn8b6.png"/></div></div></figure><p id="7945" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">图一</p><p id="da41" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如我们看到的<strong class="jp ir">图1 </strong>网页窗口，我意识到有些不同，因为它的根域持有pdf作为后缀。一般来说，pdf必须是在网络服务器上列出的目录。https://example.com/pdf在这里我们可以做一些恶意的事情。所以，我去了tilda.com，创建了一个账户，创建了我的网页，并把它链接到我之前发现的子域名。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi lm"><img src="../Images/f9bbc3bdfbff2a3b180f7d05b118af53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8cgsq-elXs1rfXhx.png"/></div></div></figure><p id="0d66" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">图二</p><p id="cc74" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">又轰！！组织成功黑掉&amp;被伦理举报。</strong></p><p id="1b48" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你也可以查看下面的EdOverflow的GitHub库作为参考。</p><p id="b812" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae lr" href="https://github.com/edoverflow/can-i-take-over-xyz" rel="noopener ugc nofollow" target="_blank">GitHub—EdOverflow/Can-I-take-over-xyz:“我能接管XYZ吗？”—服务列表以及如何使用悬空DNS记录声明(子)域。</a></p><blockquote class="ku kv kw"><p id="20da" class="jn jo kx jp b jq jr js jt ju jv jw jx ky jz ka kb kz kd ke kf la kh ki kj kk ij bi translated">希望你喜欢。感谢阅读:)</p></blockquote></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="181d" class="lz lh iq bd ma mb mc dn md me mf dp mg jy mh mi mj kc mk ml mm kg mn mo mp mq bi translated">来自Infosec的报道:Infosec每天都有很多内容，很难跟上。<a class="ae lr" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank">加入我们的每周简讯</a>以5篇文章、4条线索、3个视频、2个GitHub Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</h2></div></div>    
</body>
</html>