<html>
<head>
<title>A Subdomain Take Over Worth Three Figure$</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个子域价值三位数美元</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/a-subdomain-take-over-worth-three-figure-92625d3dfda8?source=collection_archive---------0-----------------------#2021-03-13">https://infosecwriteups.com/a-subdomain-take-over-worth-three-figure-92625d3dfda8?source=collection_archive---------0-----------------------#2021-03-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d2a4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">当良好的道德与好运和正确的元素相遇时，这种结合会带来好的结果。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ac13268d5cc0c22cafd8f7e2c06d2944.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jvveWQ2s-nFB0p_6"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@jinyun?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">金 运</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><blockquote class="kz"><p id="9b0c" class="la lb it bd lc ld le lf lg lh li lj dk translated"><em class="lk"/><strong class="ak">子域</strong> <strong class="ak">接管<em class="lk"> </em> </strong> <em class="lk">发生在攻击者获得目标域的子域控制权时。通常，当子域在域名系统(</em><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Glossary/DNS" rel="noopener ugc nofollow" target="_blank"><em class="lk">【DNS</em></a><em class="lk">)中有规范名称(</em><em class="lk">【CNAME</em><em class="lk">)但没有主机为其提供内容时，会发生这种情况。这可能是因为虚拟主机尚未发布或者虚拟主机已被删除。攻击者可以通过提供他们自己的虚拟主机，然后托管他们自己的内容来接管那个子域</em></p></blockquote><h1 id="1d1a" class="ll lm it bd ln lo lp lq lr ls lt lu lv jz lw ka lx kc ly kd lz kf ma kg mb mc bi translated">子域接管(STO)</h1><p id="aa58" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx lj im bi translated">当我开始做Bug Bounty的时候，子域接管是我最避免的那种漏洞。读到这里，你可能会问自己，为什么？嗯——老实说，为了让你完成这件事，你需要一些好运气。事实上，这不是你在网上读到的典型的STO。这只是纯粹的运气，并有适当的元素，以获得支付这个漏洞。</p><h1 id="540c" class="ll lm it bd ln lo lp lq lr ls lt lu lv jz my ka lx kc mz kd lz kf na kg mb mc bi translated">讲故事，Thesenuts.org和结果。</h1><p id="6231" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx lj im bi translated">你可以从下面链接的照片中看到，经过一个月零几天的等待，我终于得到了回应。这是一个子域接管了<strong class="mf iu">thesenuts.org</strong>(假名字)。这个网站链接到了github.com。</p><blockquote class="kz"><p id="2f25" class="la lb it bd lc ld nb nc nd ne nf lj dk translated">我现在记不起确切的细节，但我会尽力解释这份报告的真实情况。</p></blockquote><figure class="nh ni nj nk nl kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/002f0dc2880e9ec97c72ef1af4b7bf83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/0*azwsz-LIm18Myj7g.png"/></div></figure><p id="4e5c" class="pw-post-body-paragraph md me it mf b mg nm ju mi mj nn jx ml mm no mo mp mq np ms mt mu nq mw mx lj im bi translated">为了让你报告一个<strong class="mf iu">子域接管</strong>，你需要这样做。接管那个子域。试了很多次，凌晨4点累了，没接手就报了。阅读电子邮件，你可以看到这个行动回来追捕我。在报告被转发给螺母团队后，由于一些未知的和奇怪的原因，triager要求我继续接管这个子域。</p><h1 id="39f5" class="ll lm it bd ln lo lp lq lr ls lt lu lv jz my ka lx kc mz kd lz kf na kg mb mc bi translated">操作方法</h1><p id="49d9" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx lj im bi translated">为了接管子域，我需要创建一个<strong class="mf iu">github.com</strong>账户，并将<strong class="mf iu"> thesenuts.io </strong>链接到这个账户。</p><blockquote class="kz"><p id="dd3c" class="la lb it bd lc ld nb nc nd ne nf lj dk translated">这是不可能的，你会在这里看到原因。</p></blockquote></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><h1 id="ca09" class="ll lm it bd ln lo ny lq lr ls nz lu lv jz oa ka lx kc ob kd lz kf oc kg mb mc bi translated">为什么我报告Thesenuts.org 1.0</h1><p id="c9c0" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx lj im bi translated">注意到页面给了我一个类似下面的错误，我知道这可能是一个可能的帐户接管。<strong class="mf iu">Thesenuts.org</strong>的<strong class="mf iu">没有使用这些nuts.io </strong>。删除这些页面的<strong class="mf iu"> DNS </strong>是大多数组织停止使用它们时做的第一件事，这是避免这种攻击的好方法。在这种情况下，他们没有这样做。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/88702b9f51b7c950d7959bb88962f1f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rbWZPvcZBsUnzGx9.png"/></div></div></figure><h1 id="4f94" class="ll lm it bd ln lo lp lq lr ls lt lu lv jz my ka lx kc mz kd lz kf na kg mb mc bi translated">Thesenuts.org 2.0</h1><p id="142e" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx lj im bi translated">自从triager要求我接管这个子域名的最初回复以来，又过了15天，由于显而易见的原因，我忽略了它。我就是做不到他让我做的事。经过多次尝试和一些社会工程，我决定等待公司对此的裁决。终于，两个星期后，有人从Thesenuts.org回复了我。正如他在这里所说的，他们正忙于疫情。因此，他们推迟了为组织接受报告的时间。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/177f86a776650d234a5de1041538ec11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/format:webp/0*IGS9b-Ac6Fvpq6kU.png"/></div></figure></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><h1 id="7ed2" class="ll lm it bd ln lo ny lq lr ls nz lu lv jz oa ka lx kc ob kd lz kf oc kg mb mc bi translated">结果</h1><p id="079a" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx lj im bi translated">我无法更好地描述它。正如这里看到的，来自<strong class="mf iu">Thesenuts.org</strong>的家伙用非常清晰的细节解释了一切。告诉我<strong class="mf iu"> Thesenuts.github.io </strong>有什么问题，以及为什么我不能认领。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/90bf7d8469612b7d78d232aaeea2aa00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/0*urtmnv2RMcQAhvev.png"/></div></div></figure></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><h1 id="8489" class="ll lm it bd ln lo ny lq lr ls nz lu lv jz oa ka lx kc ob kd lz kf oc kg mb mc bi translated">奖励</h1><p id="0663" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx lj im bi translated">这是整个故事中最精彩的部分。这个人很慷慨地为此买单。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/8e0aea72fdb8e57577fc1d5aade58ae7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/0*ejxdNja0uj6UkdHZ.png"/></div></figure><p id="a771" class="pw-post-body-paragraph md me it mf b mg nm ju mi mj nn jx ml mm no mo mp mq np ms mt mu nq mw mx lj im bi translated">正如这里看到的，该帐户不容易被子域接管，但仍然需要<strong class="mf iu"> DNS </strong>清理。</p><h1 id="4b75" class="ll lm it bd ln lo lp lq lr ls lt lu lv jz my ka lx kc mz kd lz kf na kg mb mc bi translated">时间线:</h1><p id="e599" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx lj im bi translated">2020年3月29日凌晨4点30分—报告了问题。</p><p id="5f78" class="pw-post-body-paragraph md me it mf b mg nm ju mi mj nn jx ml mm no mo mp mq np ms mt mu nq mw mx lj im bi translated">2020年3月30日—报告由triager打开并发送至<strong class="mf iu">Thesenuts.org</strong></p><p id="01f7" class="pw-post-body-paragraph md me it mf b mg nm ju mi mj nn jx ml mm no mo mp mq np ms mt mu nq mw mx lj im bi translated">2020年4月20日——triage告诉我他在21天前将它转发给了Thesenuts.org的团队进行检查</p><p id="df75" class="pw-post-body-paragraph md me it mf b mg nm ju mi mj nn jx ml mm no mo mp mq np ms mt mu nq mw mx lj im bi translated">2020年5月6日—<strong class="mf iu">Thesenuts.org</strong>团队成员回复我。我拿到工资的同一天，问题就解决了。</p><p id="de5e" class="pw-post-body-paragraph md me it mf b mg nm ju mi mj nn jx ml mm no mo mp mq np ms mt mu nq mw mx lj im bi translated">这值得等待吗？是的。</p><h1 id="056d" class="ll lm it bd ln lo lp lq lr ls lt lu lv jz my ka lx kc mz kd lz kf na kg mb mc bi translated">结论</h1><p id="2b6d" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx lj im bi translated">如您所见，这是一个我比较幸运的情况，而不是一个漏洞本身。虽然我忽略了triager的请求，但我很幸运他没有马上关闭报告。相反，我决定等待公司。即使在那里，我也很幸运地找到了处理这份报告的合适人选，并为我的努力付了钱。</p><p id="d3db" class="pw-post-body-paragraph md me it mf b mg nm ju mi mj nn jx ml mm no mo mp mq np ms mt mu nq mw mx lj im bi translated">永远不要让怀疑控制你。当我收到第一封来自triager的电子邮件，告诉我利用这个漏洞时，我知道如果没有这个步骤，我将很难从这个报告中获得奖励。但这并没有打击我的精神，我非常积极。相反，我等待着我最后的资源——公司的决定。</p><p id="4db7" class="pw-post-body-paragraph md me it mf b mg nm ju mi mj nn jx ml mm no mo mp mq np ms mt mu nq mw mx lj im bi translated">我没有回复这封电子邮件，而是给了Thesenuts.org回复我并给我他们自己的结果的时间。为什么？因为在大多数情况下，公司的行为会与面试官告诉你的大相径庭。如果你足够幸运，能让三人组把你的报告发给公司，你获得奖励的几率至少会上升到90%。</p><p id="e501" class="pw-post-body-paragraph md me it mf b mg nm ju mi mj nn jx ml mm no mo mp mq np ms mt mu nq mw mx lj im bi translated">永不放弃！</p></div></div>    
</body>
</html>