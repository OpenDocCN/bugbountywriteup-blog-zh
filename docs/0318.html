<html>
<head>
<title>Want to take over the Java ecosystem? All you need is a MITM!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">想要接管Java生态系统？你需要的只是一个MITM！</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/want-to-take-over-the-java-ecosystem-all-you-need-is-a-mitm-1fc329d898fb?source=collection_archive---------0-----------------------#2019-06-10">https://infosecwriteups.com/want-to-take-over-the-java-ecosystem-all-you-need-is-a-mitm-1fc329d898fb?source=collection_archive---------0-----------------------#2019-06-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div class="gh gi io"><img src="../Images/498cdf24f2ff446e9eafa92aa6c9de15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*mgXMZ6Z__zBUsCIMlXUIcA.jpeg"/></div></figure><div class=""/><div class=""><h2 id="24f4" class="pw-subtitle-paragraph ju iw ix bd b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl dk translated">数百个非常流行和广泛部署的Java库&amp; JVM编译器仍然通过HTTP下载它们的依赖项，没有完整性检查。</h2></div><p id="534c" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">最初是一个小项目的简单漏洞报告，很快发现了一个影响Java虚拟机(JVM)开发生态系统的行业安全漏洞。</p><h1 id="4005" class="li lj ix bd lk ll lm ln lo lp lq lr ls kd lt ke lu kg lv kh lw kj lx kk ly lz bi translated">进入业余</h1><p id="b7f7" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">这项工作建立在2014年由Max Veytsman撰写的优秀文章的基础上，这篇文章的标题是<a class="ae mf" href="https://max.computer/blog/how-to-take-over-the-computer-of-any-java-or-clojure-or-scala-developer/" rel="noopener ugc nofollow" target="_blank">“如何接管任何Java(或Closure或Scala)开发者的计算机”</a>。</p><p id="4011" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">回到2014年，当它发布时，由Sonatype运行的Maven Central Repository不支持SSL (HTTPS)来提供JAR文件。多亏了Max的文章，Sonatype在几天内就解决了这个问题。我强烈建议你在继续之前至少浏览一下他的文章。尽管他的文章已经发表5年了，但他的警告仍然适用，现在也适用于Kotlin和Groovy开发人员。</p><p id="325e" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">然而，这一次不是因为缺乏存储库主机对HTTPS的支持；这一次是因为一个普遍存在的单个字符的输入错误，直到今天，成千上万的开源项目仍然存在漏洞。</p><p id="9130" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在他的文章中，Max介绍了一个名为Dilettante的工具，“一个中间人代理，它从[任何工件库]中截取jar并向其中注入恶意代码。”"通过dilettante代理HTTP流量将后门任何从[工件库]下载的jar文件."</p><div class="ip iq gp gr ir mg"><a href="https://github.com/mveytsman/dilettante" rel="noopener  ugc nofollow" target="_blank"><div class="mh ab fo"><div class="mi ab mj cl cj mk"><h2 class="bd iy gy z fp ml fr fs mm fu fw iw bi translated">业余爱好者</h2><div class="mn l"><h3 class="bd b gy z fp ml fr fs mm fu fw dk translated">Maven Central在为您提供jar时不支持SSL。业余爱好者是利用这一点的MiTM代理。…</h3></div><div class="mo l"><p class="bd b dl z fp ml fr fs mm fu fw dk translated">github.com</p></div></div><div class="mp l"><div class="mq l mr ms mt mp mu it mg"/></div></div></a></div><p id="174c" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">Dilettante是一个简单的POC，它所做的只是让Java在你的屏幕上呈现一张猫的图片。但是这种非常简单的技术可能会被用来恶意破坏Java生态系统的大部分。唯一的先决条件是项目通过HTTP而不是HTTPS下载它的依赖项。</p><figure class="mw mx my mz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi mv"><img src="../Images/9285cc20d6ee8b147f58c1449e6fdbc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gEMG9DGxuNtXJpBV0vXURg.png"/></div></div></figure><p id="0459" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">HTTPS不仅仅加密客户端和服务器之间的流量，它还提供了一种加密保证，即客户端与所请求的服务器通信，而不是一个MITM冒名顶替者。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="7831" class="li lj ix bd lk ll nl ln lo lp nm lr ls kd nn ke lu kg no kh lw kj np kk ly lz bi translated"><strong class="ak">这是怎么被发现的？</strong></h1><p id="e59f" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">当我发现在我自己的构建中，我因为一个工件而使用HTTP时，这个研究就开始了。</p><figure class="mw mx my mz gt is"><div class="bz fp l di"><div class="nq nr l"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">这是怎么来的？</figcaption></figure><p id="2036" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">我发现根本原因是来自<a class="ae mf" href="https://github.com/ktorio/ktor" rel="noopener ugc nofollow" target="_blank"> Ktor库</a>的复制粘贴。深入研究Ktor库的历史，我发现直到最近<a class="ae mf" href="https://github.com/ktorio/ktor/issues/953" rel="noopener ugc nofollow" target="_blank"> Ktor还在使用HTTP来解决依赖关系</a>。需要注意的一点是，Ktor是一个官方的JetBrains库。这件事让我很好奇，于是我开始在别处寻找。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="1982" class="li lj ix bd lk ll nl ln lo lp nm lr ls kd nn ke lu kg no kh lw kj np kk ly lz bi translated">谁脆弱？</h1><p id="3264" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">长话短说；GitHub上一些最受欢迎的基于JVM的项目曾经或现在仍然容易受到攻击。</p><figure class="mw mx my mz gt is"><div class="bz fp l di"><div class="nw nr l"/></div></figure><p id="62d5" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><em class="nx">注意:标记为“完成”为“真”的项目已经完全修复了该问题，并且已经审核或发布了其先前版本的CVE编号。</em></p><p id="cf90" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">对于感兴趣的人，这里有一个到Google表单的直接链接。</p><div class="ip iq gp gr ir mg"><a href="https://docs.google.com/spreadsheets/d/1zemxj8QdIp0saqvwJx6Po1KnyEmJXl2KC_0j0SLd_2E/edit?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="mh ab fo"><div class="mi ab mj cl cj mk"><h2 class="bd iy gy z fp ml fr fs mm fu fw iw bi translated">依赖关系的不安全解析</h2><div class="mn l"><h3 class="bd b gy z fp ml fr fs mm fu fw dk translated">易受MITM攻击的所有开放源代码项目的列表。</h3></div><div class="mo l"><p class="bd b dl z fp ml fr fs mm fu fw dk translated">docs.google.com</p></div></div><div class="mp l"><div class="ny l mr ms mt mp mu it mg"/></div></div></a></div><p id="dfb8" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">除了上面列出的项目，还有一些大型社区和组织也受到此漏洞的影响。</p><h2 id="d2fa" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">《我的世界》·莫德</h2><p id="69f1" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">这是我开始寻找的第一个地方，并且毫不奇怪地在我看过的几乎所有Minecraft mods的构建基础设施中立即发现了这个漏洞。</p><h2 id="a338" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">JetBrains</h2><figure class="mw mx my mz gt is gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/8d6d6b66b9447ada7346dd9986fb62f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:590/format:webp/1*b3LpoXuVSbFsV86ljLMFOA.jpeg"/></div></figure><p id="bfc7" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">考虑到Ktor事件可能不仅仅是一次性事件，我开始关注JetBrains GitHub项目。</p><p id="c21b" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><strong class="ko iy">科特林编译器</strong></p><figure class="mw mx my mz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi om"><img src="../Images/ff9463bc9f9f27ae1b2b8de484df6fba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nemfaob5ORe7ul4oJVscfA.png"/></div></div></figure><p id="be7a" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">Kotlin是一种由JetBrains开发的编程语言，可以编译成JVM、LLVM和Javascript。它在Android开发者中非常受欢迎。谷歌最近指定Kotlin现在是Android开发的首选语言。<br/>我在Kotlin编译器代码库中找到了多个实例，其中构建基础设施和测试通过HTTP下载依赖项。不仅Kotlin编译器的源代码依赖易受攻击，而且易受攻击的存储库也被用于Gradle <code class="fe on oo op oq b">buildscript</code>类路径，使得发布工件有被破坏的可能。如果这还不够糟糕的话，<code class="fe on oo op oq b">buildscript</code>类路径还被用来解析先前版本的Kotlin编译器，从而使编译器容易受到“信任”攻击(参见下文)。</p><p id="62bc" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><strong class="ko iy"> IntelliJ IDEA <br/> </strong>不仅IntelliJ和几个官方插件易受此攻击，而且在许多情况下，使用IntelliJ创建起始项目的代码生成器生成的项目也易受攻击。</p><h2 id="e78a" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated"><strong class="ak">格雷尔</strong></h2><figure class="mw mx my mz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi or"><img src="../Images/ccdf2addadb0379ad93a617ab0435522.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*89FxNOfLuZC4ZxjNbx0Rkg.png"/></div></div></figure><p id="1b79" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">格拉德是一个有趣的例子。作为Gradle的贡献者，您不会受到此漏洞的影响，但是，当使用Gradle在Gradle Inc .的Team City CI基础架构上构建Gradle存储库时，该基础架构覆盖了默认设置，转而使用通过HTTP提供工件的公司JFrog Artifactory实例。幸运的是，这个基础设施与Gradle JFrog Artifactory服务器位于同一个网络上。</p><p id="9b4b" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">也就是说，grad le corporate JFrog Artifactory服务器通过HTTP镜像其他工件服务器，从而可能将这些镜像暴露给基于MITM的缓存中毒攻击。</p><h2 id="4b54" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">弹性搜索</h2><figure class="mw mx my mz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi os"><img src="../Images/fd9742e348c33f9ef81b2e8d419200c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OYNQogpPoyQisfPnIZ-Gfw.jpeg"/></div></div></figure><p id="acd2" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在撰写本文时，Elastic Search repository拥有38.6k颗星，因此成为GitHub上最受关注的基于Java的项目。主要的弹性搜索项目已经有超过11k的贡献者。弹性构建中的测试逻辑被认为易受此影响。</p><h2 id="c72e" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">街头流氓</h2><figure class="mw mx my mz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi ot"><img src="../Images/5e16ee1cb6804c0275f2db0044340ab8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DgTOTdqhxzTpW18UJGIAFg.png"/></div></div></figure><p id="8cab" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">我在Apache软件基金会的几个项目中发现了这个漏洞。下面列出了一些值得注意的例子。</p><p id="b33f" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">截至本文发布之日，Apache Software Foundation已经决定不为受影响的项目发布CVE号码，尽管在大多数情况下，没有执行审计来确定这些项目是否被此漏洞恶意破坏。</p><p id="ce4f" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><strong class="ko iy"> Groovy编译器</strong></p><figure class="mw mx my mz gt is gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/2beab91ce236102af43d07105f912c69.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/1*7xwGijE0eyrtVk2KC49jaA.png"/></div></figure><p id="c27d" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">Apache Groovy是为JVM开发的最受欢迎的备选方案之一，它也被发现易受此攻击。在撰写本文时，根据Tiobe指数，Groovy是世界上第19大流行的编程语言。与Kotlin类似，Groovy编译器的<code class="fe on oo op oq b">buildscript</code>类路径通过HTTP解析依赖关系。这也留下了发布工件被破坏的可能性。</p><p id="86bc" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">幸运的是，Groovy编译器是用完全用Java编写的引导编译器构建的，因此“信任”攻击的可能性非常小。</p><p id="c3a2" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">此外，Groovy-Eclipse插件也被发现易受攻击。</p><p id="9951" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><strong class="ko iy"> Hadoop <br/> </strong> Apache Hadoop拥有超过193名贡献者，是贡献者最多的项目。所有那些在他们的机器上运行Hadoop版本的贡献者都有可能被MITM入侵。</p><p id="24ee" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><strong class="ko iy">卡夫卡<br/>LinkedIn在内部使用Kafka，每天接收超过1万亿条消息。我发现卡夫卡的构建系统是通过HTTP而不是HTTPS加载Gradle插件的。</strong></p><p id="5fff" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><strong class="ko iy">其他Apache项目<br/> </strong>我发现易受攻击的Apache项目列表包括但不限于以下:Casandra、Geode、Storm、Bigtop、Fink、OpenJPA、Royal Compiler &amp; Airavata。</p><h2 id="1080" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">詹金斯</h2><figure class="mw mx my mz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi ov"><img src="../Images/2bd26feac6a62d72b43262eceec17ed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s8mwAOWdb2choX4pj9ozvw.png"/></div></div></figure><blockquote class="ow ox oy"><p id="7467" class="km kn nx ko b kp kq jy kr ks kt kb ku oz kw kx ky pa la lb lc pb le lf lg lh ij bi translated"><em class="ix">全球超过1，000，000名Jenkins用户使Jenkins成为使用最广泛的开源自动化服务器。<br/> - </em> <a class="ae mf" href="https://www.cloudbees.com/press/jenkins-community-announces-record-growth-and-innovation-2017" rel="noopener ugc nofollow" target="_blank">詹金斯社区宣布2017年创纪录增长和创新</a></p></blockquote><p id="79ee" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">Jenkins被用作一个自托管的CI管道来自动化构建和测试软件。</p><p id="c241" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">Jenkins和许多Jenkins官方插件都附带了通过HTTP下载的依赖项。</p><h2 id="0d5a" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">春天</h2><figure class="mw mx my mz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi pc"><img src="../Images/950d9f80f4efa37f04a7d28653ef6f1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ip7XmSfDmS3B16ADQ8-ZUg.png"/></div></div></figure><p id="05d8" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">我找到的第一个位置是在spring-security-oauth项目中。Spring项目是我开始关注的第一个基于Maven的项目，这迫使我建立了一个完全不同的搜索方法来使用GitHub搜索功能检查Maven POM文件。一旦我开始寻找，我发现这个漏洞存在于Spring组织下的许多其他项目中。</p><p id="7a83" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">Spring团队立即对这个漏洞做出了反应，并开始修补他们所有的项目。由于大量的Pivotal项目受到影响，Pivotal开发了一个工具来查找和替换存储库中所有的HTTP使用。该工具可在以下位置找到:</p><div class="ip iq gp gr ir mg"><a href="https://github.com/spring-io/nohttp" rel="noopener  ugc nofollow" target="_blank"><div class="mh ab fo"><div class="mi ab mj cl cj mk"><h2 class="bd iy gy z fp ml fr fs mm fu fw iw bi translated">spring-io/nohttp</h2><div class="mn l"><h3 class="bd b gy z fp ml fr fs mm fu fw dk translated">在GitHub上创建一个帐户，为spring-io/nohttp开发做贡献。</h3></div><div class="mo l"><p class="bd b dl z fp ml fr fs mm fu fw dk translated">github.com</p></div></div><div class="mp l"><div class="pd l mr ms mt mp mu it mg"/></div></div></a></div><h2 id="3548" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">红衣主教</h2><figure class="mw mx my mz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi pe"><img src="../Images/e18f5a4622784ba904ec2d9ccb166fe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BLvynRLnjLy6R2DCHyZERg.jpeg"/></div></div></figure><p id="9d4b" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这个漏洞也影响了许多由Red Hat维护的项目。这些项目包括但不限于Hibernate ORM、RestEasy以及Wildfly(原JBoss)生态系统中的许多项目。</p><h2 id="e2e8" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">Eclipse基金会</h2><figure class="mw mx my mz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi pf"><img src="../Images/8e0f43a7adf123932f110f6386bfc47c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AJ2TBjeA_w-m6gJG-CuE-A.png"/></div></div></figure><p id="cc3c" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">类似于Red Hat &amp; Apache Foundation，这也影响了Eclipse Foundation项目Vorto、Buildship、xtext、Orion &amp; Birt。</p><h2 id="d629" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">神谕</h2><p id="78fa" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">该漏洞还影响了Oracle的一些开源项目，包括VisualVM、PGQL、OpenGrok和Helidon。</p><h2 id="ecf6" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">测试库和框架</h2><p id="5434" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">一些非常流行的JVM测试库和框架也容易受到这种攻击，包括TestNG、Spock和PowerMock。</p><h2 id="dd20" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">其他项目</h2><p id="71f2" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">发现此漏洞的其他项目包括Grails，FasterJacksonXML &amp; Ehcache3的Scala模块。此外，我在网飞、谷歌、Twitter、美国国家安全局(NSA)、Stripe、Gluon(场景构建器)PortSwigger、Black Duck、Snyk、LinkedIn和PayPal的开源项目中发现了这个漏洞。具有讽刺意味的是，当这被报告给PayPal的安全团队时，他们关闭了它，因为他们认为MITM攻击<a class="ae mf" href="https://hackerone.com/paypal#out-of-scope-vulnerabilities" rel="noopener ugc nofollow" target="_blank">“超出了他们HackerOne程序的范围</a>。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="1afb" class="li lj ix bd lk ll nl ln lo lp nm lr ls kd nn ke lu kg no kh lw kj np kk ly lz bi translated">MITM袭击有多常见？</h1><p id="3925" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">我对常见MITM攻击的最初研究实际上源于我对恶意损害XML解析器的研究，这些解析器加载通过HTTP加载的DTD文件，以实现<a class="ae mf" href="https://www.owasp.org/index.php/XML_External_Entity_(XXE)_Processing" rel="noopener ugc nofollow" target="_blank"> XXE </a>。在以后的文章中会有更多关于这个主题的内容。我的发现相当惊人。</p><h2 id="2407" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">互联网服务提供商</h2><p id="c498" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">令我惊讶的是，互联网服务提供商(ISP)似乎经常这么做。</p><blockquote class="ow ox oy"><p id="77c7" class="km kn nx ko b kp kq jy kr ks kt kb ku oz kw kx ky pa la lb lc pb le lf lg lh ij bi translated">康卡斯特开始向我在互联网上请求的页面注入400多行JavaScript代码，这样当浏览器呈现网页时，JavaScript就会弹出一个窗口，试图向我追加销售一个新的调制解调器。<br/> - <a class="ae mf" href="https://thenextweb.com/insights/2017/12/11/comcast-continues-to-inject-its-own-code-into-websites-you-visit/" rel="noopener ugc nofollow" target="_blank">康卡斯特继续向你访问的网站注入自己的代码</a></p></blockquote><p id="c6eb" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><a class="ae mf" href="http://www.bsnl.co.in/" rel="noopener ugc nofollow" target="_blank">Bharat Sanchar Nigam Limited</a>(BSNL)印度的一家互联网服务提供商也曾在用户通过HTTP下载网页时向其网页植入广告。</p><p id="1948" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这表明基础设施已经存在，可以重新定位以影响JAR文件。</p><h2 id="f871" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">恶意的演员</h2><p id="a950" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">当恶意行为者获得对系统的访问权时，他们通常会迅速利用新的立足点建立MITM。每年，威瑞森都会发布一份数据泄露调查报告(DBIR ),分析每年最常被利用的各种攻击媒介。这是从他们的一份报告中引用的。</p><blockquote class="ow ox oy"><p id="753c" class="km kn nx ko b kp kq jy kr ks kt kb ku oz kw kx ky pa la lb lc pb le lf lg lh ij bi translated"><strong class="ko iy"> <em class="ix">处理措施<br/> </em> </strong> <em class="ix">前三大威胁处理措施类别是黑客、恶意软件和社交。最常见的黑客行为类型是使用窃取的登录凭据、利用后门和中间人攻击。</em></p><p id="9e02" class="km kn nx ko b kp kq jy kr ks kt kb ku oz kw kx ky pa la lb lc pb le lf lg lh ij bi translated"><em class="ix"> - </em> <a class="ae mf" href="https://www.verizonenterprise.com/resources/reports/rp_data-breach-investigations-report-2011_en_xg.pdf" rel="noopener ugc nofollow" target="_blank">威瑞森2011年数据泄露调查报告</a>；第69页</p></blockquote><p id="b006" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">引用这份报告的分析:</p><blockquote class="ow ox oy"><p id="1580" class="km kn nx ko b kp kq jy kr ks kt kb ku oz kw kx ky pa la lb lc pb le lf lg lh ij bi translated">我推断，这是一个次要的行动，一旦有人在系统中有了立足点，但荷兰高科技犯罪单位的数据表明，这是相当可信的关注。在构成其统计数据的32起数据泄露事件中，有15起涉及MITM行动。<br/> - <a class="ae mf" href="https://security.stackexchange.com/a/12050" rel="noopener ugc nofollow" target="_blank">答案:堆栈交换:“中间人”攻击是否极其罕见？</a></p></blockquote><p id="1108" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">MITM攻击应被视为软件安全中的一个可信威胁。</p><h2 id="47a3" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">通过公共WiFi连接</h2><p id="2b30" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">抛开所有这些其他攻击媒介不谈，任何通过公共WiFi连接从事这些项目的开发人员都将他们的计算机暴露在恶意攻击的潜在威胁之下。著名的火狐插件<a class="ae mf" href="https://en.wikipedia.org/wiki/Firesheep" rel="noopener ugc nofollow" target="_blank"> Firesheep </a>演示了这种攻击。</p><figure class="mw mx my mz gt is gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/631e18ef86b8c941337e8202a398fb11.png" data-original-src="https://miro.medium.com/v2/resize:fit:312/format:webp/1*sPG5lWACEWmUUemHtla-kA.png"/></div></figure><p id="ac9a" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">WiFi热点的潜在危害会对开发人员本身产生重大影响，因为许多开发人员在咖啡店、开发人员会议等场合使用WiFi工作。只需要一个<a class="ae mf" href="https://shop.hak5.org/products/wifi-pineapple" rel="noopener ugc nofollow" target="_blank"> WiFi菠萝</a>和一个尚未被缓存的依赖项就能感染开发者的机器。</p><h2 id="a0ed" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">政府</h2><p id="45c8" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">由于斯诺登的爆料，我们现在明白了美国政府的三个情报机构对美国公民实施MITM袭击所使用的各种方法。</p><blockquote class="ow ox oy"><p id="553a" class="km kn nx ko b kp kq jy kr ks kt kb ku oz kw kx ky pa la lb lc pb le lf lg lh ij bi translated">为了欺骗目标访问FoxAcid服务器，美国国家安全局依靠其与美国电信公司的秘密合作关系。作为混乱系统的一部分，美国国家安全局将代号为量子的秘密服务器放置在互联网主干网的关键位置。这种布局确保了他们比其他网站反应更快。通过利用这种速度差异，这些服务器可以在合法网站做出响应之前，将被访问的网站伪装成目标网站，从而诱骗目标浏览器访问Foxacid服务器。<br/>-<a class="ae mf" href="https://www.schneier.com/blog/archives/2013/10/how_the_nsa_att.html" rel="noopener ugc nofollow" target="_blank">NSA如何用QUANTUM和FOXACID攻击Tor/Firefox用户</a></p></blockquote><p id="1f0b" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">由于<a class="ae mf" href="https://www.wired.com/story/google-internet-traffic-china-russia-rerouted/" rel="noopener ugc nofollow" target="_blank">错误配置的BGP路由</a>，互联网流量也有通过外国路由的历史。</p><h1 id="89e4" class="li lj ix bd lk ll lm ln lo lp lq lr ls kd lt ke lu kg lv kh lw kj lx kk ly lz bi translated">通过HTTP加载的最常见的存储库</h1><p id="f380" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">让我们看看通过HTTP加载的最常用的存储库的一些统计数据。请注意，这些数字并不准确，可能略有夸大，因为GitHub的搜索功能本质上是模糊的。</p><h2 id="c152" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">Maven Central</h2><p id="5d42" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">Maven Central是JVM生态系统中使用的最流行的工件服务器，也是Maven使用的默认工件服务器。Maven Central是JVM工件托管领域的第一个主要参与者。</p><h2 id="1953" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">JFrog JCenter</h2><p id="4604" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">JCenter是Maven Central的超集。发布到JFrog Bintray的开发人员可以请求在这里镜像他们的工件。</p><h2 id="e6bb" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">JFrog纸盒</h2><p id="b441" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">JFrog Bintray允许开发者为开源项目免费创建自己的工件服务器。</p><figure class="mw mx my mz gt is"><div class="bz fp l di"><div class="ph nr l"/></div></figure><p id="4ecc" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">显然，这是一个广泛存在于Gradle和Maven项目中的安全漏洞。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="50c6" class="li lj ix bd lk ll nl ln lo lp nm lr ls kd nn ke lu kg no kh lw kj np kk ly lz bi translated">编写一个(理论上的)Java库蠕虫</h1><p id="8311" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">作为一个思想实验，我起草了滥用这个MITM漏洞来创建一个Java库蠕虫的想法。这个思想实验的结果可以在这里找到。</p><div class="ip iq gp gr ir mg"><a href="https://medium.com/@jonathan.leitschuh/lets-write-a-theoretical-java-library-worm-9a6edff87cf5" rel="noopener follow" target="_blank"><div class="mh ab fo"><div class="mi ab mj cl cj mk"><h2 class="bd iy gy z fp ml fr fs mm fu fw iw bi translated">让我们写一个(理论上的)Java库蠕虫</h2><div class="mn l"><h3 class="bd b gy z fp ml fr fs mm fu fw dk translated">本文是对《想接管Java生态系统？你需要的只是一个MITM！</h3></div><div class="mo l"><p class="bd b dl z fp ml fr fs mm fu fw dk translated">medium.com</p></div></div><div class="mp l"><div class="pi l mr ms mt mp mu it mg"/></div></div></a></div><p id="e085" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">TL；博士是这样的:</p><figure class="mw mx my mz gt is gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/146fc6b27187f51979890c92daad69e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*pE0Xnond7c_olm3mnCC0Ow.jpeg"/></div></figure><p id="8cf8" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">此漏洞的后果是，在发布过程中使用的依赖关系MITM可能允许恶意代码恶意损害构建产生的工件，从而感染下游用户。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="a605" class="li lj ix bd lk ll nl ln lo lp nm lr ls kd nn ke lu kg no kh lw kj np kk ly lz bi translated">修复过去</h1><p id="b056" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">对于已经发布的库，除非这些项目构建是完全可复制的，否则没什么可做的。对于易受此攻击的编译器(Kotlin)、用于自我测试的测试库(Spock和TestNG)以及用于自我构建的构建工具(Gradle)，这可能是一个问题，因为信任链已经被破坏。大多数编译器都是用来编译自己的。关于这个话题的更多信息，请参阅Ken Thompson的一篇相对较短的论文，题为“<a class="ae mf" href="https://www.archive.ece.cmu.edu/~ganger/712.fall02/papers/p761-thompson.pdf" rel="noopener ugc nofollow" target="_blank">关于信任的思考</a>”。</p><h1 id="4cbb" class="li lj ix bd lk ll lm ln lo lp lq lr ls kd lt ke lu kg lv kh lw kj lx kk ly lz bi translated">修复未来</h1><p id="e69c" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">我认为像Gradle、Maven和SBT这样的构建工具需要要求用户明确选择不使用HTTPS来解决他们的依赖性。这将迫使用户清楚地表明他们使用不安全协议的意图，从而防止偶然的打字错误。我有一个与Gradle和Maven都开放的建议来实现这一功能。你可以在下面找到这些建议。请上去给他们投票！</p><div class="ip iq gp gr ir mg"><a href="https://github.com/gradle/gradle/pull/9419" rel="noopener  ugc nofollow" target="_blank"><div class="mh ab fo"><div class="mi ab mj cl cj mk"><h2 class="bd iy gy z fp ml fr fs mm fu fw iw bi translated">反对JLLeitschuh请求#9419 gradle/gradle的HTTP下载</h2><div class="mo l"><p class="bd b dl z fp ml fr fs mm fu fw dk translated">github.com</p></div></div><div class="mp l"><div class="pk l mr ms mt mp mu it mg"/></div></div></a></div><div class="ip iq gp gr ir mg"><a href="https://issues.apache.org/jira/browse/MNG-6673" rel="noopener  ugc nofollow" target="_blank"><div class="mh ab fo"><div class="mi ab mj cl cj mk"><h2 class="bd iy gy z fp ml fr fs mm fu fw iw bi translated">[MNG-6673]反对HTTP下载和上传- ASF JIRA</h2><div class="mo l"><p class="bd b dl z fp ml fr fs mm fu fw dk translated">issues.apache.org</p></div></div></div></a></div><h2 id="feba" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">仓库的自动审计</h2><p id="59d8" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">Pivotal开发的nohttp工具查找所有出现的http，除了那些被列入白名单的(即XML名称空间名称)。这将确保HTTP不会在其他地方引起问题(例如Gradle包装器位置、DTD声明等)。它可以查找HTTP出现的位置，替换出现的位置，并与一个构建集成以确保将来不会使用HTTP。</p><div class="ip iq gp gr ir mg"><a href="https://github.com/spring-io/nohttp" rel="noopener  ugc nofollow" target="_blank"><div class="mh ab fo"><div class="mi ab mj cl cj mk"><h2 class="bd iy gy z fp ml fr fs mm fu fw iw bi translated">spring-io/nohttp</h2><div class="mn l"><h3 class="bd b gy z fp ml fr fs mm fu fw dk translated">在GitHub上创建一个帐户，为spring-io/nohttp开发做贡献。</h3></div><div class="mo l"><p class="bd b dl z fp ml fr fs mm fu fw dk translated">github.com</p></div></div><div class="mp l"><div class="pl l mr ms mt mp mu it mg"/></div></div></a></div><h2 id="8d8d" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">神器主机解嘲HTTP 2020年1月</h2><p id="e950" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">随着这个漏洞的范围越来越大，我很快意识到这个漏洞的一些责任落在了像Maven Central和JCenter这样的工件主机上。我联系了两个最大的工件主机Sonatype (Maven Central)、JFrog (JCenter)以及Pivotal (Spring)、Eclipse Foundation、Jenkins、Red Hat &amp; JetBrains等较小的主机，询问他们是否愿意加入一项倡议，从2020年1月15日开始完全阻止HTTP上的下载请求。</p><blockquote class="pm"><p id="483c" class="pn po ix bd pp pq pr ps pt pu pv lh dk translated">25%的Maven Central下载仍在使用HTTP</p></blockquote><p id="b60b" class="pw-post-body-paragraph km kn ix ko b kp pw jy kr ks px kb ku kv py kx ky kz pz lb lc ld qa lf lg lh ij bi translated">在这个声明发布后不久，JFrog和Pivotal都通知我他们将会跟进。</p><p id="a66d" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">你可以在这里找到<a class="ae mf" href="https://central.sonatype.org/articles/2019/Apr/30/http-access-to-repo1mavenorg-and-repomavenapacheorg-is-being-deprecated/" rel="noopener ugc nofollow" target="_blank"> Maven中央公告</a>。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="699e" class="li lj ix bd lk ll nl ln lo lp nm lr ls kd nn ke lu kg no kh lw kj np kk ly lz bi translated">我容易受到这种伤害吗？</h1><p id="3214" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">鉴于我在许多广泛使用的开源项目中发现了这一漏洞，我建议任何为JVM开发软件的人去检查他们的构建逻辑，以便通过HTTP解析依赖关系。</p><h2 id="a94b" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">我在找什么？</h2><p id="c1b0" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">对于Gradle，您正在寻找这样的存储库配置。</p><figure class="mw mx my mz gt is"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="e64c" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">Gradle开发人员可能还想检查任何在他们公司内部分发的<code class="fe on oo op oq b">init.gradle</code>脚本，但是这些脚本通常不会被签入源代码控制。</p><p id="100d" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">对于基于Maven的项目，您正在寻找这样的存储库配置。</p><figure class="mw mx my mz gt is"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="ebae" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">Maven开发人员还应该检查他们的<code class="fe on oo op oq b">~/.m2/settings.xml</code>文件中的配置，因为那里通常是配置存储库凭证的地方。</p><p id="e911" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">此外，JFrog Artifactory或Sonatype的Nexus的企业用户应该检查他们的服务器的配置，看看他们是否通过HTTP镜像其他工件服务器。</p><figure class="mw mx my mz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi qb"><img src="../Images/4b1ebe844ced968aaf9ca73159cb8624.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5bYK7pjmzjbQgTbybtJulw.png"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">JFrog Artifactory中的不安全配置示例</figcaption></figure><p id="2b16" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">我已经联系了Sonatype和JFrog，要求他们在未来的更新中开始警告用户/管理员不安全的配置。</p><p id="d4cb" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">JFrog回应说这个功能现在已经正式成为他们路线图的一部分，但是他们还没有计划好发布日期。</p><h2 id="c230" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">发现这个漏洞怎么办？</h2><p id="d4d2" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">执行潜在恶意jar的整个机器(开发人员机器、构建盒等)应该被认为是潜在受损的。这也意味着机器可以访问的任何内容(其他项目、凭证、其他主机等)也应该被认为是潜在的危害。共享的工件缓存，如<code class="fe on oo op oq b">~/.gradle</code>和<code class="fe on oo op oq b">~/.m2</code>目录，其中Gradle和Maven缓存工件应该被认为受到了威胁，应该被删除。为了避免单个易受攻击的应用程序暴露它构建的每个项目，尝试隔离您的构建也是最佳实践。</p><p id="8b89" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">如果您是一个容易受到这种攻击的开源项目的维护者，那么您有责任让您的用户审核以前的版本是否存在漏洞，或者申请一个CVE号码来通知下游用户潜在的漏洞。</p><h1 id="6d83" class="li lj ix bd lk ll lm ln lo lp lq lr ls kd lt ke lu kg lv kh lw kj lx kk ly lz bi translated">关闭</h1><p id="5c0e" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">不幸的是，我只能联系到受此漏洞影响的一小部分项目。您在自己的工作中依赖的许多开源项目可能容易受到这种攻击。如果你有能力这样做，考虑接触那些你发现受到影响的项目，为我们所有人保护Java生态系统。</p><p id="c29e" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">如果你在开源软件上工作，或者用这些商业构建工具开发软件，我也强烈建议你为了软件供应链管道的完整性审核你的构建。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="31db" class="li lj ix bd lk ll nl ln lo lp nm lr ls kd nn ke lu kg no kh lw kj np kk ly lz bi translated">特别感谢</h1><p id="a54d" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">我要感谢我联系的所有组织中所有真正令人敬畏的专业安全团队和项目维护人员。我绝对不可能自己修补所有这些地方。这些团队中有几个在我报告后的几个小时内就做出了回应，并在第二天开始在他们的代码中推出补丁。此外，我要感谢Snyk公司同意担任所有这些CVE报告的CNA。我也要感谢Max Veytsman创造了业余爱好者。有了概念验证后，负责任的披露流程变得更加顺畅。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="080a" class="li lj ix bd lk ll nl ln lo lp nm lr ls kd nn ke lu kg no kh lw kj np kk ly lz bi translated">进一步研究注意事项</h1><p id="472d" class="pw-post-body-paragraph km kn ix ko b kp ma jy kr ks mb kb ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">如果您碰巧是一名安全研究人员，并且希望在其他Java项目中找到这些我在这里可能错过的安全漏洞，那么我使用的Github搜索查询是。</p><figure class="mw mx my mz gt is"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="d5ca" class="pw-post-body-paragraph km kn ix ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">如果您在使用这些查询的项目中发现了这个问题，请将它们指向本文。</p><h2 id="6f41" class="nz lj ix bd lk oa ob dn lo oc od dp ls kv oe of lu kz og oh lw ld oi oj ly ok bi translated">不同版本的工具</h2><ul class=""><li id="52dd" class="qc qd ix ko b kp ma ks mb kv qe kz qf ld qg lh qh qi qj qk bi translated">https://reproducible-builds.org/tools/<a class="ae mf" href="https://reproducible-builds.org/tools/" rel="noopener ugc nofollow" target="_blank"/></li><li id="c5d4" class="qc qd ix ko b kp ql ks qm kv qn kz qo ld qp lh qh qi qj qk bi translated">【https://github.com/scala/jardiff T4】</li></ul></div></div>    
</body>
</html>