<html>
<head>
<title>FFUF-ing RECON</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">该死的侦察</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/ffuf-ing-recon-1ee4e79b3256?source=collection_archive---------1-----------------------#2022-07-17">https://infosecwriteups.com/ffuf-ing-recon-1ee4e79b3256?source=collection_archive---------1-----------------------#2022-07-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b24c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">或者如何从稍微不同的侦察点到达P3 P1</h2></div><p id="b517" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当谈到侦察，特别是寻找子域时，自从黑客开始以来，已经有了大量的工具和文章。但是，不知何故，讨论最少的方法是可以产生最惊人结果的方法(虽然不总是如此)，在ffuf存在之前，我只找到了一种处理它的工具，但是我放弃了它(可能是我做错了，但是无论如何(:)。我说的是使用ffuf的vhost发现，它也可以用于常规的子域发现，并且更容易针对误报进行配置。</p><p id="83ca" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> FFUF超过dir暴力</strong></p><p id="ff73" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用ffuf实现vhosts扫描有一个看似简单的好方法:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/731e3d666db91429dedb414c2cb03664.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o29QbJycAhYssrg274Fz5w.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">截图来自GitHub<a class="ae lu" href="https://github.com/ffuf/ffuf#virtual-host-discovery-without-dns-records" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/ffuf/ffuf # virtual-host-discovery-without DNS-records</a></figcaption></figure><p id="9d00" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我的意思是，这在逻辑上是合理的…在某种程度上。它没有说明的是，有时有403、404、400的子域/vhost仍然值得深入挖掘。使用ffuf的文件/文件夹暴力和gau/wayback机器可能会发现一些模糊但有趣的端点。</p><p id="3a9d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一件事是弄清楚响应的大小是否意味着误报或重定向到相同的目的地，等等。这就是为什么你还必须留意输出，如果你注意到多个子域的大小是相同的，以及子域的名称，那么你必须Ctrl+c或进入ffuf交互式shell，并重新调整-fs标志，或者甚至-fw和-fl标志。</p><p id="c85d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，可能host:junkword.target.com的大小为123，而您添加了-fs 123，但是您会注意到host:service.target.com和host:services.target.com以及host:service1.target.com具有完全相同的大小、字、行和响应代码403，因此很明显您希望将其过滤掉，因为它很可能是有关目标的黑名单。</p><p id="ebae" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">猎杀内部子域</strong></p><p id="31d6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我将直接进入最有趣的部分，最有可能立即导致P1-P3错误——追捕一些，假设只有内部访问，往往包含敏感数据的子域，由于通过模糊方法或错误配置的安全性。</p><p id="66df" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是我在另存为csv的ffuf输出中使用的脚本(清理版本(:)。显然，你可以根据自己的需要随意调整或者合并它们，等等。</p><p id="60c5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">#!/bin/bash <br/> echo "用法:。/有趣的结果-from-ffvhost domain . com "<br/>read-p "准备好了就按任意键"<br/> cut -d '，'-f1 $1 | sed s/$/。$ 2/| sort-u&gt;for live 2。1美元<br/>。/alive 2 for live 2。$1</p><p id="d63a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">生活2:</p><p id="55d1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">#!/bin/bash <br/> nmap -iL $1 -sn</p><p id="ceb1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">输出将显示哪些子域可以解析为ip，哪些不能。不能的都是有意思的，特别是200还行，但就算404也能出成绩。</p><p id="9b93" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">搜寻外部子域</strong></p><p id="051d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">根据所讨论的bbp是否是widescope以及服务器是如何配置的，你可以使用ffuf作为一个子查找器类型的工具，只是更快更容易过滤掉误报。</p><p id="0d4d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">绕行</strong></p><p id="d37d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好的。前两部分对我来说非常有用，我在这方面取得了成功。但是，在其中一次侦察中，我发现了一些有趣的命名子域，尽管它解析为一个常规ip，我还是想看看它有什么。但是，令我惊讶的是，尽管ffuf得到了200个OK响应代码，curl和Firefox/Chrome却得到了403个。</p><p id="fb64" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我做了以下的事情来证实它是很了不起的:</p><p id="a66c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">卷发https://domain.com-H主持人:interesting-sub.domain.com</p><p id="1dea" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">还得了200 OK和P2 bug。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="a880" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以，希望你能从这篇文章中看到ffuf更像是一把追踪bug的瑞士军刀，很像ncat，但是有着不同的侧重点:</p><p id="7175" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这很适合我的文章，因为它可以在android或iPhone上完成:</p><p id="8726" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">https://medium . com/@ vuk . ivanovic 9000/but-hunting-from-a-car-on-a-cheap-most-d 052397 fc9b 2</p><p id="4a90" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想支持我更频繁地写关于寻找虫子的文章，这意味着我会更快地搬到一个租金更便宜的国家，请随时提供你能提供的任何提示，谢谢。https://ko-fi.com/bushi1947</p></div></div>    
</body>
</html>