<html>
<head>
<title>DOM XSS Using Web Messages (Practioner) — Portswigger Lab 1 | Solution and Approach</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Web消息的DOM XSS(实践者)— Portswigger实验室1 |解决方案和方法</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/dom-xss-using-web-messages-practioner-portswigger-lab-1-solution-and-approach-a9153ec6ac64?source=collection_archive---------2-----------------------#2022-12-26">https://infosecwriteups.com/dom-xss-using-web-messages-practioner-portswigger-lab-1-solution-and-approach-a9153ec6ac64?source=collection_archive---------2-----------------------#2022-12-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="16ba" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Portswigger基于DOM的漏洞实验室1方法和解释</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/93dc299c079ab7aa72ee6f445263880e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CbBU5mBPWwYXYVbY.jpg"/></div></div></figure><div class="kr ks gp gr kt ku"><a href="https://portswigger.net/web-security/dom-based/controlling-the-web-message-source/lab-dom-xss-using-web-messages" rel="noopener  ugc nofollow" target="_blank"><div class="kv ab fo"><div class="kw ab kx cl cj ky"><h2 class="bd ir gy z fp kz fr fs la fu fw ip bi translated">实验室:多姆XSS使用网络信息|网络安全学院</h2><div class="lb l"><h3 class="bd b gy z fp kz fr fs la fu fw dk translated">本实验演示了一个简单的web消息漏洞。要解决此实验，请使用漏洞服务器发布一条消息…</h3></div><div class="lc l"><p class="bd b dl z fp kz fr fs la fu fw dk translated">portswigger.net</p></div></div><div class="ld l"><div class="le l lf lg lh ld li kp ku"/></div></div></a></div><blockquote class="lj lk ll"><p id="0b0e" class="lm ln lo lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><strong class="lp ir"> <em class="iq"> 1。什么是DOM？</em>T19】</strong></p><p id="0396" class="lm ln lo lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><code class="fe mj mk ml mm b">The <strong class="lp ir">Document Object Model</strong> (DOM) is a web browser’s hierarchical representation of the elements on the page.</code></p><p id="a4a9" class="lm ln lo lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><code class="fe mj mk ml mm b">Websites can use JavaScript to manipulate the nodes and objects of the DOM, as well as their properties. DOM manipulation in itself is not a problem. In fact, it is an integral part of how modern websites work. However, JavaScript that handles data insecurely can enable various attacks.</code></p><p id="e5b7" class="lm ln lo lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><code class="fe mj mk ml mm b">DOM-based vulnerabilities arise </code> <strong class="lp ir"> <em class="iq">当一个网站包含JavaScript</em></strong><code class="fe mj mk ml mm b"> <em class="iq">that</em></code><strong class="lp ir"><em class="iq">取</em> </strong> <code class="fe mj mk ml mm b"><em class="iq">an</em></code> <strong class="lp ir"> <em class="iq">攻击者可控值</em> </strong> <code class="fe mj mk ml mm b">, known as a </code> <strong class="lp ir"> <em class="iq">来源</em> </strong> <code class="fe mj mk ml mm b">, and </code> <strong class="lp ir"> <em class="iq">通行证</em></strong><code class="fe mj mk ml mm b"><em class="iq">it</em></code><strong class="lp ir"><em class="iq"/></strong><code class="fe mj mk ml mm b"><em class="iq">into</em></code><strong class="lp ir"><em class="iq"/></strong><code class="fe mj mk ml mm b"><em class="iq">a</em></code><em class="iq"/>T57】</p><p id="7a41" class="lm ln lo lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><strong class="lp ir"> <em class="iq"> 2。什么是基于DOM的跨站点脚本(XSS)？</em> </strong></p><p id="069d" class="lm ln lo lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><code class="fe mj mk ml mm b">DOM-based XSS vulnerabilities usually arise when JavaScript takes data from an attacker-controllable source, such as the URL, and passes it to a </code> <strong class="lp ir"> <em class="iq">汇</em> </strong> <code class="fe mj mk ml mm b"> that supports </code> <strong class="lp ir">动态代码执行</strong><code class="fe mj mk ml mm b">, such as </code><strong class="lp ir"><em class="iq">eval()</em></strong><code class="fe mj mk ml mm b"> or innerHTML</code></p><p id="40a4" class="lm ln lo lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><strong class="lp ir"> <em class="iq"> 3。如何利用基于DOM的XSS </em> </strong></p><p id="9d20" class="lm ln lo lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><code class="fe mj mk ml mm b">The most common source for DOM XSS is the </code> <strong class="lp ir"> <em class="iq">网址</em> </strong> <code class="fe mj mk ml mm b">, which is typically accessed with the </code> <strong class="lp ir"> <em class="iq">窗口位置</em> </strong> <code class="fe mj mk ml mm b"> object.</code></p><p id="e5e0" class="lm ln lo lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><code class="fe mj mk ml mm b">An attacker can construct a link to send a victim to a vulnerable page with a payload in the query string and fragment portions of the URL</code>。<code class="fe mj mk ml mm b"><em class="iq">In </em>some cases targeting a </code> <strong class="lp ir"> <em class="iq"> 404页面或网站运行PHP </em> </strong> <code class="fe mj mk ml mm b">, the payload can also be placed in the path.</code></p></blockquote><h1 id="4ab9" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">实验室:多姆·XSS使用网络信息</h1><h2 id="20c4" class="nf mo iq bd mp ng nh dn mt ni nj dp mx nk nl nm mz nn no np nb nq nr ns nd nt bi translated">实验室描述:</h2><pre class="kg kh ki kj gt nu mm nv bn nw nx bi"><span id="68f3" class="ny mo iq mm b be nz oa l ob oc">This lab demonstrates a simple web message vulnerability.<br/><br/>To 'solve this lab, use the exploit server to post a message to <br/>the target site that causes the print() function to be called.</span></pre><ol class=""><li id="8031" class="od oe iq lp b lq lr lt lu nk of nn og nq oh mi oi oj ok ol bi translated">注意实验室的源代码</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi om"><img src="../Images/c65e77715f5caf510311aa6af1a61463.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*B1-3dR5aWH2KCTZ1vyjgsA.png"/></div></figure><p id="2f0c" class="pw-post-body-paragraph lm ln iq lp b lq lr jr ls lt lu ju lv nk lx ly lz nn mb mc md nq mf mg mh mi ij bi translated">我们发现了一个脚本，其中包含一个监听消息的<code class="fe mj mk ml mm b">addEventListener()</code>调用</p><p id="9d0e" class="pw-post-body-paragraph lm ln iq lp b lq lr jr ls lt lu ju lv nk lx ly lz nn mb mc md nq mf mg mh mi ij bi translated">2.将下面的有效载荷存储在<strong class="lp ir">漏洞服务器的主体</strong>中，并点击将其发送给受害者。确保在下面的有效载荷中添加您的实验室ID</p><pre class="kg kh ki kj gt nu mm nv bn nw nx bi"><span id="828a" class="ny mo iq mm b be nz oa l ob oc">&lt;iframe src="https://YOUR-LAB-ID.web-security-academy.net/" <br/>onload="this.contentWindow.postMessage('&lt;img src=1 onerror=print()&gt;','*')"&gt;</span></pre><ul class=""><li id="e14f" class="od oe iq lp b lq lr lt lu nk of nn og nq oh mi on oj ok ol bi translated">当<code class="fe mj mk ml mm b">&lt;iframe&gt;</code>加载时，有效载荷中的<code class="fe mj mk ml mm b">postMessage()</code>向主页中的<code class="fe mj mk ml mm b">EventListener()</code>发送消息。</li><li id="0c99" class="od oe iq lp b lq oo lt op nk oq nn or nq os mi on oj ok ol bi translated">它将其插入到ID为<code class="fe mj mk ml mm b">ads</code>的<code class="fe mj mk ml mm b">div</code>中</li><li id="2191" class="od oe iq lp b lq oo lt op nk oq nn or nq os mi on oj ok ol bi translated">这将插入我们的<code class="fe mj mk ml mm b">img</code>标签，它包含一个无效的<code class="fe mj mk ml mm b">src</code>属性。这将抛出一个错误，导致<code class="fe mj mk ml mm b">onerror</code>事件处理程序执行我们的有效负载<code class="fe mj mk ml mm b">print()</code>来解决Lab。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/aeb707ce7040d305bf307aae5dcec439.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*rJuPN2dwUHKq4UrD2jTEdw.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/e49c67a948065a5e0cb8e2f8a17095e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/1*--V0Kqa9fxM_KDWavM88nQ.gif"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/9e31b2cffd1d59d7a71dec79f1c476e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*pnW4wC_djjpu_mnwBMGiOw.png"/></div></figure></div><div class="ab cl ow ox hu oy" role="separator"><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb"/></div><div class="ij ik il im in"><p id="66d4" class="pw-post-body-paragraph lm ln iq lp b lq lr jr ls lt lu ju lv nk lx ly lz nn mb mc md nq mf mg mh mi ij bi translated">感谢您的阅读！！</p><p id="ef1d" class="pw-post-body-paragraph lm ln iq lp b lq lr jr ls lt lu ju lv nk lx ly lz nn mb mc md nq mf mg mh mi ij bi translated">狩猎快乐~</p><pre class="kg kh ki kj gt nu mm nv bn nw nx bi"><span id="2c3b" class="ny mo iq mm b be nz oa l ob oc">Author : Karthikeyan nagaraj ~ Cyberw1ng</span></pre><p id="fb19" class="pw-post-body-paragraph lm ln iq lp b lq lr jr ls lt lu ju lv nk lx ly lz nn mb mc md nq mf mg mh mi ij bi translated">portswigger，lab，xss，bug bounty，dom xss，基于dom的xss，</p></div></div>    
</body>
</html>