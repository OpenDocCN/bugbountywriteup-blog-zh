<html>
<head>
<title>Android InsecureBankv2 Walkthrough: Part 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">安卓安全银行2演练:第3部分</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/android-insecurebankv2-walkthrough-part-3-2b3e5843fe91?source=collection_archive---------2-----------------------#2020-07-28">https://infosecwriteups.com/android-insecurebankv2-walkthrough-part-3-2b3e5843fe91?source=collection_archive---------2-----------------------#2020-07-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0d34" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我将继续演练由GitHub用户<em class="kl">dineshetty</em>创建的<em class="kl">instrumentbank v2</em>Android应用程序。查看<strong class="jp ir">第1部分</strong> &amp; <strong class="jp ir">第2部分</strong>了解如何设置应用程序，以及我已经展示的应用程序的一些不安全性。我在下面的参考资料中留下了一个应用程序GitHub存储库的链接。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/986c5446f38e14fc9a30a004832033dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*-SwxVdI20TEENDs9wuGJaw.png"/></div></figure></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="181e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">放弃</h1><p id="6151" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">正如我在<strong class="jp ir">第1部分</strong> &amp; <strong class="jp ir"> 2 </strong>中所说的，我写这篇文章是出于对了解安卓移动应用安全的兴趣。这篇文章显然会包含对<em class="kl">昆虫银行2 </em> Android应用程序中存在的漏洞的剧透。我鼓励读者尽可能多地利用漏洞，如果您陷入困境或希望看到利用不安全的潜在不同方法，请稍后回来阅读本文。我们开始吧😄！</p></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="bca0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">根检测旁路</h1><p id="28ec" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">每次我成功登录，新的活动都会包含一条消息，说明该设备是<strong class="jp ir">根</strong>(即“根设备！!").</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi me"><img src="../Images/f98691f7fc1154bd499b49f0556e4a2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*XShRvgx_VKG4-Dpd-PiLXw.png"/></div></figure><p id="ff3a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">查看“<em class="kl">登录后</em>”活动的源代码，我可以看到一个名为“<em class="kl"> showRootStatus() </em>”的方法，它根据设备是否有根来返回消息。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/14f103cd95d184d351993faf3cfb0388.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*3RzjKEbE6X4Y1JKq-lI8dQ.png"/></div></figure><p id="30e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">查看上面的源代码，有两个称为“T20”的方法和“T22”的方法用于确定设备是否已被安装。这两种方法的源代码见下文。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mg"><img src="../Images/93f10c4599972d62c2f312a24b8f3d88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RKX8-HZEgs_GXx5v5-ojyw.png"/></div></div></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi ml"><img src="../Images/9d10e1d0663e50ba2a5af0998a09687b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fy7DUVw0eYYYqAVgaTUSaQ.png"/></div></div></figure><p id="150f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了绕过根检测，我可以使用下面的脚本使用<strong class="jp ir"> Frida </strong>来挂接两个布尔方法，并使它们返回<strong class="jp ir"> false </strong>。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mm"><img src="../Images/db7bd6119455ba85f38b8f353152dfa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a8EQWGfGtEsdhbSVKEM9uw.png"/></div></div></figure><p id="b53d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面提供了用于加载这个钩子的python脚本。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mn"><img src="../Images/1dac37c016d49cbf0eac30c15c861737.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DwspQrYXtabN8EhuN1rLPw.png"/></div></div></figure><p id="96a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我确保<strong class="jp ir"> Frida服务器</strong>在我的仿真器上运行，然后执行我的python脚本来注入JavaScript代码。一旦我的脚本加载成功，我需要成功登录。登录后，我的脚本将两个布尔方法的返回值都更改为false。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mo"><img src="../Images/1dfc85da711b377a79bbde97ca65eaf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6wxcul5RmG2Sl7yX8a2fwQ.png"/></div></div></figure><p id="3990" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将导致应用程序在登录后显示消息“设备未扎根”。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/3163731017ae9a61582e31cad7271024.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*9xN1gy8JM2MmR5J3mo_JJA.png"/></div></figure></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="2476" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不安全的网络视图实施和外部存储</h1><p id="2ff5" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">该应用程序允许用户在将资金从一个账户转移到另一个账户后查看结算单。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/a7e022ceb71970d3318591813c02a85f.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/1*dAssAW0O4i5qRt6vX9fD6g.png"/></div></figure><p id="fa2a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">view States</em>活动的源代码见下图。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mr"><img src="../Images/482258280ad5f98533809f9160b2e404.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kgH8NBuKlSILDWgZQLBt7A.png"/></div></div></figure><p id="3d3a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我可以看到该活动正在使用WebView加载一个存储在<strong class="jp ir">外部存储器</strong>中的<strong class="jp ir"> html文件</strong>，其名称以“<em class="kl">Statements _ T5”开头。我还可以看到，开发人员在webview中已经<strong class="jp ir">启用了JavaScript </strong>并带有“<em class="kl">set JavaScript enabled(true)；</em>"法。由于代码“<em class="kl"> System.out.print </em>”将文件位置打印到标准输出，所以我可以使用<strong class="jp ir"> logcat </strong>来识别文件的名称及其存储位置。</em></p><pre class="kn ko kp kq gt ms mt mu mv aw mw bi"><span id="d9ca" class="mx lc iq mt b gy my mz l na nb">adb logcat | grep "$(adb shell ps | grep com.android.insecurebankv2  | awk '{print $2}')"</span></pre><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi nc"><img src="../Images/9f1e6c573eba94404a487ad53ce4330e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HaK8mLuh2PpABiFQUSKPng.png"/></div></div></figure><p id="07de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从日志输出中，我可以看到文件的存储位置。</p><pre class="kn ko kp kq gt ms mt mu mv aw mw bi"><span id="b00c" class="mx lc iq mt b gy my mz l na nb">/storage/emulated/0/Statements_jack.html</span></pre><p id="e8c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为文件是从外部存储器加载的，所以每个人都可以读写该文件。我可以用一个包含一些JavaScript的新文件替换这个文件。该JavaScript将在加载HTML页面时执行。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/b5d8cdc22ee9d68c3b2a3d91c7fb4318.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*rdT-OQQ09RZ9_6CYuvhS_A.png"/></div></figure><p id="c880" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我可以使用<strong class="jp ir"> ADB </strong>将新的同名文件(即“<em class="kl">Statements _ jack . html”</em>)推送到仿真器设备上。</p><pre class="kn ko kp kq gt ms mt mu mv aw mw bi"><span id="cb5f" class="mx lc iq mt b gy my mz l na nb">adb push Statements_jack.html /storage/emulated/0/</span></pre><p id="61ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我可以点击“查看报表”按钮。WebView将加载新的“<em class="kl"> Statements_jack.html </em>”文件并执行我的JavaScript。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/ef6acc88fbd378e821a63fb1c5e476f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*6-1cg1TJ3ADWsanf_D6Nng.png"/></div></figure></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="9a4c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">安卓粘贴板漏洞</h1><p id="4744" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">Android提供了剪贴板框架来复制和粘贴不同类型的数据。通过调用<em class="kl"> getSystemService() </em>方法实例化<strong class="jp ir">剪贴板管理器</strong>的对象，可以查看该剪贴板的内容。为了证明这一点，我可以打开转账活动并将<strong class="jp ir">账号</strong>复制到剪贴板上。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/ddc551984cbacb05c40eee912fa7892f.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*odA3MxFqK8nDDrc4pn13Kg.png"/></div></figure><p id="f491" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我需要申请的账号。我可以使用<strong class="jp ir"> ps </strong>命令和<strong class="jp ir"> grep </strong>进行此操作。</p><pre class="kn ko kp kq gt ms mt mu mv aw mw bi"><span id="2d3e" class="mx lc iq mt b gy my mz l na nb">adb shell ps | grep "insecure"</span></pre><p id="1357" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我可以使用下面的命令查看<strong class="jp ir">剪贴板内容</strong>。</p><pre class="kn ko kp kq gt ms mt mu mv aw mw bi"><span id="9d92" class="mx lc iq mt b gy my mz l na nb">adb shell su u0_a12 service call clipboard 2 s16 com.android.insecurebankv2</span></pre><blockquote class="ng nh ni"><p id="6e42" class="jn jo kl jp b jq jr js jt ju jv jw jx nj jz ka kb nk kd ke kf nl kh ki kj kk ij bi translated">注意:<strong class="jp ir">服务调用剪贴板</strong>命令通过调用getSystemService()方法来实例化剪贴板管理器的对象。<strong class="jp ir">获取剪贴板文本、设置剪贴板文本、</strong>和<strong class="jp ir">具有剪贴板文本</strong>和<strong class="jp ir">的服务代码分别为1、2和3。</strong>参数“s16”将UTF-16字符串STR写入发送包。</p></blockquote><p id="232c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">输入该命令后，我可以看到复制到剪贴板的<strong class="jp ir">账号</strong>。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi nm"><img src="../Images/65564890fb45dc89f38ade3127ef7b9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZQJqY23BjjdzgZ0-gjPeDg.png"/></div></div></figure></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="bdc8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">利用安卓键盘缓存</h1><p id="5ff9" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">Android有一个字典，用户输入的单词可以保存在字典里，以备将来自动更正。任何没有特殊权限的应用程序都可以使用该用户词典。用户可以将用户名等潜在的敏感信息添加到字典中。本词典可通过<strong class="jp ir"> ADB </strong>检索，如下所示。</p><pre class="kn ko kp kq gt ms mt mu mv aw mw bi"><span id="1adb" class="mx lc iq mt b gy my mz l na nb">adb pull /data/data/com.android.providers.userdictionary/user_dict.db</span></pre><p id="a9be" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我可以使用“sqlitebrowser”打开这个数据库，查看字典中存储的任何单词。如下图所示，用户已经将他们的用户名保存到字典中。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/67d51a9e31965e2cd0a48a383f6de367.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*ZVVF_CeUvCwyBqVix_Y0Zw.png"/></div></figure></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="a7f3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不安全的HTTP连接</h1><p id="0e7f" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">应用程序通过使用HTTP协议与服务器建立不安全的连接。</p><blockquote class="ng nh ni"><p id="f6e4" class="jn jo kl jp b jq jr js jt ju jv jw jx nj jz ka kb nk kd ke kf nl kh ki kj kk ij bi translated">注意:HTTP协议不使用加密。如果你登录你的银行或在支付页面输入信用卡信息，网址必须是HTTPS。否则，您的敏感数据将面临风险。</p></blockquote><p id="7aca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我可以使用诸如<strong class="jp ir"> BurpSuite </strong>之类的工具来拦截、检查和修改双向通过的原始流量。为此，我可以通过创建一个代理监听器来配置BurpSuite监听我的<strong class="jp ir">主机专用</strong>网络适配器上的特定端口。这可以从下图中看出。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi no"><img src="../Images/12308671eaead8ef95b5cc8e143c74c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/1*p6YHd4t_bpUI7ttRbsIyGA.png"/></div></figure><p id="3093" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我可以在我的WiFi设置中的模拟器上创建一个<strong class="jp ir">手动代理</strong>。我只使用我的<strong class="jp ir">主机的IP地址</strong>网络适配器和我在创建监听器时指定的<strong class="jp ir">端口</strong>(即9999)。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi np"><img src="../Images/a190b80b0cad95d0efa6adfb1023d693.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/1*V84t0eXflCE76qItYidw-g.png"/></div></figure><p id="49a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我现在可以用BurpSuite查看来自应用程序的HTTP流量。当我尝试登录时，所使用的凭证可以在明文中看到。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/efbe67910fb316393430c511604229ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:926/format:webp/1*9lAcdFxq3mC42EkpTsw28Q.png"/></div></figure><blockquote class="ng nh ni"><p id="9b95" class="jn jo kl jp b jq jr js jt ju jv jw jx nj jz ka kb nk kd ke kf nl kh ki kj kk ij bi translated">注意:可以通过Burp查看HTTPS流量，但burp CA证书需要安装在目标设备上。</p></blockquote></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="5669" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">参数操作</h1><p id="222d" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">使用<strong class="jp ir"> BurpSuite </strong>，当应用程序将参数发送到python服务器时，我可以操作这些参数。我可以在用户试图更改密码时演示这一点，如下图所示。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/3fb83d91b811f5d641e17f400462e193.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*YCIQz2T6wVPcXQ4MpzWXUw.png"/></div></figure><p id="5a2b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我可以使用Burpsuite拦截HTTP数据包，并在用户提交新密码时检查其内容。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/efbe67910fb316393430c511604229ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:926/format:webp/1*9lAcdFxq3mC42EkpTsw28Q.png"/></div></figure><p id="8609" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我现在可以操作参数，将值改为其他值。例如，我可以将用户名从“jack”更改为“dinesh”，从而更改不同用户的密码。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi ns"><img src="../Images/ee60e8e13ec3ad0427a83e2eabbb96be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m-HY7Wqx06jk_FsTqIlv9Q.png"/></div></div></figure><p id="7b83" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦我更改了用户名值，我就可以允许发送HTTP数据包，并观察更改是否成功。</p></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="491a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">用户枚举</h1><p id="0ce8" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">该应用程序对用户枚举较为脆弱，可通过使用<strong class="jp ir"> BurpSuite </strong>来利用该漏洞。如前所述，我可以使用Burpsuite拦截用户更改密码和查看数据包内容的HTTP请求。如前所述，有两个参数，包括用户名和新密码。我可以右键单击BurpSuite，并将解释后的数据包发送给入侵者。</p><blockquote class="ng nh ni"><p id="2c1f" class="jn jo kl jp b jq jr js jt ju jv jw jx nj jz ka kb nk kd ke kf nl kh ki kj kk ij bi translated">注意<strong class="jp ir">Burp intrusor</strong>是一个针对web应用程序的自动化定制攻击工具。它非常强大且可配置，可用于执行大量任务，从简单的暴力猜测web目录到主动利用复杂的盲SQL注入漏洞。</p></blockquote><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi nt"><img src="../Images/4defeb5e3a31bb6b434b1b95fd66bed9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wy3dlUjiA7p49GmQSPTctw.png"/></div></div></figure><p id="62ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦发送给入侵者，我需要标记我的<strong class="jp ir">有效载荷</strong>将被使用的<strong class="jp ir">位置</strong>。我清除最初标记的所有位置，然后突出显示用户名值，并将其添加为我的有效载荷的位置。攻击类型设置为狙击。<strong class="jp ir">狙击手</strong>攻击类型使用一套有效载荷。它依次瞄准每个有效载荷位置，并将每个有效载荷依次放入该位置。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/ff70db7d1a23112a171b05d5ee18a57e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*UW_w17IVKLcwQAseNeyWjA.png"/></div></figure><p id="f76f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我开始攻击之前，我需要设置我的有效载荷。对于我的有效载荷，我可以使用一个简单的列表<strong class="jp ir">并添加一些常用的用户名到列表中，如下图所示。</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/4924b4bd000846605be2f2744ee0b33f.png" data-original-src="https://miro.medium.com/v2/resize:fit:844/format:webp/1*3P-PiZfNncKHcLfh11kfpg.png"/></div></figure><p id="82b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我可以通过点击BurpSuite中位置选项卡上的<strong class="jp ir">开始攻击按钮</strong>来开始我的攻击。攻击将开始，通过查看响应，有可能枚举存在的用户名。例如，用户名admin不存在，当试图更改该用户的密码时会引发错误。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/c451ad18d06274d6493f54d41016b0d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*xn1by9tx_Ysr0gxWNrzJyw.png"/></div></figure><p id="92ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是，用户名“jack”确实存在，所以当我试图更改密码时，得到了成功的响应。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/f7e14f9381854a70bc31b6c3ce0c5cb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*5OOSqrUZrvtTWvdxJpaVZg.png"/></div></figure><blockquote class="ng nh ni"><p id="f644" class="jn jo kl jp b jq jr js jt ju jv jw jx nj jz ka kb nk kd ke kf nl kh ki kj kk ij bi translated">注意:消息长度等其他指标也可以作为枚举用户的指标。</p></blockquote></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="1eb1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结束语</h1><p id="b75b" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">这就结束了我的Android应用程序的第3部分。在这一系列文章中，我试图展示Android移动应用程序中存在的不同漏洞。如果您还没有这样做，请随时查看第1部分 &amp; <strong class="jp ir">第2部分</strong>。感谢阅读，下次再见😄！</p></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="b2d2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">参考</h1><ul class=""><li id="d740" class="nx ny iq jp b jq lz ju ma jy nz kc oa kg ob kk oc od oe of bi translated"><a class="ae og" href="https://github.com/dineshshetty/Android-InsecureBankv2" rel="noopener ugc nofollow" target="_blank">https://github.com/dineshshetty/Android-InsecureBankv2</a></li><li id="8aed" class="nx ny iq jp b jq oh ju oi jy oj kc ok kg ol kk oc od oe of bi translated"><a class="ae og" href="https://mobile-security.gitbook.io/mobile-security-testing-guide/android-testing-guide/0x05h-testing-platform-interaction" rel="noopener ugc nofollow" target="_blank">https://mobile-security . git book . io/mobile-security-testing-guide/Android-testing-guide/0x05h-testing-platform-interaction</a></li><li id="6439" class="nx ny iq jp b jq oh ju oi jy oj kc ok kg ol kk oc od oe of bi translated"><a class="ae og" href="https://portswigger.net/burp/documentation/desktop/tools/intruder/positions" rel="noopener ugc nofollow" target="_blank">https://ports wigger . net/burp/documentation/desktop/tools/intrusor/positions</a></li></ul></div></div>    
</body>
</html>