<html>
<head>
<title>How Apple store all your email metadata for years on their servers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">苹果公司是如何将你所有的电子邮件元数据在他们的服务器上储存多年的</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/how-apple-stored-all-your-email-metadata-for-years-on-their-servers-2a61b1a3232d?source=collection_archive---------0-----------------------#2018-05-29">https://infosecwriteups.com/how-apple-stored-all-your-email-metadata-for-years-on-their-servers-2a61b1a3232d?source=collection_archive---------0-----------------------#2018-05-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="3496" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天我要揭示的是，自从iCloud推出以来，苹果是如何获得你使用官方邮件应用发送(甚至在某些情况下收到)的所有电子邮件的元数据的。</p><p id="09f9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">很多年前，我停止使用Gmail，但我保留了这个账户。我没有删除它，而是删除了里面的所有内容，包括电子邮件和联系人，并使用官方邮件应用程序将它连接到我的手机上。两年前，我注意到当我写电子邮件并开始输入收件人时，我可以看到我删除的联系人出现了。我又查了谷歌，甚至是iCloud通讯录，但一无所获。</p><p id="9139" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">自从我没有时间去好好调查到底发生了什么，但在这个GDPR日，我想起了这件事，我非常愿意仔细看看。</p><h2 id="4f79" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">调查</h2><p id="4483" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">我最初认为它来自谷歌服务器，但在调查后我得出结论，iCloud Mail似乎在苹果服务器上的clear中谨慎地收集你在官方应用程序中发送的电子邮件的元数据，而不管使用的邮箱是什么(谷歌、Outlook、Riseup、fast Mail……)。</p><p id="21bd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">显然是用于自动完成电子邮件的“最近”功能，这里我有1.2 MB的元数据，大约有700多个联系人，这大约是自2017年iCloud推出以来我可以从任何邮箱联系的每封电子邮件，这与我迁移到使用外部应用程序的ProtonMail相冲突。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lj"><img src="../Images/ed1105a7b339b04358855ecef56204fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iUlGoCUTab2UxMHgPnIljg.jpeg"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">Apple服务器上的数据样本，包含发件人、收件人、收件人姓名和时间戳。</figcaption></figure><p id="06af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我的个人转储中，我能够找到2012年初的电子邮件地址。我还能找到没有回复的电子邮件，所以目前还不清楚苹果是否也在收集你收到的电子邮件的元数据。我可以假设他们在过去这样做过，但是因为我不能繁殖而停止了。</p><h2 id="a513" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">(大)问题</h2><p id="32a4" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">问题是，即使在几年后，数据仍然存在(然而我们在这里谈论的是“最近的人”)，用户没有办法知道列表(不打开web开发人员控制台)，对于他能找到的一点点，他必须一个接一个地删除它们。</p><p id="8898" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我和一个朋友确认了一下，似乎尽管他没有实际的iCloud电子邮件地址，也没有切换过iCloud的“邮件”选项，但这些数据仍然会保存下来，因为他后来发现是通过创建它保存的。</p><h2 id="fd4f" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">使用iRemember转储和删除所有内容</h2><p id="979b" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">如果您使用启用了iCloud的iPhone或Mac，您可能会受到影响。你可以登陆iCloud Web，在Web开发者控制台执行我调用的iRemember来查看苹果为你保存了多少数据:<a class="ae lz" href="https://gist.github.com/pwnsdx/9a8092604363bbaf5560f1d68171ccd9" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/pwn sdx/9a 8092604363 bbaf 5560 f1 d 68171 CCD 9</a></p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ma"><img src="../Images/32c95ce36e8b9eca469722eb3737fa3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q5wG4QdLsyZ0dq61CnY0Zw.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">iRemember正在运行</figcaption></figure><h2 id="86e2" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">现在发生了什么？</h2><p id="3b64" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">苹果在2个月前添加了一篇描述该功能的知识库文章(没有任何技术细节):<a class="ae lz" href="https://support.apple.com/kb/ph20541?locale=en_GB" rel="noopener ugc nofollow" target="_blank">https://support.apple.com/kb/ph20541?locale=en_GB</a>(<strong class="jp ir">是的，2个月前一个5岁的功能</strong>)。</p><p id="c3f4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个数据可能会出现在即将发布的<strong class="jp ir"> GDPR </strong>报告中，这可能是为什么现在这个数据被修正了，但是很多人肯定会问自己这个数据怎么会出现在他们的苹果账户中。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><p id="b7fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">5月31日更新</strong>:提出要求的人开始收到他们的GDPR报告，电子邮件元数据似乎出现在报告的“其他数据”部分。该文件为XML格式，位于<em class="mi">其他数据&gt;苹果功能使用iCloud &gt;邮件&gt; Recents.xml </em>下</p><p id="bc89" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">5月31日更新</strong>:重要更正:iOS 11.4并未修复该问题。因此，更新并不能解决问题。如果您想要避免这种数据收集，建议注销iCloud或停止使用官方邮件应用程序。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h2 id="8d20" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">我是谁？</h2><p id="5cba" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">我的名字是塞布莉·哈德杜。我是一名开发人员、pentester、bug猎人和隐私倡导者。白天，我作为安全团队的一员在<a class="ae lz" href="https://wire.com" rel="noopener ugc nofollow" target="_blank"> Wire </a>工作，在空闲时间，我涉足一些项目，比如<a class="ae lz" href="https://www.mailsploit.com/index" rel="noopener ugc nofollow" target="_blank"> Mailsploit </a>和<a class="ae lz" href="https://github.com/pwnsdx/Unsecure" rel="noopener ugc nofollow" target="_blank"> Unsecure </a>。</p></div></div>    
</body>
</html>