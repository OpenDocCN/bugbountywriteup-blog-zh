<html>
<head>
<title>Write -Up 06-TryHackMe-Vulnversity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">详细报道06-TryHackMe-Vulnversity</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/write-up-06-tryhackme-vulnversity-9b5f8e365be8?source=collection_archive---------0-----------------------#2020-06-16">https://infosecwriteups.com/write-up-06-tryhackme-vulnversity-9b5f8e365be8?source=collection_archive---------0-----------------------#2020-06-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/675a74e18fd6c08527bb02815a0aa81b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aonfR0avER0h8gKbZPrVeg.png"/></div></div></figure></div><div class="ab cl kb kc hx kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="im in io ip iq"><h1 id="176b" class="ki kj it bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">绕过上传限制并获得Root权限</h1><p id="b8bb" class="pw-post-body-paragraph lg lh it li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">演练穿过TryHackMe平台上提供的房间“<a class="ae me" href="https://tryhackme.com/room/vulnversity" rel="noopener ugc nofollow" target="_blank"><strong class="li iu"/></a>”。在我之前的演练中，我们讨论了操作系统中的漏洞以及在系统上运行的不同服务中发现的漏洞。在这个房间里，我们将绕过网络服务器上的上传限制，通过它，我们将获得我们的shell并提升我们的权限以获得所需的结果。</p><h1 id="ee89" class="ki kj it bd kk kl mf kn ko kp mg kr ks kt mh kv kw kx mi kz la lb mj ld le lf bi translated">先决条件</h1><p id="59b1" class="pw-post-body-paragraph lg lh it li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我建议你应该有以下的基本知识，这不是必须的，但它会帮助你更有效地解决问题</p><ol class=""><li id="9d3b" class="mk ml it li b lj mm ln mn lr mo lv mp lz mq md mr ms mt mu bi translated">Nmap</li><li id="d74d" class="mk ml it li b lj mv ln mw lr mx lv my lz mz md mr ms mt mu bi translated">目录破坏</li><li id="692d" class="mk ml it li b lj mv ln mw lr mx lv my lz mz md mr ms mt mu bi translated">Burpsuit</li><li id="a875" class="mk ml it li b lj mv ln mw lr mx lv my lz mz md mr ms mt mu bi translated">Linux文件系统、权限、SETUIDs、环境变量等</li></ol><h1 id="e606" class="ki kj it bd kk kl mf kn ko kp mg kr ks kt mh kv kw kx mi kz la lb mj ld le lf bi translated">目标</h1><ol class=""><li id="3788" class="mk ml it li b lj lk ln lo lr na lv nb lz nc md mr ms mt mu bi translated">收集关于目标机器的信息</li><li id="da0b" class="mk ml it li b lj mv ln mw lr mx lv my lz mz md mr ms mt mu bi translated">找出网络服务器上隐藏的目录</li><li id="e943" class="mk ml it li b lj mv ln mw lr mx lv my lz mz md mr ms mt mu bi translated">获取web服务器的外壳</li><li id="9c6f" class="mk ml it li b lj mv ln mw lr mx lv my lz mz md mr ms mt mu bi translated">提升权限</li></ol><h1 id="17d4" class="ki kj it bd kk kl mf kn ko kp mg kr ks kt mh kv kw kx mi kz la lb mj ld le lf bi translated">学习成果</h1><ol class=""><li id="56d4" class="mk ml it li b lj lk ln lo lr na lv nb lz nc md mr ms mt mu bi translated">了解扫描主机的Nmap标志</li><li id="1d42" class="mk ml it li b lj mv ln mw lr mx lv my lz mz md mr ms mt mu bi translated">使用Go-buster查找web服务器上的隐藏目录</li><li id="61cc" class="mk ml it li b lj mv ln mw lr mx lv my lz mz md mr ms mt mu bi translated">学习绕过网络服务器上的上传限制来获得外壳</li><li id="0f60" class="mk ml it li b lj mv ln mw lr mx lv my lz mz md mr ms mt mu bi translated">学习Linux升级权限</li></ol><p id="af89" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated"><strong class="li iu">又及:我建议你们，伙计们，自己去试试这个房间，如果你们被困住了，就用这篇文章做参考。在某些任务中，你需要在谷歌上搜索你的问题。我不会明确标记子任务，但你会在每个主任务</strong>中找到子任务的所有答案</p><h1 id="1501" class="ki kj it bd kk kl mf kn ko kp mg kr ks kt mh kv kw kx mi kz la lb mj ld le lf bi translated">入门指南</h1><h2 id="20be" class="ng kj it bd kk nh ni dn ko nj nk dp ks lr nl nm kw lv nn no la lz np nq le nr bi translated">[任务1 ]-部署机器</h2><p id="0f4b" class="pw-post-body-paragraph lg lh it li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">首先，我们需要使用<strong class="li iu"> OpenVPN </strong>连接到<strong class="li iu"> TryHackMe </strong>网络。这个过程非常简单，你只需要下载配置并在终端上使用<strong class="li iu"> OpenVPN </strong>命令运行它。完成后，在终端上使用<strong class="li iu"> ifconfig </strong>命令验证您是否在TryHackMe的网络上，您应该会看到一个名为“tun0”或“tun1”的接口和一个分配给它的IP。祝贺您，您现在已经连接到TryHackMe网络。</p><h2 id="d3e3" class="ng kj it bd kk nh ni dn ko nj nk dp ks lr nl nm kw lv nn no la lz np nq le nr bi translated">[任务2 ]-侦察</h2><p id="a6bd" class="pw-post-body-paragraph lg lh it li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">首先，我们需要通过使用如下所示的<strong class="li iu"> Nmap </strong>扫描来收集关于目标机器的信息。使用Nmap时，某些开关会相应地获取信息，例如<strong class="li iu">-</strong>开关执行主动扫描。通过查阅<strong class="li iu"> Nmap </strong>的手册，您可以找到关于其他交换机功能的更多信息</p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ns"><img src="../Images/724fdf4f451272c5e134b2b5755ec4bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u8gMToHuswRUIRV9CaztxA.png"/></div></div></figure><p id="3d95" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">从上面的扫描中，我们得到了开放端口的数量。除此之外，我们还会发现每个开放端口上运行的服务和服务版本。使用<strong class="li iu"> -o </strong>标志Nmap给我们目标机器的操作系统，如下所示。如果我们使用<strong class="li iu"> -n </strong>标志，它将不会解析DNS (IP到主机名)。</p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nx"><img src="../Images/1d7204dc82b724b7313683288bf15ae3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1mj1F9q-OWVFKiUnMvRJEw.png"/></div></div></figure><h2 id="0850" class="ng kj it bd kk nh ni dn ko nj nk dp ks lr nl nm kw lv nn no la lz np nq le nr bi translated">[任务3 ]-使用Gobuster定位目录</h2><p id="46f1" class="pw-post-body-paragraph lg lh it li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在我们已经有了关于端口和端口上运行的服务的信息。让我们尝试探索运行在端口<strong class="li iu"> 3333 </strong>上的<strong class="li iu"> HTTP </strong>服务。当我们使用目标机器的IP和端口3333访问它时，下面的页面打开。探索它并不能提供太多信息</p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ny"><img src="../Images/6c4216f2c830b8864f9be2b668e773d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-JLkTD2lX6UKxr2KFyFuqQ.png"/></div></div><figcaption class="nz oa gj gh gi ob oc bd b be z dk translated">Vulnversity网站</figcaption></figure><p id="5f91" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">现在我们将使用go buster找到隐藏的目录。你可以在这里了解更多关于gobuster <a class="ae me" href="https://tools.kali.org/web-applications/gobuster" rel="noopener ugc nofollow" target="_blank">的信息，或者你可以使用man gobuster来了解它使用的开关。遵循下面的语法，查找隐藏的目录，并使用如下所示的常用单词列表</a></p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi od"><img src="../Images/8bcfc36e9b14347fd3add5fc5c1238f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lVMp8mAooIu9tufHaTPwCA.png"/></div></div><figcaption class="nz oa gj gh gi ob oc bd b be z dk translated">用于目录破坏的Gobuster</figcaption></figure><p id="5c9a" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">输出结果显示了可用的隐藏目录，其中大多数目录是正常的，并且可以在大多数网页上找到。<strong class="li iu"> /internal </strong>看起来很有趣，所以当访问时，它显示了一个有上传选项的页面。你和我想的一样吗？如果你猜对了，事情会变得非常有趣。</p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oe"><img src="../Images/df56f1cbe2242b151f291d92a05183f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g43YklbUzlLtb9C0j1SXZg.png"/></div></div><figcaption class="nz oa gj gh gi ob oc bd b be z dk translated">已访问隐藏目录</figcaption></figure><h2 id="39fe" class="ng kj it bd kk nh ni dn ko nj nk dp ks lr nl nm kw lv nn no la lz np nq le nr bi translated">[任务4 ]危害Web服务器</h2><p id="ab16" class="pw-post-body-paragraph lg lh it li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我将尝试上传不同扩展名类型的文件，看看是否能上传。我试着上传。巴新和。jpeg但是失败了。</p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div class="gh gi of"><img src="../Images/9a073af941738f4e7c55a11ca3b6ee9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*4pPvE6r5Tv2d09bxvNAdxw.png"/></div><figcaption class="nz oa gj gh gi ob oc bd b be z dk translated">不允许扩展</figcaption></figure><p id="880d" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">我使用了<a class="ae me" href="https://www.wappalyzer.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="li iu"> wapalyzer </strong> </a>并且发现这个网站是建立在PHP之上的，所以这是可以理解的。php是不允许的，因为如果允许与网站相同的扩展名，对手可能会使文件可执行并获得对web服务器的外壳访问。</p><p id="98bd" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">现在要知道web服务器上允许哪个扩展，以便我们可以得到一个shell，启动<strong class="li iu"> Burp Suite </strong>。请记住在web浏览器上配置代理，以便Burp Suite可以通过此代理拦截流量。</p><p id="b4f6" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">如下图所示设置攻击目标</p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi og"><img src="../Images/77cf038e645d0abb7238d7346628a623.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WhvvkwwayNKJZUzqibintQ.png"/></div></div><figcaption class="nz oa gj gh gi ob oc bd b be z dk translated">设置攻击目标和端口</figcaption></figure><p id="ed6b" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">现在，在web服务器的上传页面上上传任何扩展文件，以便在HTTP历史中捕获请求，如下所示。不要忘记打开<strong class="li iu">拦截器</strong></p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oh"><img src="../Images/d1233da9dc9a651fa8a1bf22bdeeacce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*toN4JhcG3fCERKTq_H46wQ.png"/></div></div></figure><p id="6627" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">将此请求发送给<strong class="li iu">入侵者</strong>，并标记扩展字段。我们将对该字段进行模糊处理，以找出哪个扩展名容易被绕过</p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oi"><img src="../Images/0845dbb38c08798eced467a229a8b194.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bJrr7uRaiHUguJOVGIhsIw.png"/></div></div><figcaption class="nz oa gj gh gi ob oc bd b be z dk translated">干扰者</figcaption></figure><p id="dfb7" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">在有效载荷选项中，我们将上传会被模糊化的扩展。不要忘记取消选择<strong class="li iu">编码</strong>选项，因为保持启用不会给你正确的结果</p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oj"><img src="../Images/a5c15f4b92e42bebc9d05f175e1ffca2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L5lAKr_Ni2CE1pMnqFxD4w.png"/></div></div><figcaption class="nz oa gj gh gi ob oc bd b be z dk translated">引信有效载荷的选择</figcaption></figure><p id="48d8" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">现在导航到选项添加grep匹配，即当上传错误的扩展文件时显示的输出消息</p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/e4fbba4bfd9f28419cdd1852be8b955f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*ul927-gX4X23qD9RyOvmfA.png"/></div></figure><p id="8af4" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">现在点击攻击，这将开始模糊过程。如下图所示，我们看到。web服务器上允许phtml扩展名。我们可以通过两种方式来确认这一点，一种是长度，另一种是网页对raw选项卡中这个扩展的响应。</p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ol"><img src="../Images/9b1a407effc2e13ce5c2f96c18572cb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_YBAk8XD6gE0k9Lv2aUwKg.png"/></div></div></figure><p id="36b4" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">既然我们知道<a class="ae me" href="https://file.org/extension/phtml" rel="noopener ugc nofollow" target="_blank"> <strong class="li iu">。phtml </strong>允许扩展名为T5。是时候上传PHP外壳了。要上传的PHP shell可以在这里 </a>找到<a class="ae me" href="https://github.com/pentestmonkey/php-reverse-shell/blob/master/php-reverse-shell.php" rel="noopener ugc nofollow" target="_blank"> <strong class="li iu">。通过添加您的计算机的本地IP地址来编辑脚本，该地址可以通过在终端中键入cmd命令来找到。需要将针对<strong class="li iu"> tun0 </strong>或<strong class="li iu"> tun1 </strong>的IP复制并添加到脚本中。在上传脚本之前，让我们使用Net-cat监听端口1234上的传入连接，如下所示。</strong></a></p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div class="gh gi om"><img src="../Images/0b5f1d4e5e47df3b391e986ca7a55865.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*BjRGnC2C652iyBGFKmm6yw.png"/></div><figcaption class="nz oa gj gh gi ob oc bd b be z dk translated">netcat侦听端口1234</figcaption></figure><p id="d846" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">在服务器内部网页上传PHP脚本，我们会看到脚本已经上传成功</p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div class="gh gi on"><img src="../Images/64ce0f109c6db0d342215bbe70fe22cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*da5uEaFXk3oFMAKrmfG4Sg.png"/></div><figcaption class="nz oa gj gh gi ob oc bd b be z dk translated">上传了。phtml脚本</figcaption></figure><p id="f770" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">导航到<strong class="li iu">http://&lt;IP&gt;:3333/internal/uploads/PHP-reverse-shell . phtml .</strong>一旦我们导航到这个URL，我们将得到一个反向shell，如下所示</p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oo"><img src="../Images/065b06d2e8661d6a15871a4fb7628384.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Evl91OWYlTyJK5eRngwig.png"/></div></div><figcaption class="nz oa gj gh gi ob oc bd b be z dk translated">反向外壳访问</figcaption></figure><p id="a0d8" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">现在我们需要找到管理服务器的用户。导航到<strong class="li iu"> etc/passwd </strong>文件，我们知道只有一个用户拥有bash访问权限，因此基于这一假设，我们开始了解如下所示的</p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi op"><img src="../Images/0167a8010cf74c213beba2609d690d0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RaovmRxh_zBMCNMAITiPkA.png"/></div></div><figcaption class="nz oa gj gh gi ob oc bd b be z dk translated">etc/passwd文件</figcaption></figure><p id="ee1c" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">导航到用户目录，我们得到用户标志</p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/b069389f6ca738a1663d47190c25769a.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/format:webp/1*BLqnewhSch5gAPhX74z1Uw.png"/></div><figcaption class="nz oa gj gh gi ob oc bd b be z dk translated">用户标志</figcaption></figure><h2 id="a8f2" class="ng kj it bd kk nh ni dn ko nj nk dp ks lr nl nm kw lv nn no la lz np nq le nr bi translated">[任务5]权限提升</h2><p id="aaf5" class="pw-post-body-paragraph lg lh it li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在我们有了shell访问权限，我们需要将我们的权限提升到root。这一节相当棘手，希望你了解<a class="ae me" href="https://en.wikipedia.org/wiki/Setuid" rel="noopener ugc nofollow" target="_blank"> <strong class="li iu"> setuid </strong> </a>函数和Linux权限之类的东西。关于这个函数已经有一些理论解释了。如果我们看到我们用户的当前权限，我们没有root权限</p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div class="gh gi or"><img src="../Images/c7f8619166adea19db7062d444f3f417.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*evQBPG3BIvV68rdlA7SoMg.png"/></div></figure><p id="7c75" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">使用<strong class="li iu">find/-user root-perm-4000-exec ls-ldb { } \列出所有suid文件；</strong></p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div class="gh gi os"><img src="../Images/1330b1dc5e4697deac47e9e482da8f96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*dKDj4cxF9Q31zQrfxqGtig.png"/></div></figure><p id="5493" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">systemctl在所有启用了setuid的文件中脱颖而出，因为在systemctl上启用setuid是不正常的。我很好奇，在不同的主机上运行了相同的命令，发现它们都没有启用setuid的systemctl，因此基于这个<strong class="li iu"> /bin/systemctl </strong>很突出。gtfobin是一个很好的地方，在这里<a class="ae me" href="https://gtfobins.github.io/gtfobins/systemctl/" rel="noopener ugc nofollow" target="_blank"> <strong class="li iu"> gtfobin </strong> </a>是一个很好的地方，在这里你可以找到帮助权限提升绕过本地安全策略的Unix二进制文件</p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ot"><img src="../Images/a04a3b322c6762a08a4f4841bc2f8193.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uzoVvPJg-bAe2tkijx4q4Q.png"/></div></div></figure><p id="8a5a" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">现在我们需要设置一个环境变量。我修改了上面的脚本，有点像我更喜欢特权用户的痛击，所以我编辑了它，如下所示。为了把所有的事情都做好，您可能希望对Linux文件系统和setuid有一个大致的了解。</p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ou"><img src="../Images/d96d3b665f556ed96b857a3977bd2021.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wn0g8NsVNXn5pDOG61whoA.png"/></div></div></figure><p id="9dc9" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">在这一步之后，启用创建的环境变量并运行它。我们一执行这个命令，就获得了root权限和root标志，如下所示。现在<strong class="li iu"> euid </strong>和<strong class="li iu"> egid </strong>是根。</p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ov"><img src="../Images/391cf3d636f3465cb35f2420bab45b19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6760gd8RIw2YCw20uQC7Ng.png"/></div></div></figure><p id="bbe3" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">随着最后一项任务的成功执行，我们将结束本次演练。我知道最后一部分让人不知所措，但是不要担心，我很快就会写关于Linux特权升级的文章，这会消除你所有的疑虑。现在我们知道了如何绕过web服务器上的上传限制，并利用它来获得web服务器的外壳。</p><p id="3849" class="pw-post-body-paragraph lg lh it li b lj mm ll lm ln mn lp lq lr nd lt lu lv ne lx ly lz nf mb mc md im bi translated">我希望您喜欢这个演示，如果您有任何意见或建议，请在下面的意见/回复框中告诉我</p></div><div class="ab cl kb kc hx kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="im in io ip iq"><h1 id="611b" class="ki kj it bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">关于我</h1><p id="0559" class="pw-post-body-paragraph lg lh it li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我是一名网络安全爱好者，正在攻读信息安全硕士学位，并试图进入全职网络安全职业生涯。您可以点击这里阅读更多文章和演练<a class="ae me" href="https://medium.com/@anon_7" rel="noopener"/></p><figure class="nt nu nv nw gt ju gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/74999497955db240561b3c167af5028e.png" data-original-src="https://miro.medium.com/v2/resize:fit:498/format:webp/1*Juc32BpszgFY_1PtBouXPw.png"/></div></figure></div></div>    
</body>
</html>