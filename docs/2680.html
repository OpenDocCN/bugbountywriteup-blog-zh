<html>
<head>
<title>Vulnhub Machine-Toppo Writeup/Walkthrough | By Md Amiruddin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vulnhub Machine-Toppo详细报道/漫游|作者Md Amiruddin</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/toppo-capture-the-flag-walkthrough-d7ace3aa811f?source=collection_archive---------9-----------------------#2022-12-20">https://infosecwriteups.com/toppo-capture-the-flag-walkthrough-d7ace3aa811f?source=collection_archive---------9-----------------------#2022-12-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8acd44fe1b1d6bee301d6a9918089651.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IpJFG0VCOF9Y-FtL.jpg"/></div></div></figure><p id="edbf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">难度:容易</p><p id="cf4b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">旗帜:有一面旗帜</p><p id="50b2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">DHCP:启用<br/> IP地址:自动分配</p><p id="1154" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于这台Toppo机器，我使用了Virtual Box来运行目标机器。Kali Linux是解决这个CTF的攻击机器。</p><p id="b016" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Toppo OVA文件可以从<a class="ae kw" href="https://www.vulnhub.com/entry/toppo-1,245/" rel="noopener ugc nofollow" target="_blank">这里</a>下载。</p><p id="91f8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">足迹</strong></p><p id="d891" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如你所看到的，Toppo机器是开机的，它显示ip地址为10.0.2.12。现在，在我们开始使用ifconfig来找到你的攻击机器(kali)的IP地址。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/d7cd28d0bc6e5db643877f595ed1bd5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nwIIJuAZnwYyYnXF.png"/></div></div></figure><p id="010f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我的目标的IP地址是10.0.2.12，我的Kali的IP地址是10.0.2.5。这些地址适用于我和我的网络，您的地址可能会有所不同。</p><p id="e159" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将使用命令&gt;<strong class="ka ir"> netdiscover -i eth0 </strong>来发现Toppo ip地址。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/655a2af7d2a78c3dbf1c6d59537e3951.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FEmuoYfrrsoaS01y.png"/></div></div></figure><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/e81e4acb2091d16441f8a4623d13252b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LltKqKU_0j4BcHfU.png"/></div></div></figure><p id="4f33" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们接下来需要找出哪些端口和服务是可用的。为此，我们可以进行Nmap扫描。</p><p id="0cdf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用的命令&gt;<strong class="ka ir">nmap 192 . 168 . 0 . 31-p</strong><strong class="ka ir">-sV</strong></p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/339678e4a32c7e3452ffd7859e364aaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rut3Ab_MBEZEhbyU.png"/></div></div></figure><p id="0593" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">扫描显示目标有4个打开的端口。</p><p id="603f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如我们所见，端口80可用，因此，我们将打开浏览器，在地址栏中键入IP地址，它将显示网站的主页。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/a5160066e9e8f9784ad5547c9e99199b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WdJ4R-oXJBOX_bjP.png"/></div></div></figure><p id="1e29" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因为网页没有显示任何有用的信息。现在是时候和Dirb爆发了。Dirb将帮助我们找到网站的目录。DIRB是一个网页内容扫描器。它查找现有的(和/或隐藏的)Web对象。它的基本工作原理是对web服务器发起基于字典的攻击，并分析响应。</p><p id="5b63" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用的命令&gt;<strong class="ka ir">dirb</strong><a class="ae kw" href="http://10.0.2.12" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">http://10 . 0 . 2 . 12</strong></a></p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/2c5292de38b8363b1b0c2fc4bd62e359.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GtSb-wOCroYZ8LwD.png"/></div></div></figure><p id="165f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一段时间后，dirb将显示一些有用的目录，从结果中我们得到了一个管理目录，这将是我们开始寻找的第一选择。只需要复制网址，并把它放在我们浏览器的地址栏。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/ad1ed1c0d97c2b6cf80fe135a0453fcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Jf-pilwQD4Rtx44-.png"/></div></div></figure><p id="ac01" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们在admin目录中发现了一些重要的notes.txt文件。打开notes.txt文件后，我们发现了一个密码{12345ted123}，因此，我们将尝试使用该密码登录运行在端口22上的ssh。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/8409c8855b132c084373dd7e5909caec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UmPosvJu32Wz-JIq.png"/></div></div></figure><p id="92db" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">由于我们已经有了一个包含名称的密码，并且目标正在运行SSH，因此可能的用户名和密码组合如下所示ssh <a class="ae kw" href="https://cyberintelligencesolution.com/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank">【受电子邮件保护】</a></p><p id="89b4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用的命令&gt;<strong class="ka ir">ssh</strong><a class="ae kw" href="https://cyberintelligencesolution.com/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank">T22】【邮件保护】 </a></p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/f7515a48246135d9513a85cf20bf67b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*crRV_SesIV4dPwid.png"/></div></div></figure><p id="d879" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如您所见，我们已经登录，因此我们将深入了解以找到所需的标志。</p><p id="4309" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在是开发和扎根的时候了。我们来看看OS版本是否存在漏洞。</p><p id="c084" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> &gt; <em class="lc">猫/etc/期</em> </strong></p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/2415c8ac4b24aebf1850324484073ab9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QG5u-4azYg3m2pUG.png"/></div></div></figure><p id="71cc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我已经检查过我们的目标操作系统Debian 3 . 16 . 51–3没有漏洞，所以我们尝试不同的方法来找到我们的根标志。</p><p id="7116" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过使用以下命令，我们可以枚举所有具有SUID权限的二进制文件。</p><p id="873b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">SUID是对可执行文件的一种特殊的文件权限，它使其他用户能够以文件所有者的有效权限运行该文件。您将看到一个s(表示SUID)用户的特殊权限，而不是代表执行权限的普通x。</p><p id="ceae" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用的命令&gt;<strong class="ka ir">find/-perm-u = s-type F2&gt;/dev/null</strong></p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/0d2f5c6efac3de044771ec4e23f1f429.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6PPHcwQG539fBZ-T.png"/></div></div></figure><p id="b0a4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们已经发现了python2.7二进制文件，所以我们将利用它。</p><p id="e012" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过使用Python 2.7，我们可以获得root访问权限，我们将使用以下命令找到root标志:</p><p id="60bf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> python2.7 -c 'import pty使用的命令；pty.spawn("/bin/sh")' </strong></p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/bed76eff95b376b0bd161d3ac5675495.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TFPISki6ECuTJ2xY.png"/></div></div></figure><p id="aee2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如您所见，我们在根目录中找到了根标志。这个CTF对初学者来说很容易，但是做起来很有趣。</p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><p id="b705" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lc">原载于2022年12月20日https://cyberintelligencesolution.com</em><em class="lc">的</em> <a class="ae kw" href="https://cyberintelligencesolution.com/toppo-capture-the-flag-walkthrough/" rel="noopener ugc nofollow" target="_blank"> <em class="lc">。</em></a></p></div></div>    
</body>
</html>