<html>
<head>
<title>Accessing the website directly through its IP address, a case of a poorly hidden sql injection</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过IP地址直接访问网站，这是一个隐藏性很差的sql注入案例</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/accessing-the-website-directly-through-its-ip-address-a-case-of-a-poorly-hidden-sql-injection-82833defbbc3?source=collection_archive---------0-----------------------#2020-08-27">https://infosecwriteups.com/accessing-the-website-directly-through-its-ip-address-a-case-of-a-poorly-hidden-sql-injection-82833defbbc3?source=collection_archive---------0-----------------------#2020-08-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/9bd1773771f1ab40a858aedf761798a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*OH_ULC8T1fTgBGsBBxdZSQ.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">例如:website.com解析为ip地址10.2.3.2</figcaption></figure><p id="4c64" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你可能听过这样一句话:藏在众目睽睽之下。具体来说，在IT安全中还有另一种表达方式:通过模糊实现安全。这篇文章将是我对一个bug的体验，人们可能会认为这是通过模糊性实现安全性的情况，但这可能是一个巧合。这将是一个我偶然发现sql注入(一个简单的登录旁路，让我登录到管理面板)的故事，但不是以通常的方式。无论哪种方式，它应该给你一个或两个想法，在未来寻找什么。除非你已经知道了。</p><p id="691f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">第一印象，错误印象:</strong></p><p id="4015" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">问题中的bbp范围很广，trusty *.website.com。喜欢这些:)，这当然意味着需要时间来进行大量的侦察行动。使用massdns、amass、一点crt.sh等工具。</p><p id="80a9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当所有的子域都被收集后，我开始浏览那些听起来有趣的子域。还有，这个子域只显示了一个简单的帮助/关于我类型的页面。乍一看，什么也没有。没有表单，没有额外的链接，没有任何东西可以提供线索，除了一个静态页面。是时候向前看了。</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi kz"><img src="../Images/dbdd0a4331284a7c1062007217242303.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Ju5EIGcOvCWlRs9PcFzgQ.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">一个静态/无聊网页的例子，这里没有错误？</figcaption></figure><p id="ab42" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">第二印象，透过不同的镜头:</strong></p><p id="fc00" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在寻找bug时，跳出框框思考是很重要的，这与不轻易放弃是分不开的。当目标网站看起来“空空如也”的时候，再想想。有一些标题你可以乱用(主机，引用，用户代理，等等。特别是对于盲xss、sql注入)，然后添加默认情况下不属于请求的头，比如X-Forwarded头族。但是，还有一件事值得一试，一件很容易被忘记或被错误地认为是浪费时间的事——IP地址。</p><p id="d90f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">晶圆或无晶圆:</strong></p><p id="9d16" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">就个人而言，如果目标网站解析为一个ip地址，而这个IP地址又属于akamai、cloudflare、aws和类似的网站，我倾向于让它保持原样。关于找出waf背后的真正知识产权的整个事情是我运气不好的事情。但是，当ip最终没有解析到任何waf-s或云提供商时，尽管它可能仍然与某种类型的vhosts相关联，但您永远也不会知道，除非您直接转到有问题的ip地址。</p><p id="b870" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">别样的精彩/简单PoC: </strong></p><p id="e683" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在浏览器中输入ip地址会加载一个不同的页面，非常不同。</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi li"><img src="../Images/e7bda304f6d37b7436c91817b076182d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mEae7N0BhACoG2VqsG6Cag.png"/></div></div></figure><p id="ea69" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当看到登录表单时，显而易见的事情是:</p><p id="7fcb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">用户名:admin' #</p><p id="1065" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">通过:无关紧要</p><p id="ee71" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当然还有其他的<a class="ae lj" href="https://www.netsparker.com/blog/web-security/sql-injection-cheat-sheet/" rel="noopener ugc nofollow" target="_blank"> sql注入来绕过</a>登录。而且，在极少数情况下，它们起作用，甚至在2020年，这是那些极少数情况之一。</p></div><div class="ab cl lk ll hx lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="im in io ip iq"><p id="d29c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">猎虫的时候很容易不知所措。而且，当范围超宽时，挑起战争变得更加困难，有时甚至开始一场战争。但是，这并不意味着如果一个子域上没有任何感兴趣的东西，没有明显的攻击区域(意味着用户/bug猎人可以与之交互)，您应该忘记最初的黑客基础知识—端口扫描。端口扫描反过来应该提醒你，为了做到这一点，你需要的ip地址。从那里开始，在解析子域时，它应该变得很明显，不管它是你想离开它还是追求它。</p></div></div>    
</body>
</html>