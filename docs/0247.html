<html>
<head>
<title>How I made a programmable hacking USB device to infiltrate PCs?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何制作一个可编程的黑客USB设备来渗透电脑？</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/how-i-made-a-programmable-hacking-usb-device-to-infiltrate-pcs-449726c5b23d?source=collection_archive---------0-----------------------#2019-01-25">https://infosecwriteups.com/how-i-made-a-programmable-hacking-usb-device-to-infiltrate-pcs-449726c5b23d?source=collection_archive---------0-----------------------#2019-01-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><blockquote class="jn jo jp"><p id="522a" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">所以我在那里，这是一个极其关键的时刻。我就站在系统旁边，但什么也做不了，因为房间里还有其他人。获得这台机器的访问权限可以改变我的一切，我希望我可以只插入一个usb设备或可以在10秒内完成工作的东西，然后我可以不留痕迹地删除它。</p></blockquote><p id="7cb8" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">你是否曾经有过我上面描述的那种感觉，当你在短时间内访问一个系统，想要执行一组特定的命令，但是在这种情况下却做不到。那么这篇文章是你的必读之作。</p><h1 id="0f56" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">什么是BadUSB？</h1><p id="6b92" class="pw-post-body-paragraph jq jr iq jt b ju lq jw jx jy lr ka kb kp ls ke kf kq lt ki kj kr lu km kn ko ij bi translated">BadUSB只不过是一个芯片组，它被配置为充当键盘，具有一组预编程的击键，一旦插入系统，这些击键就会激活。这是关于BadUSB的最简单的定义之一。现实可能比这要复杂一点。</p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi lv"><img src="../Images/d3e4f5c2cc397c921d32be14d14c0e62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iwq8HjYuvVO9DTazVZcxZw.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">橡胶鸭子</figcaption></figure><p id="2fd7" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">HAK5网站上的橡皮鸭是最著名的BadUSB产品之一，需求量很大。它们被设计成一个键盘，所以系统马上识别它，然后运行预编程的击键，可以超过1000字/分钟的打字速度。</p><p id="53e4" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">但是，任何一直关注我的文章的人都知道，像我这样一贫如洗的人不会买这个。所以，我试图找出一种方法来创造这样的东西，不是那么有效，但足够接近。</p><h1 id="90ce" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">让我们开始吧！</h1><p id="f944" class="pw-post-body-paragraph jq jr iq jt b ju lq jw jx jy lr ka kb kp ls ke kf kq lt ki kj kr lu km kn ko ij bi translated">因此，为了了解背景发生了什么，我读了几篇文章，意识到芯片组<a class="ae ml" href="https://www.amazon.in/CIRCUIT-SYSTEMS-Digispark-Kickstarter-Development/dp/B07FYZQLQR?tag=googinhydr18418-21&amp;tag=googinkenshoo-21&amp;ascsubtag=_k_EAIaIQobChMI4oex2o6H4AIV17WWCh2qzAdVEAQYAiABEgK52_D_BwE_k_&amp;gclid=EAIaIQobChMI4oex2o6H4AIV17WWCh2qzAdVEAQYAiABEgK52_D_BwE" rel="noopener ugc nofollow" target="_blank"> Digispark ATTINY85 </a>可以用来复制橡胶鸭子执行的行为，并可以被当作键盘来执行某些命令。</p><p id="e4a3" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">该芯片组可以使用Arduino IDE进行编程，然后当它插入PC时，可以执行这些命令。</p><p id="eee7" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">第一步:</p><p id="9c08" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">我们必须下载并安装Digispark ATTINY85芯片组所需的驱动程序。点击这个<a class="ae ml" href="https://github.com/digistump/DigistumpArduino/releases/download/1.6.7/Digistump.Drivers.zip" rel="noopener ugc nofollow" target="_blank">链接</a>，下载你需要的32位或64位版本的文件。</p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mm"><img src="../Images/ab66b0a70ac59d66a967ff4e95f790e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2IjYgBinfqK1TofaDuuGZg.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">Digispark ATTINY85</figcaption></figure><p id="ac0d" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">第二步:</p><p id="3aa0" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">下载最新版本的Arduino IDE，您将在其中编写芯片组编程代码，请访问此<a class="ae ml" href="https://www.arduino.cc/en/main/software" rel="noopener ugc nofollow" target="_blank">链接</a>。根据您使用的操作系统下载IDE。</p><p id="7c9c" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">第三步:</p><p id="08da" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">一旦下载了Arduino IDE，打开它，然后进入<strong class="jt ir">文件</strong>-&gt;-<strong class="jt ir">首选项</strong>。在名为“附加Boards Manager URLs”的输入字段中，输入以下URL。</p><blockquote class="jn jo jp"><p id="7176" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated"><a class="ae ml" href="http://digistump.com/package_digistump_index.json" rel="noopener ugc nofollow" target="_blank">http://digistump.com/package_digistump_index.json</a></p></blockquote><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mn"><img src="../Images/43ce3a9ffbcd415a7a77764cc634a4f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eB3yn-jViH5Dd7Bvb_ycAg.png"/></div></div></figure><p id="6c40" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">第四步:</p><p id="b316" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">完成以下操作后，进入<strong class="jt ir">工具</strong>-&gt;-<strong class="jt ir">电路板</strong>-&gt;-<strong class="jt ir">电路板管理器</strong>。在这里点击搜索过滤器并输入<strong class="jt ir"> Digistump AVR Boards </strong>软件包将出现在下面，然后点击右上角的install。</p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mo"><img src="../Images/94bede056d91fae96cf4319a66901a9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V0166b4sSoXgB7DsYWnFmQ.png"/></div></div></figure><p id="d98f" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">安装这个可能需要一点时间，取决于你的网速。</p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mp"><img src="../Images/f86a5fc913a619b5f36448b906847a60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0NQuObrng9sr-zhCOb9iIw.png"/></div></div></figure><p id="87fc" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">第五步:</p><p id="d36a" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">这是你开始编程前需要执行的最后一步，进入<strong class="jt ir">工具</strong> - &gt; <strong class="jt ir">板。</strong>向下滚动直到看到<strong class="jt ir"> Digispark(默认-16.5 MHz)</strong>选项，然后点击选择它。</p><p id="f347" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">当您在Arduino IDE上编码时，您需要执行这些步骤来正确地设置您的系统，以便相应地工作。这种设置可能需要一点时间，但它可以用来在非常短的时间内自动完成许多设置，节省大量宝贵的时间，您可能不想在笔式测试或类似的事情中失去这些时间。</p><p id="04bd" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">第六步: (编程)</p><p id="69f2" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">现在，所有的步骤都已经正确执行了，接下来打开Arduino IDE，输入你希望芯片执行的程序。ATTINY85芯片组的程序与橡皮鸭的程序稍有不同。</p><p id="870b" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">这里有一个脚本，可以帮助你在当前的windows 10上用管理员权限打开cmd。</p><pre class="lw lx ly lz gt mq mr ms mt aw mu bi"><span id="325b" class="mv kt iq mr b gy mw mx l my mz">#include "DigiKeyboard.h"<br/>void setup() <br/>{ <br/> // leave it empty<br/>}</span><span id="4f5f" class="mv kt iq mr b gy na mx l my mz">void loop()<br/>{<br/> DigiKeyboard.delay(5000); // time is measured in milliseconds<br/> DigiKeyboard.sendKeyStroke(0, MOD_GUI_LEFT); // open windows menu<br/> DigiKeyboard.delay(1000);<br/> DigiKeyboard.print(“cmd”); // to search for command prompt<br/> DigiKeyboard.delay(1000);<br/> DigiKeyboard.sendKeyStroke(KEY_ENTER, MOD_CONTROL_LEFT | MOD_SHIFT_LEFT);<br/> DigiKeyboard.delay(1000);<br/> DigiKeyboard.sendKeyStroke(KEY_ARROW_LEFT);<br/> DigiKeyboard.sendKeyStroke(KEY_ENTER);<br/> for(;;) { } // to stop executing the loop<br/>}</span></pre><p id="7e90" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">一旦上述代码被放入Arduino IDE，然后编译它，不要插入芯片组，直到它提示一条消息，这应该需要几秒钟你第一次运行脚本。当它提示插入芯片组的消息时，继续插入。让魔法开始吧！</p><h1 id="7015" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">道德的</h1><p id="727b" class="pw-post-body-paragraph jq jr iq jt b ju lq jw jx jy lr ka kb kp ls ke kf kq lt ki kj kr lu km kn ko ij bi translated">要防止上述攻击，请遵循以下规则:</p><p id="51e8" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">a)密切监视您的设备，禁止不受信任的人实际接触您的机器。</p><p id="63e9" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">b)您可以使用这些端口拦截器来阻止刚刚经过的人将usb设备插入您的系统，要购买请点击此<a class="ae ml" href="https://www.amazon.in/Lindy-USB-Port-Blocker-Green/dp/B000I2JWJ0" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><p id="b584" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">c)你可以使用<a class="ae ml" href="https://github.com/pmsosa/duckhunt" rel="noopener ugc nofollow" target="_blank"> duckhunt </a>，根据自动脚本输入命令的速度来检测它，然后完全停止它。</p><p id="c98f" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">还有其他的技巧和窍门来阻止对你的设备的攻击，查看一下<a class="ae ml" href="https://www.youtube.com/watch?v=Vq0kUxslp80" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="a8d5" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">如果你不明白上面的解释，想要一个视频教程来指导你，请访问<a class="ae ml" href="https://www.youtube.com/watch?v=fGmGBa-4cYQ" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="1605" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">如果你喜欢，请鼓掌让我们合作。获取、设置、破解！</p><p id="dcfb" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">网址:<a class="ae ml" href="https://www.aditya12anand.com/" rel="noopener ugc nofollow" target="_blank">aditya12anand.com</a>|捐赠:<a class="ae ml" href="https://paypal.me/aditya12anand" rel="noopener ugc nofollow" target="_blank">paypal.me/aditya12anand</a></p><p id="035d" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">电报:<a class="ae ml" href="https://t.me/aditya12anand" rel="noopener ugc nofollow" target="_blank">https://t.me/aditya12anand</a></p><p id="d7a7" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">推特:<a class="ae ml" href="https://twitter.com/aditya12anand?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank">twitter.com/aditya12anand</a></p><p id="8091" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">领英:<a class="ae ml" href="https://www.linkedin.com/in/aditya12anand/?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank">linkedin.com/in/aditya12anand/</a></p><p id="1473" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">电子邮件:aditya12anand@protonmail.com</p></div></div>    
</body>
</html>