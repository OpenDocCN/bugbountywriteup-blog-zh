<html>
<head>
<title>Recipe for a successful phishing campaign (2/2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">成功网络钓鱼活动的秘诀(2/2)</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/recipe-for-a-successful-phishing-campaign-part-2-2-68552806dcba?source=collection_archive---------1-----------------------#2020-10-15">https://infosecwriteups.com/recipe-for-a-successful-phishing-campaign-part-2-2-68552806dcba?source=collection_archive---------1-----------------------#2020-10-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="fa34" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://medium.com/bugbountywriteup/recipe-for-a-successful-phishing-campaign-part-1-2-dc23d927ec55" rel="noopener">链接到第1部分。</a></p><p id="6a59" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回顾:在第1部分中，我们看到了在开始设置基础设施时应该记住的一般注意事项，以及使用SPF和DKIM记录设置域的技术步骤。在这一部分，我们将得到10/10的分数，我将向你展示如何管理大型活动，以及最后的10个技巧来提高你的接待率。我们还将讨论SMTP中继以及何时应该使用它们。</p><h1 id="5b0c" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">DNS记录</h1><p id="32a2" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">当你在<a class="ae kl" href="https://medium.com/bugbountywriteup/recipe-for-a-successful-phishing-campaign-part-1-2-dc23d927ec55" rel="noopener"> <strong class="jp ir">第一部分</strong> </a>完成所有设置后，你应该有6到9个DNS记录。让我们解释一下。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi lp"><img src="../Images/277f0f0c17df6386927d5068109a9226.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LqGsjfQrpC3RRqY4UcV82Q.png"/></div></div><figcaption class="mb mc gj gh gi md me bd b be z dk translated">设置好一切后的DNS记录</figcaption></figure><ol class=""><li id="5289" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">1到3个NS记录，将您的域委托给云提供商的名称服务器记录(在我的例子中，最后3个记录是数字海洋名称服务器)</li><li id="040d" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">A记录指出你的领域到你的VPS IP。</li><li id="2cfd" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">一个A记录，指向我们将要用来设置spf(在我的例子中是mail.totallyrealdomain.com)到你的VPS IP的子域。</li><li id="6417" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">SPF的TXT记录。</li><li id="89a8" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">DKIM的TXT记录。</li><li id="de2f" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">一张指向mail.yourdomain.com的MX唱片</li></ol><h2 id="7cf2" class="mt kn iq bd ko mu mv dn ks mw mx dp kw jy my mz la kc na nb le kg nc nd li ne bi translated">调整我们的内容</h2><p id="5194" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">在尝试我们的第一封邮件后，我们得到了6.5/10。让我们试着改进这一点。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nf"><img src="../Images/89d4e52d8946ba94e9b24021db902501.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*chcewDNjYar9tIRRabchcg.png"/></div></div><figcaption class="mb mc gj gh gi md me bd b be z dk translated">我们最后的得分</figcaption></figure><p id="7207" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可能会通过一些垃圾邮件过滤器，但我们可以做得更好。让我们看看是什么降低了我们的分数。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ng"><img src="../Images/e985e18626752c27f072d1f9483f5bcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JJZRIii0yoy2DQdm6ViWIA.png"/></div></div><figcaption class="mb mc gj gh gi md me bd b be z dk translated">SpamAssassin似乎在降低我们的分数</figcaption></figure><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nh"><img src="../Images/fbdd5cfa171ef18b0357eb00657704ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BcbgaH8wvJRR0RLdcjWBnw.png"/></div></div></figure><p id="1047" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所有这些设置都与电子邮件的内容有关，而与我们的设置无关。所以让我们修改我们的电子邮件。通过理解我们用mail命令发送了一封简单的邮件(来自mailutils包),我们可以解释我们得到的大多数结果</p><pre class="lq lr ls lt gt ni nj nk nl aw nm bi"><span id="3967" class="mt kn iq nj b gy nn no l np nq">echo "Testing mail" | mail -s "$(echo -e "Test Email\nFrom: John Doe &lt;<a class="ae kl" href="mailto:no-reply1@fbnotificationmail.com" rel="noopener ugc nofollow" target="_blank">no-reply@totallyrealdomain.com</a>&gt;\nReply-to: <a class="ae kl" href="mailto:no-reply2@fbnotificationmail.com" rel="noopener ugc nofollow" target="_blank">no-reply@</a><a class="ae kl" href="mailto:no-reply1@fbnotificationmail.com" rel="noopener ugc nofollow" target="_blank">totallyrealdomain</a> \nContent-Type:text/html\n")" -r <a class="ae kl" href="mailto:no-reply3@fbnotificationmail.com" rel="noopener ugc nofollow" target="_blank">no-reply@</a><a class="ae kl" href="mailto:no-reply1@fbnotificationmail.com" rel="noopener ugc nofollow" target="_blank">totallyrealdomain</a> <a class="ae kl" href="mailto:test-s821hrdl9@srv1.mail-tester.com" rel="noopener ugc nofollow" target="_blank">test-s211hrdl7@srv1.mail-tester.com</a></span></pre><p id="b326" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">邮件可以有多种格式，如html、纯文本等..我们没有指定任何标题或格式，mail-tester似乎默认为html电子邮件，所以我们基本上发送了一个隐式的html电子邮件，没有任何html内容或mime类型。让我们单独分析每个警告。</p><h2 id="2045" class="mt kn iq bd ko mu mv dn ks mw mx dp kw jy my mz la kc na nb le kg nc nd li ne bi translated">HTML _ MIME _ NO _ HTML _标记</h2><p id="5e03" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">为了类似于任何看起来不太像样的真实邮件，我们需要html内容。这意味着html标签。但是我们没有发。</p><h2 id="5e00" class="mt kn iq bd ko mu mv dn ks mw mx dp kw jy my mz la kc na nb le kg nc nd li ne bi translated">MIME_HEADER_CTYPE_ONLY</h2><p id="ec52" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">这意味着我们应该用有效的<a class="ae kl" href="https://en.wikipedia.org/wiki/MIME" rel="noopener ugc nofollow" target="_blank"> MIME值</a>指定一个Content-Type头。</p><h2 id="b5c0" class="mt kn iq bd ko mu mv dn ks mw mx dp kw jy my mz la kc na nb le kg nc nd li ne bi translated">MIME_HTML_ONLY</h2><p id="7a70" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">还记得我们说过默认情况下mail-tester将邮件解释为html吗？嗯，一封好的邮件应该有相同内容的两个版本。一个html版本用于支持它的邮件客户端，一个文本版本用于最简单的邮件客户端。</p><h1 id="a53d" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">把所有的放在一起</h1><p id="34bf" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">不幸的是，mail-tester.com只让你测试你的电子邮件3次，我们已经在基础设施方面花了2次。因此，让我们一次性修复所有内容。我们可以创建一个html电子邮件，并使用命令行发送它。尽管我很喜欢mailutils，但它并不是发送html邮件的最佳工具。让我们试试postfix自己的sendmail。</p><p id="52c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在这里找到我的模板邮件的<a class="ae kl" href="https://raw.githubusercontent.com/securfreakazoid/autoPhisher/master/testMail.html" rel="noopener ugc nofollow" target="_blank">代码。</a></p><p id="b3ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们修改目的地并使用以下内容发送它:</p><pre class="lq lr ls lt gt ni nj nk nl aw nm bi"><span id="83a3" class="mt kn iq nj b gy nn no l np nq">sed -i '<a class="ae kl" href="mailto:s/destinationEmail/test-zxmlxbuke@srv1.mail-tester.com" rel="noopener ugc nofollow" target="_blank">s/destinationEmail/test-zxmlxbuke@srv1.mail-tester.com</a>/g' template.html<br/>sendmail -i -t &lt;testMail.html</span></pre><p id="f514" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可能想知道，为什么要替换模板中的标题，而不仅仅是:</p><pre class="lq lr ls lt gt ni nj nk nl aw nm bi"><span id="7a73" class="mt kn iq nj b gy nn no l np nq">sendmail destination@desmail.com -i &lt;testMail.html</span></pre><p id="2770" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嗯，如果你发送的电子邮件没有To:标题，你会得到一个较低的评级:</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nr"><img src="../Images/4cd67a22417dda226447c620523d8cb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WQ6XIvnkFrnxqsdWzSZm2A.png"/></div></div></figure><p id="ae06" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以一定要插入这个标题。不管怎样，让我们看看我们的分数:</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ns"><img src="../Images/78bde15074fd101bdfd91912f1a3b287.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ThVwg0RorzlnUM_8swUXtw.png"/></div></div><figcaption class="mb mc gj gh gi md me bd b be z dk translated">终于！</figcaption></figure><p id="e81b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们走吧！完美的10/10。</p><p id="15fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们想在我们的评估中插入几个目标，可能带有链接或附件，这个设置就足够了。当红队组队时，这是初次接触一家公司的好方法。如果你想生成恶意附件，你应该研究的一个工具是<a class="ae kl" href="https://github.com/trustedsec/unicorn" rel="noopener ugc nofollow" target="_blank">独角兽</a>。它支持宏攻击，HTA和DDE。如果你试图用2FA来钓鱼，你可以使用像<a class="ae kl" href="https://blog.duszynski.eu/phishing-ng-bypassing-2fa-with-modlishka/" rel="noopener ugc nofollow" target="_blank"> Modlishka </a>这样的代理来完成(还有很多其他很酷的攻击，像<a class="ae kl" href="https://blog.duszynski.eu/tor-ip-disclosure-through-http-301-cache-poisoning/" rel="noopener ugc nofollow" target="_blank"> 301重定向缓存中毒来验证Tor用户</a>，但是不要跑题)。</p><p id="03a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是，当您想要评估员工的安全级别时，我们以前的方法并不真正有效。要做到这一点，你需要一种向多个用户发送邮件的方式，并获得关于特定事件的统计数据(你的链接被点击的次数，有多少用户打开了它，等等)..).仅使用CLI工具管理1000封已发送邮件的统计数据并不容易。</p><p id="3056" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要做到这一点，我们需要一个框架，根据我的经验，最好的工具是Gophish。它不仅是免费和开源的，而且非常容易使用。</p><pre class="lq lr ls lt gt ni nj nk nl aw nm bi"><span id="0efb" class="mt kn iq nj b gy nn no l np nq">mkdir gophish<br/>cd gophish<br/>wget <a class="ae kl" href="https://github.com/gophish/gophish/releases/download/v0.10.1/gophish-v0.10.1-linux-64bit.zip" rel="noopener ugc nofollow" target="_blank">https://github.com/gophish/gophish/releases/download/v0.10.1/gophish-v0.10.1-linux-64bit.zip</a><br/>unzip gophish-v0.10.1-linux-64bit.zip<br/>chmod +x gophish<br/>./gophish</span></pre><p id="1db5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将启动两个监听端口80和3333的服务。</p><p id="23ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">端口80将托管您的钓鱼网站，端口3333将允许您连接到管理控制台。之后你需要定义</p><ol class=""><li id="9e1a" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">指定目标的<a class="ae kl" href="https://docs.getgophish.com/user-guide/building-your-first-campaign/creating-the-sending-profile" rel="noopener ugc nofollow" target="_blank">发送组</a></li></ol><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/8fc6008abb69bec6d02fb9adf451ad88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*086prjcphATkt6rqSbrpAg.png"/></div><figcaption class="mb mc gj gh gi md me bd b be z dk translated">图片取自<a class="ae kl" href="https://docs.getgophish.com/user-guide/building-your-first-campaign/importing-groups" rel="noopener ugc nofollow" target="_blank"> gophish的文档</a></figcaption></figure><p id="40d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2)一个<a class="ae kl" href="https://docs.getgophish.com/user-guide/building-your-first-campaign/creating-the-sending-profile" rel="noopener ugc nofollow" target="_blank">发送配置文件</a>，如果你需要使用SMTP中继的话(我们将在下一部分详细讨论)。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/ec4cdfc1e88295bf9aa8cbdf8c9ee5dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/format:webp/1*SPJlLS1umwDnbLRBPN8cQw.png"/></div><figcaption class="mb mc gj gh gi md me bd b be z dk translated">图片取自<a class="ae kl" href="https://docs.getgophish.com/user-guide/building-your-first-campaign/creating-the-sending-profile" rel="noopener ugc nofollow" target="_blank"> gophish的文档</a></figcaption></figure><p id="66a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3)您要发送的电子邮件的<a class="ae kl" href="https://docs.getgophish.com/user-guide/building-your-first-campaign/creating-the-template" rel="noopener ugc nofollow" target="_blank">邮件模板</a>。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/ccb3ba9e4a92b15c07040bf5fbf15c24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*tWlQJGHw7qarA8TmBd4Qcw.png"/></div><figcaption class="mb mc gj gh gi md me bd b be z dk translated">图片取自<a class="ae kl" href="https://docs.getgophish.com/user-guide/building-your-first-campaign/creating-the-template" rel="noopener ugc nofollow" target="_blank"> gophish的文档</a></figcaption></figure><p id="8b43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4)网络钓鱼的<a class="ae kl" href="https://docs.getgophish.com/user-guide/building-your-first-campaign/creating-the-landing-page" rel="noopener ugc nofollow" target="_blank">登陆页面</a>。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/90643a0ff76b1233e56ab4a419be779f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*v338Jw65qx3ANXjAMVs4kQ.png"/></div><figcaption class="mb mc gj gh gi md me bd b be z dk translated">图片取自<a class="ae kl" href="https://docs.getgophish.com/user-guide/building-your-first-campaign/creating-the-landing-page" rel="noopener ugc nofollow" target="_blank"> gophish的文档</a></figcaption></figure><p id="31c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">5)完成上述所有步骤后，您将能够<a class="ae kl" href="https://docs.getgophish.com/user-guide/building-your-first-campaign/launching-the-campaign" rel="noopener ugc nofollow" target="_blank">计划并发起一项活动</a>。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/7c4f8c85306857a6faeb1444515830ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*NA5aIVhQMquYnqaTlZMZ2g.png"/></div><figcaption class="mb mc gj gh gi md me bd b be z dk translated">图片取自<a class="ae kl" href="https://docs.getgophish.com/user-guide/building-your-first-campaign/launching-the-campaign" rel="noopener ugc nofollow" target="_blank"> gophish的文档</a></figcaption></figure><p id="4f12" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有了Gophish，你就可以得到一个带有统计数据的仪表盘，比如打开的邮件数量、点击的链接、提交的数据等等</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ny"><img src="../Images/e6a47cae6a30b3e69178597e43d635c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RSZP4SO6D_P5y2E4UlkC9A.png"/></div></div><figcaption class="mb mc gj gh gi md me bd b be z dk translated">图片取自<a class="ae kl" href="https://docs.getgophish.com/user-guide/documentation/generating-reports" rel="noopener ugc nofollow" target="_blank"> gophish的文档</a></figcaption></figure><h1 id="f5cc" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">SMTP中继</h1><p id="529c" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">我们在smtp中继方面没有取得多大成功。在我们尝试的所有免费软件中，我们最成功的是<a class="ae kl" href="https://mailchimp.com/" rel="noopener ugc nofollow" target="_blank"> Mailchimp </a>和<a class="ae kl" href="https://sendgrid.com/" rel="noopener ugc nofollow" target="_blank"> Sendgrid </a>。您可以在Gophish的发送模板上设置您的登录凭证，或者您可以<a class="ae kl" href="https://www.linode.com/docs/email/postfix/postfix-smtp-debian7/" rel="noopener ugc nofollow" target="_blank">在postfix </a>上手动配置中继。这种方法的最大优点是，您将使用中继提供商的服务器，这些服务器可能在大多数垃圾邮件过滤器上都有良好的声誉。这种方法的另一个优点是，即使出站端口25被阻塞，您也可以使用中继的出站端口587。最大的缺点是，要发送大量的邮件，你需要一个付费账户。他们通常从每月10美元开始。</p><p id="7770" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用免费计划，我们通常可以成功发送大约200-500封电子邮件，而不会被标记为过度使用。因此，根据客户的规模，我们只是使用自己的服务器，或者我们将我们的目标分成不同的组，并为每个组使用不同的免费帐户(当然，每个组的电子邮件地址限制在100个左右)。您可以在这里看到我们使用这种方法开展的一项活动的结果截图。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nz"><img src="../Images/562ecf682a6e3dd07b4a9754b414f9b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qx8y0s_bgzDO6IXV9t9H7Q.jpeg"/></div></div></figure><p id="bc73" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">关于Sendgrid的免责声明:在过去的几个月里，<a class="ae kl" href="https://krebsonsecurity.com/2020/08/sendgrid-under-siege-from-hacked-accounts/" rel="noopener ugc nofollow" target="_blank"> Sendgrid的客户端已经成为发送钓鱼邮件的目标</a>。不仅如此，使用这种中继甚至可以允许您欺骗某些域，因为有时系统管理员会向他们的SPF记录中添加巨大的中继网络块，这将允许您欺骗来自他们域的电子邮件，只要您使用他们列入白名单的同一中继。自从我们上次尝试使用它以来，Sendgrid可能已经注意到了这两个事实，他们在让你使用他们的中继之前，已经建立了一个全新的流程来验证你正在为一家公司工作，所以请记住，YMMV。</p><h1 id="58aa" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">提高效率的10个技巧。</h1><p id="a238" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">作为这篇文章的结尾，我想给出我学到的10个技巧(大多数时候是通过犯错)，它们将帮助你提高你的活动效率。我不能深入其中的大部分，因为这样写起来会很乏味，但是我认为一个简短的总结会很有帮助。</p><p id="6220" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">1)尽可能避免文本内容。有许多反垃圾邮件和反网络钓鱼检测机器人寻找特定的关键字。但是对图像做同样的事情并不容易。总是试图优先考虑不容易搜索的图形内容。</p><p id="783a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2)如果您需要使用文本，请研究自动扫描混淆技术。一项最近卷土重来但实际上已经超过10年的技术是使用用户隐藏字符如T2软连字符来改变自动扫描仪的文本，而不是最终用户的文本。您可以在普通搜索字符串中的随机字母之间插入这样的字符，并且您可能能够绕过一些regex之类的过滤器。</p><p id="ba43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3)当矛击时，试着对受害者做适当的研究。当然，了解受害者的兴趣对于精心制作一封具有吸引力内容的定制电子邮件是有用的，但了解受害者的操作系统/电子邮件客户端等技术数据也非常有用。例如，如果你正在使用<a class="ae kl" href="https://www.theverge.com/2019/7/3/20681508/tracking-pixel-email-spying-superhuman-web-beacon-open-tracking-read-receipts-location" rel="noopener ugc nofollow" target="_blank">跟踪像素</a>(嵌入在HTML代码中以注册你的原始IP的像素)，你将得到依赖于<br/> a .电子邮件提供商:谷歌自动代理请求，所以你将只获得谷歌的服务器IP。b .电子邮件客户端和/或平台:例如，Iphone的苹果邮件与Unix的雷鸟邮件并不相同。<br/> c .用户先前设置的偏好。</p><p id="c22e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4)你可以用额外的社会工程攻击来提高你的成功率。在一次评估中，我们发送电子邮件要求重设密码，并通过OSINT收集了大多数员工的内部号码，称为最关键的号码。我们说我们是IT部门的，我们受到了攻击，所以他们应该尽快按照邮件所说的去做。在这次活动中，我们的成功率约为50%，几乎是其他类似评估的两倍。</p><p id="29f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">5)邮件的内容很关键。即使你不能通过通常的方法收集有用的信息，仍然有相当有效的通用“钩子”。每个人，不管他们在哪个公司工作，都会被诱惑打开一个附件，里面有诸如薪水之类的信息。或者是即将到来的枪击。或者其他任何可能影响他们的隐私。</p><p id="8aeb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">6)时间很关键。你应该按照一个时间表发送邮件，让大多数受害者能够立即阅读。你只能发送电子邮件，直到一定数量的人点击“报告危险”，直到你被动态过滤器标记。您还应该考虑到人们会在他们之间交谈，所以过一会儿，关于该公司受到网络钓鱼攻击的消息就会传开。尝试在短时间内发送尽可能多的电子邮件。</p><p id="bef6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">7) <strong class="jp ir">始终避免向安全相关人员发送网络钓鱼邮件，他们会及时做出响应</strong>。你所需要的是一个有能力的系统管理员将该邮件归类为恶意邮件，并阻止到你的C &amp; C / phishing站点的出站流量。最好坚持与安全无关的目标。</p><blockquote class="oa ob oc"><p id="f50f" class="jn jo od jp b jq jr js jt ju jv jw jx oe jz ka kb of kd ke kf og kh ki kj kk ij bi translated">故事时间:我工作的一家公司在一个非常相关的阿根廷安全会议(<a class="ae kl" href="https://ekoparty.org/en_US/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> Ekoparty </strong> </a>)当天实际上遭到了攻击。黑客们知道安全团队的大部分人都会参加会议，所以他们聪明地选择了那一天。幸运的是，其中一名安全工程师兼职工作，能够应对午餐时间发生的攻击。</p></blockquote><p id="e777" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">8) <strong class="jp ir">学会处理不确定性</strong>。在处理网络钓鱼活动时，有很多事情可能会出错，这是您无法控制的。您依赖于报告电子邮件的人数、电子邮件过滤器可能实施的自定义指标(例如您的SMTP服务器是多久前创建的)、自定义垃圾邮件列表…见鬼，您甚至可能会被阻止，因为您的提供商曾经在其范围内有一个标记的IP。<strong class="jp ir">这实际上发生在从数字海洋实例向Hotmail发送电子邮件时。</strong></p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi oh"><img src="../Images/32b8aea096a7c2d4556088910e489330.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4y8NcD_eRlgJ87bYyrr9Mg.png"/></div></div><figcaption class="mb mc gj gh gi md me bd b be z dk translated">向hotmail发送电子邮件时出现实际错误。</figcaption></figure><p id="948b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">9)始终、始终、始终在您的钓鱼网站上使用TLS。有了像<a class="ae kl" href="https://letsencrypt.org/" rel="noopener ugc nofollow" target="_blank">这样的项目，让我们加密</a>吧，它会给你免费的TLS证书，你没有理由不加密。对于用户来说，相信你在他们的URL栏上有一个绿色的锁是多么重要，我怎么强调都不为过。这不仅有助于提高用户的“信任度”，还可以帮助你提高垃圾邮件过滤器的评分。请记住，每当你发送一封带有链接的电子邮件，该链接将被扫描并对照多个黑名单进行检查，拥有一个证书可能会增加你通过的机会。<a class="ae kl" href="https://letsencrypt.org/getting-started/" rel="noopener ugc nofollow" target="_blank">这个过程非常简单</a>这是将您与许多基本网络钓鱼攻击区分开来的因素之一。</p><p id="7bea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">10)尽可能自动化。你的域名/ SMTP将在一两天内被标记，之后它们将变得一文不值。这就是为什么您应该始终选择云提供商提供的最便宜的实例以及最便宜的域的原因之一。<strong class="jp ir">您的所有设置只适用于一个活动，并且只适用于一个活动</strong>。因此，自动化您的设置，并在完成后销毁一切。</p><h1 id="ceeb" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">结论</h1><p id="bff4" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">有几件事，我打算涵盖，但将在未来的书面记录，以保持这一个简短。首先，你需要进行所有的奥辛特过程来收集关于你的目标的有用信息。其次，建立一个钓鱼网站需要考虑的事情。</p><p id="7e71" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不管怎样，我想我已经涵盖了我想传达的大部分内容。如果您认为我遗漏了什么，请告诉我，社会工程攻击(钓鱼攻击是其中的一部分)总是在变化，并且总是有改进的空间。</p></div></div>    
</body>
</html>