<html>
<head>
<title>Easy SSRF using Match and Replace, and a bonus on how to have your burp collaborator/server go crazy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用匹配和替换的简单SSRF，以及如何让你的打嗝合作者/服务器发疯的奖励</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/easy-ssrf-using-match-and-replace-and-a-bonus-on-how-to-have-your-burp-collaborator-server-go-b5210037a101?source=collection_archive---------1-----------------------#2021-10-04">https://infosecwriteups.com/easy-ssrf-using-match-and-replace-and-a-bonus-on-how-to-have-your-burp-collaborator-server-go-b5210037a101?source=collection_archive---------1-----------------------#2021-10-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="628b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">匹配和替换部分在burp的付费和免费版本中都存在，结合下面的链接，这对每个人都有用。</p><p id="00e3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以下是burp collaborator的免费替代品之一:</p><div class="ko kp gp gr kq kr"><a rel="noopener  ugc nofollow" target="_blank" href="/a-simple-dns-oob-exfil-solution-or-pingb-in-life-hack-45e6aa44fc49"><div class="ks ab fo"><div class="kt ab ku cl cj kv"><h2 class="bd iu gy z fp kw fr fs kx fu fw is bi translated">一个简单的DNS OOB出口解决方案，或pingb.in (life)hack</h2><div class="ky l"><h3 class="bd b gy z fp kw fr fs kx fu fw dk translated">有些时候你想从生活中得到更多的东西，我帮不了你，但是有些时候…</h3></div><div class="kz l"><p class="bd b dl z fp kw fr fs kx fu fw dk translated">infosecwriteups.com</p></div></div><div class="la l"><div class="lb l lc ld le la lf lg kr"/></div></div></a></div><p id="997e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，有两种方法可以实现它，其中一种非常愚蠢，但它可能仍然有效:)</p><p id="91c8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">聪明的方法——第一部分</strong> <br/>所以，我在目标网站上注册，它有一个模板区。你可以上传你自己的标志或者使用目标网站提供的标志。现在，我通常不太关心这些，主要是因为它只是图像，并且通常是硬编码在img src中的，所以即使得到一个有趣的文本文件，也不会产生可读的结果。但是，我想挑战自己，看看我是否可以获得类似gopher ssrf的东西，即使只控制img src而不做其他事情(根据h1报告[])。但是，我首先必须确定是否有通过img src的“常规”pingback来自内部ip或与目标相关的任何ip，而不是来自我自己的ip。<br/>为了确定匹配和替换网站到底使用什么，我选择了一个网站提供的徽标，并点击保存以提交更改。我做了所有这些，同时让burp捕获目标域的所有流量(它是widescope，所以我不必担心意外排除相关/重要的子域)。下一步是在请求正文中找到对相关徽标的引用。</p><figure class="li lj lk ll gt lm gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi lh"><img src="../Images/3797e3c4c3d9d334574edd5e44f028a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e3cleImCePTUO1JHJbXg9w.png"/></div></div></figure><p id="cd18" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">从截图中你可以看到这是一个可编辑的html代码。这立即表明，没有必要弄清楚如何从受损的img src中获取任何东西，特别是当结果表明iframe没有被过滤/阻止时(不过它的来源被过滤/阻止了，我稍后将回到这一点)。<br/>重要的是——我收到了一个并非来自我自己的ip地址的回应。这意味着是时候弄清楚如何真正得到有用的东西了。</p><p id="b0d0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">聪明的方法——第2部分</strong> <br/>我使用iframe src获得输出，它工作了……某种程度上，我获得了http pingback，但这并不100%表明它将获得完整的ssrf。<br/>然后我试了各种内部ip地址，子域，我能想到的任何东西……除了一件事。因为pingback ip不属于通常的aws解析的ip，所以我没有尝试，直到花了太多的时间试图找出哪个内部ip地址可以给我一些信息(即各种范围192.168.0.1，192.168.1.1，10.0.0.1，172.x.x.x，127.x.x)。结果发现这些也被屏蔽了。<br/>不过，127.0.0.1使用0的旁路确实有效，但只是显示:<br/>欢迎使用nginx。这并不是什么需要报告的bug(我从过去报告过几次的个人经验中知道这一点(:)。<br/>所以，我准备认输，但我想还是用aws吧(尽管我完全预料到它会失败):169.254.169.254，但那也是被屏蔽的。但是，如果他们不使用aws，为什么要屏蔽aws ip呢？<br/>这引起了我的好奇，我过去使用的旁路也适用于这种情况:</p><figure class="li lj lk ll gt lm gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi ls"><img src="../Images/6d9df1e13d968840de38aefd31d5dfbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H3LhQdXPSO6ypJZEpNYtSA.png"/></div></div></figure><p id="5434" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我得到了:</p><figure class="li lj lk ll gt lm gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi lt"><img src="../Images/174f2620e191494641211bb615569f4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YzsJNbfte6HiHAR05hdA0Q.png"/></div></div></figure><p id="2cd5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">哑道</strong> <br/>嗯……这个多半是为了娱乐的目的:)而且以前也提过。只要匹配和替换任何和每个网站参考。如果你真的想找些无聊的事情，也可以在回复体上做，谁知道呢，这可能会有用，如果有用的话，请在评论中告诉我。但是，请准备好让您的burp合作者或您的服务器收到一堆pingbacks。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><p id="bff5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它只是向您展示，了解aws的ip地址应该是什么样子并根据它采取行动可能会导致完全错过适当的ssrf。有时候，无知也可能是一种福气:)</p></div></div>    
</body>
</html>