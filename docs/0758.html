<html>
<head>
<title>Hack the Box Walkthrough — Forwardslash</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">破解盒子演练—正斜杠</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/hack-the-box-walkthrough-forwardslash-9036c5422e67?source=collection_archive---------0-----------------------#2020-08-13">https://infosecwriteups.com/hack-the-box-walkthrough-forwardslash-9036c5422e67?source=collection_archive---------0-----------------------#2020-08-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/f46c82993e1de649f208919b71b51718.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/format:webp/1*MSfK9rpNErSwfXCvTCMAtg.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">https://www.hackthebox.eu/home/machines/profile/239<a class="ae jy" href="https://www.hackthebox.eu/home/machines/profile/239" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure><blockquote class="jz ka kb"><p id="dc2b" class="kc kd ke kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正斜线是由<a class="ae jy" href="https://www.hackthebox.eu/home/users/profile/52045" rel="noopener ugc nofollow" target="_blank">InfoSecJack</a>&amp;<a class="ae jy" href="https://www.hackthebox.eu/home/users/profile/44614" rel="noopener ugc nofollow" target="_blank">chiva to</a>创造的硬难度机器。我的过程包括本地文件包含(LFI)、自定义二进制漏洞和加密。</p><p id="39d0" class="kc kd ke kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一个未加工的预演，所以我在一个又一个拉比面前跌倒的过程在这里有很好的记录。它也反映了我在使用机器时的思考过程，我希望这能帮助其他像我一样的有抱负的渗透测试人员更好地思考。</p></blockquote><h2 id="7dbb" class="lb lc iq bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">总结:</h2><p id="1317" class="pw-post-body-paragraph kc kd iq kf b kg lx ki kj kk ly km kn lk lz kq kr lo ma ku kv ls mb ky kz la ij bi translated">这台机器从一个非交互式的被黑网页开始。我们需要列举我们的方法来找到一个备份网页，我们后来发现它实际上容易受到LFI攻击，当成功利用时，会泄漏服务器中包含的一个<code class="fe mc md me mf b">php</code>文件中的硬编码凭据。在获得初始shell后，我们需要开发一个定制的备份程序，以便能够横向遍历到其他用户。这个用户拥有特定的sudo权限，我们可以利用这些权限成为root用户，但是要等到我们能够从使用自定义加密算法的密码中提取密钥之后。</p><p id="81e5" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">在本演练中，我将在最后留下上标作为讨论点。</p><p id="c341" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">在我开始之前，我会将机器的IP地址添加到我的<code class="fe mc md me mf b">/etc/hosts</code>文件中，以便于访问。</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="ac23" class="lb lc iq mf b gy mo mp l mq mr">$ sudo vi /etc/hosts<br/>~ 10.10.10.183    forwardslash.htb</span></pre><h2 id="6027" class="lb lc iq bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">初步侦察</h2><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="9646" class="lb lc iq mf b gy mo mp l mq mr">$ nmap -p- --min-rate 1000 -T4 forwardslash.htb<br/>$ nmap -sC -sV -T4 -p 22,80 forwardslash.htb -oN nmap.txt</span></pre><p id="9f93" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">我使用第一个nmap命令来确保我能够覆盖我正在测试的机器的所有端口。一旦第一个命令返回它的初始结果，我就在第二个nmap命令中插入可用端口，以便更详细地查看。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ms"><img src="../Images/09859dbc9f6e4210e5cd1932c53e6a9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*86HgQYp7S1u5REU7uidoMg.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">详细的nmap结果</figcaption></figure><p id="09a4" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">这很简单，因为通常的端口22和80在这台机器上是开放的。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi mx"><img src="../Images/5200c1663bc054e7e89e651ab38e898a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cKlX06j41Ed1u106eEQFVg.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">看来他们被黑了哈哈</figcaption></figure><p id="9440" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">这是我查看主页时看到的。这是一个完全没有互动性的网站。我第一次检查这个的时候，我实际上退出并解决了另一台机器，因为我当时被深深地吓倒了。lol。</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><p id="1a8b" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">当我回到解决这个问题的时候，因为我没有别的办法，我开始在网站上搜索我能处理的面包屑。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nf"><img src="../Images/efc5966adbadc61dc49bd62fe7375dd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h01eKxHPWRyPM0gNNMQuJg.png"/></div></div></figure><p id="2ec1" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">当它看起来很有趣时，我就给它加了屏幕保护，并且在检查资源时，它给出了以下线索:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ng"><img src="../Images/1ee4f4a61622a9e9a6ded93962848a08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Mp55XY-p1RxZYiXp7Al_g.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">也就是说“兄弟，Issa恶作剧，你需要列举更多”</figcaption></figure><h2 id="8163" class="lb lc iq bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">VHOST和备份网站</h2><p id="fae0" class="pw-post-body-paragraph kc kd iq kf b kg lx ki kj kk ly km kn lk lz kq kr lo ma ku kv ls mb ky kz la ij bi translated">在检查了更多的东西后，我什么也没发现。然后我想起来，我还没有尝试过域枚举。回到上面的线索，我试图通过添加条目<code class="fe mc md me mf b">backup.forwardslash.htb</code>来编辑我的<code class="fe mc md me mf b">/etc/hosts</code>文件</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="248d" class="lb lc iq mf b gy mo mp l mq mr">$ sudo vi /etc/hosts<br/>~ 10.10.10.183    forwardslash.htb  backup.forwardslash.htb</span></pre><p id="3ca2" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">一进入域名，这个页面就出现在我面前:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nh"><img src="../Images/c0d95419823cf7daad7b86ff3f1b0978.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WhkEO_FvVDd-heFOlQAZtQ.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">好的</figcaption></figure><p id="95ab" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">我尝试了一些常见的SQLI有效载荷，但我没有得到任何地方。然后我试了试常用的用户名和密码，一些有趣的事情出现了。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/d2e85ea7805b0f2719064a5cdc203122.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*wmUJdekBY0zcqi_olREfeQ.png"/></div></figure><p id="9c19" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">尝试用户名pain时，错误消息与其他用户名不同，如下所示:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/e3e3605d99cce5a795a365d30f4c9e5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:742/format:webp/1*1TABEDWWds_yxWEtKBUmDA.png"/></div></figure><p id="c772" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">所以看到这个，我立刻想到也许我可以模糊疼痛的密码，所以我尝试了以下方法:</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="a3b4" class="lb lc iq mf b gy mo mp l mq mr">$ wfuzz -z file,/usr/share/wordlists/rockyou.txt -d "username=pain&amp;password=FUZZ" --hc 302 http://backup.forwardslash.htb/login.php</span></pre><p id="11a9" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">我什么都没有。我也尝试过使用自定义单词表，但是意识到这已经占用了我太多的时间，我停下来，让我的大脑休息一下，然后尝试另一种方法。</p><p id="cdc0" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">然后我注册了一个帐户，这样我就可以探索web应用程序的内部工作方式。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nk"><img src="../Images/3903004cd6e7c8addbc7c6ea4d7eb51a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dvyOtVf1EISwSqmbEH6q3Q.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">这个仪表板有很多功能</figcaption></figure><p id="339c" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated"><strong class="kf ir">广告:</strong>我个人喜欢这条短信，内容如下。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nl"><img src="../Images/98b49df7c234720f5b3a577db3cc7065.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZSRYJIpOgFnA7DxVYu5WVA.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">吸烟有害健康哈哈哈jk。如果你觉得有必要，请负责任地去做</figcaption></figure><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nm"><img src="../Images/d337eec5d79f0494e8f2cfbe04ecf590.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MIe7ygFjVxhu_0NU74mA9Q.png"/></div></div></figure><p id="4e66" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">这个功能非常有趣，因为它允许客户端在文本字段中提交任何内容，但是它目前是禁用的，您不能在文本框中键入任何内容。或者是？</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/b3ad9d9ad742bdef834b928c014d490b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*b-TaUdftedJL1obeRLxNQQ.png"/></div></figure><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi no"><img src="../Images/7aeba30c2378a4e975a8b5e35ca8c02a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q22iDe3ktf1WaBV4xpg4uA.png"/></div></div></figure><p id="6a0b" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">检查网页的元素，我们可以看到上面的细节，很明显，我们可以通过简单地删除<code class="fe mc md me mf b">disabled</code>控件来覆盖它，让我们更好地与页面交互。</p><p id="c3b1" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">我不确定这种特殊的控制是否是为了阻止未来的黑客攻击，但是禁用html代码中的东西并不是最好的方法。</p><h2 id="ad30" class="lb lc iq bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">LFI枚举和用户Chiv</h2><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi np"><img src="../Images/a2e4a0274740ca821f1529628f0811e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*JjQKCZW4R7mpcwc-Lomdjg.png"/></div></figure><p id="6b07" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">玩了一会儿后，我脑海中的第一个想法是，它可能容易受到LFI /射频干扰的影响。</p><p id="0aab" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">检查网站如何接受输入的一种方法是通过burpsuite拦截流量。就我个人而言，我对使用burpsuite不是很精通，因为我在需要时才知道它的不同用途，所以我不能发布一个可靠的burpsuite教程，但是，对于我们当前的目的，我使用下面的链接作为我的主要资源</p><div class="nq nr gp gr ns nt"><a href="https://www.hackingarticles.in/beginner-guide-file-inclusion-attack-lfirfi/" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">本地文件包含综合指南(LFI)</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">在这个深层的在线世界中，动态web应用程序很容易被攻击者攻破，原因是…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">www.hackingarticles.in</p></div></div><div class="oc l"><div class="od l oe of og oc oh js nt"/></div></div></a></div><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/782e8757d4456d439e52df9895313951.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*lp0SnPN7Yk_6wcKEYSbvOQ.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">试验有效载荷</figcaption></figure><p id="95db" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">截取这个输入会产生下面的输出</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi oj"><img src="../Images/79dd6eb0743f4affd78ab97b2cf6da29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UcGT2DuGdMCidc8bOM39_w.png"/></div></div></figure><p id="6baf" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">我们拿到了密码文件的内容！然而，到目前为止，这个结果仅仅证明了web应用程序对于LFI是可接受的。我们需要的是可以用来以外壳的形式在机器中建立立足点的向量，例如有效的凭证等。</p><p id="e751" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">Payloadsallthethings有一个很好的存储库，既可以存储有趣的文件路径，也可以存储RFI/LFI负载</p><div class="nq nr gp gr ns nt"><a href="https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Directory%20Traversal" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">swisskyrepo/payloads all things</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">目录或路径遍历在于利用用户提供的不充分的安全验证/净化…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">github.com</p></div></div><div class="oc l"><div class="ok l oe of og oc oh js nt"/></div></div></a></div><div class="nq nr gp gr ns nt"><a href="https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/File%20Inclusion#lfi--rfi-using-wrappers" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">swisskyrepo/payloads all things</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">文件包含漏洞允许攻击者包含文件，通常利用“动态文件包含”…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">github.com</p></div></div><div class="oc l"><div class="ol l oe of og oc oh js nt"/></div></div></a></div><p id="70f3" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">上面粘贴的两个链接重定向到同一个git repo中的不同页面</p><p id="1b5e" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">在耗尽大量时间检查所有已知页面后，我找不到任何值得注意的内容。</p><p id="f437" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">完全没有帮助我进入下一步，所以我决定再次对域运行dirbuster:backup . forward slash . htb。我得到了结果，并注意到除了已知的文件夹之外，还有另一个返回代码为403(禁止)的文件夹，名为dev/尝试打嗝时:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi om"><img src="../Images/8f94a1d238cca149de917b39d7b1c628.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hP-OYmNf9gSqIJKhIo5hZg.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">有信用！！</figcaption></figure><p id="2bee" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">我们获得的第一个用户的凭据如下:</p><ul class=""><li id="75be" class="on oo iq kf b kg kh kk kl lk op lo oq ls or la os ot ou ov bi translated"><strong class="kf ir">用户名:</strong> chiv</li><li id="ab91" class="on oo iq kf b kg ow kk ox lk oy lo oz ls pa la os ot ou ov bi translated"><strong class="kf ir">密码:</strong>n0 body 1 kesback/</li></ul><h2 id="178d" class="lb lc iq bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">外壳枚举、定制二进制和用户痛苦</h2><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="ce01" class="lb lc iq mf b gy mo mp l mq mr">$ ssh chiv@backup.forwardslash.htb</span></pre><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pb"><img src="../Images/e89a90d9ebd6e82ebe131182d466b2c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZeIDJQY5g74tPaTiOOy08Q.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">我们找到了一个能用的弹壳！它也很棒。</figcaption></figure><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/1f0c2fd2fdecdd547f3cf5b64a21de13.png" data-original-src="https://miro.medium.com/v2/resize:fit:404/format:webp/1*lHpNDwJRAcxM5PqE4tTFtw.png"/></div></figure><p id="c35a" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">但是很奇怪，因为在chiv的主目录中没有文件。检查主目录中的另一个用户，我们会看到下面的结果。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/802579313c701c37290b130be65ffe47.png" data-original-src="https://miro.medium.com/v2/resize:fit:686/format:webp/1*GD7CVQdpB9ss2MEqQ5DjoQ.png"/></div></figure><p id="9f76" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">我们需要先横向移动到pain，然后才能读取用户标志。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pe"><img src="../Images/cd847df961becf4fbfe613025f0d3220.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xReM4Bdr4-O2imo9mB7cPQ.png"/></div></div></figure><p id="32d4" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">还有一个文件夹<code class="fe mc md me mf b">encryptorinator</code>包含以下内容。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pf"><img src="../Images/d6805da8cd0785577587a6b3f6aea6f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QMQ0lEyG669Ilzp5IzKMzw.png"/></div></div></figure><p id="ca42" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">关于上述发现的一些注意事项:</p><ul class=""><li id="81a9" class="on oo iq kf b kg kh kk kl lk op lo oq ls or la os ot ou ov bi translated">我们以用户<code class="fe mc md me mf b">pain</code>的形式确定了1个横向移动目标</li><li id="c25a" class="on oo iq kf b kg ow kk ox lk oy lo oz ls pa la os ot ou ov bi translated">用户<code class="fe mc md me mf b">chiv</code>留下了关于自定义密码算法和一些重要密码的线索</li></ul><p id="a440" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">上述发现为我们提供了一个明确的目标，即横向遍历到用户<code class="fe mc md me mf b">pain</code>，然后解密留在他的文件夹中的密码，然而，到目前为止，还没有明确的方法来做到这一点，所以我们继续进行枚举。</p><p id="3728" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">出于本能，我检查了pain拥有的文件，看看是否有我可以使用的向量。下面附上我在解决这台机器时觉得有趣的发现的截屏。</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="73d2" class="lb lc iq mf b gy mo mp l mq mr">$ find / -user 'pain' 2&gt;/dev/null | grep -v proc</span></pre><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pg"><img src="../Images/94ddf453c8d88dfe2127094fb83ef748.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Di_1EXlt_P4_H-2riRvOXg.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">痛苦拥有一个有趣的二进制</figcaption></figure><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/987eab38699648e9e1b1e41a7a7ceea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*1AJ6sMDTb51T6AUzTgjECQ.png"/></div></figure><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pi"><img src="../Images/ddacf0842e82e107c71589d3445af1e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iGKjzkbcOLdCG2Yq9DxJXg.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">奇怪的错误信息</figcaption></figure><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pj"><img src="../Images/3aeb0abe2eaa17bfd52fd9bd9d26676a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y3Ufb0YbStXb-k9uNcuC0g.png"/></div></div></figure><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pk"><img src="../Images/05bf401b04a7436255ce9d8dc7781389.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UbtJMCGhX9Srlsr9fq1-QQ.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">用赛博咖啡来取样时间和格式，然后这个出来了</figcaption></figure><p id="4dbb" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">在检查用户pain拥有的二进制文件时，我们了解到以下内容:</p><ul class=""><li id="e2be" class="on oo iq kf b kg kh kk kl lk op lo oq ls or la os ot ou ov bi translated">它被称为<em class="ke"> Pain的下一代基于时间的备份浏览器</em></li><li id="0aa2" class="on oo iq kf b kg ow kk ox lk oy lo oz ls pa la os ot ou ov bi translated">运行它会返回一个混乱的字符串，我们后来发现这是当前时间的MD5散列</li></ul><p id="f28b" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">因此,<code class="fe mc md me mf b">/usr/bin/backup</code>二进制文件实际上获得了当前的系统时间，获得了它的md5散列，然后尝试用那个文件名打开一个文件。正如您从<code class="fe mc md me mf b">access function</code>中看到的，在<code class="fe mc md me mf b">ltrace</code>截图中，文件名没有使用绝对路径，因此我们可以通过创建一个文件来利用它，该文件使用设定时间的md5散列作为其文件名，然后在该特定时间运行它。</p><p id="8fce" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">我们想打开什么呢？</p><p id="5159" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">从二进制文件的标题来看，它被称为<em class="ke">下一代基于时间的备份查看器</em>，所以一个线索是作者创建它来查看备份。</p><p id="0b6e" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">让我们找到所有文件扩展名为<code class="fe mc md me mf b">.bak</code>的文件。</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="07b5" class="lb lc iq mf b gy mo mp l mq mr">$ find / -name '*.bak' 2&gt;/dev/null</span></pre><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi pl"><img src="../Images/be673dd795b4367f5246769ba22993fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/format:webp/1*rVqrlzb1fwJrLmBd4C-01Q.png"/></div></figure><p id="b24e" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">所有以<code class="fe mc md me mf b">.bak</code>作为文件扩展名的文件都保存在<code class="fe mc md me mf b">/var/backups</code>中，所以也许我们可以检查哪个是有用的/有趣的。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/9ca7b13cb25bbaac90a2b38b7c422636.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*9e0GDi4cC0qaiUn19LfF5Q.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">/var/backups</figcaption></figure><p id="e9d1" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">一个文件归pain所有，因此本能地，我们首先选择那个文件。但是我们如何将它重命名为当时的md5哈希呢？</p><p id="6730" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">由于我们不能执行任何操作来编辑甚至读取这个文件，我们可以创建另一个文件，它通过使用符号链接与这个文件相连。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/3769bf855ef033e813dd06a47554b661.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*z0RLX7-8MiqMNTLVkoEZDQ.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">创建了一个名为“md5”的符号链接</figcaption></figure><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi po"><img src="../Images/48bbb71a62a80a6228916f249d6fdb83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*KJkxNIt1sFIQRLuQS-oFCw.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">将符号链接重命名为特定时间的md5哈希</figcaption></figure><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/a4d77388dd990b96d3583a456e79526c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*28DoXyGFAmzv5Z9xcQHJJA.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">在特定时间运行二进制文件</figcaption></figure><p id="3243" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">我不记得为什么我分三步做了上面的事情，但我的直觉是，由于在那之前我做了复杂的计数，我在那段时间里只有最少的脑力。呵呵。下面给出了一个更好的解决方案:</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="ceae" class="lb lc iq mf b gy mo mp l mq mr">$ ln -s /var/backups/config.php.bak $(date | awk -F ' ' '{print $4}' | md5sum | awk -F ' ' '{print $1}') &amp;&amp; backup</span></pre><p id="fb8e" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">运行这个会立即打印出<code class="fe mc md me mf b">/var/backups/config.php.bak</code>的内容，你知道我也可以做bash脚本。哈哈哈哈。jk。</p><p id="6e56" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">我们获得的第一个用户的凭据如下:</p><ul class=""><li id="cdbd" class="on oo iq kf b kg kh kk kl lk op lo oq ls or la os ot ou ov bi translated"><strong class="kf ir">用户名:</strong>痛苦</li><li id="e69a" class="on oo iq kf b kg ow kk ox lk oy lo oz ls pa la os ot ou ov bi translated"><strong class="kf ir">密码:</strong>db 1 f 73 a 72678 e 857d 91 e 71d 2963 a fa9 ef babb 32164 cc1 d 94 DBC 704</li></ul><h2 id="1a64" class="lb lc iq bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">加密机</h2><p id="17fb" class="pw-post-body-paragraph kc kd iq kf b kg lx ki kj kk ly km kn lk lz kq kr lo ma ku kv ls mb ky kz la ij bi translated">由于备份文件的输出包含DB凭证，我本能地尝试使用下面的命令转储数据库。</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="5ec7" class="lb lc iq mf b gy mo mp l mq mr">$ mysqldump --opt -u pain --password site &gt; site.sql</span></pre><p id="7e5e" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">我得到了一个错误。然后，我尝试使用这些最近转储的凭据切换到用户痛处，并且成功了。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pq"><img src="../Images/9a45f6a6ccd67cc60e54bc26233169d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PvW0GiJq9Cgh2MXDwlI7ig.png"/></div></div></figure><p id="f05e" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">在横向移动到用户pain时，我立即检查了pain被授权以root用户身份运行的命令，而系统不要求任何密码。我通常这样做是为了检查我是否可以劫持这些二进制文件，或者为它们找到一个漏洞，这样我就可以获得root访问权限。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pr"><img src="../Images/d5dc6af9f80433fb023be4a9287d671c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ApZwsGlkaD64W9vdPdNDHQ.png"/></div></div></figure><p id="6f66" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">然而，在检查了上面的内容之后，我并不清楚如何使用这些命令来获得root权限，所以我暂时忽略了它，并返回到pain的主目录来更仔细地查看我们之前看到的<code class="fe mc md me mf b">encryptorinator</code>文件夹。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pf"><img src="../Images/d6805da8cd0785577587a6b3f6aea6f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QMQ0lEyG669Ilzp5IzKMzw.png"/></div></div></figure><p id="3465" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">为了更好地理解这种情况，我认为我们需要对pain主目录中的密文进行解密。</p><p id="469c" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">因为我对逆转给定的加密算法没有信心，所以我写了一个简单的纯暴力脚本。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi ps"><img src="../Images/d5f20c332e419badd5f9fc16cf20fc1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/1*KMHfeSX-ZaObOANONY-htg.png"/></div></figure><p id="cd60" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">有趣的是，我正在调试我的脚本，突然，在运行它时，它工作了。我没想到用一个<code class="fe mc md me mf b">key</code>的重复字符就能破解密码，但它做到了。⁴</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pt"><img src="../Images/58823f104b38de6d6e28aa5a9013b5a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QpGfJUjameWJ4JZvFsnl0w.png"/></div></div></figure><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="6244" class="lb lc iq mf b gy mo mp l mq mr">plaintext: �$7C��q8��4�l'you liked my new encryption tool, pretty secure huh, anyway here is the key to the encrypted image from /var/backups/recovery: cB!6%sdH8Lj^@Y*$C2cf�</span></pre><h2 id="e6ed" class="lb lc iq bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">Cryptsetup和luksOpen、私钥检索和SSH到Root</h2><p id="8185" class="pw-post-body-paragraph kc kd iq kf b kg lx ki kj kk ly km kn lk lz kq kr lo ma ku kv ls mb ky kz la ij bi translated">显然，我们一直在寻找的是一个加密的LUKS卷的密码，我们将打开该卷并随后使用<code class="fe mc md me mf b">luksOpen.</code>进行映射。映射后，我们可以将它挂载到一个特定的文件夹，然后最终查看其内容。为了进一步了解LUKS和crypsetup，我使用了以下指南。</p><div class="nq nr gp gr ns nt"><a href="https://linuxconfig.org/basic-guide-to-encrypting-linux-partitions-with-luks" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">用LUKS加密Linux分区的基本指南</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">人们需要加密分区的原因有很多。无论是植根于隐私、安全…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">linuxconfig.org</p></div></div></div></a></div><div class="nq nr gp gr ns nt"><a href="https://www.cyberciti.biz/security/howto-linux-hard-disk-encryption-with-luks-cryptsetup-command/" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">用LUKS [cryptsetup命令] - nixCraft加密Linux硬盘</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">亲爱的尼克拉夫特，我几乎到哪里都带着我的Linux笔记本电脑。如何保护我存储在…上的私人数据</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">www.cyberciti.biz</p></div></div><div class="oc l"><div class="pu l oe of og oc oh js nt"/></div></div></a></div><p id="6f91" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">我前面描述的工作流的屏幕截图:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pv"><img src="../Images/a65ccace4a957bcc8c23cebb6788bebe.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/format:webp/1*Vj-a5Qrq0koVLjjmgc_S9A.png"/></div></div></figure><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pw"><img src="../Images/940da5a6c078460089a58f5ed1299ca8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_X7J2HJVNInK2l9rTKx17g.png"/></div></div></figure><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi px"><img src="../Images/015f65740bea11fc201ce30241c144c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*3UqRV8rM6OdfBQtIplalTw.png"/></div></figure><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi py"><img src="../Images/5ba7274f5c5c95d6a6430491e4ade81b.png" data-original-src="https://miro.medium.com/v2/resize:fit:574/format:webp/1*pG3uPGbu-PTYs6T6y9ou2Q.png"/></div></figure><p id="df5e" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">毕竟，我们本质上追求的不是利用正在运行的应用程序，或者劫持用户能够通过sudo运行的二进制文件/命令，而是检索根私钥的备份。然后可以使用这个私钥通过ssh登录，如下所示。</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="2d4f" class="lb lc iq mf b gy mo mp l mq mr">$ scp pain@forwardslash.htb:/tmp/.mok/mnt/id_rsa .</span></pre><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pz"><img src="../Images/eaebe216813030a1705549a3f8406fb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Rzb_IXrLZRrT8Y5QX8nwA.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">我首先把私钥偷偷放进了我的机器</figcaption></figure><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="2688" class="lb lc iq mf b gy mo mp l mq mr">$ chmod 600 id_rsa<br/>$ ssh -i id_rsa root@forwardslash.htb</span></pre><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi pr"><img src="../Images/6eff964682fc6e2edde09082fef88d7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wqAgcyi8TCzMTVAHm8LWnQ.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">有根！</figcaption></figure><p id="bf0c" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">我们终于扎根了！</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><h2 id="f242" class="lb lc iq bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">其他讨论要点和要点</h2><ol class=""><li id="733f" class="on oo iq kf b kg lx kk ly lk qa lo qb ls qc la qd ot ou ov bi translated">我为这台机器做VHOST枚举的方法充其量是本能的，这种方法的问题是它不会总是工作，这可能最终导致挫折。更好的方法是使用单词表来模糊vhosts。一个示例工作命令如下。</li></ol><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="4508" class="lb lc iq mf b gy mo mp l mq mr">$ gobuster vhost -u <a class="ae jy" href="http://forwardslash.htb" rel="noopener ugc nofollow" target="_blank">http://forwardslash.htb</a> -w /usr/share/dnsrecon/subdomains-top1mil-20000.txt</span></pre><p id="e690" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">2.我们之所以能够向前发展，很大程度上是因为一个本应被禁用的特定网络功能被禁用得很糟糕。如果您还没有准备好使用它，要么备份它以备后用，然后将其删除，要么遵循安全编码实践并正确过滤输入。</p><p id="c526" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">3.让LFI如此有效的原因是文件系统有如此多的众所周知的位置，尽管攻击者没有外壳可以使用，但这些位置可以提供关于机器的许多细节。因此，建议在尝试检查您甚至不确定是否存在的文件之前，使用已知的文件和文件路径。此外，如果使用特定的应用程序，如果您不完全确定您在做什么，只是为了检查非常特殊的文件的位置，将它安装在沙箱/一次性系统中是一种不错的技术。实际上，我最近在解决机器虎斑猫时使用了这种技术。</p><p id="40a2" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">4.我对我的暴力解密器脚本是如何工作的非常感兴趣，所以我联系了其他能够解决这个问题的人，并得到了不同的反馈。人们可以使用<code class="fe mc md me mf b">rockyou.txt</code>单词表破解密码，然而，奇怪的是它对单词表中的多个单词都有效。不要睡在你的暴力脚本上。lol。</p><p id="3875" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">这台机器通常很简单，坦白地说，对我来说最可怕的部分是立足点和暴力脚本。</p><p id="a35c" class="pw-post-body-paragraph kc kd iq kf b kg kh ki kj kk kl km kn lk kp kq kr lo kt ku kv ls kx ky kz la ij bi translated">我的演练到此结束。感谢您的阅读！</p></div></div>    
</body>
</html>