<html>
<head>
<title>Automating xss identification with Dalfox &amp; Paramspider</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Dalfox和Paramspider自动识别xss</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/automating-xss-identification-with-dalfox-paramspider-e14283bb7916?source=collection_archive---------0-----------------------#2020-10-27">https://infosecwriteups.com/automating-xss-identification-with-dalfox-paramspider-e14283bb7916?source=collection_archive---------0-----------------------#2020-10-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e6533cddd30ec4748a3b6b226f619874.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*QAM1IMgEdgAKIc63h9CjVg.png"/></div></div></figure><p id="707b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">跨站点脚本允许攻击者通过一些参数在web应用程序中注入恶意的javascript代码，并且可以进一步升级以执行攻击，例如cookie窃取、会话劫持等。</p><p id="f391" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">XSS的种类</strong>:</p><ul class=""><li id="fd60" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">反映了XSS</li><li id="202f" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">存储的XSS</li><li id="93ea" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">基于DOM的XSS</li></ul><p id="b34b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">这一切是如何开始的？</strong></p><p id="e3b2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我最近在BugCrowd上收到了一个私人程序的邀请，我立即浏览了详细信息，发现所有的子域都在范围内。</p><p id="b4eb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，我更进一步，开始使用各种工具枚举子域</p><p id="d1dd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">amass，sublist3r，subfinder，find domain-Linux，crt.sh，assetfinder，将每个工具的结果保存在txt文件中。</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="b11b" class="lt lu iq lp b gy lv lw l lx ly">amass enum -d target.com -o /filepath/subdomains.txt</span></pre><p id="6a48" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后在得到一个巨大的子域名集合后，用httprobe对它们进行唯一的排序和解析。</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="bd4c" class="lt lu iq lp b gy lv lw l lx ly"> sort -u subdomains.txt | httprobe &gt; /filepath/uniq.txt</span></pre><p id="2b30" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在对我来说，通过在浏览器中手动打开50多个子域变得非常困难。</p><p id="efaa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">决定用目击者截图每个子域回复。</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="3546" class="lt lu iq lp b gy lv lw l lx ly">eyewitness --web -f uniq.txt -d /path_to_save_screenshots</span></pre><p id="013f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这花了几分钟的时间，然后我写了一个简单的脚本，将这些png截图嵌入到html中，这样我就可以直接在浏览器中查看它们了。</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="577a" class="lt lu iq lp b gy lv lw l lx ly">for I in $(ls); do <br/>        echo "$I" &gt;&gt; index.html;<br/>        echo "&lt;img src=$I&gt;&lt;br&gt;" &gt;&gt; index.html;<br/>done</span></pre><p id="0789" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在所有这些之后，我找到了一个子域，我决定从这个子域开始进行测试。</p><p id="7ab0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我使用paramspider提取那个子域的参数</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="8d32" class="lt lu iq lp b gy lv lw l lx ly">paramspider -d target.com &gt; /filepath/param.txt</span></pre><p id="be2c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将参数保存在文件中后，用dalfox将其自动化</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="a590" class="lt lu iq lp b gy lv lw l lx ly">dalfox -b hahwul.xss.ht file param.txt</span></pre><p id="d684" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">经过几分钟的耐心，我执行了10个xs。</p><figure class="lk ll lm ln gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lz"><img src="../Images/ac61ae4405277967d0b55a0a5ca2e2be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*54xerqNFwaZgu2fhW7hxhA.png"/></div></div></figure><p id="3ef6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">【http://twitter.com/parasarora06】推特 : <a class="ae ma" href="http://twitter.com/parasarora06" rel="noopener ugc nofollow" target="_blank">推特</a></p><p id="ea54" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">领英</strong>:<a class="ae ma" href="http://linkedin.com/in/parasarora06" rel="noopener ugc nofollow" target="_blank">http://linkedin.com/in/parasarora06</a></p></div></div>    
</body>
</html>