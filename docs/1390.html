<html>
<head>
<title>Insecure Deserialization ?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不安全的反序列化？</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/insecure-deserialization-2a8dbdb94a81?source=collection_archive---------4-----------------------#2021-06-14">https://infosecwriteups.com/insecure-deserialization-2a8dbdb94a81?source=collection_archive---------4-----------------------#2021-06-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/53cf89b879b0f48daf01e6bf3310633e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*zVwdJyQL6FH4L5WTcYH3yQ.png"/></div></figure><p id="8d5c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">你好，欢迎来到这个博客，在这个博客中，我们将发现什么是不安全的反序列化？我们将采用PHP &amp; Python中的一些代码示例和一些利用场景，同时解决Portswigger中的两个实验，不会浪费任何时间；我们走吧！</p><h1 id="d82b" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">序列化与反序列化:</h1><ul class=""><li id="b629" class="lq lr iq jw b jx ls kb lt kf lu kj lv kn lw kr lx ly lz ma bi translated"><strong class="jw ir">序列化:</strong>它是将对象转换为某种形式的数据并将其保存在文件、数据库或内存中的过程，这些数据以字节流的形式发送和接收，序列化的目的可以是保存数据以备后用，或者使用它通过网络、应用程序的不同组件或API发送数据。</li></ul><p id="7868" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">注意:</strong>编程语言支持序列化，但是每种编程语言都有不同的方法来处理序列化的过程，然而要使这个过程通用并且与编程语言无关；应用程序使用JSON和XML等格式..序列化在其他编程语言中也有一些缩写，比如Ruby中的marshalling和Python中的pickle！</p><ul class=""><li id="45bf" class="lq lr iq jw b jx jy kb kc kf mb kj mc kn md kr lx ly lz ma bi translated"><strong class="jw ir">反序列化:</strong>这是序列化的逆过程，反序列化的目的是以保留的方式恢复对象，以便恢复对象及其属性等..就像序列化之前的第一次一样！</li></ul><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi me"><img src="../Images/9d0fdfa86e0ac763de98440fab9b33a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pRMxQpC0KkFPj2ko2aNzlQ.jpeg"/></div></div><figcaption class="mn mo gj gh gi mp mq bd b be z dk translated">序列化与反序列化</figcaption></figure><h1 id="a854" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">不安全的反序列化？</h1><p id="9dfb" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf mr kh ki kj ms kl km kn mt kp kq kr ij bi translated">什么是不安全的反序列化？好吧，让我们放松一下，你记得连载吗？我们说过，一些数据为了使用而被序列化，如果这些数据是用户可控制的数据，并且在反序列化中这些数据没有经过验证就通过了，那么这绝对是一种不安全的反序列化。</p><p id="dedf" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">攻击者也可以用其他类中的另一个对象替换序列化的对象，这就是为什么这个漏洞在PHP中被称为示例；对象注入，但是如果对象是从意外的类注入的；可能会出现例外。</p><p id="c32f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">不安全的反序列化用于实现任意代码执行[RCE]、权限提升(我们将在实验中看到)、访问控制旁路、拒绝服务等</p><h1 id="082d" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">减轻</h1><p id="0cd5" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf mr kh ki kj ms kl km kn mt kp kq kr ij bi translated">一些应用程序以列入黑名单的方式使用一些检查和验证，然而这些检查可以通过一些额外的努力来绕过，正确的方法是永远不要反序列化用户可控制的数据，如果这是不可能的，则需要数字签名来添加一些完整性检查；加密还可以用来防止用户读取数据，然后更改数据，或者只是理解他们被创建的模式！</p><h1 id="42d1" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">示例[Python和PHP]</h1><p id="9991" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf mr kh ki kj ms kl km kn mt kp kq kr ij bi translated">我们举几个PHP的例子，可以在PHP中利用不安全的反序列化(对象注入)吗？</p><h1 id="1368" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">示例1[权限提升]:</h1><p id="38e1" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf mr kh ki kj ms kl km kn mt kp kq kr ij bi translated">让我们考虑一个具有用户和管理员权限的应用程序，一个会话cookie包含具有<strong class="jw ir">角色</strong>属性的序列化对象，值为user，但是该应用程序已经有了一个处理用户和管理员权限的机制，我们能绕过它吗？我们能实现权限升级吗？</p><p id="204a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这是PHP代码:</p><pre class="mf mg mh mi gt mu mv mw mx aw my bi"><span id="0acf" class="mz kt iq mv b gy na nb l nc nd">&lt;?php<br/>    $user = unserialized($_COOKIE);<br/>    if ($serialized['role'] == 'administrator') {<br/>        <br/>        // Admin Privileges Code<br/>    }<br/>    <br/>    else {<br/>      // User Privileges Code<br/>    }<br/>?&gt;   </span></pre><p id="988f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">问题是，对象以不安全的方式被反序列化，没有验证或完整性检查；攻击者可以将<strong class="jw ir">角色</strong>属性的值从<strong class="jw ir">用户</strong>更改为<strong class="jw ir">管理员</strong>，他将获得完全权限提升！！！</p><h1 id="5a4f" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">例2【价格参数篡改】:</h1><p id="90d6" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf mr kh ki kj ms kl km kn mt kp kq kr ij bi translated">在示例2中，让我们考虑一个购物应用程序，其中用户可以买东西，一个购物车cookie将包含一个<strong class="jw ir"> checkout </strong>属性，值是项目的总数，假设是1000美元，我们可以使用不安全的反序列化来更改这个在应用程序逻辑中有缺陷的价格吗？动手吧:)</p><pre class="mf mg mh mi gt mu mv mw mx aw my bi"><span id="9f36" class="mz kt iq mv b gy na nb l nc nd">&lt;php?<br/>    $cart = unserialized($_COOKIE);<br/>    <br/>    if ($cart) {<br/>       $total_amount = $cart['checkout']; <br/>    }<br/>   <br/>   // other code<br/>?&gt;</span></pre><p id="1c14" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">本例中的问题是，当if条件设置为true(购物车cookie在HTTP请求中发送)时，用户可以控制total_amount而无需任何验证，total_amount变量设置为checkout属性的值！！攻击者可以很容易地将该值更改为类似0的值，因此total_amount将从$1000更改为$0！！</p><p id="a9d9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在，是python:)让我们来检查一下这个容易受到不安全反序列化的python代码的例子，我们这里会用到pickle模块，这个过程在Python中叫做pickle。</p><h1 id="fc38" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">例1 [RCE]:</h1><pre class="mf mg mh mi gt mu mv mw mx aw my bi"><span id="6df2" class="mz kt iq mv b gy na nb l nc nd">import pickle<br/><br/>with open('payload', 'r') as file:<br/>     pickle.loads(file.read())</span></pre><p id="0c20" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这里的问题是，代码执行不安全的反序列化，这将加载名为<strong class="jw ir">有效负载</strong>的文件，而不进行任何验证或检查，但是攻击者可以生成一个序列化的有效负载，其中包含像whoami这样的操作系统命令，当代码执行时，攻击者将收到whoami命令的结果，这是一个RCE！！</p><h1 id="6729" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">实验室:</h1><h1 id="7331" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">lab 1[权限提升]:</h1><p id="adc0" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf mr kh ki kj ms kl km kn mt kp kq kr ij bi translated">让我们来解决Portswigger Academy的这个实验，这里需要的操作是获得管理员权限并删除一个名为carlos的用户的帐户，让我们开始吧:)</p><p id="736e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在以正常用户权限登录过程后，这是易受攻击的应用程序:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi ne"><img src="../Images/7b837b9cdb053d9647079a671f8d2a21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aQewMMZiGiW4JAvrm6msmg.png"/></div></div><figcaption class="mn mo gj gh gi mp mq bd b be z dk translated">普通用户界面</figcaption></figure><p id="e7d3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在，让我们重新加载页面，并用Burp拦截请求:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi nf"><img src="../Images/41c76a4a88e013868d7752ddc1f1688e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GJskeOxKtuihtHgW3qeScA.png"/></div></div></figure><p id="5f1d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">会话cookie包含一个base64编码的字符串，如果我们使用类似于<a class="ae ng" href="https://gchq.github.io/" rel="noopener ugc nofollow" target="_blank"> CyberChef </a>的在线工具对其进行解码，我们应该会得到这个对象字符串:<strong class="jw ir"> O:4:“用户”:2:{s:8:“用户名”；生:6:“维纳”；s:5:“admin”；b:0；} </strong>，有趣的是admin属性的值是一个布尔值0，这意味着它是假的！！我觉得那是个条件，我们试着改成1吧。所以现在的对象应该是<strong class="jw ir"> O:4:“用户”:2:{s:8:“用户名”；生:6:“维纳”；s:5:“admin”；b:1；} </strong>，我们将在会话cookie中将对象字符串编码为base64格式，并使用Burp的repeater选项卡发送请求。</p><p id="3081" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们来看看回应:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/ef4d5defb98e57f0e9fdf44c70e624c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*f1HMzWFaKFG2sBqdiSrwFA.png"/></div></figure><p id="5d7c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">嘣！！我现在是管理员了！让我们尝试使用GET方法请求/admin端点，并搜索carlos，我们将删除他的帐户以解决此实验:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/02216b9235749980d6ca9db7d4190d82.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*vnjtq96hHim5y4lo_7fkcw.png"/></div></figure><p id="c2ea" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这里有两个用户，我(wiener)和carlos，让我们通过请求<strong class="jw ir"> /admin/delete来删除carlos的帐户。使用GET方法的username=carlos </strong>端点。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi ni"><img src="../Images/1734401138f67c2037076287fd215d86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PVOyvVlTewtiEufMheYj2w.png"/></div></div></figure><p id="56bd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">解决了！！</p><h1 id="6466" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">lab 2[认证旁路]:</h1><p id="8557" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf mr kh ki kj ms kl km kn mt kp kq kr ij bi translated">要理解本实验的解决方案，我们必须理解PHP如何处理数据类型，PHP by origin是一种松散类型的语言，在<strong class="jw ir"> == </strong>操作符中，这意味着它只寻找值，而不是两个操作数的数据类型，让我们用下面的代码来理解这一点:</p><pre class="mf mg mh mi gt mu mv mw mx aw my bi"><span id="32c4" class="mz kt iq mv b gy na nb l nc nd">&lt;?php<br/>   $value_1 = 10;<br/>   $value_2 = "10";<br/>   <br/>   if ($value_1 == $value_2) {<br/>       <br/>       echo "Same !";<br/>   }<br/>   <br/>?&gt;</span></pre><p id="c3b2" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">正如您所看到的，value_1是一个整数(整数),但是value_2是一个字符串，即使不考虑数据类型，这两个值也是相同的，if条件使用<strong class="jw ir"> == </strong>运算符查找这两个值之间的相等性，而不查找数据类型，因此条件将计算为true，因此将执行echo语句来打印<strong class="jw ir"> Same！</strong>。</p><p id="8d05" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">第二件事是带有<strong class="jw ir"> == </strong>操作符的0产生了一个有趣的问题需要研究。让我们来研究下面的代码:</p><pre class="mf mg mh mi gt mu mv mw mx aw my bi"><span id="5ffe" class="mz kt iq mv b gy na nb l nc nd">&lt;php?<br/>      $string = "Welcome to my blog !";<br/>      if (0 == $string) {<br/>          echo "Same !";<br/>      }<br/>?&gt;</span></pre><p id="220e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">字符串变量是一个字符串(数据类型)，if条件比较0和我们的字符串变量，那么，if条件将计算为真，因此echo语句将执行，但是为什么呢？</p><p id="da66" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">正如我之前所说，PHP是一种松散类型的语言，所以我们的字符串不包含任何整数，如9，10或8 … 0整数在那里，条件为真！<strong class="jw ir">一样！</strong>应该印在什么地方！</p><p id="f35d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">本实验的目的是绕过身份验证以获得具有管理员权限的帐户，但是，让我们来寻找相同情况下的易受攻击代码，以及我们如何从源代码绕过身份验证，从而解决本实验，在HTTP请求期间，序列化对象在会话Cookie中传输。让我们检查一下这段代码:</p><pre class="mf mg mh mi gt mu mv mw mx aw my bi"><span id="acdd" class="mz kt iq mv b gy na nb l nc nd">&lt;php?<br/>    $serial = unserialized($_COOKIE);<br/>    <br/>    // $password variable in the if condition is a pre-defined <br/>    // password for admin<br/>    <br/>    if ($serial['password'] == $password) {<br/>        // admin login  success!<br/>    }<br/>?&gt;</span></pre><p id="d3aa" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">上面的代码演示了一个在PHP中实现的小型认证机制，它容易受到不安全的反序列化的攻击，这是一个绕过认证的很好的bug，用户可控制的数据(即序列化的对象)包含一个密码属性，值是用户提供的密码，条件是将密码的属性值与预定义的管理员密码进行比较，还记得0和PHP松散类型的符号吗！我打赌你记得它！攻击者会将password属性中的序列化对象的值从某个密码更改为0！现在，如果管理员密码不是以数字开头，登录将会成功，从而绕过身份验证机制！</p><p id="694e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在，我们明白了PHP是怎么回事，让我们来解决实验室！</p><p id="a062" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">考虑到基于序列化会话的机制，为了删除carlos的帐户，所需的操作是绕过身份验证，让我们开始吧！</p><p id="07ff" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">以普通用户身份登录后，引入一个默认的普通用户界面，让我们重新加载页面，用Burp拦截请求，session cookie包含一个base64编码的字符串，让我们解码一下，看看是怎么回事，收到的结果是这个object<strong class="jw ir">O:4:" User ":2:{ s:8:" username "；生:6:“维纳”；s:12:“access _ token”；s:32:“sfzfvdy 6 lk 5y 3 K5 wd 24 tipbrdgsj 8 ggf”；} </strong>用一个设置为wiener的user_name和一个访问令牌，这里需要注意的重要一点是，对象中有一个<strong class="jw ir"> s </strong>，它是数据类型标签，s代表字符串，I代表整数等等……在s: some数字之后还有一个，这个数字是对应属性/值的长度！所以我们必须非常小心地改变这里的事情！</p><p id="b472" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我首先尝试将<strong class="jw ir">用户名</strong>属性的值更改为admin，但是我在响应中得到一个500内部服务器错误，所以让我们尝试将其更改为<strong class="jw ir">管理员</strong>但是请记住，我们必须将对象的长度从6更改为13，但是我们再次得到一个服务器错误，所以这里的问题是access_token，让我们编写一些PHP代码来创建一个假想的情况:</p><pre class="mf mg mh mi gt mu mv mw mx aw my bi"><span id="75bc" class="mz kt iq mv b gy na nb l nc nd">&lt;php?<br/>    $serial = unserialized($_COOKIE);<br/>    <br/>    // $admin_access_token is a pre-defined variable that contains<br/>    // the access token of the admin !<br/>    if($serial['username'] == 'administrator' &amp;&amp; <br/>       $serial['access_token'] == $admin_access_token) {<br/>           <br/>           // admin logic code here !<br/>       }<br/>?&gt;</span></pre><p id="243f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们试着看看，是的，我看到你明白:)这里看到的是<strong class="jw ir"> == </strong>运算符，第一个操作数将获得<strong class="jw ir"> access_token </strong>的值，将其与预定义的admin_access_token进行比较，如果admin_access_token字符串不是以数字开头，攻击者可以将<strong class="jw ir"> access_token </strong>的值从sfzfvdy 6 lk 5y 3 K5 wd 24 tipbrdgsj8ggf更改为0，例如作为一个整数值！请回到0和==记数法了解更多！</p><p id="c2e9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们已经有了这个对象<strong class="jw ir"> O:4:“用户”:2:{s:8:“用户名”；生:6:“维纳”；s:12:“access _ token”；s:32:“sfzfvdy 6 lk 5y 3 K5 wd 24 tipbrdgsj 8 ggf”；} </strong>，让我们将<strong class="jw ir">用户名</strong>属性的值更改为<strong class="jw ir">管理员</strong>，长度为13，并将<strong class="jw ir">访问令牌</strong>属性的值更改为0，数据类型标签为整数[i]，因此新对象现在是:</p><p id="2e13" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> O:4:“用户”:2:{s:8:“用户名”；s:13:《管理员》；s:12:“access _ token”；I:0；} </strong></p><p id="5dab" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们现在将使用base64编码格式对这个新对象进行编码，在HTTP POST请求中的会话cookie中发送它，并查看服务器的响应。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/ba7c533d6e9207a00592f0c7099d21eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/format:webp/1*Bp6FxX5w0XfQlK2jaCqxdw.png"/></div></figure><p id="79a3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">嘣，我们现在是管理员了！！导航到管理端点后，让我们尝试请求<strong class="jw ir"> /admin/delete？用户名=卡洛斯</strong>:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi ni"><img src="../Images/5134471f6cfc1fa9ac559e87fbe1e735.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8mmL4RHxIjd-sxjiOmb_eg.png"/></div></div></figure><p id="d4b9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">厉害了，解决了！</p><p id="2b0a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">注意:在对象的反序列化过程中，它保留了数据类型，即integer是integer，string是string！！在带有对象的普通请求中，数据类型被转换以适应这种情况！</p><p id="ff58" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">另请注意:我的英语不是很好，所以请期待一些语法错误，技术错误也在意料之中！</p><p id="36f8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">对于卡洛斯，我很抱歉删除了你的帐户两次，请忘记这一点，并创建一个新的帐户:(</p><p id="5f8d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">感谢您的阅读，我希望您理解什么是不安全的反序列化，并且我希望代码示例是更多理解它的支持材料！！如果你有任何问题、编辑、技术/语言错误修正，欢迎你在akhrazmoad14@gmail.com联系我，你也可以在<a class="ae ng" href="https://www.github.com/mdakh404" rel="noopener ugc nofollow" target="_blank"> Github </a>和<a class="ae ng" href="https://www.twitter.com/akhraz_moad" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上关注我</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/a08795246b40c706d0ab4635b22a00fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/1*IXviPWr1jkTX4PtIWVgVvQ.gif"/></div></figure><p id="9fe4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">干杯，@mdakh404</p></div></div>    
</body>
</html>