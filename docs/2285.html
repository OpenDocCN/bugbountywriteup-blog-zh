<html>
<head>
<title>Write-up: Git Happens @ TryHackMe</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">特写:Git hacks @ TryHackMe</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/write-up-git-happens-tryhackme-408a111e880f?source=collection_archive---------1-----------------------#2022-08-19">https://infosecwriteups.com/write-up-git-happens-tryhackme-408a111e880f?source=collection_archive---------1-----------------------#2022-08-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/b4fca1c1d86ef4d5a6facae5f347ba39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/0*kNezB9xR9d5Lqr8V.png"/></div></figure><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="gh gi ju"><img src="../Images/1402b485de26f2963f05901c45a14977.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gKNIJHFYH4sKRK696134Mg.jpeg"/></div></div><figcaption class="kd ke gj gh gi kf kg bd b be z dk translated"><a class="ae kh" href="https://www.pexels.com/photo/man-love-people-woman-11035539/" rel="noopener ugc nofollow" target="_blank">https://www.pexels.com/photo/11035539/</a></figcaption></figure><p id="61e6" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">这篇关于房间<em class="lg">Git hackme</em>的文章是我为<a class="ae kh" href="https://tryhackme.com" rel="noopener ugc nofollow" target="_blank"> TryHackMe </a>撰写的系列文章的一部分。</p><div class="lh li gp gr lj lk"><a href="https://tryhackme.com/room/githappens" rel="noopener  ugc nofollow" target="_blank"><div class="ll ab fo"><div class="lm ab ln cl cj lo"><h2 class="bd ir gy z fp lp fr fs lq fu fw ip bi translated">TryHackMe | Git发生</h2><div class="lr l"><h3 class="bd b gy z fp lp fr fs lq fu fw dk translated">老板要我做一个原型，所以就在这里！我们甚至使用了一种叫做“版本控制”的东西，使得…</h3></div><div class="ls l"><p class="bd b dl z fp lp fr fs lq fu fw dk translated">tryhackme.com</p></div></div><div class="lt l"><div class="lu l lv lw lx lt ly js lk"/></div></div></a></div><p id="8814" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">房型:免费<br/>难度:简单</p><h1 id="8a69" class="lz ma iq bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">基本枚举</h1><p id="e464" class="pw-post-body-paragraph ki kj iq kk b kl mx kn ko kp my kr ks kt mz kv kw kx na kz la lb nb ld le lf ij bi translated">我从nmap扫描开始实验，寻找机器上开放的端口。</p><pre class="jv jw jx jy gt nc nd ne nf aw ng bi"><span id="3392" class="nh ma iq nd b gy ni nj l nk nl">nmap -nv -Pn -sC -sV -O -T4 -oA nmap 10.10.26.129</span></pre><p id="3490" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">我使用的选项如下:</p><ul class=""><li id="c0f8" class="nm nn iq kk b kl km kp kq kt no kx np lb nq lf nr ns nt nu bi translated">-n <br/>无DNS解析<br/>在实验室中没有意义，速度变慢</li><li id="c342" class="nm nn iq kk b kl nv kp nw kt nx kx ny lb nz lf nr ns nt nu bi translated">-v <br/> Verbose <br/>一找到打开的端口就打印出来</li><li id="fbdb" class="nm nn iq kk b kl nv kp nw kt nx kx ny lb nz lf nr ns nt nu bi translated">-Pn <br/>没有ping扫描<br/>在实验室中，我假设目标在线</li><li id="0d59" class="nm nn iq kk b kl nv kp nw kt nx kx ny lb nz lf nr ns nt nu bi translated">-sC <br/>使用默认的脚本集<br/>注意:这包括一些侵入式扫描，在CTF盒上这没问题，在现实世界中使用<code class="fe oa ob oc nd b">--script=safe</code>更好</li><li id="97fa" class="nm nn iq kk b kl nv kp nw kt nx kx ny lb nz lf nr ns nt nu bi translated">-sV <br/>版本检测<br/>尝试枚举找到的服务的版本</li><li id="2dce" class="nm nn iq kk b kl nv kp nw kt nx kx ny lb nz lf nr ns nt nu bi translated">-O <br/>操作系统检测<br/> -T4 <br/>使用激进计时<br/>另一个选项在CTF环境中很好，但在现实世界中可能会导致问题</li><li id="a455" class="nm nn iq kk b kl nv kp nw kt nx kx ny lb nz lf nr ns nt nu bi translated">-oA <br/>输出所有格式<br/>我希望存储所有格式:nmap、xml和grepable</li></ul><p id="a6e8" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">注意:这包括一些侵入性的扫描，在CTF盒子上这很好，在现实世界中使用<code class="fe oa ob oc nd b">--script=safe</code>更好</p><p id="ff49" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">如果没有指定端口的任何参数，nmap会扫描1000个最常见的端口。如果你想了解更多，看看文件<code class="fe oa ob oc nd b">/usr</code> /share/nmap/nmap-services `。</p><p id="0f49" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">结果显示只有一个端口打开，即端口80上的web服务器。更有趣的是，脚本<code class="fe oa ob oc nd b">http-git</code>显示在web根目录中有一个git存储库:</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="gh gi od"><img src="../Images/beb22cab38d04a30cfe0b98d4c59a45e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HkkM6jLAYadtNUz2.png"/></div></div><figcaption class="kd ke gj gh gi kf kg bd b be z dk translated">nmap脚本http-git揭示了web根目录上的git存储库</figcaption></figure><p id="42e9" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">网页只是一个登录屏幕:</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/0c7f44b2063c285c1fae8e54e990b775.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/0*8dclo0JoTvlxwCtF.png"/></div></figure><p id="54c7" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">它还包含一些混淆的JavaScript，我现在忽略了。Nmap显示，web根似乎是一个更有价值的git存储库。</p></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><h1 id="486e" class="lz ma iq bd mb mc om me mf mg on mi mj mk oo mm mn mo op mq mr ms oq mu mv mw bi translated">获取存储库</h1><p id="1aac" class="pw-post-body-paragraph ki kj iq kk b kl mx kn ko kp my kr ks kt mz kv kw kx na kz la lb nb ld le lf ij bi translated">首先，我通过在浏览器中打开目录来验证它确实是一个git存储库:</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div class="gh gi or"><img src="../Images/38021cf653987e130ce763128cf285c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/0*1N9v3F3WuCc2zRbM.png"/></div></figure><p id="64d8" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">下一步是下载完整的存储库。目录列表已打开，所以我可以使用可靠的<code class="fe oa ob oc nd b">wget</code>来完成这项工作:</p><pre class="jv jw jx jy gt nc nd ne nf aw ng bi"><span id="7aa9" class="nh ma iq nd b gy ni nj l nk nl">wget --mirror <a class="ae kh" href="http://10.10.26.129/.git/" rel="noopener ugc nofollow" target="_blank">http://10.10.26.129/.git/</a></span></pre><p id="16d8" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">有了本地存储库，我现在可以使用普通的git工具进行进一步的研究。首先，我查看存储库中的提交(底部是最早的):</p><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div class="gh gi os"><img src="../Images/3f5bcf54f6102c83ae76b30a995c9fa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/0*vRwzy5q1CzRcX1og.png"/></div><figcaption class="kd ke gj gh gi kf kg bd b be z dk translated">显示有趣提交的git日志</figcaption></figure><p id="51c0" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">三条提交消息引人注目:</p><ul class=""><li id="71e1" class="nm nn iq kk b kl km kp kq kt no kx np lb nq lf nr ns nt nu bi translated">d954a99重新混淆代码，以真正安全！</li><li id="0f00" class="nm nn iq kk b kl nv kp nw kt nx kx ny lb nz lf nr ns nt nu bi translated">bc8054d安全部门说混淆是不够的。</li><li id="1e90" class="nm nn iq kk b kl nv kp nw kt nx kx ny lb nz lf nr ns nt nu bi translated">e56eaa8混淆了源代码</li></ul><p id="23a6" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">这三个提交中的第一个试图隐藏一些东西，后一个似乎以安全的名义改进了这种隐藏。我想到了页面上令人讨厌的混乱的JavaScript块…</p></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><h1 id="00a1" class="lz ma iq bd mb mc om me mf mg on mi mj mk oo mm mn mo op mq mr ms oq mu mv mw bi translated">载入史册</h1><p id="bc96" class="pw-post-body-paragraph ki kj iq kk b kl mx kn ko kp my kr ks kt mz kv kw kx na kz la lb nb ld le lf ij bi translated">我想看看第一次隐藏提交之前的提交，这使得登录页面:</p><p id="f8e8" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">我签出该提交以查看该时间点的文件。我的本地工作副本有一些不一致，所以我使用<code class="fe oa ob oc nd b">--force</code>来忽略它们。</p><pre class="jv jw jx jy gt nc nd ne nf aw ng bi"><span id="71b9" class="nh ma iq nd b gy ni nj l nk nl">git checkout 395e087 --force</span></pre><figure class="jv jw jx jy gt jr gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/67ea3c8f2e5bf0200159675a467f05a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/0*qcVJ0hse-CybbvGW.png"/></div><figcaption class="kd ke gj gh gi kf kg bd b be z dk translated">旧版本的文件泄露了密码</figcaption></figure><p id="5585" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">我提交密码，房间就解决了。</p></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><p id="909f" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated"><em class="lg">原载于【https://github.com】<a class="ae kh" href="https://github.com/frank-leitner/tryhackme/tree/main/Git_Happens" rel="noopener ugc nofollow" target="_blank"><em class="lg"/></a><em class="lg">。</em></em></p><p id="b48c" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated"><em class="lg">来自Infosec的报道:每天Infosec上都会出现很多难以跟上的内容。</em> <a class="ae kh" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kk ir"> <em class="lg">加入我们的每周简讯</em> </strong> </a> <em class="lg">以5篇文章、4个线程、3个视频、2个Github Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</em></p></div></div>    
</body>
</html>