<html>
<head>
<title>How to spoof e-mails. (DMARC, SPF, and Phishing)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何恶搞邮件？(DMARC、SPF和网络钓鱼)</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/how-to-spoof-e-mails-dmarc-spf-and-phishing-5184c10679a0?source=collection_archive---------1-----------------------#2022-01-26">https://infosecwriteups.com/how-to-spoof-e-mails-dmarc-spf-and-phishing-5184c10679a0?source=collection_archive---------1-----------------------#2022-01-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="eea8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="kl">注意:对这些截图进行清理是为了保护相关利益方的身份。</em>T3】</strong></p><p id="4b52" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我最近的学习中，我发现错过DMARC政策不是一件可以掉以轻心的事情。如果您的组织没有实现这一点，我强烈建议您这样做。DMARC(基于域的消息身份验证、报告和一致性)负责确保您组织的域不会被欺骗来伪造恶意消息。</p><p id="0980" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">更多关于DMARC的信息:【https://dmarc.org/ T4】</p><p id="9e03" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是一步一步的教程，教我如何向我的客户发送假冒的钓鱼邮件。<strong class="jp ir">请注意</strong>为了获得更高的成功几率，如果客户端配置了<a class="ae km" href="https://www.dmarcanalyzer.com/spf/" rel="noopener ugc nofollow" target="_blank"> SPF </a>(发件人策略框架)软策略或无策略，则最好使用此网络钓鱼。否则，它可能只是去垃圾邮件。使用<a class="ae km" href="https://www.dmarcanalyzer.com/spf/checker/" rel="noopener ugc nofollow" target="_blank"> SPF检查器</a>确定该策略是否在目标域上配置。</p><ol class=""><li id="9df7" class="kn ko iq jp b jq jr ju jv jy kp kc kq kg kr kk ks kt ku kv bi translated">您必须查明域目标是否配置了DMARC策略。为了做到这一点，你可以简单地使用一个网站，如<a class="ae km" href="https://mxtoolbox.com/dmarc.aspx?gclid=CjwKCAiAxJSPBhAoEiwAeO_fP1e82z8tWZbGR9-94MOzqetFa5BgVwc8qhK0jzaOYF0Zk3fbfVRiuxoCGIQQAvD_BwE" rel="noopener ugc nofollow" target="_blank"> MXtoolbox </a></li></ol><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gh gi kw"><img src="../Images/9f6db421b35aa7dc467d49bd0cc34f57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Op-LTdfNqjQglRi7b6kRqw.png"/></div></div></figure><p id="accc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.在您可以从Kali发送电子邮件之前，您必须安装sendmail。您可以通过使用以下命令来完成此操作:<strong class="jp ir"><em class="kl">sudo apt-get install sendmail</em></strong></p><p id="91a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.使用<strong class="jp ir"> systemctl </strong>启动sendmail服务</p><p id="c81e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.精心制作你的电子邮件。这里，我使用的是python3——所以在您的Linux终端上，键入“python 3”。下面是我的一封欺骗性网络钓鱼电子邮件的例子，它请求发送一份敏感文档。</p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gh gi li"><img src="../Images/36a5ec52cab194f872b55fdee270a1ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K1ii9dF-jIuKCASOZbAaBw.png"/></div></div></figure><p id="7b5a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们来分析一下。</p><ul class=""><li id="9931" class="kn ko iq jp b jq jr ju jv jy kp kc kq kg kr kk lj kt ku kv bi translated">首先我们导入必要的<strong class="jp ir">库</strong></li><li id="7041" class="kn ko iq jp b jq lk ju ll jy lm kc ln kg lo kk lj kt ku kv bi translated">接下来，我们将一个<strong class="jp ir">消息</strong>变量声明为“EmailMessage”。</li><li id="303d" class="kn ko iq jp b jq lk ju ll jy lm kc ln kg lo kk lj kt ku kv bi translated"><strong class="jp ir">邮件正文</strong>是邮件的内容</li><li id="0cec" class="kn ko iq jp b jq lk ju ll jy lm kc ln kg lo kk lj kt ku kv bi translated">然后，我们设置<strong class="jp ir"> MIMEText </strong>，以便呈现包含在电子邮件内容中的HTML标签</li><li id="8649" class="kn ko iq jp b jq lk ju ll jy lm kc ln kg lo kk lj kt ku kv bi translated">然后你设置邮件的主题</li><li id="157a" class="kn ko iq jp b jq lk ju ll jy lm kc ln kg lo kk lj kt ku kv bi translated"><strong class="jp ir">优先级</strong>是可选的，但这就是显示"！"表示紧急的手势</li><li id="a9e9" class="kn ko iq jp b jq lk ju ll jy lm kc ln kg lo kk lj kt ku kv bi translated"><strong class="jp ir"> Msg["To"] </strong> =您的目标</li><li id="9304" class="kn ko iq jp b jq lk ju ll jy lm kc ln kg lo kk lj kt ku kv bi translated"><strong class="jp ir"> msg["From"] </strong> =您想要欺骗或冒充的电子邮件</li><li id="4550" class="kn ko iq jp b jq lk ju ll jy lm kc ln kg lo kk lj kt ku kv bi translated"><strong class="jp ir">抄送</strong> ' =当目标点击“全部回复”时抄送的电子邮件</li><li id="3fdd" class="kn ko iq jp b jq lk ju ll jy lm kc ln kg lo kk lj kt ku kv bi translated"><strong class="jp ir">回复</strong> ' =目标点击“回复”时将回复的电子邮件(您可以在此使用自己的电子邮件)。如果你想让它看起来不那么明显，我建议不要用这个。如果您不使用这个，您的最佳选择是让目标“全部回复”——在这种情况下，受害者和您都将收到回复(因为CC参数)。如果受害者说“嘿，我从来没有发过这个”，这将会引起怀疑，但到了那个时候，你已经有了你所要求的临时帐户或文件。</li><li id="4426" class="kn ko iq jp b jq lk ju ll jy lm kc ln kg lo kk lj kt ku kv bi translated">将SMTP服务器设置为“localhost”(如果使用sendmail，则为默认值)</li><li id="5669" class="kn ko iq jp b jq lk ju ll jy lm kc ln kg lo kk lj kt ku kv bi translated">发送消息</li></ul><p id="a89f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">消息发送后，需要几分钟才能送达目标。就我而言，我在成功发布后收到了以下电子邮件。</p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gh gi lp"><img src="../Images/4ddc4c0b4c5ed01f0ee643d966da9e4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oIL32DB1w7YVOLQGg8fCDg.png"/></div></div></figure><p id="6b37" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你问我，我会说这是非常可怕的攻击向量。看不见DMARC和SPF政策会有多危险？</p><p id="91e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">影响</strong>:攻击者可能会利用这一攻击媒介向您的客户或公司内的其他员工发送电子邮件。此行为可能会对组织的财务、声誉和运营产生负面影响。</p></div></div>    
</body>
</html>