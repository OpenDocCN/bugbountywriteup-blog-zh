<html>
<head>
<title>SSRF: Web App Security Basics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SSRF:网络应用安全基础知识</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/ssrf-web-app-security-basics-b88da872c9c8?source=collection_archive---------0-----------------------#2020-10-19">https://infosecwriteups.com/ssrf-web-app-security-basics-b88da872c9c8?source=collection_archive---------0-----------------------#2020-10-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ce4571745cbd00356e60f771dfd0a39d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mVQM6Kt2aq-B8Hl9mHhsqA.png"/></div></div></figure><blockquote class="jy jz ka"><p id="0c26" class="kb kc kd ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">服务器端请求伪造</strong> (SSRF)是一种漏洞利用，攻击者可以利用服务器的功能来访问或操纵服务器网络中的信息，而攻击者无法直接访问这些信息。</p></blockquote><p id="b518" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated"><strong class="ke ir">如果SSRF攻击成功:</strong></p><p id="21d8" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">攻击者可能会导致服务器连接回自身、组织基础架构内的其他基于web的服务或外部第三方系统，这可能会导致潜在的法律责任和声誉损害。这非常类似于CSRF，如果机器容易受到XXE的攻击，那也可能导致SSRF。如果你想了解CSRF和XXE，你可以参考我以前的文章:</p><ul class=""><li id="f334" class="ld le iq ke b kf kg kj kk la lf lb lg lc lh kz li lj lk ll bi translated"><a class="ae lm" href="https://medium.com/bugbountywriteup/csrf-web-app-security-basics-dd4628122fea" rel="noopener"> <em class="kd"> CSRF : Web App安全基础知识</em> </a></li><li id="e009" class="ld le iq ke b kf ln kj lo la lp lb lq lc lr kz li lj lk ll bi translated"><a class="ae lm" href="https://medium.com/bugbountywriteup/xxe-web-app-security-basics-70ef8ed274f0" rel="noopener"> <em class="kd"> XXE:网络应用安全基础知识</em> </a></li></ul><p id="e92b" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated"><strong class="ke ir">例如:</strong></p><p id="f4c6" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">攻击者想要从内部网络上无法直接访问的机器上获取敏感信息。但是有一台服务器在公共网络上，可以访问内部机器。现在，攻击者试图从公共机器获取信息，并注意到这一点:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="e31b" class="mb mc iq lx b gy md me l mf mg">GET /?url=http://localhost/server-status HTTP/1.1<br/>Host: example.com</span></pre><p id="d738" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">在这里，在拦截请求和少量修改时，攻击者可以发送这样的请求:</p><ul class=""><li id="6848" class="ld le iq ke b kf kg kj kk la lf lb lg lc lh kz li lj lk ll bi translated">检索公共服务器上文件:</li></ul><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="dd72" class="mb mc iq lx b gy md me l mf mg">GET /?url=file:///etc/passwd HTTP/1.1<br/>Host: example.com</span></pre><ul class=""><li id="9ad6" class="ld le iq ke b kf kg kj kk la lf lb lg lc lh kz li lj lk ll bi translated">访问内部服务器:</li></ul><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="58ca" class="mb mc iq lx b gy md me l mf mg">GET /?url=http://internal-ip/admin/ HTTP/1.1<br/>Host: example.com</span></pre><ul class=""><li id="f78c" class="ld le iq ke b kf kg kj kk la lf lb lg lc lh kz li lj lk ll bi translated">盲SSRF:当服务器易受攻击，但敏感信息不会在响应中泄露。盲SSRF通常难以利用，但有时会导致完全远程代码执行。假设，攻击者有一个恶意网站，那里有一个文件exploit.php。</li></ul><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="8fc0" class="mb mc iq lx b gy md me l mf mg">Attacker’s site: http://malicious-site.com/ssrf/exploit.php</span><span id="f657" class="mb mc iq lx b gy mh me l mf mg">GET /?url=http://internal-ip/admin/ HTTP/1.1<br/>Host: example.com</span></pre><p id="986c" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated"><strong class="ke ir">缓解:</strong></p><ul class=""><li id="bc17" class="ld le iq ke b kf kg kj kk la lf lb lg lc lh kz li lj lk ll bi translated">将IP列入黑名单/白名单。</li><li id="3f98" class="ld le iq ke b kf ln kj lo la lp lb lq lc lr kz li lj lk ll bi translated">禁用未使用的URL模式(<code class="fe mi mj mk lx b">file:///</code>、<code class="fe mi mj mk lx b">dict://</code>、<code class="fe mi mj mk lx b">ftp://</code>和<code class="fe mi mj mk lx b">gopher://</code>)。</li><li id="35d1" class="ld le iq ke b kf ln kj lo la lp lb lq lc lr kz li lj lk ll bi translated">对内部服务使用身份验证。</li></ul><p id="d1e1" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated"><strong class="ke ir">绕过/变通办法:</strong></p><ul class=""><li id="3fd0" class="ld le iq ke b kf kg kj kk la lf lb lg lc lh kz li lj lk ll bi translated">基于黑名单的过滤器:</li></ul><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="5e5b" class="mb mc iq lx b gy md me l mf mg">Converting IP to hex/Octal/Decimal:<br/>127.0.0.1 --&gt; 2130706433 (Decimal)</span></pre><ul class=""><li id="81a6" class="ld le iq ke b kf kg kj kk la lf lb lg lc lh kz li lj lk ll bi translated">基于白名单的过滤器:</li></ul><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="1d27" class="mb mc iq lx b gy md me l mf mg">https://whitelisted-host@malicious-host (Using @)<br/>https://whitelisted-host.malicious-host<br/>https://malicious-host#whitelisted-host (Using #)</span></pre><p id="989a" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">参考资料:</p><div class="ml mm gp gr mn mo"><a href="https://portswigger.net/web-security/ssrf" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd ir gy z fp mt fr fs mu fu fw ip bi translated">什么是SSRF(服务器端请求伪造)？教程和示例|网络安全学院</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">在这一节中，我们将解释什么是服务器端请求伪造，描述一些常见的例子，并解释如何…</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">portswigger.net</p></div></div><div class="mx l"><div class="my l mz na nb mx nc jw mo"/></div></div></a></div><div class="ml mm gp gr mn mo"><a href="https://www.acunetix.com/blog/articles/server-side-request-forgery-vulnerability/" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd ir gy z fp mt fr fs mu fu fw ip bi translated">什么是服务器端请求伪造(SSRF)？Acunetix</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">服务器端请求伪造(SSRF)漏洞使得攻击者能够从服务器的后端服务器发送精心编制的请求</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">www.acunetix.com</p></div></div><div class="mx l"><div class="nd l mz na nb mx nc jw mo"/></div></div></a></div></div></div>    
</body>
</html>