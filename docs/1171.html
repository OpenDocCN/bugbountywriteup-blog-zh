<html>
<head>
<title>Pentesting on Windows</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Windows上的Pentesting</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/pentesting-on-windows-f88bbe455f7b?source=collection_archive---------1-----------------------#2021-03-15">https://infosecwriteups.com/pentesting-on-windows-f88bbe455f7b?source=collection_archive---------1-----------------------#2021-03-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="316d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Kali 2020.3来了！在本文中，我们将使用Windows Subsystem for Linux (WSL 2)和<strong class="jp ir">win-kex</strong>(Kali Desktop Experience for Windows)安装Kali Linux，并将其与其他虚拟化软件进行比较。</p><p id="d0fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我已经盼了很久了。我检查的最后一个发行版是Arch，我喜欢它，但是我用了25秒来启动，而我的windows只用了5-7秒。我用了一段时间，然后再次切换回windows。我是从Kali Linux上知道这个新特性<a class="ae kl" href="https://www.kali.org/docs/wsl/win-kex/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> Win-KEX </strong> </a>的。这里有一个简短而精确的教程，教你如何设置它。这就是我们最终会得到的结果。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/ffb57dff3fab1c47a84ea7abbd368d79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kvBscwyX-4nsebjjvAYi-Q.png"/></div></div></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ky"><img src="../Images/efcc00106a870a4056826fba58d59e01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*WdSL9xXUMryGckcgRAUQdQ.gif"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">Kali Linux WSL2的实际应用</figcaption></figure><p id="3d17" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">安装:</strong></p><ul class=""><li id="0a68" class="ld le iq jp b jq jr ju jv jy lf kc lg kg lh kk li lj lk ll bi translated">检查windows版本。你可以在启动菜单中搜索Winver来查看。应该是<strong class="jp ir">Windows 2020年5月10日(2004)，Windows 2019年5月10日(1903)，或者Windows 2019年11月10日(1909) </strong> <strong class="jp ir">或者更晚。</strong></li><li id="fbe9" class="ld le iq jp b jq lm ju ln jy lo kc lp kg lq kk li lj lk ll bi translated">现在我们必须启用WSl(Linux的windows子系统)，这可以通过<strong class="jp ir">打开和关闭windows功能</strong>来完成。或者通过在Powershell(admin)中运行此命令，需要重新启动。</li></ul><pre class="kn ko kp kq gt lr ls lt lu aw lv bi"><span id="301a" class="lw lx iq ls b gy ly lz l ma mb">dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart</span></pre><ul class=""><li id="5137" class="ld le iq jp b jq jr ju jv jy lf kc lg kg lh kk li lj lk ll bi translated">从同一菜单中启用虚拟机功能，或者您可以使用power shell命令“需要重新启动”来执行此操作。</li></ul><pre class="kn ko kp kq gt lr ls lt lu aw lv bi"><span id="ac2a" class="lw lx iq ls b gy ly lz l ma mb">dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart </span><span id="efb0" class="lw lx iq ls b gy mc lz l ma mb">dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart</span></pre><ul class=""><li id="51b5" class="ld le iq jp b jq jr ju jv jy lf kc lg kg lh kk li lj lk ll bi translated">下载新的Linux内核更新包<a class="ae kl" href="https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi" rel="noopener ugc nofollow" target="_blank">链接</a>安装就好。</li><li id="643b" class="ld le iq jp b jq lm ju ln jy lo kc lp kg lq kk li lj lk ll bi translated">从微软商店下载Kali Linux并创建一个用户。</li><li id="fa56" class="ld le iq jp b jq lm ju ln jy lo kc lp kg lq kk li lj lk ll bi translated">打开cmd并运行这个命令，将刚刚下载的kali Linux wsl1转换为wsl2。</li></ul><pre class="kn ko kp kq gt lr ls lt lu aw lv bi"><span id="6512" class="lw lx iq ls b gy ly lz l ma mb">wsl.exe --list</span><span id="fc8a" class="lw lx iq ls b gy mc lz l ma mb">wsl.exe --set-version kali-linux 2</span></pre><p id="5279" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将需要4-5分钟的时间。现在，在您的windows机器(大小:500mb)中，一个最小的kali Linux运行在一个完整的Linux内核上。现在我们必须安装一些软件包。在kali上运行以下命令。</p><pre class="kn ko kp kq gt lr ls lt lu aw lv bi"><span id="e898" class="lw lx iq ls b gy ly lz l ma mb">sudo apt update &amp;&amp; sudo apt install -y <strong class="ls ir">kali-win-kex</strong></span></pre><blockquote class="md me mf"><p id="6fd0" class="jn jo mg jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated"><strong class="jp ir">无需升级</strong>。</p></blockquote><p id="d879" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">更新后，它将安装<strong class="jp ir"> kali-win-kex包</strong>包的大小约为1 GB，安装后总kali大小将为3–4gb。大约需要10-20分钟，因为它正在上面安装一个轻量级桌面环境<strong class="jp ir"> XFCE </strong>。当这一切完成后，请重新启动计算机。</p><blockquote class="md me mf"><p id="b826" class="jn jo mg jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated">在Kali终端上运行<strong class="jp ir"> Kex </strong>命令，它将要求设置密码。</p></blockquote><p id="4880" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">瞧吧！现在你可以在GUI上使用卡利语了。现在你可以在上面安装所有你喜欢的工具了。</p><p id="b258" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">故障排除:</strong></p><ul class=""><li id="e3ba" class="ld le iq jp b jq jr ju jv jy lf kc lg kg lh kk li lj lk ll bi translated">更新错误:<code class="fe mk ml mm ls b"> The following signatures were invalid: EXPKEYSIG</code></li></ul><pre class="kn ko kp kq gt lr ls lt lu aw lv bi"><span id="5be8" class="lw lx iq ls b gy ly lz l ma mb">wget <a class="ae kl" href="https://archive.kali.org/archive-key.asc" rel="noopener ugc nofollow" target="_blank">https://archive.kali.org/archive-key.asc</a> -O /etc/apt/trusted.gpg.d/kali-archive-key.asc</span></pre><ul class=""><li id="d3bb" class="ld le iq jp b jq jr ju jv jy lf kc lg kg lh kk li lj lk ll bi translated">运行Kex命令给出错误:<strong class="jp ir"> <em class="mg">请尝试“kex start”来启动服务。如果服务器无法启动，请尝试“kex kill”或重启WSL2会话并重试。</em>T3】</strong></li></ul><pre class="kn ko kp kq gt lr ls lt lu aw lv bi"><span id="61b7" class="lw lx iq ls b gy ly lz l ma mb">vncserver --localhost no &amp;&amp; kex --win -s</span></pre><p id="c7e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">温馨提示</strong>:</p><ol class=""><li id="a624" class="ld le iq jp b jq jr ju jv jy lf kc lg kg lh kk mn lj lk ll bi translated">用这个命令(<strong class="jp ir"><em class="mg">vncserver—localhost no&amp;&amp;kex—win-s</em></strong>)创建一个start.sh文件，并在home文件夹中给它可执行的权限。</li><li id="e9ca" class="ld le iq jp b jq lm ju ln jy lo kc lp kg lq kk mn lj lk ll bi translated">现在用这个(<strong class="jp ir">wsl-d kali-Linux bash/home/kali/start . sh</strong>)命令创建一个. BAT文件。当你运行bat文件时，它会打开kali并运行start.sh，这将打开kali窗口。</li></ol><p id="648e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">与虚拟机箱的比较&amp; VMWARE: </strong></p><pre class="kn ko kp kq gt lr ls lt lu aw lv bi"><span id="a69c" class="lw lx iq ls b gy ly lz l ma mb">PARAMETERS       WSL2         VIRTUAL BOX         VMWARE<br/>BOOT TIME:       5 sec          15-20 sec         15 sec<br/>SIZE:            5 GB           15 GB             15 GB<br/>RAM:             1-2 GB         2 GB              2 GB<br/>SNAPSHOT:        NO             YES               YES</span></pre><p id="da8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">未来:我正在为Arch Linux做类似的项目。</p><h2 id="984a" class="lw lx iq bd mo mp mq dn mr ms mt dp mu jy mv mw mx kc my mz na kg nb nc nd ne bi translated"><strong class="ak">如果这篇文章有帮助，请点击拍手👏按钮下面几下，以示你对作者的支持！⬇ </strong></h2></div></div>    
</body>
</html>