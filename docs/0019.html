<html>
<head>
<title>900$ XSS in yahoo ( Recon Wins )</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">900美元XSS在雅虎(侦察获胜)</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/900-xss-in-yahoo-recon-wins-65ee6d4bfcbd?source=collection_archive---------1-----------------------#2017-09-24">https://infosecwriteups.com/900-xss-in-yahoo-recon-wins-65ee6d4bfcbd?source=collection_archive---------1-----------------------#2017-09-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="18b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嗨伙计们，</p><p id="130c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于那些期待特殊旁路或xss相关的东西，这不是关于我发现的容易被击中的xss，这是关于我做的侦察和我从Knoxss得到的帮助，向雅虎报告这个漏洞。</p><p id="f159" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一般来说，由于我的工作，我没有时间寻找漏洞，但当我这样做时，我倾向于只关注雅虎，因为它是一个资产的海洋，他们有一个伟大的团队，加上我对他们的子域是如何组织的有适当的知识，所以在我通常为雅虎侦察时，我遇到了这个目标:<a class="ae kl" href="https://hackerone.com/redirect?signature=2f263572ca50d9e361ff2741d10357919fa07178&amp;url=http%3A%2F%2Fbf1-adxdb-001.data.bf1.yahoo.com%2Fabout.php" rel="noopener ugc nofollow" target="_blank">http://bf1-adxdb-001.data.bf1.yahoo.com</a>和响应是“请求的URL在这个服务器上没有找到”，如下所示，这是大多数雅虎BB猎人通常看到的。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/7ee0550426670c61708c7bc07ae9006a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m92JM_J5VbLaihTb5QGASA.png"/></div></div></figure><p id="7c21" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在subject target上运行快速目录搜索，我找到了about.php文件【http://bf1-adxdb-001.data.bf1.yahoo.com/about.php】和令人惊讶的响应，有一个web page test(<a class="ae kl" href="https://hackerone.com/redirect?signature=e69be8c0c8ed6f6c373be8a602791984c1de7929&amp;url=https%3A%2F%2Fwww.webpagetest.org%2F" rel="noopener ugc nofollow" target="_blank">https://www.webpagetest.org/</a>)的私有实例运行在该服务器上，如下所示:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ky"><img src="../Images/6fdfbd031dd999574bd831c946d0598c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YhY33Pn2LwMVtYvSKK4WiA.png"/></div></div></figure><p id="d359" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好的，这很有趣..开始在应用程序中挖掘漏洞，但我找不到，尽管我也找到了这个默认的nginx安装端点，它暴露了服务器中的大多数php端点:<br/><a class="ae kl" href="https://hackerone.com/redirect?signature=050e78dd622b962a2142a081657d3b3c8cb446df&amp;url=http%3A%2F%2Fbf1-adxdb-001.data.bf1.yahoo.com%2Fnginx.conf" rel="noopener ugc nofollow" target="_blank">http://bf1-adxdb-001.data.bf1.yahoo.com/nginx.conf</a></p><p id="c547" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以我用另一个单词表在服务器上再次运行dirsearch，寻找PHP端点，找到了易受攻击的端点:<br/><a class="ae kl" href="https://hackerone.com/redirect?signature=54a17be025f93de3a0131948d97c1fc641eab773&amp;url=http%3A%2F%2Fbf1-adxdb-001.data.bf1.yahoo.com%2Ftestdb.php" rel="noopener ugc nofollow" target="_blank">http://bf1-adxdb-001.data.bf1.yahoo.com/testdb.php</a>，得到的回应是:</p><pre class="kn ko kp kq gt kz la lb lc aw ld bi"><span id="d619" class="le lf iq la b gy lg lh l li lj">Fatal error: Call to undefined function mysqli_connect() in /home/y/share/htdocs/testdb.php on line 8 [/testdb.php/]</span></pre><p id="b2e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当你达到这一点时，你会意识到你必须从中获得一些东西，我有很多端点，我正在测试它们，但幸运的是，我有我的knoxss插件运行在*.yahoo.com上，对于那些不知道knoxss的人来说，这是一个由xss god <a class="lk ll ep" href="https://medium.com/u/505eb7eb0765?source=post_page-----65ee6d4bfcbd--------------------------------" rel="noopener" target="_blank"> Brute </a>创建的xss发现服务，你可以在这里阅读它【https://knoxss.me/?page_id=2<a class="ae kl" href="https://knoxss.me/?page_id=2" rel="noopener ugc nofollow" target="_blank">T3】，我推荐使用它，因为我成功地使用了它。</a></p><p id="5577" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，当我测试所有端点时，knoxss触发了主题域中的xss，这是最终的有效负载:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lm"><img src="../Images/663f91a02ce7e09fcc6a2564c3cf1b0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IjOl1KLU9AfJj3I3Q2d1JA.jpeg"/></div></div></figure><p id="b566" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里学到的经验教训:</p><p id="19fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">1-当您在测试的目标上看到禁止/未找到响应时，不要停止，运行dirsearch或任何您喜欢的工具来查找端点。</p><p id="f0df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2- Recon wins:在雅虎的Recon不是一个容易的过程，计划一个独立的博客来描述它，它需要专注和耐心，我每天都在shodan.io监控雅虎资产，每当我使用aquatone/sublist找到一个感兴趣的子域时，我都会试图找到它下面的其他子域，并一级一级地继续下去，我是一个在数千个ip上运行全端口扫描的疯狂家伙，为什么？</p><p id="79c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为这有助于我报告独特的东西，我对雅虎的大多数错误是由于一个奇怪的开放端口，发现了访问控制服务器，设备，存储控制台，..atc以及其他研究从未涉及的有趣的web应用程序，例如，我在雅虎的第5和第6级子域名中发现了如下内容:</p><p id="bc59" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">目标。*.*.*.yahoo.com &amp; target。*.*.*.*.yahoo.com</p><p id="1742" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我确实知道其他研究人员很聪明，他们会在不做我所做的那种调查的情况下报告公开可用的网络应用程序中的错误，他们在这方面非常成功，但你可以说我选择了艰难的方式，我很喜欢这种方式。</p><p id="60b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，这是你在雅虎搜索子域名时的样子，或者说子-子-子-子-子域名</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ln"><img src="../Images/298a942c8a41ca240c8da5b438539475.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JBtN8qatrAC8jyROLrWeew.jpeg"/></div></div></figure><p id="1cb0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最诚挚的问候:)</p></div></div>    
</body>
</html>