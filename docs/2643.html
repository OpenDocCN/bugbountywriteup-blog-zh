<html>
<head>
<title>Write-up: DOM XSS in innerHTML sink using source location.search @ PortSwigger Academy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">特写:使用源位置的innerHTML接收器中的DOM XSS</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/write-up-dom-xss-in-innerhtml-sink-using-source-location-search-portswigger-academy-94c6691f89b0?source=collection_archive---------4-----------------------#2022-12-13">https://infosecwriteups.com/write-up-dom-xss-in-innerhtml-sink-using-source-location-search-portswigger-academy-94c6691f89b0?source=collection_archive---------4-----------------------#2022-12-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e961f72c36b58333a3be6ec3983d07cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*80sKCoriRr9OYVTn.png"/></div></div></figure><p id="9742" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这篇使用source location.search为innerHTML sink中的实验室<em class="kw"> DOM XSS撰写的文章</em>是我为<a class="ae kx" href="https://portswigger.net/web-security" rel="noopener ugc nofollow" target="_blank"> PortSwigger的Web安全学院</a>撰写的系列演练的一部分。</p><p id="9434" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">学习路径</strong>:客户端主题→跨站点脚本</p><div class="ky kz gp gr la lb"><a href="https://portswigger.net/web-security/cross-site-scripting/dom-based/lab-innerhtml-sink" rel="noopener  ugc nofollow" target="_blank"><div class="lc ab fo"><div class="ld ab le cl cj lf"><h2 class="bd ir gy z fp lg fr fs lh fu fw ip bi translated">实验室:在innerHTML接收器中使用源位置的DOM XSS</h2><div class="li l"><h3 class="bd b gy z fp lg fr fs lh fu fw dk translated">练习利用现实目标的弱点。记录你从学徒到专家的进步。看哪里…</h3></div><div class="lj l"><p class="bd b dl z fp lg fr fs lh fu fw dk translated">portswigger.net</p></div></div><div class="lk l"><div class="ll l lm ln lo lk lp jw lb"/></div></div></a></div><p id="a840" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Python脚本:<a class="ae kx" href="https://github.com/frank-leitner/portswigger-websecurity-academy/blob/main/11_cross_site_scripting_XSS/DOM_XSS_in_innerHTML_sink_using_source_location.search/script.py" rel="noopener ugc nofollow" target="_blank"> script.py </a></p><h1 id="8993" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">实验室描述</h1><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/bc04731047c396119778b887c56bcd93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wyBETNZ1kspQWyY_.png"/></div></div></figure><h1 id="0e15" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">步伐</h1><p id="db12" class="pw-post-body-paragraph jy jz iq ka b kb mt kd ke kf mu kh ki kj mv kl km kn mw kp kq kr mx kt ku kv ij bi translated">实验室应用程序是一个具有搜索功能的博客网站。搜索词包含在结果页面中。</p><p id="b987" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这不是在服务器端执行的，而是通过使用客户端JavaScript执行的:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi my"><img src="../Images/091a27ecfd8284c5596608e1971005e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*O8carzRbWzLZX-qH.png"/></div></div></figure><p id="8c22" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果提供了<code class="fe mz na nb nc b">search</code>参数，那么<code class="fe mz na nb nc b">span</code>元素的<code class="fe mz na nb nc b">innerHTML</code>将动态改变。通过使用<code class="fe mz na nb nc b">foo&lt;img src="xxx" onerror=alert(document.domain)&gt;</code>作为搜索参数来插入JavaScript，结果如下:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/d5dc05d7c472b89657ca09c59e173f16.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/format:webp/0*MYcOQTWEQu1HAfb-.png"/></div></figure><p id="adba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在页面呈现期间，图像无法加载。这又会引发JavaScript“警报”框，确认XSS漏洞，并将实验室更新为</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/860ed9eceb29b3adaa37bea6dc26adfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pj2Tim2JiOkqLcd3.png"/></div></div></figure></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><p id="4eb2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kw">原载于</em><a class="ae kx" href="https://github.com/frank-leitner/portswigger-websecurity-academy/tree/main/11_cross_site_scripting_XSS/DOM_XSS_in_innerHTML_sink_using_source_location.search" rel="noopener ugc nofollow" target="_blank"><em class="kw">https://github.com</em></a><em class="kw">。</em></p><p id="c8bc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mz na nb nc b"><a class="ae kx" href="https://medium.com/@frank.leitner/membership" rel="noopener">New to Medium? Become a Medium member to access all stories on the platform and support me at no extra cost for you!</a></code></p></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><h2 id="d4a8" class="nm lr iq bd ls nn no dn lw np nq dp ma kj nr ns me kn nt nu mi kr nv nw mm nx bi translated">来自Infosec的报道:Infosec每天都有很多内容，很难跟上。<a class="ae kx" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank">加入我们的每周简讯</a>以5篇文章、4个线程、3个视频、2个GitHub Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</h2></div></div>    
</body>
</html>