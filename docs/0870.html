<html>
<head>
<title>TryHackMe: RootMe Write-up</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TryHackMe: RootMe向上写</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/tryhackme-rootme-write-up-bf87b41e8917?source=collection_archive---------0-----------------------#2020-10-09">https://infosecwriteups.com/tryhackme-rootme-write-up-bf87b41e8917?source=collection_archive---------0-----------------------#2020-10-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/f3c69d1dfc63c9afd9c052fcbbf42e35.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*hvgYm2h8roI8BygElc4fQA.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">初级CTF</figcaption></figure><p id="565d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是一篇关于THM初级挑战<a class="ae kz" href="https://tryhackme.com/room/rrootme" rel="noopener ugc nofollow" target="_blank"> RooTMe </a>的文章。没有任何延迟，让我们连接到我们的THM OpenVPN网络，并开始黑客攻击！！！</p></div><div class="ab cl la lb hx lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="im in io ip iq"><h2 id="5b6c" class="lh li it bd lj lk ll dn lm ln lo dp lp km lq lr ls kq lt lu lv ku lw lx ly lz bi translated"><strong class="ak">任务1部署机器</strong></h2><p id="6e08" class="pw-post-body-paragraph kb kc it kd b ke ma kg kh ki mb kk kl km mc ko kp kq md ks kt ku me kw kx ky im bi translated">部署机器，您将获得您的机器IP地址。您的机器至少需要2分钟来设置。</p><h2 id="b733" class="lh li it bd lj lk ll dn lm ln lo dp lp km lq lr ls kq lt lu lv ku lw lx ly lz bi translated"><strong class="ak">任务二侦察</strong></h2><ol class=""><li id="c4c3" class="mf mg it kd b ke ma ki mb km mh kq mi ku mj ky mk ml mm mn bi translated">使用Nmap扫描您的网络</li></ol><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="1e88" class="lh li it mt b gy mx my l mz na">nmap -A &lt;machine-ip&gt;</span></pre><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nb"><img src="../Images/093ca62ee6acd46cdb7fcd59babd232f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JG-oQHoVBhsUNY_3KgKY_Q.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">Nmap扫描结果</figcaption></figure><p id="f71b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">2.有两个开放的端口。让我们看看HTTP(80)端口中有什么。</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi ng"><img src="../Images/c3fbdc783917ae11e8d15ca5b2771afa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9GgdAIrqHjdkGthYGbJhig.png"/></div></div></figure><p id="9580" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">3.它只是一个静态页面。让我们通过Gobuster工具来列举网页扩展。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="48fb" class="lh li it mt b gy mx my l mz na">gobuster dir -u http://&lt;machine-ip&gt; -w 'wordlist'</span></pre><p id="e462" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">4.打开您找到的站点扩展。它是一个上传入口。让我们试着上传一个PHP反向shell。</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nh"><img src="../Images/bd860ca5cb04becdee9d2167aa1e8ebd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*APzR_OHeP7N6QotgALzNcQ.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">上传页面</figcaption></figure><h2 id="01de" class="lh li it bd lj lk ll dn lm ln lo dp lp km lq lr ls kq lt lu lv ku lw lx ly lz bi translated"><strong class="ak">任务3获取外壳</strong></h2><p id="346e" class="pw-post-body-paragraph kb kc it kd b ke ma kg kh ki mb kk kl km mc ko kp kq md ks kt ku me kw kx ky im bi translated">1.我们得到了一些有趣的东西。我们试着上传一个PHP反向shell。你可以在这里找到一个<a class="ae kz" href="https://github.com/pentestmonkey/php-reverse-shell" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="5787" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">2.上传之前，将IP地址更改为您的系统IP并设置端口。此外，检查您的文件的扩展名是否是. php5，以获得php的新特性。</p><p id="ca94" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">3.同时打开一个新的终端，并使用Netcat监听端口1234。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="8e64" class="lh li it mt b gy mx my l mz na">nc -lvp 1234</span></pre><p id="c66f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">4.我们成功地得到了我们的壳。</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi ni"><img src="../Images/1f9a1bf5d915173b58494cd4ea18e03d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3yTzs0PnxdIvnreYnqpqKA.png"/></div></div></figure><p id="0e35" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">5.找出“user.txt”文件的路径。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="fb67" class="lh li it mt b gy mx my l mz na">find -name 'user.txt'</span></pre><p id="625f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">6.爆炸！！！我们得到了第一面旗帜。</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/5b5133f0b2bb84101b490f44ed574e00.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*MenhwDwlyrocmFzjXpc2Yg.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">user.txt标志</figcaption></figure><h2 id="34f1" class="lh li it bd lj lk ll dn lm ln lo dp lp km lq lr ls kq lt lu lv ku lw lx ly lz bi translated"><strong class="ak">任务4权限提升</strong></h2><ol class=""><li id="be7d" class="mf mg it kd b ke ma ki mb km mh kq mi ku mj ky mk ml mm mn bi translated">让我们进一步升级以获得根标志。我们可以使用<a class="ae kz" href="https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/blob/master/linPEAS/linpeas.sh" rel="noopener ugc nofollow" target="_blank"> LinPEAS </a>进行权限提升。您可以启动python本地服务器或apache2，并将文件下载到机器shell中。</li></ol><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nk"><img src="../Images/11670defc5e16b1cf5123f77063bf611.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z8R5PfVlAe7AKp-2HVuEcA.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">通过托管的apache服务器下载机器外壳中的linpeas.sh文件</figcaption></figure><p id="5dd5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">2.使文件可执行并运行它。</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nl"><img src="../Images/d634b1cfaef6112c618d1c0385590700.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IFpzHmbeJ46p2iR0xpD-Ug.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">LinPEAS.sh扫描</figcaption></figure><p id="60c5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">3.通过Python，我们可以进入根目录。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="270c" class="lh li it mt b gy mx my l mz na">python -c 'print(open("/root/root.txt").read())'</span></pre><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nm"><img src="../Images/182bfa62f121b0a2909e77a285745d13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PSL_pUhKRepfMdkaNZtGZw.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">root.txt标志</figcaption></figure></div><div class="ab cl la lb hx lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="im in io ip iq"><p id="8d12" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">做这个挑战很有趣。希望大家学到新东西:)。</p></div></div>    
</body>
</html>