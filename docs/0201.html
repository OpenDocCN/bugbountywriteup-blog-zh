<html>
<head>
<title/>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1/>
<blockquote>原文：<a href="https://infosecwriteups.com/from-security-misconfiguration-to-gaining-access-of-smtp-server-ed833e757e6e?source=collection_archive---------1-----------------------#2018-11-18">https://infosecwriteups.com/from-security-misconfiguration-to-gaining-access-of-smtp-server-ed833e757e6e?source=collection_archive---------1-----------------------#2018-11-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><p id="7ecd" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">从<a class="ae jn" href="https://www.owasp.org/index.php/Top_10-2017_A6-Security_Misconfiguration" rel="noopener ugc nofollow" target="_blank"> <strong class="ir jo">安全误配置</strong> </a>到获取SMTP服务器的访问权限</p><p id="9792" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">大家好。</p><p id="4a15" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">在本文中，我想向您展示一个安全错误配置会如何简单地危及一个公司，即使这个缺陷是在他们的测试环境中。</p><h2 id="4308" class="jp jq iq bd jr js jt dn ju jv jw dp jx ja jy jz ka je kb kc kd ji ke kf kg kh bi translated">总结:</h2><p id="2a07" class="pw-post-body-paragraph io ip iq ir b is ki iu iv iw kj iy iz ja kk jc jd je kl jg jh ji km jk jl jm ij bi translated">我可以使用亚马逊简单邮件服务提供的SMTP设置，通过任何邮件软件(如glock easymail)发送邮件。这样，我可以使用任何名称，如“support@company.com.br”或“admin@company.com.br”。</p><h2 id="5969" class="jp jq iq bd jr js jt dn ju jv jw dp jx ja jy jz ka je kb kc kd ji ke kf kg kh bi translated">什么是“安全错误配置”？</h2><p id="879d" class="pw-post-body-paragraph io ip iq ir b is ki iu iv iw kj iy iz ja kk jc jd je kl jg jh ji km jk jl jm ij bi translated">让我们直奔主题吧。基于OWASP:</p><blockquote class="kn ko kp"><p id="bc75" class="io ip kq ir b is it iu iv iw ix iy iz kr jb jc jd ks jf jg jh kt jj jk jl jm ij bi translated">安全配置错误是最常见的问题。这通常是由不安全的默认配置、不完整或临时配置、开放式云存储、错误配置的HTTP头以及包含敏感信息的详细错误消息造成的。不仅必须安全地配置所有操作系统、框架、库和应用程序，而且必须及时地对它们进行修补/升级。</p></blockquote><h2 id="83f0" class="jp jq iq bd jr js jt dn ju jv jw dp jx ja jy jz ka je kb kc kd ji ke kf kg kh bi translated">我是如何发现的:</h2><p id="6f95" class="pw-post-body-paragraph io ip iq ir b is ki iu iv iw kj iy iz ja kk jc jd je kl jg jh ji km jk jl jm ij bi translated">我从识别和映射公司的所有域开始，因为这是一家大公司，有84个域需要分析，所以我开始分别映射每个域，访问它们并手动导航，以尝试了解应用程序的工作方式。</p><p id="01c0" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">在访问了所有的网站后，我注意到有一个子域和主网站有相同的应用程序。然后，我注意到子域是一个测试基地，可能是该公司用来在他们真正去主网站之前发送新的更新。</p><h2 id="c550" class="jp jq iq bd jr js jt dn ju jv jw dp jx ja jy jz ka je kb kc kd ji ke kf kg kh bi translated">问题是这样的:</h2><p id="bab1" class="pw-post-body-paragraph io ip iq ir b is ki iu iv iw kj iy iz ja kk jc jd je kl jg jh ji km jk jl jm ij bi translated">有时，开发人员在测试库中启用了几个在生产中由于显而易见的原因永远不会公开的特性。基于这个原则，我决定运行一个<em class="kq">'</em><strong class="ir jo"><em class="kq">Dirb</em></strong><em class="kq">https://company.com.br/'</em>来检查是否有打开的目录。</p><h2 id="580c" class="jp jq iq bd jr js jt dn ju jv jw dp jx ja jy jz ka je kb kc kd ji ke kf kg kh bi translated">答对了。</h2><p id="3658" class="pw-post-body-paragraph io ip iq ir b is ki iu iv iw kj iy iz ja kk jc jd je kl jg jh ji km jk jl jm ij bi translated">phpinfo函数在那个子域上是活动的。基本上，phpinfo是一个有用的PHP函数，用于返回关于服务器上PHP环境的编译信息。这不应该是主动的，至少不应该公开。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi ku"><img src="../Images/ae7528593996a5d621b2f080a7b3c356.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gNwNTBqo2m6y13IQKmN90A.png"/></div></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">phpinfo()函数</figcaption></figure><p id="5b87" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">然后我就开始查被曝光的内容。正如你在上面的图片中看到的，我有开发postgres、mysql、smtp和许多其他应用程序所需的所有信息。我决定测试他们的SMTP服务器设置。</p><p id="e7a3" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">所以我下载了我在谷歌上找到的第一个软件，并根据php函数本身的信息进行了配置。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi lk"><img src="../Images/7925d87b2b50ca4bf58a527df539eed0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LNcvaSPcwmIPqhL5kuZ-hQ.png"/></div></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">设置smtp服务器</figcaption></figure><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi ll"><img src="../Images/4b6be1c77b2fe8a78ef7f61be87a41ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BtatS84ySExXFf-m8Xyz1g.png"/></div></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">设置SMTP服务器</figcaption></figure><p id="8800" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">我给自己发了一个测试，说“你的密码需要更改”，注意，最有趣的是:它突出显示了“由亚马逊SeS发送”:</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi ku"><img src="../Images/48a0e9e8a3a4baaf6febd41cf8ce82ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YKQucpuiQrrCbqbWu4Fd3g.png"/></div></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">收到电子邮件</figcaption></figure><p id="70e0" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">永远不要认为低级错误不会产生好结果。总是检查所有的领域，包括用你在主领域中使用的相同工具，每个领域都代表了广泛的缺陷。</p><p id="d602" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">就这样，朋友们。希望你喜欢它！</p><p id="af1c" class="pw-post-body-paragraph io ip iq ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ij bi translated">在<a class="ae jn" href="https://www.linkedin.com/in/daniel-morais-968463120/" rel="noopener ugc nofollow" target="_blank"> linkedin </a>找到我。</p></div></div>    
</body>
</html>