<html>
<head>
<title>Why RSA is NOT used to encrypt LARGE files?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么不用RSA加密大文件？</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/why-rsa-is-not-used-to-encrypt-large-files-d3172d83febd?source=collection_archive---------0-----------------------#2020-12-08">https://infosecwriteups.com/why-rsa-is-not-used-to-encrypt-large-files-d3172d83febd?source=collection_archive---------0-----------------------#2020-12-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="72c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对基于公钥的加密策略及其效率的实际理解。</p><p id="fce6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kl translated"><span class="l km kn ko bm kp kq kr ks kt di"> B </span>但是为什么PGP / GPG等加密工具有<code class="fe ku kv kw kx b">"encrypt with RSA"</code>选项呢？</p><p id="033b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们不能用它来加密大文件，这又有什么用呢？</p><p id="588b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你是说RSA没用吗？如果不是，那么在哪里使用？</p><p id="fc52" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">…在本文中，我们将尝试理解上述所有问题以及更多问题，并用一个实验和一些基本理论来支持它。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/057063e7cbb3c8d546cadc637b9c7d3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YvSpFRuXUo_qo4fjnn5q-w.png"/></div></div></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="c9e5" class="lr ls iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">基本先决条件</h1><p id="f7cf" class="pw-post-body-paragraph jn jo iq jp b jq mp js jt ju mq jw jx jy mr ka kb kc ms ke kf kg mt ki kj kk ij bi translated">假设您对RSA和公钥密码学以及一般的密码学有一些初步的了解…或者至少您以前听说过这些术语…无论如何，这里有一个超级简短的参考。</p><h2 id="7a0f" class="mu ls iq bd lt mv mw dn lx mx my dp mb jy mz na mf kc nb nc mj kg nd ne mn nf bi translated">公钥加密(非对称加密)</h2><blockquote class="ng nh ni"><p id="7502" class="jn jo nj jp b jq jr js jt ju jv jw jx nk jz ka kb nl kd ke kf nm kh ki kj kk ij bi translated"><em class="iq">公钥加密，或称非对称加密，是一种加密方案，它使用两种数学上相关但不相同的密钥——公钥和私钥。与依赖一个密钥进行加密和解密的对称密钥算法不同，每个密钥执行一个独特的功能。公钥用于加密，私钥用于解密。~</em><a class="ae nn" href="https://www.globalsign.com/en-in/ssl-information-center/what-is-public-key-cryptography" rel="noopener ugc nofollow" target="_blank">globalsign.com</a></p></blockquote><h2 id="9c18" class="mu ls iq bd lt mv mw dn lx mx my dp mb jy mz na mf kc nb nc mj kg nd ne mn nf bi translated">什么是RSA？</h2><blockquote class="ng nh ni"><p id="b7d1" class="jn jo nj jp b jq jr js jt ju jv jw jx nk jz ka kb nl kd ke kf nm kh ki kj kk ij bi translated"><strong class="jp ir"><em class="iq">RSA</em></strong><em class="iq">(</em><strong class="jp ir"><em class="iq">Rivest–sha mir–ad leman</em></strong><em class="iq">)是一种广泛用于安全数据传输的公钥密码系统。它也是最古老的之一。缩写</em><strong class="jp ir"><em class="iq">RSA</em></strong><em class="iq">来源于罗恩·里维斯特、阿迪·萨莫尔和伦纳德·阿德曼的姓氏，他们在1977年公开描述了该算法</em>。~ <a class="ae nn" href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)" rel="noopener ugc nofollow" target="_blank">维基百科</a></p></blockquote></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi no"><img src="../Images/c8170c78f935e01ecb282ea23ff6def6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*Qs2hNe3N2U9dIYy8yU5_7g.png"/></div><figcaption class="np nq gj gh gi nr ns bd b be z dk translated">图片来源:<a class="ae nn" href="https://www.google.com/search?q=nicolas+cage" rel="noopener ugc nofollow" target="_blank">尼古拉斯·凯奇</a></figcaption></figure><p id="33d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kl translated"><span class="l km kn ko bm kp kq kr ks kt di">为了</span>理解这一点，我在python3中准备了一个小而简单又可爱的实验。</p><p id="fa96" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是我们要做的，</p><ol class=""><li id="30ea" class="nt nu iq jp b jq jr ju jv jy nv kc nw kg nx kk ny nz oa ob bi translated">为这个演示创建一个文件(相对较小，725 KB。)和“随机”可打印的ASCII单行数据。(本演示741600字。)</li><li id="a243" class="nt nu iq jp b jq oc ju od jy oe kc of kg og kk ny nz oa ob bi translated">对<code class="fe ku kv kw kx b">AES</code>、<code class="fe ku kv kw kx b">RSA </code>和<code class="fe ku kv kw kx b">AES+RSA</code>做如下程序(现在刚看完，后面会解释<code class="fe ku kv kw kx b">AES+RSA</code>是什么意思):-</li></ol><p id="5331" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ku kv kw kx b"><strong class="jp ir">|(i)</strong> Generate Keys for Encryption <strong class="jp ir">|(ii)</strong> Encrypt File <strong class="jp ir">|(iii)</strong> Decrypt File <strong class="jp ir">|(iv)</strong> Check MD5 hash of Original File v/s Decrypted file (should match)</code></p><p id="748d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.记录上述每个步骤和整个程序的运行时间= RT</p><p id="9f98" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.取平均值。每个加密程序连续运行5次，然后进行比较。</p><p id="181e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">5.提供结果和一些理论依据。</p><h1 id="c968" class="lr ls iq bd lt lu oh lw lx ly oi ma mb mc oj me mf mg ok mi mj mk ol mm mn mo bi translated">实验</h1><h2 id="f7c2" class="mu ls iq bd lt mv mw dn lx mx my dp mb jy mz na mf kc nb nc mj kg nd ne mn nf bi translated">加密参数详细信息</h2><p id="415c" class="pw-post-body-paragraph jn jo iq jp b jq mp js jt ju mq jw jx jy mr ka kb kc ms ke kf kg mt ki kj kk ij bi translated"><code class="fe ku kv kw kx b">RSA: Key_Length = 1024 bits <strong class="jp ir">|</strong>Mode = PKCS1_v1_5 <strong class="jp ir">|</strong>Encoding = base64</code></p><p id="0f8a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ku kv kw kx b">AES: checksum = SHA256 <strong class="jp ir">|</strong>Length = 32 <strong class="jp ir">|</strong>Salted = Yes <strong class="jp ir">|</strong>Iteration = 1,00,000 <strong class="jp ir">|</strong>Mode=Cipher Block Chaining (CBC)</code></p><h2 id="3273" class="mu ls iq bd lt mv mw dn lx mx my dp mb jy mz na mf kc nb nc mj kg nd ne mn nf bi translated">密码</h2><p id="6fef" class="pw-post-body-paragraph jn jo iq jp b jq mp js jt ju mq jw jx jy mr ka kb kc ms ke kf kg mt ki kj kk ij bi translated">如果你想在你的电脑上做这个实验(你应该这样做)，这是我的GitHub Repo，包含所有的代码和一个学术实验记录，这是我为了评分而总结的👀</p><div class="om on gp gr oo op"><a href="https://github.com/Saket-Upadhyay/RSA-Large-File-Efficiency-Compare" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd ir gy z fp ou fr fs ov fu fw ip bi translated">saket-Upadhyay/RSA-大文件-效率-比较</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">简单的Python3实验，观察RSA对大文件的效率，以及为什么PGP/GPG的方法更高效…</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">github.com</p></div></div><div class="oy l"><div class="oz l pa pb pc oy pd li op"/></div></div></a></div><h2 id="8b1b" class="mu ls iq bd lt mv mw dn lx mx my dp mb jy mz na mf kc nb nc mj kg nd ne mn nf bi translated">结果</h2><p id="4d3f" class="pw-post-body-paragraph jn jo iq jp b jq mp js jt ju mq jw jx jy mr ka kb kc ms ke kf kg mt ki kj kk ij bi translated">仅RSA</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi pe"><img src="../Images/4cd0026acf44cd3aef809bf06b44cbdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DWUDx1btcMmPG41sTI6Bdg.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk translated">RSA only批量加密的结果计时为<strong class="bd lt"> 33.85秒！</strong></figcaption></figure><p id="72c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">仅AES</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi pe"><img src="../Images/6c7c0c1a4a27726a2621ba165612945c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3MRO9OyviVY2ebEfPoHgPw.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk translated">仅AES文件加密的结果时钟为<strong class="bd lt"> 0.32秒！</strong></figcaption></figure><h2 id="e881" class="mu ls iq bd lt mv mw dn lx mx my dp mb jy mz na mf kc nb nc mj kg nd ne mn nf bi translated">对这场混乱的解释？是的。</h2><p id="b8df" class="pw-post-body-paragraph jn jo iq jp b jq mp js jt ju mq jw jx jy mr ka kb kc ms ke kf kg mt ki kj kk ij bi translated">最后，RSA中的大部分东西归结为一件事，SDMDPN…</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi pf"><img src="../Images/b622ebdc87ad1e2a1a03e6bf5aefac3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NsjYVpbs7Z_Tnm1btLjSyw.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk translated">图片来源:<a class="ae nn" href="https://www.google.com/search?q=Optimus+Prime" rel="noopener ugc nofollow" target="_blank">擎天柱</a>(汽车机器人公司团队负责人)</figcaption></figure><p id="732e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">简单地说，RSA是一种非常耗费资源的算法，它需要时间来生成RSA密钥并对这些巨大的素数进行运算。</p><p id="67ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">随着数据量的增加，处理负载也会增加，整个过程最终会花费太多时间来完成。</p><blockquote class="ng nh ni"><p id="30b5" class="jn jo nj jp b jq jr js jt ju jv jw jx nk jz ka kb nl kd ke kf nm kh ki kj kk ij bi translated"><em class="iq">同样，“根据经验，你只能加密</em><strong class="jp ir"><em class="iq"/></strong><em class="iq">和</em> <strong class="jp ir"> <em class="iq"> RSA密钥</em> </strong> <em class="iq">一样长的数据。所以，如果你有一个4096位的</em> <strong class="jp ir"> <em class="iq"> RSA密钥</em> </strong> <em class="iq">，你就只能</em> <strong class="jp ir"> <em class="iq">加密最长4096位的</em> </strong> <em class="iq">消息“~</em><a class="ae nn" href="https://security.stackexchange.com/questions/33434/rsa-maximum-bytes-to-encrypt-comparison-to-aes-in-terms-of-security#:~:text=Given%20a%20message%20signed%20by,up%20to%204096%20bits%20long." rel="noopener ugc nofollow" target="_blank"/></p></blockquote><p id="e637" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">另一方面，AES是一种简单的对称加密算法。它不玩这么大的素数，最终快速加密数据。</p><p id="d606" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">而是AES或任何其他对称密钥加密。与RSA的安全性和它的反暴力立场相比是超级弱的。</p><h1 id="37ae" class="lr ls iq bd lt lu oh lw lx ly oi ma mb mc oj me mf mg ok mi mj mk ol mm mn mo bi translated">速度和安全性的平衡(AES+RSA)</h1><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi pg"><img src="../Images/fbe0a35c1cae06fc39e92dd45873240c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eIRJXLFi_pQcnqWI6I_kjQ.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk translated">画面中:已故先生<a class="ae nn" href="https://www.google.com/search?q=thanos" rel="noopener ugc nofollow" target="_blank">灭霸</a></figcaption></figure><p id="a177" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嗯，PKC从来没有打算加密大文件，相反，我们用它来加密AES的加密密钥。因此，我们使用良好的对称加密来加密大型数据文件，然后使用强公钥加密来加密用于加密大型文件的对称加密密钥，我们共享这个加密的对称密钥，以及可以用接收者的私钥解密的加密文件。</p><p id="50a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是所有加密工具所说的<code class="fe ku kv kw kx b">"Encrypt with RSA"</code></p><p id="5fba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是我们实验中同样的表现:</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ph"><img src="../Images/14f0428fef179f216546de13cdb0329e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N3Wn4vZSAqCL0z2iKTvw7w.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk translated">AES+RSA批量+密钥加密的结果<strong class="bd lt"> 1.09秒！</strong></figcaption></figure><h2 id="636a" class="mu ls iq bd lt mv mw dn lx mx my dp mb jy mz na mf kc nb nc mj kg nd ne mn nf bi translated">平均运行时间观察</h2><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi pi"><img src="../Images/c42cc8283df1b2affcbc5fda80995383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XkG5y4pRCqFC2mrs4gBURg.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk translated">图片Src:我的大学作业文档:-)</figcaption></figure><h1 id="fca7" class="lr ls iq bd lt lu oh lw lx ly oi ma mb mc oj me mf mg ok mi mj mk ol mm mn mo bi translated">结论</h1><p id="8385" class="pw-post-body-paragraph jn jo iq jp b jq mp js jt ju mq jw jx jy mr ka kb kc ms ke kf kg mt ki kj kk ij bi translated">我们可以从上面的Mean RT表中看出为什么标准方法更好，RSA处理大文件的性能有多差。</p><p id="6ca0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是我们不直接在大文件上使用RSA的原因。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h2 id="d848" class="mu ls iq bd lt mv mw dn lx mx my dp mb jy mz na mf kc nb nc mj kg nd ne mn nf bi translated"><strong class="ak">奖励内容</strong></h2><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/72c4a2719c55560e7f25df3e4f1477ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*RCy53C9TF2s_fSai-nnl4Q.png"/></div></figure><h2 id="497e" class="mu ls iq bd lt mv mw dn lx mx my dp mb jy mz na mf kc nb nc mj kg nd ne mn nf bi translated">国际纸业公司</h2><p id="15ea" class="pw-post-body-paragraph jn jo iq jp b jq mp js jt ju mq jw jx jy mr ka kb kc ms ke kf kg mt ki kj kk ij bi translated">但是如果你说RSA不能加密超过密钥大小的数据，那么我们如何用它加密文件呢？</p><p id="b57c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嗯，我没有加密整个文件，而是将文件划分为<code class="fe ku kv kw kx b"><strong class="jp ir">86</strong> <strong class="jp ir">char</strong>acters</code>个块，然后逐行存储在加密文件中，然后解密，我们逐行读取文件，然后解密并连接结果以获得原始数据。😬</p></div></div>    
</body>
</html>