<html>
<head>
<title>Information disclosure via api misconfiguration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过api错误配置泄露信息</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/information-disclosure-via-api-misconfiguration-c05ed327f9d2?source=collection_archive---------1-----------------------#2021-08-28">https://infosecwriteups.com/information-disclosure-via-api-misconfiguration-c05ed327f9d2?source=collection_archive---------1-----------------------#2021-08-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/></div><div class="ab cl jn jo hu jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="ij ik il im in"><p id="18ff" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">祝你平安</p><p id="5219" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">你好，神奇黑客我叫<a class="ae ks" href="https://twitter.com/Rizwan_SiDdiqu1" rel="noopener ugc nofollow" target="_blank"> Rizwan Siddiqui </a>我是一名Bug猎人。这是我的第一篇文章，希望你们会喜欢并从中学习到新的东西。让我们开始讨论我是如何发现这个API错误配置的。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi kt"><img src="../Images/2a0d2527004a8dc8559bbca5909ac974.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*3uqGi17qP-PYuNOkEhfPGQ.gif"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">我们走吧</figcaption></figure><p id="c949" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="lf">场景:web应用是一些出售web应用的汽车或公共汽车，那里也有与工作相关的东西。我尝试文件上传XSS，但没有工作，然后我去id.target.com有一些配置文件类型的功能，我可以上传我的文件，有我的登录日志我的IP地址谁登录到我的帐户通过哪个IP。我又尝试了一些XSS文件上传</em>的</strong>漏洞但是没有效果</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="lg lh l"/></div></figure><p id="c160" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在那之后，我想我应该放弃并改变我的目标，但在id.target.com有一个api端点正在获取我的个人信息，如我的ip地址和姓名等。那一次，我认为我应该在这里模糊化，然后我尝试模糊化，我注意到这是经过验证的端点，我应该用我的cookie模糊化，这样我可以找到一些果汁信息，我开始模糊化，就像这样ffuf-u<a class="ae ks" href="https://id.target.com/api/FUZZ" rel="noopener ugc nofollow" target="_blank">https://id.target.com/api/FUZZ</a>-w wordlist-c COOKIE _在这里过了一段时间，它给了我<a class="ae ks" href="https://id.target.com/api/work" rel="noopener ugc nofollow" target="_blank">https://id.target.com/api/work</a>，猜猜在api端点中有一些错误配置，它泄漏了公司员工数据，比如公司工作描述配置文件中的职位 pic的时候，我以为这只是一些基本的或某人的个人信息，但我错了，当我把它发送到repeater标签，我发送请求，一次又一次，他们给我新的员工数据。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi li"><img src="../Images/2576f50bd026bb17ca6ec5511141d106.png" data-original-src="https://miro.medium.com/v2/resize:fit:1394/format:webp/1*jDpmwHMnbAfllPVyW-TN6Q.png"/></div></figure><p id="f119" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">再现</strong>的步骤:</p><ol class=""><li id="75c6" class="lj lk iq jw b jx jy kb kc kf ll kj lm kn ln kr lo lp lq lr bi translated">使用您的凭证登录id.target.com。</li><li id="b124" class="lj lk iq jw b jx ls kb lt kf lu kj lv kn lw kr lo lp lq lr bi translated">打开burp suite转发请求，直到您看到这样的请求:</li></ol><pre class="ku kv kw kx gt lx ly lz ma aw mb bi"><span id="7f0b" class="mc md iq ly b gy me mf l mg mh">GET /api/personal HTTP 1.1<br/>HOST: id.target.com<br/>Cookie : JWT TOKEN<br/>Accept: application/json</span></pre><p id="bdd6" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">3.只要去掉“个人”，加上“工作”，就能看到神奇之处。</p><p id="1d4b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">外卖:</strong></p><p id="de5c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果有一个API端点，总是用你的cookies模糊。永远不要失去希望。</p></div></div>    
</body>
</html>