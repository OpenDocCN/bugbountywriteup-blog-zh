<html>
<head>
<title>A Tale of 2nd $xxx Bounty from Facebook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">来自脸书的第二笔$xxx赏金的故事</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/a-tale-of-2nd-xxx-bounty-ability-to-gain-persistence-on-facebook-events-as-an-unremovable-9408338ccf8f?source=collection_archive---------1-----------------------#2021-02-10">https://infosecwriteups.com/a-tale-of-2nd-xxx-bounty-ability-to-gain-persistence-on-facebook-events-as-an-unremovable-9408338ccf8f?source=collection_archive---------1-----------------------#2021-02-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8f43" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">作为不可移除的联合主办方，能够在脸书活动中获得持久性。</h2></div><p id="99fb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi lb translated"><span class="l lc ld le bm lf lg lh li lj di">T</span><em class="lk">his</em><strong class="kh ir"><em class="lk">write up</em></strong><em class="lk">描述了关于</em> <strong class="kh ir"> <em class="lk">脸书</em> </strong> <em class="lk">的一个bug/安全问题，其中脸书页面的一个</em><strong class="kh ir"><em class="lk">Admin</em></strong><em class="lk">在他的页面上创建了一个事件，但是管理员(事件的主持人)无法删除一个恶意用户，该用户有权对该事件执行所有共同主持人操作编辑/删除。然而，这个问题已经解决，并根据负责任的披露政策予以公布。</em></p><p id="01bf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大家好，</p><p id="d6ac" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我是来自尼泊尔的Kunjan Nayak，我是昆虫赏金领域的新手。今天我将描述我的第14份，即第2份有效报告，这是一个逻辑错误，作为初学者，我们必须尝试寻找逻辑错误。我只是在对FB事件进行一些基本的测试，并意外地发现了一个不寻常的行为，当我注意到我不在共同主持人名单中，但我仍然拥有所有共同主持人的权限。这份报告得到了FB的积极回应，并导致了奖金的决定。</p><h1 id="56a9" class="ll lm iq bd ln lo lp lq lr ls lt lu lv jw lw jx lx jz ly ka lz kc ma kd mb mc bi translated"><strong class="ak">场景</strong></h1><p id="29ee" class="pw-post-body-paragraph kf kg iq kh b ki md jr kk kl me ju kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">当脸书页面的管理员在页面上创建一个事件时，他将成为该事件的主要主持人。主持人可以为该事件添加多个共同主持人(即页面和简档)。当主机添加一个页面作为合作主机(页面在接受邀请后自动成为该事件的管理员)时。</p><p id="10d2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但问题是，一个恶意的共同主机页面可以创建一个场景，其中他能够成为不可删除的共同主机，并永久获得该事件的持久性，因为脸书没有在共同主机页面被删除时从事件中删除共同主机页面的管理员，并且仍然在FB4A和移动版本的脸书上假设被删除页面的管理员为内部共同主机。</p><h1 id="6a49" class="ll lm iq bd ln lo lp lq lr ls lt lu lv jw lw jx lx jz ly ka lz kc ma kd mb mc bi translated"><strong class="ak">影响</strong></h1><p id="5b13" class="pw-post-body-paragraph kf kg iq kh b ki md jr kk kl me ju kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">此错误允许已删除的共同主持人页面的管理员在没有共同主持人角色的情况下编辑事件，并阻止所有者/管理员删除它们。</p><h2 id="9e21" class="mi lm iq bd ln mj mk dn lr ml mm dp lv ko mn mo lx ks mp mq lz kw mr ms mb mt bi translated"><strong class="ak"> <em class="mu">为什么会被认为是安全问题？</em> </strong></h2><p id="d70a" class="pw-post-body-paragraph kf kg iq kh b ki md jr kk kl me ju kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><em class="lk">创建事件的管理员有权修改/删除和移除任何用户，包括联合主机，如果联合主机变得不可移除，他可以执行恶意活动，而不会被管理员移除，因为联合主机通过利用该漏洞变得隐藏，这导致了安全问题。</em></p><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi mv"><img src="../Images/c6765e0ccf5573ab7d689f57b1d29fe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*V7N9BOfdJcgLHwV0"/></div></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk translated">利用漏洞攻击者改变了事件名称</figcaption></figure><p id="de29" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">设置</strong></p><p id="74c7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一页的用户管理员(受害者)</p><p id="40e3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二页的用户二管理员(攻击者使用FB4A应用程序执行攻击)</p><h2 id="a6bf" class="mi lm iq bd ln mj mk dn lr ml mm dp lv ko mn mo lx ks mp mq lz kw mr ms mb mt bi translated"><strong class="ak">再现步骤</strong></h2><ol class=""><li id="b0d8" class="nl nm iq kh b ki md kl me ko nn ks no kw np la nq nr ns nt bi translated">userOne (admin)在他的pageOne上创建了一个事件，并将pageTwo添加为该事件的共同主持人。</li><li id="d8de" class="nl nm iq kh b ki nu kl nv ko nw ks nx kw ny la nq nr ns nt bi translated">以用户二的身份登录，收到联合主持人角色的邀请，显示为“第一页被邀请参加第二页的事件一”打开通知。</li><li id="5580" class="nl nm iq kh b ki nu kl nv ko nw ks nx kw ny la nq nr ns nt bi translated">userTwo将保存eventOne，然后接受邀请。现在，为了成为隐藏的共同主持人，用户2删除了他的整个页面2，成为永久不可删除的。</li></ol><p id="3c37" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">(<em class="lk">这是一个测试页面，所以我们可以很容易地删除该页面，但在实践中，攻击者联合主机不会删除他的整个页面，因为这使得攻击非常有限，攻击者有联合主机的角色，他可以简单地创建一个假页面，并将该假页面作为联合主机添加到隐藏页面中，这样更实用。</em>)</p><p id="142d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">4.由于pageTwo不再是联合主持人，而是用户2，因此在从FB4A导航eventOne(在步骤3中保存)时，他仍然可以看到事件“编辑”按钮，并且他可以删除包括eventOne在内的任何讨论帖子。</p><figure class="mw mx my mz gt na gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/0b4715661ed4bfce42de6eae5061fa7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*le8ibggmJLzsvBMOxWbfcw.png"/></div></figure><figure class="mw mx my mz gt na gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/b3b0262fd78f179b67066211fc78df94.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*YgwTK1UyfzA8cADZv1Ce0g.png"/></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk translated">恶意管理员拥有编辑/删除权限。</figcaption></figure><p id="9d62" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lk">实际上，从事件中删除已删除的联合主机页面是不可能的，FB4A仍然认为已删除页面的管理员是内部联合主机，因此用户二是不朽的，仍然可以调节事件一。</em></p><h1 id="7d69" class="ll lm iq bd ln lo lp lq lr ls lt lu lv jw lw jx lx jz ly ka lz kc ma kd mb mc bi translated"><strong class="ak">时间线</strong></h1><p id="37b4" class="pw-post-body-paragraph kf kg iq kh b ki md jr kk kl me ju kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">2020年9月2日:发送报告</p><p id="7b1c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2020年9月15日:进一步解释后预判。</p><p id="54f4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2020年10月2日:分庭</p><p id="d0ff" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2020年10月15日:通过给出无效原因，作为信息性关闭。</p><p id="b4c8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2020年10月15日:反对该决定，称这不是关闭报告的有效理由。</p><p id="90f1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2020年11月13日:再次显示进一步的影响。</p><p id="4ae2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2020年1月8日:由脸书确定。</p><p id="0faf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2021年1月13日:悬赏。</p><p id="264c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个问题需要大约4个月的时间来完成整个过程，在这个过程中交换了近35封电子邮件。即使在报告被多次关闭后，我仍然设法使其成为有效问题，并且FB获得了<strong class="kh ir"> $xxx </strong>奖金:)。但是，再现该问题需要共同主持人角色，因此，该问题的影响有限。</p><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi oa"><img src="../Images/bac6c49d1db18df3def244c62e0286f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HpJs5-jkP-2Vdp3God_wQw.png"/></div></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk translated">赏金奖励通知</figcaption></figure><h2 id="50cb" class="mi lm iq bd ln mj mk dn lr ml mm dp lv ko mn mo lx ks mp mq lz kw mr ms mb mt bi translated">这是我的第一篇Bug Bounty文章，很抱歉出现了语法错误。感谢您花时间阅读关于FB上一个基本漏洞的文章。</h2><p id="f545" class="pw-post-body-paragraph kf kg iq kh b ki md jr kk kl me ju kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">一会儿见；)在下一篇文章中，我在脸书的第一个有效的bug和我在脸书的第一个有效的bug |在同一份报告中产生了$xxx+$xxx+$xxxx" 三笔奖金。</p><p id="a848" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以在<a class="ae ob" href="https://www.facebook.com/kunjan.nayak.1" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"/></a><strong class="kh ir"/>与<a class="ae ob" href="https://twitter.com/kunjannayak5" rel="noopener ugc nofollow" target="_blank"> t <strong class="kh ir"> witter </strong> </a>联系我，分享相关东西的更新。</p></div></div>    
</body>
</html>