<html>
<head>
<title>How I was able to find multiple vulnerabilities of a Symfony Web Framework web application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我是如何发现Symfony Web Framework web应用程序的多个漏洞的</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/how-i-was-able-to-find-multiple-vulnerabilities-of-a-symfony-web-framework-web-application-2b82cd5de144?source=collection_archive---------2-----------------------#2022-01-23">https://infosecwriteups.com/how-i-was-able-to-find-multiple-vulnerabilities-of-a-symfony-web-framework-web-application-2b82cd5de144?source=collection_archive---------2-----------------------#2022-01-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="19ff" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">仅通过侦察就在5分钟内发现了高严重性漏洞。在使用Symfony web framework的web应用程序上发现多个漏洞，启用了Symfony profiler/debug模式。</h2></div><p id="db1f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"><em class="lb">【bi-SMI llāhi r-raḥmāni r-raḥīmi(奉真主之名)</em> </strong></p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="73cb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你好！漂亮的人，</p><p id="3b3c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我是阿比德·艾哈迈德，网络安全专业的学生和职业黑客。今天我将解释我是如何在一个使用Symfony web框架的Web应用程序上发现多个漏洞的，该框架启用了Symfony profiler/debug模式。</p><h1 id="92f7" class="lj lk iq bd ll lm ln lo lp lq lr ls lt jw lu jx lv jz lw ka lx kc ly kd lz ma bi translated">了解Symfony Profiler和调试组件</h1><p id="5695" class="pw-post-body-paragraph kf kg iq kh b ki mb jr kk kl mc ju kn ko md kq kr ks me ku kv kw mf ky kz la ij bi translated">Symfony web框架有一个特性叫做Symfony Profiler。此探查器组件只能在启用调试模式时使用。这是一个转折。Symfony web框架要安全得多，但是启用调试模式会使这个框架非常容易受到攻击。symfony web profiler组件暴露了攻击者可能滥用的web应用程序的敏感信息。</p><h2 id="e6e1" class="mg lk iq bd ll mh mi dn lp mj mk dp lt ko ml mm lv ks mn mo lx kw mp mq lz mr bi translated">那为什么开发者要启用调试组件呢？</h2><p id="4deb" class="pw-post-body-paragraph kf kg iq kh b ki mb jr kk kl mc ju kn ko md kq kr ks me ku kv kw mf ky kz la ij bi translated">调试组件提供了简化PHP代码调试的工具。它提供了几个工具来帮助调试PHP代码。这个组件在开发阶段对开发者帮助很大。默认情况下，Symfony提供了三种环境，称为开发、测试和生产环境。Symfony强烈建议在生产环境中禁用profiler工具。但有时，开发人员会忘记这一点，从而使web应用程序变得易受攻击。</p><h1 id="26b5" class="lj lk iq bd ll lm ln lo lp lq lr ls lt jw lu jx lv jz lw ka lx kc ly kd lz ma bi translated">我如何发现漏洞(一步一步)</h1><p id="17cb" class="pw-post-body-paragraph kf kg iq kh b ki mb jr kk kl mc ju kn ko md kq kr ks me ku kv kw mf ky kz la ij bi translated">【https://redacted.com】让我们假设目标站点是<a class="ae ms" href="https://redacted.com" rel="noopener ugc nofollow" target="_blank"><em class="lb"/></a><em class="lb">。我在目标(</em><a class="ae ms" href="https://sub.redacted.com" rel="noopener ugc nofollow" target="_blank"><em class="lb">https://sub.redacted.com</em></a><em class="lb">)的一个子域上发现了这个漏洞。</em></p><p id="0a1a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi mt translated"><span class="l mu mv mw bm mx my mz na nb di">在</span>首先，我浏览了子域，查看了使用了哪些web技术。使用<a class="ae ms" href="https://chrome.google.com/webstore/detail/wappalyzer-technology-pro/gppongmhjkpfnbhagpmjfkannfbllamg" rel="noopener ugc nofollow" target="_blank"> Wappalyzer </a>插件，我发现<a class="ae ms" href="https://sub.redacted.com" rel="noopener ugc nofollow" target="_blank">https://sub.redacted.com</a>使用了“Symfony”网络框架。</p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/d0aa436adb1226f87a7bfe8e86987ffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*_OeGyPDN39uvK9OolyCq4Q.png"/></div></figure><p id="cf25" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi">‎</p><p id="2921" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我进入资产发现阶段。最初，我试图用FFUF模糊目录。我发现了一个有趣的文件“app_dev.php”。它表示Symfony可能启用了调试模式。</p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><div class="gh gi nk"><img src="../Images/4ca931737e06ba2bc38b9d1099e0307c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XVWE-paVoINBOvmiYWt6kA.jpeg"/></div></div></figure><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><div class="gh gi np"><img src="../Images/358bc1b7348c267f7d032c502a6a41c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gw_fcrEO0dfhocYGPUbanw.png"/></div></div></figure><p id="c6d5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi">‎</p><p id="94e5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们在浏览器上检查一下。每当我浏览<em class="lb">“https://sub . redated . com/app _ dev . PHP”时，</em>发现调试模式已启用，并获得一个<strong class="kh ir"> <em class="lb"> profiler令牌</em> </strong>来访问<strong class="kh ir"> Symfony Profiler </strong>。另外，我得到了<strong class="kh ir"> phpinfo </strong>文件的位置。</p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><div class="gh gi nq"><img src="../Images/8c909c8b067566f3d7d7810f1f99564e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R7CDS8a674XSOeItuy_psw.png"/></div></div></figure><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/271a6c21ffbcb4422ca91f691397f046.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/1*cl0wKxeLjjuRRcBOa67tzw.png"/></div></figure><div class="nd ne nf ng gt ab cb"><figure class="ns nh nt nu nv nw nx paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><img src="../Images/a5588290fc8e8adc02c78d53c221b6a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*4rwG2WGet8xrEz6cmZQLfw.png"/></div></figure><figure class="ns nh ny nu nv nw nx paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><img src="../Images/8cf955da45d360984e47c4f38e32485b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1130/format:webp/1*13KF9Fq-QYNtO1T9loyvhg.png"/></div></figure></div><p id="00e8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi">‎</p><p id="2b5d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">直到现在，我的发现的严重性是中等。我知道Symfony调试工具栏允许读取可能暴露敏感信息的文件。所以，我试着多挖一些来增加严重性。然后我研究了一些文章，阅读了Symfony web框架文档。我找到了Symfony版本数据库默认的配置文件位置，是<strong class="kh ir"><em class="lb">app/config/parameters . yml</em></strong></p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><div class="gh gi nz"><img src="../Images/23025e15ed8dd489c160f63029990bef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Af2kPt_qH04lhN5U8rwYjA.png"/></div></div><figcaption class="oa ob gj gh gi oc od bd b be z dk translated"><strong class="bd ll">Symfony 3.4版配置文档(</strong><a class="ae ms" href="https://symfony.com/doc/3.4/best_practices/configuration.html" rel="noopener ugc nofollow" target="_blank"><strong class="bd ll">)https://Symfony . com/doc/3.4/best _ practices/configuration . html</strong></a><strong class="bd ll">)</strong></figcaption></figure><p id="add1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi">‎</p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><div class="gh gi oe"><img src="../Images/2b00f14adbaad9fbe5a8c32f1bd4986e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fUmZVp6k17Wcm6Qov--5eg.png"/></div></div></figure><p id="255d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我试着打开配置文件，嘣。我已经找到了数据库和邮件服务器凭证。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="4438" class="mg lk iq bd ll mh mi dn lp mj mk dp lt ko ml mm lv ks mn mo lx kw mp mq lz mr bi translated"><strong class="ak">影响</strong></h2><p id="2c6e" class="pw-post-body-paragraph kf kg iq kh b ki mb jr kk kl mc ju kn ko md kq kr ks me ku kv kw mf ky kz la ij bi translated">暴露凭据的影响具有广泛的后果，因为这些凭据可用于数据泄露、系统破坏、品牌声誉损失以及财务损失。</p><h2 id="93de" class="mg lk iq bd ll mh mi dn lp mj mk dp lt ko ml mm lv ks mn mo lx kw mp mq lz mr bi translated">减轻</h2><p id="3537" class="pw-post-body-paragraph kf kg iq kh b ki mb jr kk kl mc ju kn ko md kq kr ks me ku kv kw mf ky kz la ij bi translated">通过将APP_DEBUG设置为false来禁用调试模式。生产环境中应禁用调试模式。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="ddcc" class="lj lk iq bd ll lm of lo lp lq og ls lt jw oh jx lv jz oi ka lx kc oj kd lz ma bi translated">ffuf.sh</h1><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><div class="gh gi ok"><img src="../Images/66c4e4075dd6b6fc67415dae4a88564f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DLN6za2DVqeC27KXsm6QYQ.png"/></div></div></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="51ad" class="lj lk iq bd ll lm of lo lp lq og ls lt jw oh jx lv jz oi ka lx kc oj kd lz ma bi translated"><strong class="ak">温馨提示:</strong></h1><blockquote class="ol om on"><p id="b835" class="kf kg lb kh b ki kj jr kk kl km ju kn oo kp kq kr op kt ku kv oq kx ky kz la ij bi translated">如果你找到了一个使用Symfony web框架的web应用程序，不要忘记检查调试模式和profiler。这可能是开发人员忘记禁用它。</p></blockquote><ul class=""><li id="363a" class="or os iq kh b ki kj kl km ko ot ks ou kw ov la ow ox oy oz bi translated">https://example.com/_profiler</li><li id="8c51" class="or os iq kh b ki pa kl pb ko pc ks pd kw pe la ow ox oy oz bi translated">https://example.com/app_dev.php/_profiler</li><li id="5b66" class="or os iq kh b ki pa kl pb ko pc ks pd kw pe la ow ox oy oz bi translated">https://example.com/app_dev.php</li></ul></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="0e56" class="lj lk iq bd ll lm of lo lp lq og ls lt jw oh jx lv jz oi ka lx kc oj kd lz ma bi translated">阅读更多信息以了解:</h1><div class="pf pg gp gr ph pi"><a href="https://symfony.com/doc/4.4/configuration/front_controllers_and_kernel.html#debug-mode" rel="noopener  ugc nofollow" target="_blank"><div class="pj ab fo"><div class="pk ab pl cl cj pm"><h2 class="bd ir gy z fp pn fr fs po fu fw ip bi translated">了解前端控制器、内核和环境如何协同工作(Symfony 4.4文档)</h2><div class="pp l"><h3 class="bd b gy z fp pn fr fs po fu fw dk translated">配置环境部分解释了Symfony如何使用环境来运行应用程序的基础…</h3></div><div class="pq l"><p class="bd b dl z fp pn fr fs po fu fw dk translated">symfony.com</p></div></div><div class="pr l"><div class="ps l pt pu pv pr pw ni pi"/></div></div></a></div></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="5da8" class="lj lk iq bd ll lm of lo lp lq og ls lt jw oh jx lv jz oi ka lx kc oj kd lz ma bi translated">🔈 🔈Infosec Writeups正在组织其首次虚拟会议和网络活动。如果你对信息安全感兴趣，这是最酷的地方，有16个令人难以置信的演讲者和10多个小时充满力量的讨论会议。查看更多详情并在此注册。</h1><div class="pf pg gp gr ph pi"><a href="https://iwcon.live/" rel="noopener  ugc nofollow" target="_blank"><div class="pj ab fo"><div class="pk ab pl cl cj pm"><h2 class="bd ir gy z fp pn fr fs po fu fw ip bi translated">IWCon2022 - Infosec书面报告虚拟会议</h2><div class="pp l"><h3 class="bd b gy z fp pn fr fs po fu fw dk translated">与世界上最优秀的信息安全专家建立联系。了解网络安全专家如何取得成功。将新技能添加到您的…</h3></div><div class="pq l"><p class="bd b dl z fp pn fr fs po fu fw dk translated">iwcon.live</p></div></div><div class="pr l"><div class="px l pt pu pv pr pw ni pi"/></div></div></a></div></div></div>    
</body>
</html>