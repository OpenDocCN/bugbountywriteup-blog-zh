<html>
<head>
<title>Vulnhub Write-up FristiLeaks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vulnhub向上写FristiLeaks</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/vulnhub-write-up-fristileaks-54b8708f7cbb?source=collection_archive---------1-----------------------#2020-03-26">https://infosecwriteups.com/vulnhub-write-up-fristileaks-54b8708f7cbb?source=collection_archive---------1-----------------------#2020-03-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="c413" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">这是来自</em><a class="ae km" href="https://www.vulnhub.com/" rel="noopener ugc nofollow" target="_blank"><em class="kl">VulnHub</em></a><em class="kl">的机器</em><a class="ae km" href="https://www.vulnhub.com/entry/fristileaks-13,133/" rel="noopener ugc nofollow" target="_blank"><em class="kl">fristileaks</em></a><em class="kl">的特写。</em></p><h1 id="c589" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">摘要</h1><p id="f9ed" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">FristiLeaks机器是一个简单的机器，通过利用上传功能拥有低权限外壳，并在sudo的帮助下获得根权限。机器设计的很好，几乎没有兔子洞，对新手来说不错。</p><blockquote class="lq lr ls"><p id="4850" class="jn jo kl jp b jq jr js jt ju jv jw jx lt jz ka kb lu kd ke kf lv kh ki kj kk ij bi translated">机器作者:<a class="ae km" href="https://twitter.com/Ar0xA" rel="noopener ugc nofollow" target="_blank"> Ar0xA </a> <br/>机器类型:Cent OS(Linux)</p></blockquote><h1 id="931c" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">专有技术</h1><ul class=""><li id="3607" class="lw lx iq jp b jq ll ju lm jy ly kc lz kg ma kk mb mc md me bi translated">Nmap</li><li id="e078" class="lw lx iq jp b jq mf ju mg jy mh kc mi kg mj kk mb mc md me bi translated">base64编码</li></ul><h1 id="c0d0" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">吸收技能</h1><ul class=""><li id="7911" class="lw lx iq jp b jq ll ju lm jy ly kc lz kg ma kk mb mc md me bi translated">bash shell命令:- <em class="kl"> base64，rev，tr </em></li><li id="ef14" class="lw lx iq jp b jq mf ju mg jy mh kc mi kg mj kk mb mc md me bi translated">使用<em class="kl"> sudo进行权限升级。</em></li></ul></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="3abc" class="kn ko iq bd kp kq mr ks kt ku ms kw kx ky mt la lb lc mu le lf lg mv li lj lk bi translated">扫描网络</h1><pre class="mw mx my mz gt na nb nc nd aw ne bi"><span id="0e93" class="nf ko iq nb b gy ng nh l ni nj">$nmap -sC -sV 192.168.0.174</span></pre><figure class="mw mx my mz gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nk"><img src="../Images/b6f34f935c7d77f079e99f74271a599d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PZYAP7ZNNpcTydS8HEFHpA.png"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">man nmap</figcaption></figure><figure class="mw mx my mz gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nw"><img src="../Images/980999a46c08ef0e9e491aa71398d249.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xeP-YZr7PbFi74XAXsh5Ww.png"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">nmap结果</figcaption></figure><p id="292e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Nmap结果显示有3个静态页面(<em class="kl">可乐、思思、小熊</em>)，但是我什么也没找到，我也尝试了目录暴力破解但是没有成功。我试着联系作者，他给了我提示。</p><figure class="mw mx my mz gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nx"><img src="../Images/dcb071268f850e52c90c5b3cbde037ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:678/format:webp/1*t6vpymez1NwMDkivbFxyug.png"/></div></div></figure><figure class="mw mx my mz gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi ny"><img src="../Images/44ee3d556cb6c75bb9768d1f40b499c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rPmGIK0vUWlyGNDyR33Xpg.png"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">登录页面</figcaption></figure><p id="2249" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">页面源码给出了一些提示，用户名是<strong class="jp ir"> eezeepx </strong>，他们对图片使用base64编码。</p><h1 id="3931" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">登录管理门户</h1><figure class="mw mx my mz gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nz"><img src="../Images/354c73104a9f9b3011367c0a5ed69691.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1J7HVqOqfHMZay8lVAvfhA.png"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">页面源</figcaption></figure><p id="4a76" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在页面的底部，有一个用base64编码的注释。</p><figure class="mw mx my mz gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi oa"><img src="../Images/6da998f32749ffcc0d57f1926f13ce98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*COLwrVxDpw7V42-nJGd-uA.png"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">编码图像</figcaption></figure><p id="8964" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我使用<em class="kl"> base64 </em>命令将txt解码并保存到图像中。</p><figure class="mw mx my mz gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi ob"><img src="../Images/8c1f268d7d0b3791d5989fdeb9592aef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*61iabT1Q8ObfIR9m5IvaXg.png"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">base64 man</figcaption></figure><figure class="mw mx my mz gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi oc"><img src="../Images/141651e2ec97220ff61c8f951be8bd4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NT9nmL9ajoi-B0b6pfVpcQ.png"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">解码图像</figcaption></figure><figure class="mw mx my mz gt nl gh gi paragraph-image"><div class="gh gi od"><img src="../Images/8828f89939452a9329455c53661090fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*h3QHCBd5vgcJqi6xOcRFuA.png"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">output.png</figcaption></figure><blockquote class="lq lr ls"><p id="bfa8" class="jn jo kl jp b jq jr js jt ju jv jw jx lt jz ka kb lu kd ke kf lv kh ki kj kk ij bi translated">用户名<em class="iq">:</em>eezeepz<em class="iq"><br/></em>密码<em class="iq"> : </em> keKkeKKeKKeKkEkkEk</p></blockquote><h1 id="88fe" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">低特权外壳</h1><p id="9673" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">登录后，有上传图像功能。</p><figure class="mw mx my mz gt nl gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/7a76b06bbd3560c93bf7b9d38f3ee04b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*UOGlCXN8csLv6ZxrTEYSCA.png"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated"><a class="ae km" href="http://192.168.0.174/fristi/upload.php" rel="noopener ugc nofollow" target="_blank">http://192 . 168 . 0 . 174/fristi/upload . PHP</a></figcaption></figure><p id="e775" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我试着通过pentest monkey上传PHP反向shell，但是只允许使用<strong class="jp ir"> <em class="kl"> png，jpg，gif </em> </strong>扩展名。</p><div class="of og gp gr oh oi"><a href="http://pentestmonkey.net/tools/web-shells/php-reverse-shell" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd ir gy z fp on fr fs oo fu fw ip bi translated">PHP-反向-shell</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">该工具专为pentest期间的情况而设计，在这种情况下，您可以上传到运行…</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">pentestmonkey.net</p></div></div></div></a></div><p id="249f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在尝试了不同的扩展之后，我使用了双扩展来上传shell，最终它上传成功了。</p><figure class="mw mx my mz gt nl gh gi paragraph-image"><div class="gh gi or"><img src="../Images/e5c726171bc1f3916e4b983adaac0fb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*539O8QTqFbviIF7zNss_ww.png"/></div></figure><figure class="mw mx my mz gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi os"><img src="../Images/0a3a5f59ddb1ad4e167db32593b7615c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ybk_wxxhQmJmRpqXfqDm_g.png"/></div></div></figure><figure class="mw mx my mz gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi ot"><img src="../Images/3a7e04d0f258e701b956c013136cc0ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mqr92fQ_53cy2PRDlJEJvA.png"/></div></div></figure><figure class="mw mx my mz gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi ou"><img src="../Images/cd34a8265557af803842f63de84633c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8MiaW7otcd-d9_taKmInIg.png"/></div></div></figure><figure class="mw mx my mz gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi ov"><img src="../Images/96f77710b59af3bfc7b4f3e90083d0b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nLxjQ1hJUN9dOaDbtRv8HQ.png"/></div></div></figure><p id="ea56" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，我们可以将命令放在<em class="kl"> tmp </em>文件夹中的<em class="kl"> runthis </em>文件中，并由cronjob以管理员身份运行。</p><figure class="mw mx my mz gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi ov"><img src="../Images/dc5e5d115ba161ef96b859654be82faf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nzfqYJIvUQ-gjTN5piLIMA.png"/></div></div></figure><p id="5b12" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有趣的文件在<em class="kl"> admin </em>文件夹中，所以有cryptpass.py脚本，它采用base64编码，然后反转它并将每个字母表旋转13°。</p><figure class="mw mx my mz gt nl gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/831ecb072fffd7b0a6ba51c1b70686a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*_x2hUxxYjTpsyW6hehMU8A.png"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">/home/admin/</figcaption></figure><p id="a289" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我使用bash一行程序来解码它，借助于<strong class="jp ir"> <em class="kl"> rev </em> </strong>和<strong class="jp ir"> <em class="kl"> tr </em> </strong>命令。</p><pre class="mw mx my mz gt na nb nc nd aw ne bi"><span id="325f" class="nf ko iq nb b gy ng nh l ni nj">echo “mVGZ3O3omkJLmy2pcuTq” | rev | tr ‘[A-Za-z]’ ‘[N-ZA-Mn-za-m]’ | base64 -d<br/>echo “”<br/>echo “=RFn0AKnlMHMPIzpyuTI0ITG” | rev | tr ‘[A-Za-z]’ ‘[N-ZA-Mn-za-m]’ | base64 -d</span></pre><figure class="mw mx my mz gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi ox"><img src="../Images/dcd343b526a502a9eb10dcdda5e11db6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8G11sqBEYqrEc5dgQ_bKlA.png"/></div></div></figure><p id="b6f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">找了一会儿后，我发现<strong class="jp ir"><em class="kl">this also pw 123</em></strong>是admin的密码，而<strong class="jp ir"> <em class="kl">是LetThereBeFristi！</em> </strong>是<strong class="jp ir"> <em class="kl"> fristigod的密码。</em>T11】</strong></p><h1 id="dbf7" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">权限提升</h1><p id="444a" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated"><strong class="jp ir">为<em class="kl">第一次测井后。</em>T15】</strong></p><figure class="mw mx my mz gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi oy"><img src="../Images/df1f3af4cec48c6b846bbc84ed622dc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I_StmBs1Vok5-0hPZi3L5Q.png"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">满须藤</figcaption></figure><figure class="mw mx my mz gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi oz"><img src="../Images/345036cb44cbb421b1918e9d88253975.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e4SSTiq2QQeH0cy9UcZf4g.png"/></div></div></figure><h1 id="d665" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">自己的根</h1><figure class="mw mx my mz gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi pa"><img src="../Images/ea6ae2786b518aaf584fd1cf56c4828b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GGvHvX0FRLRONCZOxi2XgA.png"/></div></div></figure><figure class="mw mx my mz gt nl gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/059d0644c882c34900309c379652cc06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*nhQP1XBA8bPk7YHeWawSJA.png"/></div></figure><figure class="mw mx my mz gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi pc"><img src="../Images/2326479f9e78f40093959c9f3badbff0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zJbIwjvUUPebD0EI-NkIqg.png"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">根标志</figcaption></figure><div class="of og gp gr oh oi"><a href="https://medium.com/@yashanand155" rel="noopener follow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd ir gy z fp on fr fs oo fu fw ip bi translated">增量中等</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">从inc0gnito介质上读取文字。夺旗类游戏🚩|| HACKTHEBOX || VULNHUB ||反转。</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">medium.com</p></div></div><div class="pd l"><div class="pe l pf pg ph pd pi nq oi"/></div></div></a></div><p id="8d4e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">感谢阅读！如果你喜欢这个故事，请点击</em><strong class="jp ir"><em class="kl"/></strong>👏<strong class="jp ir"> <em class="kl">按钮，分享</em> </strong> <em class="kl">它来帮助别人！欢迎留言评论</em>💬<em class="kl">下图。有反馈？下面我们连线上</em> <a class="ae km" href="https://twitter.com/yashanand155" rel="noopener ugc nofollow" target="_blank"> <em class="kl">推特</em> </a> <em class="kl">。</em></p><h1 id="7a11" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">❤️由<a class="ae km" href="https://twitter.com/yashanand155" rel="noopener ugc nofollow" target="_blank">增加到</a></h1></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><p id="b0ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">关注</em> <a class="ae km" href="https://medium.com/bugbountywriteup" rel="noopener"> <em class="kl"> Infosec报道</em> </a> <em class="kl">获取更多此类精彩报道。</em></p><div class="of og gp gr oh oi"><a href="https://medium.com/bugbountywriteup" rel="noopener follow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd ir gy z fp on fr fs oo fu fw ip bi translated">信息安全报道</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">收集了世界上最好的黑客的文章，主题从bug奖金和CTF到vulnhub…</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">medium.com</p></div></div><div class="pd l"><div class="pj l pf pg ph pd pi nq oi"/></div></div></a></div></div></div>    
</body>
</html>