<html>
<head>
<title>Two vulnerabilities makes an Exploit!! (XSS and CSRF in Bing)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">两个漏洞构成了一个漏洞！！(必应中的XSS和CSRF)</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/two-vulnerabilities-makes-an-exploit-xss-and-csrf-in-bing-cd4269da7b69?source=collection_archive---------1-----------------------#2016-06-10">https://infosecwriteups.com/two-vulnerabilities-makes-an-exploit-xss-and-csrf-in-bing-cd4269da7b69?source=collection_archive---------1-----------------------#2016-06-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="98e4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你好！！</p><p id="1c7f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这篇文章是关于我提交给微软的第四和第五个有效的错误报告。如果您发现图像难以查看，请在新标签中打开它们。我是在1080p的屏幕下截图的。</p><p id="2f35" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这次我在<code class="fe kl km kn ko b"><a class="ae kp" href="https://www.bing.com/" rel="noopener ugc nofollow" target="_blank">Bing</a></code>中发现了<strong class="jp ir"> XSS </strong>和<strong class="jp ir"> CSRF </strong>的漏洞。</p><p id="994f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Bing images正在测试3个新功能，名为<strong class="jp ir">流</strong>、<strong class="jp ir">收藏夹</strong>、<strong class="jp ir">趋势</strong>，目前仍处于测试阶段。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/f21b6ba14dfba4703ec03cf86380b5b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3MN9MkZjlzIg1Ytt25IUpQ.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">必应图片</figcaption></figure><p id="e5d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，我正在经历这一点，有这个选项，您可以搜索并直接添加图像到您的收藏夹。</p><p id="ac59" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这很酷，所以我想看看它是如何实现的。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/df2af3ac0be8f8938d5d0455e0eec6e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VXRU0IZr5bN_z_5IiArgsA.png"/></div></div></figure><p id="7912" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当您在图像搜索后点击心形符号时，图像将被添加到您的收藏夹。</p><p id="550c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个请求看起来像这样</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/a813fad5c73652bc2f4ee7e229f2502e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6CbB-4p0TkB2NflfSJmXkg.png"/></div></div></figure><p id="2ef2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它是URL编码的。一旦解码，它看起来像这样</p><pre class="kr ks kt ku gt lg ko lh li aw lj bi"><span id="9196" class="lk ll iq ko b gy lm ln l lo lp"><em class="lq">{“WriteNewCollection”:true,”query”:”lucianazogbi”,”mid”:”5689B0BFCDB0E64E595A3B6C2B7A0865A4DC236C”,”description”:”lucianazogbi”,”MediaUrl”:”https://beautifulgeniuses.files.wordpress.com/2015/01/lucianazogbi.jpg&amp;#8221;,”SourceUrl”:”http://beautifulgeniuses.com/2015/01/14/lucianazogbi/&amp;#8221;,”ThWidth”:300,”ThHeight”:300,”MediaWidth”:640,”MediaHeight”:640,”MD5″:”md5_5c6aa5d2768f0d2255dab627015da340″,”MediaFormat”:””,”ThumbnailId”:“OIP.M5c6aa5d2768f0d2255dab627015da340o2″,”CollectionType”:0,”ContentId”:”XGql0naP”}</em></span></pre><p id="f17e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有意思的是没有<strong class="jp ir"> CSRF令牌</strong>也没有<code class="fe kl km kn ko b"><strong class="jp ir"><em class="lq">X-Requested-With : XMLHttpRequest</em></strong></code> <em class="lq"> </em>报头。</p><p id="e5b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这意味着它容易受到CSRF的攻击。另一件有趣的事情是网页在收藏夹标签中显示这些数据。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/b4882cc6a6ffeea6c84158c2cdda47b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tI_ZgMuKWXfGIQhs-7P1Qg.png"/></div></div></figure><p id="c034" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那么为什么不尝试在那里注入一些JavaScript代码呢？我试过所有的领域，但没有一个工作。当我几乎放弃希望时，我看到了这个。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/29b3ec608df1936d8f071e3fde9cd611.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J9AbdrgdJFaNM8EylUIsNQ.png"/></div></div></figure><p id="dea6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个环节容易受到<strong class="jp ir"> XSS </strong>的攻击。它是接受链接<code class="fe kl km kn ko b"><em class="lq">javascript:code</em></code> <em class="lq"> </em>中的&lt;一个&gt; href标签。</p><p id="10e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以当我点击它时。BAMN</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/35be01264ab6583b3f6053cd68fb4307.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZNTRmWqq6ksS4h_mKPnXkw.png"/></div></div></figure><p id="1d27" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们最喜欢的弹出式菜单。</p><p id="b737" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，通过将用户发送到一个恶意网站，就有可能危及他的帐户。</p><p id="c232" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我在CSRF之后停下来，我就不会发现XSS。因此，通过成功地结合两个漏洞，我们利用危害必应。</p><p id="a231" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我向微软报告了这个问题，现在已经解决了。</p><p id="19b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于该功能仍处于beta测试阶段，他们花了5个多月来修复它，以使其更加安全。</p><p id="83a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我的名字会出现在2016年3月的名人堂。</p><p id="4e4a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢您的阅读。</p><p id="e6d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">和平:D</p><p id="222b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">随意评论，给点建议。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="de0e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lq">原载于2016年6月10日</em><a class="ae kp" href="https://kmskrishna.wordpress.com/2016/06/11/two-vulnerabilities-makes-an-exploit/" rel="noopener ugc nofollow" target="_blank"><em class="lq">kmskrishna.wordpress.com</em></a><em class="lq">。</em></p></div></div>    
</body>
</html>