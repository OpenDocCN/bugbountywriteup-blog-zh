<html>
<head>
<title>Portswigger Labs, how to get the most out of it</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Portswigger Labs，如何充分利用它</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/portswigger-labs-how-to-get-the-most-out-of-it-7add3553f88c?source=collection_archive---------1-----------------------#2022-08-22">https://infosecwriteups.com/portswigger-labs-how-to-get-the-most-out-of-it-7add3553f88c?source=collection_archive---------1-----------------------#2022-08-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="166a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">或者为什么在实验室下面寻找答案不是作弊，而是学习的一部分</h2></div><p id="77ff" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">除了为戴着各种帽子的黑客、pentesters、IT sec人员、bug赏金猎人和其他人提供的众所周知的工具之外，portswigger还免费提供优秀的课程。实践与理论相结合，在实验室中你可以测试你学到的东西，甚至测试你自己的想法，这使得https://portswigger.net的网络安全学院成为你可以在现实世界中实际应用知识的最佳“一站式商店”之一。</p><p id="647b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，有一个小问题，它可能是故意的，或者我可能没有我想象的那么聪明，它不是一个真正的交易破坏者，一点也不是，它在某种程度上是一个交易助手。我将重点介绍最近的研究，你可以在这里阅读:<a class="ae le" href="https://portswigger.net/research/browser-powered-desync-attacks#pause" rel="noopener ugc nofollow" target="_blank">https://ports wigger . net/research/browser-powered-desync-attacks</a>，本文的重点将是<em class="lf">基于暂停的desync攻击。</em></p><p id="35f3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">实验室:基于服务器端暂停的请求走私</strong></p><p id="cd90" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我首先通过可用的学习材料来学习这些课程，对于本实验，学习材料在这里:<a class="ae le" href="https://portswigger.net/web-security/request-smuggling/browser/pause-based-desync" rel="noopener ugc nofollow" target="_blank">https://ports wigger . net/we b-security/request-straighting/browser/pause-based-desync</a></p><p id="e866" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">简介</strong></p><p id="71b3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">简单点说吧。这是根据学习材料的规格填写的打嗝重复器的屏幕截图:</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lg"><img src="../Images/07b17cf4b427239fe73a7e8a01d6c17c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2hNR3KpUVwC-REGpynnHXQ.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">注意GET /post是根据寻找一个路径的解释，该路径将在响应中添加尾随斜杠</figcaption></figure><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lw"><img src="../Images/a188ebfbaa76f1bde7d3f3d2e83bbeb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Md5jptwFd3Ntm3-X2J78HQ.png"/></div></div></figure><p id="7db1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后是如何配置/编码turbo入侵者脚本的解释。根据学习材料，它看起来是这样的，请注意后续的相关代码:</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lx"><img src="../Images/ae7d7dfda60c44517e5b1b3591779ce4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ipLRwLkVH0LkjgSsNQowgQ.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">有问题的实验室需要访问/admin/</figcaption></figure><p id="2950" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">关于后续部分的解释似乎有点混乱。或者至少对我来说，这似乎有点不对劲。根据学习资料，这是一个任意的请求，我认为这是想要的请求(尽管初始请求中有GET/hopely 404，但由于某种原因它没有主机头),因此我添加了/admin/</p><p id="5a43" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，当我试图让它为正在讨论的实验室工作时，它失败了，或者说，它按照我的预期失败了，而实际上它确实如预期的那样工作:</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi ly"><img src="../Images/a4be176a1918248a63150f1ab464dcf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*36AEFLgSlwwnHIp-NXaWoQ.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">不是我所期待的</figcaption></figure><p id="034d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我花了相当多的时间，可以说我浪费了一些时间去尝试那些行不通的东西，因为很明显，根据我最终不得不查找的解决方案，它并不打算工作。当然，我真的真的很想通过使用学习材料而不是查找解决方案来使它工作，因此浪费了时间。但是……它以一种只有程序员和黑客才能欣赏的奇怪的方式有趣着(:</p><p id="9af5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">第1部分:走向正确</strong></p><p id="54ca" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">于是调试开始了。我首先必须更改主请求，因为不带主机头的GET/hopely 404似乎也是错误的。这是那部分的样子:</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lz"><img src="../Images/9a92dc1d968c684da909e078df980373.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XOm8ydFX20k-wHmXheUFLA.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">这样做在打嗝中继器，然后发送到涡轮入侵者</figcaption></figure><p id="ef59" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，Turbo Intruder中的第一个调整必须是删除后续部分(或者为了这篇文章的缘故，将其注释掉)，并对它下面的一行代码进行轻微的更改。最终看起来像这样:</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi ma"><img src="../Images/29b26e9a2411be6ce9c97e864197f517.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OOo6LuC5E525SgQaYKutxw.png"/></div></div></figure><p id="2eeb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以，这是个大问题？</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi mb"><img src="../Images/a456edbbe577c0d290ece6e9c1458710.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nrHl7K_tj5VLig2nTT90Lg.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">注意持续时间:62</figcaption></figure><p id="71ff" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我想，这是问题的一部分。正如解决方案所建议的，对Turbo Intruder的第二个修复是对单行代码的另一个细微调整，实际上是一个字符:</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi mc"><img src="../Images/8c0fa988cb6420f1ad96a2b81a35d6b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u0d8vVRYeEXBBBjMSv9wxQ.png"/></div></div></figure><p id="2c7b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以，这是最后一件正确的事:</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi md"><img src="../Images/5b1aef1ec25b96e19964041d0196f50f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u5TUi9Li-cP-BRms-wIjfQ.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">注意持续时间比前一个长</figcaption></figure><p id="fbaf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">第二部大结局(差不多)</strong></p><p id="0132" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我希望如果你读到这里，根据下面的截图，你应该知道下一步该做什么:</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lx"><img src="../Images/6c2e82b9f3e10ae7dd2867c71dc5f399.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h36CGiRtXSfdnDLBagA52w.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">我在某种程度上强调了解决方案:)</figcaption></figure><p id="d93f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是最后一步:</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi me"><img src="../Images/dba93b9a56980b839a56fd562e5c627a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vckzb3TCXzHlKxtId-nmZw.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">这部分不需要解释，我希望；)</figcaption></figure><p id="4f7d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，实验室的描述是删除用户卡洛斯以便解决。我会说类似于詹姆斯凯特尔在他的研究演示中倾向于说的话，我会把剩下的留给读者练习。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><p id="7ac8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以，是的，这很有趣，有时也令人沮丧。我不知道为什么60秒没用，但是61秒用了。该解决方案还建议每个连接使用500个请求，但显然我设法让每个连接使用100个请求。无论哪种方式，我希望你在查找解决方案之前使用这个和学习材料，并且希望你不需要像我一样查找解决方案(:</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><p id="aa93" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lf">来自Infosec的报道:Infosec上每天都有很多事情发生，很难跟上。</em> <a class="ae le" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> <em class="lf">加入我们的每周简讯</em> </strong> </a> <em class="lf">以5篇文章、4个线程、3个视频、2个Github Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</em></p></div></div>    
</body>
</html>