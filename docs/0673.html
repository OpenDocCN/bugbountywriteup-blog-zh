<html>
<head>
<title>Getting started with Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Docker入门</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/getting-started-with-docker-14044647e78a?source=collection_archive---------1-----------------------#2020-07-07">https://infosecwriteups.com/getting-started-with-docker-14044647e78a?source=collection_archive---------1-----------------------#2020-07-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/aa499d927b3767a4d9af10a85ba0ed83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*_2I67k8fJ3KJm5Tc"/></div></figure><p id="24a4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi ks translated">这个博客的目标是向读者介绍docker，并帮助他们建立他们的第一个docker形象。</p><p id="8cf3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Docker是一种软件，它为我们提供了执行操作系统级虚拟化的技术支持，也称为容器化。现在，作为一名读者，你可能想知道任何人都可以使用虚拟化软件，如VMware或Virtual box，那么为什么要使用docker，docker的使用情形是什么，或者docker能解决什么问题？</p><p id="bd92" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在软件开发生命周期的所有阶段中，Docker用于软件开发的部署阶段。docker如此流行和广泛使用的原因是它解决了以下问题</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/6654d0852fa3799899c8992068904354.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*HD3Z4Lj43zuJgFIG"/></div></figure><p id="5c10" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">有时，应用程序开发人员在他/她自己的环境或PC上构建和部署应用程序，它可以完美地工作，没有任何错误，但当相同的应用程序或代码在不同的机器或不同的环境中编译时，会出现错误或无法正常工作。运行应用程序失败可能取决于许多因素，如操作系统、技术依赖性、使用的技术版本等。</p><p id="c1d1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Docker允许我们在包装整齐的容器化环境中开发和部署应用程序，这使得应用程序可以在所有类型的操作系统中以相同的方式运行，而不会出现兼容性问题。</p><p id="a544" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这些容器就像有非常具体的任务的微型计算机，每个容器都有自己的操作系统、自己独立的CPU进程和网络资源。这使得在不影响主机的情况下添加、删除、启动和停止它们变得很容易。</p><p id="32d4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">用户可以设置自己的docker容器，或者从Docker hub下载预先配置的容器。<a class="ae lf" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker hub </a>是一家网上商店，里面有很多图片。</p><h1 id="1504" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">虚拟机和容器有什么区别？</h1><p id="f804" class="pw-post-body-paragraph ju jv iq jw b jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn mi kp kq kr ij bi translated">虚拟化使用虚拟机管理程序来帮助在主机操作系统上创建和运行单独的操作系统，虚拟机或虚拟机有自己的操作系统，现在一切都有利弊，但在需要多个操作系统环境的情况下，在主机上部署大量虚拟机将成为一项艰巨的任务，因为每个虚拟机都有自己的操作系统，并将占用大量磁盘空间。</p><p id="126a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Docker容器使用主机操作系统的Linux内核，容器的大小非常小。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/0f51fd9d7bc328a6918b17e640b5005a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*3gtf6bw-tsOmLpcE"/></div></figure><h1 id="62b7" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">建立码头工人形象需要什么？</h1><p id="bb7a" class="pw-post-body-paragraph ju jv iq jw b jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn mi kp kq kr ij bi translated">构建自己的docker映像非常简单，下面给出的说明描述了一个作为docker容器运行的web应用程序。</p><p id="46fd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">你可以使用任何Linux，但是对于这个演示，我选择使用Ubuntu。安装好ubuntu机器后，你需要做的就是进入终端，输入以下命令。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/fec312c0015d3f0877b9591f94496246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JP6yTJaieBqPwYWs"/></div></div></figure><ul class=""><li id="6507" class="mo mp iq jw b jx jy kb kc kf mq kj mr kn ms kr mt mu mv mw bi translated"><em class="mx"> sudo安装docker.io </em></li></ul><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/9f599cf41655dd59643343135a0519c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ouoO0XHYwrJF99jZ"/></div></div></figure><ul class=""><li id="82f2" class="mo mp iq jw b jx jy kb kc kf mq kj mr kn ms kr mt mu mv mw bi translated"><em class="mx"> sudo systemctl开始停靠</em></li><li id="b32b" class="mo mp iq jw b jx my kb mz kf na kj nb kn nc kr mt mu mv mw bi translated"><em class="mx"> sudo systemctl启用docker </em></li></ul><p id="38ef" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这将帮助我们启动docker引擎并启用docker，您可以通过键入</p><ul class=""><li id="3fe3" class="mo mp iq jw b jx jy kb kc kf mq kj mr kn ms kr mt mu mv mw bi translated"><em class="mx"> docker —版本</em></li></ul><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/a5c0769a690ed597fc175bc8f5d77cf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*R_bHpPGrgX_32iT3"/></div></div></figure><h1 id="934e" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">步骤1:创建一个web应用程序放入容器中</h1><p id="5e66" class="pw-post-body-paragraph ju jv iq jw b jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn mi kp kq kr ij bi translated">为了模拟一个web应用程序，我创建了index.html并编写了“hello world！”并将文件保存在新创建的名为test的目录中。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nd"><img src="../Images/9a05a1133648e013671e8f0ad11c4957.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Vzc5cpVJ286wGRZR"/></div></div></figure><h1 id="e982" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">步骤2:创建一个Docker文件</h1><p id="94ef" class="pw-post-body-paragraph ju jv iq jw b jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn mi kp kq kr ij bi translated">Dockerfile是用户用来组合图像的文本文档。为了创建docker文件，您需要在文本文件中添加以下命令，并将其保存为docker文件，我们将使用docker build命令来构建图像。</p><p id="9759" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="mx">来自ubuntu:16.04 </em> </strong> —这意味着将基础映像作为ubuntu 16.04</p><p id="6fea" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="mx">运行apt-get update -y — </em> </strong>运行update以便能够安装apache之类的基本实用程序</p><p id="79b1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="mx">运行apt-get install-y Apache 2</em></strong></p><p id="a906" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"><em class="mx">RUN chown-R www-data:www-data/var/www—</em></strong>更改所有权，使apache成为/var/www/的所有者</p><p id="656e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"><em class="mx">ENV APACHE _ RUN _ USER www-data-</em></strong>APACHE服务器的环境变量</p><p id="d160" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">T23】ENV APACHE _ RUN _ GROUP www-dataT25】</strong></p><p id="2315" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"><em class="mx">ENV APACHE _ LOG _ DIR/var/LOG/APACHE 2</em></strong></p><p id="900a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"><em class="mx">ENV APACHE _ LOCK _ DIR/var/LOCK/APACHE 2</em></strong></p><p id="cb75" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">T35】ENV APACHE _ PID _ FILE/var/run/APACHE 2 . PIDT37】</strong></p><p id="53b9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="mx">添加index.html/var/www/html</em></strong></p><p id="f135" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="mx">揭露80 </em> </strong></p><p id="5157" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="mx">入口点[" usr/sbin/Apache 2 CTL "]</em></strong></p><p id="6aec" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="mx"> CMD ["-D "，"前台"] </em> </strong></p><p id="8955" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">(用cmd中的选项启动容器的入口点)</p><p id="6480" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">注意:在与test相同的目录中创建docker文件。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi ne"><img src="../Images/8f5dfdd00d1d8092ea0c079ba6388e89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cLRZKR6QTY6yE8p7"/></div></div></figure><h1 id="c752" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">第三步:构建</h1><p id="3bf4" class="pw-post-body-paragraph ju jv iq jw b jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn mi kp kq kr ij bi translated">为了从构建映像，您需要使用以下命令。</p><ul class=""><li id="77cf" class="mo mp iq jw b jx jy kb kc kf mq kj mr kn ms kr mt mu mv mw bi translated">docker build -t lucideus:最新。</li></ul><p id="96bc" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在上面的命令中-t表示标记和点“.”表示docker文件应该从同一个目录中选取。</p><p id="d8bc" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">您可能会遇到权限错误，只需使用以下命令即可解决。</p><ul class=""><li id="1d0b" class="mo mp iq jw b jx jy kb kc kf mq kj mr kn ms kr mt mu mv mw bi translated"><em class="mx">sudo chmod 666/var/run/docker . sock</em></li></ul><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/0defb02fd0eb505111b5042ca40fa8b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*W8F0_OWhk0f_P74T"/></div></div></figure><p id="11da" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这将需要10-15分钟，您的docker映像将准备就绪。您可以键入以下命令来查看您新构建的映像。</p><ul class=""><li id="6ff6" class="mo mp iq jw b jx jy kb kc kf mq kj mr kn ms kr mt mu mv mw bi translated"><em class="mx"> docker图片</em></li></ul><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nf"><img src="../Images/7203eaada668e6cc98c576b7522e7c43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xr-X-bAPAaNbR6-x"/></div></div></figure><p id="c1c4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">您还可以使用以下命令从docker hub中提取其他图像。</p><ul class=""><li id="9ebb" class="mo mp iq jw b jx jy kb kc kf mq kj mr kn ms kr mt mu mv mw bi translated"><em class="mx">docker pull {图片名称} </em></li></ul><p id="5423" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">你可以提到图像的版本，默认情况下它会下载最新的图像。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi ng"><img src="../Images/b464a60b3744333e7ce42324733116a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6SILyJaYbGp0BA2i"/></div></div></figure><h1 id="8fcd" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">第四步:运行你的Docker镜像</h1><p id="89c2" class="pw-post-body-paragraph ju jv iq jw b jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn mi kp kq kr ij bi translated">您可以键入以下命令，将映像作为容器运行。</p><ul class=""><li id="4852" class="mo mp iq jw b jx jy kb kc kf mq kj mr kn ms kr mt mu mv mw bi translated"><em class="mx">docker run-itd-p 8080:80 {图像名称}:{图像标签} </em></li></ul><p id="1c2a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">“I”表示交互模式并保持stdin打开，“t”表示分配一个tty，“d”表示在后台和打印容器中运行。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/4a080bb8af7f6ebb965074498b1278c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_Cooxqa0MygEUpZS"/></div></div></figure><p id="1c5d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">要验证它是否正在运行，您可以打开浏览器。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/b5a4c13c48a554305b0b5bb53bebacdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SkZheY72VTQ_IqER"/></div></div></figure><p id="120a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">您可以使用以下命令在docker容器中获得一个交互式shell。</p><ul class=""><li id="acca" class="mo mp iq jw b jx jy kb kc kf mq kj mr kn ms kr mt mu mv mw bi translated"><em class="mx">docker exec-it { container id } sh</em></li></ul><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/3b2fa9d6d8367e0ea735317a5ee44813.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0e61XMaflGW-HNuN"/></div></div></figure><h1 id="37ae" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">图像与容器</h1><p id="eb8e" class="pw-post-body-paragraph ju jv iq jw b jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn mi kp kq kr ij bi translated">增加这一部分的目的是为了避免图像和容器之间的混淆，因为在阅读博客时，你可能会遇到像创建图像和运行容器这样的短语，这可能会使读者感到困惑。所以在这一节，有一个中肯的答案可以解答你的困惑。</p><p id="690e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们多次提到的图像实际上被称为“<strong class="jw ir">码头集装箱图像</strong>”。</p><p id="14b5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> Docker容器映像</strong>是一个轻量级软件包，包含运行应用程序所需的一切，例如代码、库、系统文件和工具。</p><p id="a4f5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">另一方面，Docker容器是映像的一个实例，通俗地说，它可以被描述为一个标准的软件单元，它打包了代码及其所有依赖项，以实现从一个计算环境到另一个计算环境的迁移和部署。请参考下面给出的图片。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/af7a3190ac508a5edc6e8f3168b15965.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/0*o_Vp208rdkBHuTBw"/></div></figure></div></div>    
</body>
</html>