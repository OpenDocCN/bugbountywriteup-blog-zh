<html>
<head>
<title>How I lost my followers on Medium</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何在媒体上失去了我的追随者</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/how-i-lost-my-followers-on-medium-9fe10e9862aa?source=collection_archive---------2-----------------------#2020-07-17">https://infosecwriteups.com/how-i-lost-my-followers-on-medium-9fe10e9862aa?source=collection_archive---------2-----------------------#2020-07-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dd85" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一份臭虫悬赏报告</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/4d28890ecc44d46a69b37e06f61d69e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:730/format:webp/1*8WxsJbgEVD7UIdcV6Vq5tg.png"/></div></figure><p id="0a3b" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我正在写一篇关于Medium的新文章，这时我开始拖延时间，看着这个网站产生的流量。我知道Medium上有一个bug bounty项目，我以前就被奖励过，我想也许我又一次幸运了，决定玩玩下面的和不下面的电话。</p><h2 id="9b48" class="lm ln it bd lo lp lq dn lr ls lt dp lu kz lv lw lx ld ly lz ma lh mb mc md me bi translated">GraphQL API</h2><p id="a002" class="pw-post-body-paragraph kq kr it ks b kt mf ju kv kw mg jx ky kz mh lb lc ld mi lf lg lh mj lj lk ll im bi translated">Medium使用最初由脸书开发的GraphQL与他们的部分API进行通信，并向数据库通知follow和unfollow请求。为此，只需要目标user-id，通过auth cookies验证用户身份。作为对请求的回答，服务器会用一个JSON对象作为结果进行回复，包括键“<em class="mk"> isFollowing </em>”设置为true或false。下面我们看到两个请求和响应:</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="f108" class="lm ln it mm b gy mq mr l ms mt">Request:<br/>POST /_/graphql HTTP/1.1<br/>{<br/> "operationName":"followUser",<br/> "variables":{"targetUserId":"abc123"},<br/> "query":"mutation followUser($targetUserId: ID!) {\n followUser(targetUserId: $targetUserId) {\n id\n isFollowing\n __typename\n }\n}\n"<br/>}</span><span id="f7c0" class="lm ln it mm b gy mu mr l ms mt">Response:<br/>HTTP/1.1 200 OK<br/>{<br/> "data":{<br/>  "followUser":{<br/>   "id":"abc123",<br/>   "isFollowing":true,<br/>   "__typename":"User"<br/>  }<br/> }<br/>}</span><span id="5158" class="lm ln it mm b gy mu mr l ms mt">Request:<br/>POST /_/graphql HTTP/1.1<br/>{<br/> "operationName":"unfollowUser",<br/> "variables":{"targetUserId":"abc123"},<br/> "query":"mutation unfollowUser($targetUserId: ID!) {\n unfollowUser(targetUserId: $targetUserId) {\n id\n isFollowing\n __typename\n }\n}\n"<br/>}</span><span id="83ac" class="lm ln it mm b gy mu mr l ms mt">Response:<br/>HTTP/1.1 200 OK<br/>{<br/> "data":{<br/>  "unfollowUser":{<br/>   "id":"abc123",<br/>   "isFollowing":false,<br/>   "__typename":"User"<br/>  }<br/> }<br/>}</span></pre><h2 id="67e2" class="lm ln it bd lo lp lq dn lr ls lt dp lu kz lv lw lx ld ly lz ma lh mb mc md me bi translated">虫子</h2><p id="0c16" class="pw-post-body-paragraph kq kr it ks b kt mf ju kv kw mg jx ky kz mh lb lc ld mi lf lg lh mj lj lk ll im bi translated">我的标准程序的一部分是重复API调用，看看会发生什么。我对上述操作做了同样的操作，并在我的测试帐户上进行了尝试。不幸的是，通过重新发送“followUser”操作来增加我的关注者数量并不奏效，然而，我很幸运有了“unfollowUser”。我可以重新发送这个命令，我的另一个帐户的关注者数量每次都会减少，即使我没有关注另一个帐户。另一方面，这也影响了我在个人资料中关注的账户数量。以下示例显示了此过程。它首先显示Mrx的跟随者号，然后是<a class="mv mw ep" href="https://medium.com/u/46ad409a9c9f?source=post_page-----9fe10e9862aa--------------------------------" rel="noopener" target="_blank"> FHantke </a>的跟随者号。在DevTools中重新发送数据包后，两个数字都会相应地改变。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi mx"><img src="../Images/c3f45222db1c8f2ab592a24702dc8922.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*4YyDHoYgEM8dIvXCtf5KMA.gif"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk translated">bug演示(点击放大)</figcaption></figure><h2 id="2f52" class="lm ln it bd lo lp lq dn lr ls lt dp lu kz lv lw lx ld ly lz ma lh mb mc md me bi translated">影响</h2><p id="2883" class="pw-post-body-paragraph kq kr it ks b kt mf ju kv kw mg jx ky kz mh lb lc ld mi lf lg lh mj lj lk ll im bi translated">给这个bug，这里有什么影响？我检查了真正的追随者是否受到影响，然而我所有的追随者保持不变，只有我的个人资料中显示的数字发生了变化。这意味着恶意用户可以操纵个人资料中显示的数字，甚至是负数，但这不会导致任何严重问题，如真正的追随者流失。尽管如此，虚假的追随者数量可能会产生误导，这样的API行为必须被报告。</p><h2 id="da0b" class="lm ln it bd lo lp lq dn lr ls lt dp lu kz lv lw lx ld ly lz ma lh mb mc md me bi translated">报告</h2><p id="c810" class="pw-post-body-paragraph kq kr it ks b kt mf ju kv kw mg jx ky kz mh lb lc ld mi lf lg lh mj lj lk ll im bi translated">我在2020年7月1日发现了这个错误，并在当天晚上提交了它。08.07.2020我收到他们的回复，确认了这个漏洞，并告诉我他们正在调查。两天后，也就是10号，我接到通知，漏洞已经修复，我得到了一笔可观的奖金。</p><p id="414a" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">再次感谢<a class="mv mw ep" href="https://medium.com/u/504c7870fdb6?source=post_page-----9fe10e9862aa--------------------------------" rel="noopener" target="_blank">中</a>，有一个优秀的工作Bug赏金程序总是好的！</p></div></div>    
</body>
</html>