<html>
<head>
<title>Attacktive Directory: TryHackMe Walkthrough-Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">攻击目录:TryHackMe演练-第2部分</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/attacktive-directory-tryhackme-walkthrough-part-2-3ab8f4d4a9bf?source=collection_archive---------0-----------------------#2021-08-29">https://infosecwriteups.com/attacktive-directory-tryhackme-walkthrough-part-2-3ab8f4d4a9bf?source=collection_archive---------0-----------------------#2021-08-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/838ac4dd58f61e1d0e47e2442936e9e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DwhkuF5PPtBvbd0avIeY6w.png"/></div></div></figure><p id="0a96" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">大家好，我是苏迪帕·白朗塔卡。今天，我们将完成TryHackMe上攻击性目录室的最后任务。如果您错过了第1部分，您可以通过下面的URL找到它。</p><div class="kw kx gp gr ky kz"><a rel="noopener  ugc nofollow" target="_blank" href="/attacktive-directory-tryhackme-walkthrough-part-1-accfac4bf70f"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">攻击目录:TryHackMe演练-第1部分</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">大家好，我是苏迪帕·白朗塔卡。今天，我们要谈谈TryHackMe上的攻击性目录室。所以…</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">infosecwriteups.com</p></div></div><div class="li l"><div class="lj l lk ll lm li ln jw kz"/></div></div></a></div><p id="f060" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">任务05:滥用Kerberos </p><p id="7855" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">T3】简介T5】</strong></p><p id="6da6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lo">在枚举完用户帐户后，我们可以尝试滥用Kerberos中的一个特性，使用一种叫做</em> <strong class="ka ir"> <em class="lo">的攻击方法进行重写。</em> </strong> <em class="lo">当用户帐户具有“不需要预验证”权限设置时，会发生重新发布。这意味着帐户</em><strong class="ka ir"><em class="lo"/></strong><em class="lo">在请求指定用户帐户上的Kerberos票据之前不需要提供有效的身份证明。</em></p><p id="0154" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="lo">检索Kerberos票证</em> </strong></p><p id="5693" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae lp" href="https://github.com/SecureAuthCorp/impacket" rel="noopener ugc nofollow" target="_blank"><em class="lo">Impacket</em></a><em class="lo">有一个名为“GetNPUsers.py”的工具(位于Impacket/examples/getnpusers . py中)，它将允许我们从密钥分发中心查询作为可恢复帐户。查询帐户唯一需要的是一组有效的用户名，这是我们之前通过Kerbrute列举的。</em></p><p id="8ae2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过谷歌搜索“检索Kerberos票证”，我发现了一个有趣的备忘单。你可以参考一下你的知识。</p><figure class="lq lr ls lt gt jr"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="b3be" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将使用“GetNPUsers.py”来获取用户的密码散列。首先，让我们检查一下脚本的位置。</p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lw"><img src="../Images/60de8f58f3c6596b8393cf8c98a210db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8dvXbj21_VwIQz78Kf3F_A.png"/></div></div></figure><p id="a24c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，您可以给出下面的命令来检索散列。</p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lx"><img src="../Images/56c6f5e4fdb6728aebc003176442718e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ghv0sNu10N0g8x88wTWLaQ.png"/></div></div></figure><p id="377d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将为您提供哈希，我不打算在这里显示它🙂。之后我们可以使用任何哈希破解工具(比如:hashcat，johntheripper)来破解我们的哈希。但是，在此之前，我们应该确定散列的模式。为此，您可以使用下面的hashcat wiki页面。</p><div class="kw kx gp gr ky kz"><a href="https://hashcat.net/wiki/doku.php?id=example_hashes" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">example_hashes [hashcat wiki]</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">如果您在hashcat中得到一个“行长度异常”错误，这通常是因为您所请求的散列模式…</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">hashcat.net</p></div></div></div></a></div><blockquote class="ly lz ma"><p id="7fce" class="jy jz lo ka b kb kc kd ke kf kg kh ki mb kk kl km mc ko kp kq md ks kt ku kv ij bi translated">我们有两个用户帐户，我们可以从其中查询票证。您可以从哪个用户帐户查询票证而无需密码？</p></blockquote><p id="0175" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过为我们的用户(svc-admin和backup)尝试所有可能的尝试，我发现我们可以只为svc-admin查询一个没有密码的票证</p><p id="2ea4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">答案:</strong> svc-admin</p><blockquote class="ly lz ma"><p id="e9ce" class="jy jz lo ka b kb kc kd ke kf kg kh ki mb kk kl km mc ko kp kq md ks kt ku kv ij bi translated">查看Hashcat示例Wiki页面，我们从KDC中检索到了什么类型的Kerberos哈希？(指定全名)</p></blockquote><p id="5ccd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这里，您可以根据答案格式(答案空格上的***标记)对答案进行格式化😉)</p><p id="4090" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">回答:</strong> Kerberos 5 AS-REP etype 23</p><blockquote class="ly lz ma"><p id="099b" class="jy jz lo ka b kb kc kd ke kf kg kh ki mb kk kl km mc ko kp kq md ks kt ku kv ij bi translated">哈希是什么模式？</p></blockquote><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi me"><img src="../Images/cf09ba7cd253205303eb2fa47bf5f692.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mTdLaXMa5JuEWQgUAQ-zYA.png"/></div></div></figure><p id="c280" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">答案:</strong> 18200</p><blockquote class="ly lz ma"><p id="d65d" class="jy jz lo ka b kb kc kd ke kf kg kh ki mb kk kl km mc ko kp kq md ks kt ku kv ij bi translated">现在用提供的修改过的密码列表破解哈希，用户账户密码是什么？</p></blockquote><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/eea7dce1c725ba66517aaebffd128c5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bi5tlexOxkJuaPGihU4Btw.png"/></div></div></figure><p id="d1e4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">答:</strong>管理2005</p><p id="95a5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你想了解更多关于hashcat和其他密码破解工具的知识，可以参考TryHackMe下面的房间。</p><div class="kw kx gp gr ky kz"><a href="https://tryhackme.com/room/crackthehash" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">尝试破解杂凑</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">破解哈希挑战</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">tryhackme.com</p></div></div><div class="li l"><div class="mg l lk ll lm li ln jw kz"/></div></div></a></div><div class="kw kx gp gr ky kz"><a href="https://tryhackme.com/room/johntheripper0" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">网络安全培训</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">TryHackMe是一个免费的学习网络安全的在线平台，使用动手练习和实验室，通过您的…</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">tryhackme.com</p></div></div><div class="li l"><div class="mh l lk ll lm li ln jw kz"/></div></div></a></div><p id="9b6b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">任务06:返璞归真</strong></p><p id="0dbd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="lo">枚举:</em> </strong></p><p id="a566" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lo">有了用户的帐户凭证，我们现在在域内有了更多的访问权限。我们现在可以尝试枚举域控制器可能发出的任何共享。</em></p><p id="995b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要完成此任务，我们应该枚举目标上的SMB(服务器消息块)共享。</p><blockquote class="ly lz ma"><p id="ba49" class="jy jz lo ka b kb kc kd ke kf kg kh ki mb kk kl km mc ko kp kq md ks kt ku kv ij bi translated">我们可以使用什么工具来映射远程SMB共享？</p></blockquote><p id="099f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">提示告诉我们使用smbclient。那么，我们为什么不用它呢😉。</p><p id="30d4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">回答</strong> :smbclient</p><blockquote class="ly lz ma"><p id="2bea" class="jy jz lo ka b kb kc kd ke kf kg kh ki mb kk kl km mc ko kp kq md ks kt ku kv ij bi translated">哪个选项将列出股份？</p></blockquote><p id="376e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过查看工具的手册页，我们可以得到这个问题的答案。</p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mi"><img src="../Images/34609cebbb29a4f36b62518244d192e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sCHNh9pdG_XG5N0w9waogg.png"/></div></div></figure><p id="39b6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">答案:</strong> -L</p><blockquote class="ly lz ma"><p id="c327" class="jy jz lo ka b kb kc kd ke kf kg kh ki mb kk kl km mc ko kp kq md ks kt ku kv ij bi translated">服务器列出了多少个远程共享？</p></blockquote><p id="702c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于这个问题，我们应该列举我们的目标上的smb份额。</p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mj"><img src="../Images/8d1e65a26a5588b177afdcc38de62ebf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HkB9F2ONrn4ifxBhtXMntw.png"/></div></div></figure><p id="78ed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">答案:</strong> 6</p><blockquote class="ly lz ma"><p id="d07c" class="jy jz lo ka b kb kc kd ke kf kg kh ki mb kk kl km mc ko kp kq md ks kt ku kv ij bi translated">我们可以访问一个包含文本文件的特定共享。是哪一份？</p></blockquote><p id="9efa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过查看股票，我找到了没有任何评论的股票。我试了一下，幸运的是这是我们问题的正确答案。</p><p id="f65a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">回答:</strong>备份</p><blockquote class="ly lz ma"><p id="de81" class="jy jz lo ka b kb kc kd ke kf kg kh ki mb kk kl km mc ko kp kq md ks kt ku kv ij bi translated">文件的内容是什么？</p></blockquote><p id="2b26" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过枚举备份共享，我们可以获得备份用户的凭据。</p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mk"><img src="../Images/53bd4dc673831781265dd069971294df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5fLR1Dl5rrP_PhdLfHyE6w.png"/></div></div></figure><p id="aedc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这里代替域名(spookysec.local)，可以使用IP地址。要下载smb中可用的文件，我们可以使用get命令。</p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ml"><img src="../Images/0d52812d02026857f13b5edbd1211a66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wer3nQHmAqtLY7bBbbtUpQ.png"/></div></div></figure><p id="6746" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以参考下面的备忘单来提高您的知识。</p><div class="kw kx gp gr ky kz"><a href="https://github.com/irgoncalves/smbclient_cheatsheet" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">GitHub-irgoncalves/SMB client _ cheat sheet:使用smbclient/nmap的有用命令/技巧…</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">这是使用smbclient、enum4linux和nmap smb脚本的有用命令/技巧列表——在测试中非常有用…</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">github.com</p></div></div><div class="li l"><div class="mm l lk ll lm li ln jw kz"/></div></div></a></div><p id="ac8c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过查看下载文件，您可以获得内容。</p><p id="668f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">答案:</strong>YmFja * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * w %</p><blockquote class="ly lz ma"><p id="594b" class="jy jz lo ka b kb kc kd ke kf kg kh ki mb kk kl km mc ko kp kq md ks kt ku kv ij bi translated">解码文件的内容，完整的内容是什么？</p></blockquote><p id="4fd3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过查看完整的内容，我们可以简单地确定这是base 64编码格式。(我们有大写字母、简单字母、0-9数字和%=)。如果你愿意，你也可以使用<strong class="ka ir"> CyberChef </strong>。</p><div class="kw kx gp gr ky kz"><a href="https://gchq.github.io/CyberChef/" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">网络咖啡馆</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">网络瑞士军刀-一个用于加密、编码、压缩和数据分析的网络应用程序</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">gchq.github.io</p></div></div><div class="li l"><div class="mn l lk ll lm li ln jw kz"/></div></div></a></div><p id="a31a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过解码编码内容你可以得到答案。</p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/cadc7c01dfc94514f9b65cd4a50d802e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Er-Yi1iRA0qv3SB3w2AM_A.png"/></div></div></figure><p id="b389" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">答案:</strong>backup @ spooky sec . local:b * * * * * * * * * * * 60</p><p id="22ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">任务07: </strong> <strong class="ka ir">提升域内权限</strong></p><p id="404f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lo">我们可以使用Impacket中的另一个工具“secretsdump.py”。这将允许我们检索该用户帐户(与域控制器同步)必须提供的所有密码哈希。利用这一点，我们将有效地完全控制广告领域。</em></p><p id="89c2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">提示将告诉我们“读取secretsdump输出！”</p><blockquote class="ly lz ma"><p id="b6f7" class="jy jz lo ka b kb kc kd ke kf kg kh ki mb kk kl km mc ko kp kq md ks kt ku kv ij bi translated">是什么方法让我们甩掉了NTDS？DIT？</p></blockquote><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mp"><img src="../Images/9af4d12edeeb544c81ee6c69654d472e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yi8B60bZLyFk4AmaQFYE1A.png"/></div></div></figure><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mq"><img src="../Images/70695b181f4656787ebfbf15c83b7f10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RGDUqO80iWMPiT4lGIO_hw.png"/></div></div></figure><p id="d2ed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">回答:</strong> DRSUAPI</p><blockquote class="ly lz ma"><p id="3470" class="jy jz lo ka b kb kc kd ke kf kg kh ki mb kk kl km mc ko kp kq md ks kt ku kv ij bi translated">管理员的NTLM散列是什么？</p></blockquote><p id="6002" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了获得管理NTLM散列，我尝试了域控制器的-dc-ip (IP地址。如果允许，使用目标参数中指定的域部分(FQDN)</p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mr"><img src="../Images/53002a4e1368654d3aaae2eb0595347a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*itZ3iZAsc2DQcLQpUabang.png"/></div></div></figure><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/82e3ff14402c8fd27a8b8a31b07a2251.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*laRHil8S93SKheu46qDqJQ.png"/></div></div></figure><p id="163c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">答案:</strong>0e 0363213 e 37 b 94221497260 b 0 BC B4 fc</p><blockquote class="ly lz ma"><p id="8609" class="jy jz lo ka b kb kc kd ke kf kg kh ki mb kk kl km mc ko kp kq md ks kt ku kv ij bi translated">哪种攻击方法可以让我们在没有密码的情况下验证用户身份？</p></blockquote><p id="7b31" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过在互联网上搜索，我发现我们可以使用“传递哈希”的方法来验证用户没有密码。</p><p id="dc4b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">回答:</strong>传递哈希</p><blockquote class="ly lz ma"><p id="49c0" class="jy jz lo ka b kb kc kd ke kf kg kh ki mb kk kl km mc ko kp kq md ks kt ku kv ij bi translated">使用一个叫做Evil-WinRM的工具，哪个选项允许我们使用散列？</p></blockquote><p id="75a7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于这一部分，我们将使用evil-winrm工具。</p><p id="828c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lo"> WinRM (Windows远程管理)是微软实现的WS-Management协议。一种基于SOAP的标准协议，允许不同供应商的硬件和操作系统进行互操作。微软将它包含在他们的操作系统中，以使系统管理员的工作更容易。</em></p><div class="kw kx gp gr ky kz"><a href="https://github.com/Hackplayers/evil-winrm" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">GitHub - Hackplayers/evil-winrm:黑客/测试的终极WinRM shell</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">用于黑客攻击/测试的终极WinRM外壳这个外壳是用于黑客攻击/测试的终极WinRM外壳。WinRM…</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">github.com</p></div></div><div class="li l"><div class="ms l lk ll lm li ln jw kz"/></div></div></a></div><p id="127b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要安装evil-winrm，您可以使用“gem install evil-winrm”命令。</p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mt"><img src="../Images/14c800605f3e667666eb4cea841a1763.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8ZTfK857EmGrCPRK1Zthnw.png"/></div></div></figure><p id="51c2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装后，我们将命令和控制我们的域控制器。</p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/e26701dc89cc4c104474abc3a0c9a79e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pZ_ZdI1XiZXNLl85T36OIQ.png"/></div></div></figure><p id="beaf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">答案:</strong> -H</p><p id="0940" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过使用管理员NTLM哈希运行evil-winrm，我们将获得对目标机器的命令和控制。</p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/cf20cfdc4098a4efd5256301753cf840.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bgHT5uu1y-Zz19rkqk3Dng.png"/></div></div></figure><p id="7eae" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">任务08:旗帜提交面板</strong></p><p id="f495" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们在房间的最后一部分。通过导航特定的用户，桌面会给我们相关的标志。</p><p id="e2d5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">获取svc-admin:</p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/b0af8d07487c4e796b80430fd2b626fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DI-0jHBUFkvQRCot_ljVlw.png"/></div></div></figure><p id="f3bb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">获取备份:</p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/a6f94b97bb8ef3644f8717af12634d3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wmwTXcNK5Vs0KYwGOYJjrg.png"/></div></div></figure><p id="4472" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">获取管理员</p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mx"><img src="../Images/144dd985341bb67e5a68418290b85734.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aLzu7SqgqRkvUFnZhNJD_A.png"/></div></div></figure><p id="3af4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">今天就到这里，希望你能从这篇文章中学到一些东西。下次再见，注意安全，再见👋。</p><p id="26dd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在上找到我😊：</p><p id="13e7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">领英:<a class="ae lp" href="http://www.linkedin.com/in/sudeepashiranthaka" rel="noopener ugc nofollow" target="_blank">www.linkedin.com/in/sudeepashiranthaka</a></p><p id="bce4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">中:<a class="ae lp" href="https://sudeepashiranthaka97.medium.com/" rel="noopener">https://sudeepashiranthaka97.medium.com/</a></p><p id="3281" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">推特:<a class="ae lp" href="https://twitter.com/sudeepashiran97" rel="noopener ugc nofollow" target="_blank">https://twitter.com/sudeepashiran97</a></p></div></div>    
</body>
</html>