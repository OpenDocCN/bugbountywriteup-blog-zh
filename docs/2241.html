<html>
<head>
<title>Let’s Learn API Security: More about Broken Object Level Authorization</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们学习API安全性:关于对象级授权的更多信息</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/lets-learn-api-security-more-about-broken-object-level-authorization-b5fd1d73e0d8?source=collection_archive---------1-----------------------#2022-08-05">https://infosecwriteups.com/lets-learn-api-security-more-about-broken-object-level-authorization-b5fd1d73e0d8?source=collection_archive---------1-----------------------#2022-08-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/3423c24e76382b92564ebfd52c0c78ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MzF39G_22FLWCQ4N"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">照片由</strong> <a class="ae kg" href="https://unsplash.com/@ffstop?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> <strong class="bd kf">照片由</strong> </a> <strong class="bd kf">上</strong> <a class="ae kg" href="https://unsplash.com/s/photos/software-engineer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> <strong class="bd kf">下</strong> </a></figcaption></figure><h1 id="5994" class="kh ki it bd kf kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">介绍</h1><p id="475d" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">网络应用程序已经从进化中获益，不仅仅是网络，应用程序现在也在各种环境中构建，比如android或iOS应用程序。然而，到目前为止，这些应用程序都是独立开发的。现在，企业已经开发了一种集中式应用程序编程接口(API)，在接收到来自Android和iOS等移动平台的参数后，可以在一个网站上处理请求。应用程序编程接口(API)是一种连接，它充当两个或多个应用程序之间的中介。这使得应用程序之间可以轻松地相互通信。还可以在跨平台应用中使用，这意味着只需要一个API就可以有效地管理来自android、iOS和web应用的呼叫。</p><h1 id="cf68" class="kh ki it bd kf kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">什么是破碎对象级授权/BOLA？</h1><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/76d881a91efe0951cc6da6cf2f6b1791.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SBNDd0gg5Qbagl1q"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kg" href="https://apisecurity.io/encyclopedia/content/owasp/api1-broken-object-level-authorization.htm" rel="noopener ugc nofollow" target="_blank"> <strong class="bd kf">来源</strong> </a></figcaption></figure><p id="1171" class="pw-post-body-paragraph le lf it lg b lh mh lj lk ll mi ln lo lp mj lr ls lt mk lv lw lx ml lz ma mb im bi translated">这个漏洞也可以被认为是不安全的直接对象引用或IDOR。在这个漏洞中，攻击者在API调用时利用用户的资源ID来操纵他的资源ID，并且由于不正确的授权，访问他没有任何访问授权的其他用户的资源。换句话说，这个漏洞允许攻击者访问他没有任何访问授权的资源。这是特定端点上没有适当授权的结果。</p><p id="a8cf" class="pw-post-body-paragraph le lf it lg b lh mh lj lk ll mi ln lo lp mj lr ls lt mk lv lw lx ml lz ma mb im bi translated">这是API中存在的一个非常常见的漏洞；漏洞的严重程度取决于因漏洞而被披露的信息。例如，如果信息包含个人身份信息(PII)数据，如社会安全号码或信用卡信息，则漏洞的严重性应被视为严重。应用程序有时可能会很复杂，当开发人员在开发这些复杂的应用程序时，他们可能会忘记包括这些授权检查，这将成为漏洞的主要来源。</p><h1 id="7215" class="kh ki it bd kf kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">基于对象ID的漏洞:</h1><p id="7756" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">在一些不同的上下文中，应用程序将处理用户数据，然后通过使用对象或用户id来检索该数据。看看这个网址:</p><p id="0c43" class="pw-post-body-paragraph le lf it lg b lh mh lj lk ll mi ln lo lp mj lr ls lt mk lv lw lx ml lz ma mb im bi translated"><a class="ae kg" href="http://test.com/api/api" rel="noopener ugc nofollow" target="_blank">http://test.com/api/api</a>记录/记录id=111</p><p id="c2dc" class="pw-post-body-paragraph le lf it lg b lh mh lj lk ll mi ln lo lp mj lr ls lt mk lv lw lx ml lz ma mb im bi translated">这个URL实际上包含一个记录id，访问该记录id是为了从服务器或数据库中检索某些信息。</p><p id="c2cb" class="pw-post-body-paragraph le lf it lg b lh mh lj lk ll mi ln lo lp mj lr ls lt mk lv lw lx ml lz ma mb im bi translated">在大多数情况下，此漏洞是许多端点上发生的不正确授权的结果。因为这个端点处理敏感和不太敏感的信息。因此，某些端点需要授权，并且有必要在这些端点上部署这种授权。在没有授权的情况下，任何人都能够快速检索这些信息，并且这些信息也可能包括重要的信息。</p><h1 id="763a" class="kh ki it bd kf kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">剥削</h1><p id="9c4b" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">由于没有授权，潜在的攻击者能够访问关键信息。如果用来改变信息的API调用也是不安全的，攻击者将很容易更改用户输入的数据，这将使应用程序的安全性处于危险之中。有时，这也可能导致帐户被接管，因为忘记密码或任何其他端点可能没有授权。这可能是因为用户忘记了密码。在API和API端点上工作的应用程序拥有一个对象的ID，它们将根据用户发出的请求来处理该对象。在使用这些端点时，用户可以自由执行应用程序要求的任何操作。所有这些活动，包括授权检查，都是在对象级实现的。因此，这些检查确定现在登录的用户是否有效或者是否被允许执行所请求的操作。如果这些测试没有在任何端点正确实现，将导致“对象级授权”过程失败。</p><h1 id="5d8d" class="kh ki it bd kf kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">如何防御？</h1><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mm"><img src="../Images/7ad67738b1e708d854982cf5c32ccb09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hCefcO9PHQCH66pA"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kg" href="https://dzone.com/articles/api12019-broken-object-level-authorization" rel="noopener ugc nofollow" target="_blank"> <strong class="bd kf">来源</strong> </a></figcaption></figure><ul class=""><li id="6e55" class="mn mo it lg b lh mh ll mi lp mp lt mq lx mr mb ms mt mu mv bi translated">始终在每个端点上实现授权。</li><li id="7039" class="mn mo it lg b lh mw ll mx lp my lt mz lx na mb ms mt mu mv bi translated">不要依赖于用户输入，总是用适当的授权检查来验证和执行验证。</li><li id="ea41" class="mn mo it lg b lh mw ll mx lp my lt mz lx na mb ms mt mu mv bi translated">用户id的熵必须很高，并且可以是随机的，这样攻击者就不能轻易猜到。你可以使用加密来增加熵。</li><li id="4ba1" class="mn mo it lg b lh mw ll mx lp my lt mz lx na mb ms mt mu mv bi translated">按照用户策略或组织策略实施对象级授权。</li><li id="8559" class="mn mo it lg b lh mw ll mx lp my lt mz lx na mb ms mt mu mv bi translated">使用授权机制来检查登录用户是否有权在每个使用来自客户端的输入来访问数据库中的记录的函数中对记录执行所请求的操作。</li><li id="7bfb" class="mn mo it lg b lh mw ll mx lp my lt mz lx na mb ms mt mu mv bi translated">实现各种测试用例来检查授权功能有多强？这将提供授权的清晰画面。</li></ul><h1 id="cec9" class="kh ki it bd kf kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated"><strong class="ak">结论</strong></h1><p id="a52b" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">在当今复杂的体系结构中很可能存在BOLA漏洞。此漏洞的严重性由攻击者能够危害的功能决定。因此，您应该始终对用户以及交付给他们并根据他们的授权向他们传送的信息进行权限检查。授权通常会引发许多不同的问题，并可能升级为帐户接管或任何进一步的信息泄漏，其中可能包括敏感数据。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><p id="b7f7" class="pw-post-body-paragraph le lf it lg b lh mh lj lk ll mi ln lo lp mj lr ls lt mk lv lw lx ml lz ma mb im bi translated"><em class="ni">来自Infosec的报道:Infosec上每天都有很多事情发生，很难跟上。</em> <a class="ae kg" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lg iu"> <em class="ni">加入我们的每周简讯</em> </strong> </a> <em class="ni">以5篇文章、4个线程、3个视频、2个Github Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</em></p></div></div>    
</body>
</html>