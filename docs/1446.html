<html>
<head>
<title>Sunset-Midnight-Ctf-Walkthrough 🌄</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">日落-午夜-Ctf-穿越🌄</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/sunset-midnight-ctf-walkthrough-db742cb7ee04?source=collection_archive---------0-----------------------#2021-07-04">https://infosecwriteups.com/sunset-midnight-ctf-walkthrough-db742cb7ee04?source=collection_archive---------0-----------------------#2021-07-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="ad4c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天我们要解决另一个名为“日落:午夜”的boot2root挑战。它可以在VulnHub进行渗透测试。在这里，我Shreya Talukdar介绍日落午夜ctf走过。让我们开始学习如何成功地分解它。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="ab gu cl kq"><img src="../Images/37269f352c18d6f72a5d31082f770872.png" data-original-src="https://miro.medium.com/v2/0*ABHF58FmHX2k8i84.gif"/></div></figure><h1 id="e490" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">🐞渗透测试方法</h1><h1 id="5c33" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">侦察</h1><p id="d791" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">▪️ Nmap</p><h1 id="2cee" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">列举</h1><p id="d870" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">▪️Hydra强力MySQL服务</p><h1 id="ce47" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated"><strong class="ak">剥削</strong></h1><p id="fb8a" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">▪️ WordPress管理员的密码修改<br/> ▪️修改代码建立web外壳</p><h1 id="a808" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">权限提升</h1><p id="a87c" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">😎滥用回收密码<br/>😎没有固定加载路径的二进制滥用<br/>😎夺旗</p><h1 id="1124" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">用法！！</h1><p id="6003" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">👻通过使用nmap</p><h2 id="1be1" class="lw ku iq bd kv lx ly dn kz lz ma dp ld jy mb mc lh kc md me ll kg mf mg lp mh bi translated">-sn 192.168.0/24</h2><p id="66e1" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">我们首先看到连接到主机的网络。基本上是ping扫描<br/>👻在我们获得虚拟机的ip(易受攻击的机器)后，我们使用</p><h2 id="a8d4" class="lw ku iq bd kv lx ly dn kz lz ma dp ld jy mb mc lh kc md me ll kg mf mg lp mh bi translated">nmap -A</h2><p id="4c07" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">👻之后，我们将IP地址和“sunset-midnight”主机添加到我们的“/etc/hosts”中，正如机器的创建者在描述中所指出的。就像我的情况一样:</p><h2 id="85fa" class="lw ku iq bd kv lx ly dn kz lz ma dp ld jy mb mc lh kc md me ll kg mf mg lp mh bi translated">日落时分至午夜</h2><p id="1665" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">👻然后我们列举目标，看到它在WordPress中</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="ab gu cl kq"><img src="../Images/e68dd9bdf41bc3005ed8dc51e22eb8d8.png" data-original-src="https://miro.medium.com/v2/0*UlbgLsqcQB1y_dZA"/></div></figure><h2 id="f1af" class="lw ku iq bd kv lx ly dn kz lz ma dp ld jy mb mc lh kc md me ll kg mf mg lp mh bi translated">让我们从运行带有操作系统检测、软件版本、脚本和跟踪路由的nmap开始</h2><p id="a194" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated"><strong class="jp ir"> nmap -A 192.168.43.72 </strong></p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/26d44d2d2d72b6078b107104c162f172.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/0*UWGPlSSKGMow0AAa"/></div></figure><p id="65db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将IP地址和“sunset-midnight”主机添加到我们的“/etc/hosts”中，正如机器的创建者在描述中所指出的。</p><p id="b2c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">枚举</strong></p><p id="877a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们访问网络服务，找到一个用CMS WordPress开发的网站。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/07ce20cab859054839f8dab0101cab85.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/0*wNe-cuwwUvyxhwvh"/></div></figure><p id="4449" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">我们通过WPSscan扫描一下吧。</strong></p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/ad3177917aa29e010f9718413601cdc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/0*DXIjrsewqJdM6fIX"/></div></figure><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/304ef4719b80e15d9960b4cbc317e558.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/0*RIVKa1BtTaYMpukD"/></div></figure><p id="04d4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们尝试使用kali中的默认单词列表(即<strong class="jp ir">/usr/share/word lists/rock you . txt</strong>)通过bruteforce方法获取管理员登录凭据:</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/7a2008d05c037ea251bcabab30d3fead.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/0*v6fSPwlkQPf6V9Ei"/></div></figure><p id="3aa7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">现在，让我们登录mysql数据库:</strong></p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/fdbc5068ce7ed71a0f363e658a9909e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/0*uT_XOkt_hOedhdke"/></div></figure><p id="bad9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">可以看到，我们使用密码“robert”成功登录mysql数据库</strong></p><p id="3f4b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">让我们选择wordpress_db并列出表格:</strong></p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/27bfd0ebd4e11c5ca54fb21c756b26c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/0*hp6btCw7bJTYF3EL"/></div></figure><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/c6d1178b26674c522ac7898b14bc0f3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/0*XpS0BdPKZK0ypN-S"/></div></figure><p id="76f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">下面给wp_users列出内容:</strong></p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/15c544fbba074fdd359adf2c3f464ba4.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/0*skf0T6FJe52gRZol"/></div></figure><p id="854f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">让我们更新管理员密码，这样我们就可以成功登录:</strong></p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/aaff385142e7c5ef6fb103e5e5c9910d.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/0*AG1qI-uE4W_izuxn"/></div></figure><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/d592e67ab51886319778f92c90817b47.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/0*jruugtgszephlZ8e"/></div></figure><p id="1f80" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们更新了单词“password”的散列形式，因此我们成功登录。用户名:管理员密码:密码:D </p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/7f52eb7f4c1cb6992ef37300a1b88f28.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/0*UQwe1spBwzIOgwUz"/></div></figure><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/d0c9212eff45fd27ec18e807084651b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/0*v38TIBM0hF7Crgan"/></div></figure><p id="c540" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">现在我们需要编辑shell.php文件。将ip重新命名为您的基本操作系统的ip，kali即192.168.43.104(对于我)和port as 9001(如您所愿)。</strong></p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/31503ef0fa0ba82a168384d46af4f91e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cHQHBGJ5TO4K7vli0_ojNQ.png"/></div></div></figure><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/d9475da389a038423b246a5236d3204d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J_F9ARY3-0Al-HCKTLo69A.png"/></div></div></figure><p id="4164" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们需要编辑shell.php文件。将ip重新命名为您的基本操作系统的ip，kali即192.168.43.104(对于我)和port as 9001(如您所愿)</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/32697e33c63b0b72ceeb78d73bd0f7b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gPPfD12YUAOVmBYrstmjCg.png"/></div></div></figure><p id="02cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们复制shell.php的内容，并尝试上传到主题编辑器中。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/570c13cac8b02d7250be7d2ea2b110af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e4hyA6tPUJpF8-cnRPvoHQ.png"/></div></div></figure><p id="b957" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，我们可以看到文件在404模板中被成功更新。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/afe2e640335cfefaa85460c324b397e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yvygyhZxGCoTOsOunAcQaQ.png"/></div></div></figure><p id="5ad1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们访问shell:</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/97039163c73fbd1d6a9e8e7275d00017.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aShsrednLH5D10a14L8ehA.png"/></div></div></figure><p id="fd37" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里，我们得到了登录凭证:)</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/dedbabe2faeb822362d4d41a86a7803c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M0NceKraoBRydvDciDYooQ.png"/></div></div></figure><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/6e302a3c175c84bc9e88deb4d1509f3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dzHrNNpKDJtmFLTlMpKOEw.png"/></div></div></figure><h1 id="de43" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated"><strong class="ak">权限提升(用户“Jose”)</strong></h1><p id="ef85" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">我们使用密码验证自己是用户“jose”。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/95d4a41f9da0d6d532bba13f69bcc464.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uiKLndpChwKEjPpbqbF-ag.png"/></div></div></figure><p id="1626" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">登录成功。</strong></p><h1 id="6a96" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated"><strong class="ak">权限升级(root) </strong></h1><p id="cf92" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">我们检查我们可以访问哪些文件，二进制文件“/usr/bin/status”引起了我们的注意。我们在它上面使用字符串，我们看到它在内部调用二进制“服务”,但是没有指出起源的路径，这将允许我们创建一个恶意的“服务”文件，从而能够改变我们的路径来执行它。那么让我们把它付诸实践，我们在“tmp”文件夹中创建一个名为“service”的文件，我们引入序列“/bin/sh”，我们执行“/usr/bin/status”的二进制文件，我们得到一个shell作为root。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/45064bb6dca470483d2a42bfdc8bcbad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6RaSRlzkCn2JieN9yYEUtA.png"/></div></div></figure><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/93d8bf496961d2f3bf0ec166594f17b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KFhCPAKLeXqtcYTHlqe65w.png"/></div></div></figure><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/0758bdc37fdb20d470f0c028dbb8a044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BsiEN-pf7eAaUN9qB9uWvg.png"/></div></div></figure><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/3bf916d3fbe9808fcf4a5a79eb43448b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L4sJm_tiaqKNK-XnDALXRQ.png"/></div></div></figure><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/bc806260ee67d6ad700082337de81d9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DbDXbGa-oAgEhYmi3wTGHw.png"/></div></div></figure><p id="99b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">哦哦！！！终于解决了:D</p><p id="353f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">享受😎在<strong class="jp ir">推特(@ShreyaTalukdar9) </strong>上继续关注我</p></div></div>    
</body>
</html>