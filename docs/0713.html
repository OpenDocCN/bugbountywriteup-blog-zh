<html>
<head>
<title>Write-Up 09- TryHackMe- Kenobi</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">特写09- TryHackMe- Kenobi</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/write-up-09-tryhackme-kenobi-afc2dccd40a2?source=collection_archive---------1-----------------------#2020-07-24">https://infosecwriteups.com/write-up-09-tryhackme-kenobi-afc2dccd40a2?source=collection_archive---------1-----------------------#2020-07-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2287" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">学习利用和接管基于Linux的易受攻击的机器</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/1f4b0545aaa2f48615abe2147077cc32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*sYBHxKNBVCHZvJpSDD8dbQ.png"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">克诺比上TryHackMe</figcaption></figure></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="5f51" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">介绍</h1><p id="63a7" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">本演练穿过TryhackMe上的房间“<a class="ae mp" href="https://tryhackme.com/room/kenobi" rel="noopener ugc nofollow" target="_blank"> <strong class="lv iu">【克诺比】</strong> </a>”。克诺比或<a class="ae mp" href="https://assets1.ignimgs.com/2017/03/02/kenobi-1280-1488494010895_1280w.jpg" rel="noopener ugc nofollow" target="_blank"> <strong class="lv iu">欧比万·克诺比</strong> </a>是这个房间里提到的一个著名的《星球大战》角色。我们将尝试通过利用我们发现的漏洞来获得对目标机器的root访问权限。机器上有隐藏的标志，我们在执行任务时必须找到它们</p><h1 id="fc29" class="lb lc it bd ld le mq lg lh li mr lk ll jz ms ka ln kc mt kd lp kf mu kg lr ls bi translated">目标</h1><ol class=""><li id="08fb" class="mv mw it lv b lw lx lz ma mc mx mg my mk mz mo na nb nc nd bi translated">共享的Samba的枚举</li><li id="6ae3" class="mv mw it lv b lw ne lz nf mc ng mg nh mk ni mo na nb nc nd bi translated">FTP服务器软件易受攻击版本的利用</li><li id="421a" class="mv mw it lv b lw ne lz nf mc ng mg nh mk ni mo na nb nc nd bi translated">通过路径变量操作获得机器的超级用户访问权限</li></ol><h1 id="baad" class="lb lc it bd ld le mq lg lh li mr lk ll jz ms ka ln kc mt kd lp kf mu kg lr ls bi translated">入门指南</h1><h2 id="8c18" class="nj lc it bd ld nk nl dn lh nm nn dp ll mc no np ln mg nq nr lp mk ns nt lr nu bi translated">[任务1]部署易受攻击的机器</h2><p id="7a4e" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">让我们使用OpenVPN连接到TryHackMe网络。通过在终端中键入“<strong class="lv iu"> ifconfig </strong>”来验证您的IP地址，您应该会看到<strong class="lv iu"> tun0 </strong>或<strong class="lv iu"> tun1 </strong>接口以及分配给它的IP</p><h2 id="1cb8" class="nj lc it bd ld nk nl dn lh nm nn dp ll mc no np ln mg nq nr lp mk ns nt lr nu bi translated">扫描</h2><p id="12ce" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">扫描目标机器上打开的端口和服务。为此，我们将使用如下所示的<strong class="lv iu"> Nmap </strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi nv"><img src="../Images/d07913dc2c1bf88d67afd21cb50da3da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MJnzC2H16d8KgKrnsHL5kw.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">目标机器的Nmap扫描</figcaption></figure><p id="82e4" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">如Nmap扫描所示，总共有7个端口<strong class="lv iu">打开</strong></p><h2 id="c653" class="nj lc it bd ld nk nl dn lh nm nn dp ll mc no np ln mg nq nr lp mk ns nt lr nu bi translated">[任务2]枚举共享的Samba</h2><p id="5fdf" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">在我们继续前进之前，让我们检查一下是否在<strong class="lv iu">端口80 </strong>上发现了什么。对于，在web浏览器上导航到目标机器IP。从下面可以看出，没有发现什么有趣的东西</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi of"><img src="../Images/14bbc713247a8dc06b91b6868d471614.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OhlVwwaJ2CJT6CmiTtnoLw.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">星球大战角色</figcaption></figure><p id="aa2f" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">让我们也检查隐藏的目录。为此，我们可以使用<strong class="lv iu"> go-buster </strong>，如下图所示。<strong class="lv iu"> -w标志</strong>用于指定常用目录名的字表，<strong class="lv iu"> -s标志</strong>用于定义状态码，即<strong class="lv iu"> 200 </strong>，这是成功HTTP请求的标准响应。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi og"><img src="../Images/58145eebb54977b338999eb972f10561.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fP2WuU6oU4nPXwUzMr_HpA.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">使用go buster强制隐藏目录</figcaption></figure><p id="8411" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">我们从上面的结果中发现了两个隐藏的目录。Index.html没有给出任何东西，而robots.txt给出了一个隐藏的路径。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/5f050341c1e431287d38628312eb3d5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*mueEklnLYgKxn_thC5K7LA.png"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">robots.txt路径</figcaption></figure><p id="5c7c" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">我们也没有从admin.html得到任何东西。</p><p id="7cd2" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">现在关于我们的Nmap扫描，我们看到端口<strong class="lv iu"> 139 </strong>和<strong class="lv iu"> 145 </strong>打开，它们是SMB(服务消息块)的标准端口。这里我们需要枚举文件共享的samba。Samba为windows、Linux、UNIX等各种平台提供打印和文件服务。我们可以使用各种工具来枚举SMB共享。为了验证概念，我将使用两种工具来实现相同的目标。</p><p id="a914" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">因此，首先我们使用enum4linux，如果我们想枚举SMB上的共享，它工作得很好。如下所示——一个标志枚举了与SMB相关的所有信息</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi oi"><img src="../Images/a63a18bec7e17b73b28c0e3199c8884e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q6S_RQI8IHTqaO0PflP9xA.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">enum 4 Linux Samba共享枚举工具</figcaption></figure><p id="d1f8" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">正如我们从以下信息中看到的，共有3个文件共享，即打印、匿名和IPC</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi oj"><img src="../Images/d07fa6ea8cc10cf7e9b72d820e369366.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_1d14EFKmWZk6bYTvw08Hw.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">枚举的文件共享</figcaption></figure><p id="2a05" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">使用Nmap内置脚本也可以达到同样的效果</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi ok"><img src="../Images/75a39834e490d460aed9fe3b50f55984.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-wNDXVMk2kf7CQkneeidFw.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">用于SMB枚举的Nmap内置脚本</figcaption></figure><p id="04e2" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">让我们访问一个文件共享，看看是否能找到一些有趣的东西</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi ol"><img src="../Images/1e80a184e0b7552f4dcfeb94aa86aa59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2MhdidQDyz0n0m9K-8ZNsQ.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">访问目标计算机上的文件共享</figcaption></figure><p id="1234" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">因此，我们访问了匿名文件共享，并取得了成功。</p><p id="1c27" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">它没有要求密码，我们可以进入文件共享。每当你像这样访问一个文件共享时，寻找任何将来可能使用的文件，现在，我们看到一个log.txt文件。我们可以使用<strong class="lv iu"> smbget </strong>将文件传输到我们的主机上</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi om"><img src="../Images/fc3a8f7e2dfa72f54ab089455b4c9b1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*gMVQ0eaCLpL9gBamBsnzxA.png"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">将文件从目标计算机复制到本地主机</figcaption></figure><p id="00e8" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">让我们查看一下log.txt文件，看看是否能找到一些有趣的东西。我们开始了解FTP端口和其他信息，包括目标机器的SSH密钥</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi on"><img src="../Images/324fd141df78c15a9ca3437fd4bfc936.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KHC-Ms6uUd3VI_dic-L2FA.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">log.txt</figcaption></figure><p id="9189" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">再次参考我们的Nmap扫描，有另一个打开的端口，即111，它用于RPC(远程过程调用)。在我们的例子中，RPC端口111用于网络文件系统。让我们使用Nmap脚本引擎对此进行列举，如下所示</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi oo"><img src="../Images/75db7660c2d0543ac19cdfffce7ed1db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P2e3gI9bKX8t5AIq34q38g.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">RPC的枚举</figcaption></figure><p id="8bac" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">从上面的扫描中，我们看到只有一个文件挂载可用于接下来的步骤</p><h2 id="ae10" class="nj lc it bd ld nk nl dn lh nm nn dp ll mc no np ln mg nq nr lp mk ns nt lr nu bi translated">[任务3]通过Proftpd获得初始访问权限</h2><p id="b0b9" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">在前面的任务中，我们已经收集了足够的信息并枚举了文件共享，现在是时候访问我们的目标机器了。我们需要回到我们的Nmap扫描，搜索针对FTP端口的漏洞，即运行ProFtpd(一个免费的开源FTP服务器。该服务器的版本已过时，可被利用。我们将使用<a class="ae mp" href="https://www.exploit-db.com/searchsploit" rel="noopener ugc nofollow" target="_blank"> <strong class="lv iu"> searchsploit </strong> </a>针对这个版本的proftpd进行潜在的攻击</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi op"><img src="../Images/34530a2f0f84ee9ed0bbf23a809364f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*Wor_Og9tdjOAqqo0QF3YRg.png"/></div></div></figure><p id="33a4" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">正如我们所看到的，有三个漏洞可以用来对付这个版本。<a class="ae mp" href="http://www.proftpd.org/docs/contrib/mod_copy.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lv iu"> mod_copy模块</strong> </a>中有一些命令可以为我们所用，比如<strong class="lv iu">站点CPFR </strong>和<strong class="lv iu">站点CPTO。</strong>使用可以查看这些命令的用法</p><p id="34ca" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">让我们使用<a class="ae mp" href="https://nmap.org/ncat/" rel="noopener ugc nofollow" target="_blank"> <strong class="lv iu"> Netcat </strong> </a>来通过TCP或UDP在网络上进行读写，以在端口21上连接到目标机器</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi oq"><img src="../Images/e80ef3ad61a7158f01a9bf2fbc471cf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kdApqNfKtr8QVeyhiPX-QQ.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">使用Netcat连接到端口21上的目标IP</figcaption></figure><p id="c9ca" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">现在我们已经成功连接，使用站点CPFR和站点CPTO命令将我们的目标机器私钥复制到我们的"/ <strong class="lv iu"> var/tmp </strong>"目录，就像我们之前在NFS上看到的挂载目录var一样</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi or"><img src="../Images/b5df4408265905201777920a3c550106.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xvaa00ZVhSDaqZaFfQtS8Q.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">将目标计算机私有SSH密钥复制到/var/tmp目录</figcaption></figure><p id="4a70" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">是时候将<strong class="lv iu"> "/var/tmp" </strong>目录挂载到我们的本地机器上了，这样我们就可以使用私有密钥，并使用刚刚复制的私有密钥通过ssh访问目标机器</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi os"><img src="../Images/c225301f4d45623b425b78884ba15499.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8ZVpMxBlcrNqxI73fgIJtA.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">将/var/tmp安装到主机上</figcaption></figure><p id="0e7c" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">成功挂载后，让我们复制私有ssh密钥，如下所示。更改文件id_rsa的权限。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi ot"><img src="../Images/0afb96e5dc6ccfad933a8dff9268680b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1JVfaNJE3uvqx3IXn_nImg.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">复制私钥</figcaption></figure><p id="6c1e" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">现在使用私钥让ssh进入我们的目标机器</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi ou"><img src="../Images/6db96d780dfbe771c9178c3b91d8790a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_o2cYDYiFqt7rqxJL6UzMw.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">到目标机器的SSH</figcaption></figure><p id="c42e" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">我们的SSH成功了，我们已经可以访问我们的目标克诺比机器。现在我们必须寻找这台机器上隐藏的旗帜</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/8d00f9e7793c7b5efc259c44b5333cb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*VQ6gbT1eK7-CeDVrzAu6Cw.png"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">找到用户标志</figcaption></figure><h2 id="4f5c" class="nj lc it bd ld nk nl dn lh nm nn dp ll mc no np ln mg nq nr lp mk ns nt lr nu bi translated">[任务4]通过路径变量操作进行权限提升</h2><p id="bc71" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">我们需要提升我们的权限以获得根用户访问权限。为此，我们将使用SUID位。那么SUIDs位是什么呢？？它们是针对用户和组定义的一组权限。设置这些位允许文件按照用户的权限执行</p><p id="cf2e" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">要找出设置了SUID位的文件，请使用如下所示的命令</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/ffe180afd3b4826dfb9aca2f1d20af45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*5xKqlS7Js8x7nvkeq205-Q.png"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">查找设置了SUID位的文件</figcaption></figure><p id="6e8e" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">在以上文件中<strong class="lv iu"> /usr/bin/menu </strong>最为突出。让我们运行这个二进制程序</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/632c802638b602a2ff284a1bb57f22d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1074/format:webp/1*HIc9Gy2LEO-1mC52VmCuWQ.png"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">执行二进制文件</figcaption></figure><p id="6d28" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">通过运行这个二进制文件，我们看到了三个选项。逐个输入每个选项，显示输出，这不是很有趣。使用strings命令，我们可以在二进制文件中查找人类可读的字符串，如下所示。从下图中，我们推断curl是以完整路径运行的，所以我们可以做的是操纵路径来获得root，因为这个命令已经以root身份运行了</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi oy"><img src="../Images/df081fef05c0eb0cc55ee1fd9200f5f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1346/format:webp/1*Ibw0YxM9zFpVXqy9X1H1cw.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">在二进制上寻找人类可读的字符串</figcaption></figure><p id="c869" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">因此，利用这一点，我们复制/bin/sh shell并将其调用到curl，更改文件的权限，并将路径导出到我们之前看到的菜单文件目录</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi oz"><img src="../Images/1ac49a8c4daa31171e7519530dfbe4b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pGzN-2DPQHrOEOmeMKsbHA.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">通过利用SUIDs操纵文件路径进行根访问</figcaption></figure><p id="34ba" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">现在，当我们再次运行前面的二进制文件时，我们获得了root访问权限，如上所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/a4112429acff24c55431871f519cd021.png" data-original-src="https://miro.medium.com/v2/resize:fit:490/1*qv9YNpw5VGuCB6U9Hqideg.gif"/></div></figure><p id="f237" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">最后，我们应该在当前用户的根目录中找到我们的用户标志，如下所示</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/8d00f9e7793c7b5efc259c44b5333cb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*VQ6gbT1eK7-CeDVrzAu6Cw.png"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">根标志</figcaption></figure><p id="6427" class="pw-post-body-paragraph lt lu it lv b lw oa ju ly lz ob jx mb mc oc me mf mg od mi mj mk oe mm mn mo im bi translated">随着我们最后的旗帜被发现，这结束了我们的演练，我希望你喜欢它。欢迎您的建议和意见。如果你喜欢这个内容，请鼓掌并与他人分享。你可以在这里支持我<a class="ae mp" href="https://www.patreon.com/laexploithub?fan_landing=true" rel="noopener ugc nofollow" target="_blank"/></p></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="52fc" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">关于我</h1><p id="6781" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">我是一名网络安全爱好者，正在攻读信息安全硕士学位，并试图进入全职网络安全职业生涯。您可以点击这里阅读更多文章和演练<a class="ae mp" href="https://medium.com/@anon_7" rel="noopener"/></p></div></div>    
</body>
</html>