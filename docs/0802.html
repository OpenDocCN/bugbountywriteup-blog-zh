<html>
<head>
<title>VPS Cheatsheet for bug hunting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于bug搜索的VPS备忘单</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/vps-cheatsheet-for-bug-hunting-bf0a5fe08ef4?source=collection_archive---------2-----------------------#2020-09-01">https://infosecwriteups.com/vps-cheatsheet-for-bug-hunting-bf0a5fe08ef4?source=collection_archive---------2-----------------------#2020-09-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/c853f78e2854b27c182b1a4316c41378.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D_vdT6jTz97TJzRkvObz5g.png"/></div></div></figure><p id="a5c9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我发现自己太多次忘记了某些命令，或者如何执行与bug搜索相关的特定操作。</p><p id="7c56" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">解决方案:制作一个所有有用命令的备忘单。</p><p id="52dd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我想，你可能会发现它很有用，或者你可能已经把它们都背熟了，这样的话，对你有好处。不管怎样，有一些关于作弊的个人笔记可以让你了解我的思维方式。无论好坏:)</p><p id="0325" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">交换空间(对msfconsole有用):</strong></p><p id="ed32" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae kz" href="https://www.digitalocean.com/community/tutorials/how-to-add-swap-space-on-ubuntu-18-04" rel="noopener ugc nofollow" target="_blank">https://www . digital ocean . com/community/tutorials/how-to-add-swap-space-on-Ubuntu-18-04</a>—对于被终止的进程，这可能是由于内存不足的问题，这意味着交换内存不存在，我实际上在一段时间前将它用于metasploit，然后从未重新启动我的vps，然后我删除了交换文件，我对进行持久的更改并不感兴趣，所以只要知道如果/当重新启动时遵循上面的内容，这里</p><p id="a5b0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可以首先检查是否启用了任何交换内存。</p><p id="5330" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">$sudo swapon -s</code></p><p id="be8e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果它是空的，这意味着您没有启用任何交换。要添加1GB交换空间，请执行以下操作:</p><p id="9c7d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">$sudo dd if=/dev/zero of=/swapfile bs=1024 count=1024k</code></p><p id="dfd6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">$sudo mkswap /swapfile</code></p><p id="6980" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">$sudo swapon /swapfile</code></p><p id="8242" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">将下面一行添加到fstab中，使交换永久化。</p><p id="ebd3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">//不确定现在是否要做，就在上面</p><p id="b784" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">$sudo vim /etc/fstab</code></p><p id="0b37" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">/swapfile none swap sw 0 0</code></p><p id="7ab3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> RAM清除(在无法启动时有用):</strong></p><p id="b26b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae kz" href="https://www.tecmint.com/clear-ram-memory-cache-buffer-and-swap-space-on-linux/" rel="noopener ugc nofollow" target="_blank">https://www . tecmint . com/clear-ram-memory-cache-buffer-and-swap-space-on-Linux/</a>—</p><p id="16f1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于不想启动的进程，可能是因为需要清除ram，有三种方法，1是简单的，2是高级的，3显然最好不要乱用以防万一，下面是快速命令[作为root]:</p><p id="ff1c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">sync; echo 1 &gt; /proc/sys/vm/drop_caches</code></p><p id="d46b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">针对nginx/网站/子域/等。:</strong></p><p id="da92" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae kz" href="https://serverfault.com/questions/424452/nginx-enable-site-command" rel="noopener ugc nofollow" target="_blank">https://server fault . com/questions/424452/nginx-enable-site-command</a></p><div class="le lf gp gr lg lh"><a href="https://www.digitalocean.com/community/tutorials/how-to-create-a-self-signed-ssl-certificate-for-nginx-in-ubuntu-18-04" rel="noopener  ugc nofollow" target="_blank"><div class="li ab fo"><div class="lj ab lk cl cj ll"><h2 class="bd iu gy z fp lm fr fs ln fu fw is bi translated">如何在Ubuntu 18.04 | DigitalOcean中为Nginx创建自签名SSL证书</h2><div class="lo l"><h3 class="bd b gy z fp lm fr fs ln fu fw dk translated">TLS，即传输层安全性，以及它的前身SSL，即安全套接字层，都是web协议…</h3></div><div class="lp l"><p class="bd b dl z fp lm fr fs ln fu fw dk translated">www.digitalocean.com</p></div></div><div class="lq l"><div class="lr l ls lt lu lq lv jz lh"/></div></div></a></div><p id="56a4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> nmap和相关端口:</strong></p><p id="c06a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因为当我忘记在screen中启动nmap或其他长时间运行的cmd时，这是如何强制它进入screen会话的:</p><p id="5e32" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae kz" href="https://twitter.com/hakluke/status/1149209144416583680" rel="noopener ugc nofollow" target="_blank">https://twitter.com/hakluke/status/1149209144416583680</a></p><p id="85ab" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要打开端口:</p><p id="925f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">ufw allow 1234/tcp</code></p><p id="52c0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">空间管理:</strong></p><p id="b036" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于docker(当我空间不够时，可能是docker):</p><p id="6301" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae kz" href="https://docs.docker.com/config/pruning/" rel="noopener ugc nofollow" target="_blank">https://docs.docker.com/config/pruning/</a></p><p id="d37c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">清空文件以节省空间:</p><p id="7fff" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">echo * | xargs -n1 cp /dev/null</code> //用于ffuf输出、massdns等。</p><p id="29a1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> DNS素材(ssrf相关，DNS重新绑定):</strong></p><p id="094d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">禁用并停止systemd解析的服务:</p><p id="e1b7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">sudo systemctl disable systemd-resolved.service</code></p><p id="d645" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">sudo systemctl stop systemd-resolved.</code></p><p id="0fa0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">重新启动:</p><p id="1cfe" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">systemctl restart systemd-resolved</code></p><p id="c5f5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">DNS缓存刷新:</p><p id="8c51" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">systemd-resolve</code> —统计</p><p id="0708" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">systemd-resolve</code> —刷新缓存</p><p id="5024" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于dns绑定配置(当我发现需要再次进入DNS时):</p><p id="bb4c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae kz" href="https://www.digitalocean.com/community/tutorials/how-to-configure-bind-as-a-private-network-dns-server-on-ubuntu-18-04" rel="noopener ugc nofollow" target="_blank">https://www . digital ocean . com/community/tutorials/how-to-configure-bind-as-a-private-network-DNS-server-on-Ubuntu-18-04</a></p><p id="7638" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于tcpdump OOB DNS:</p><p id="4dab" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">tcpdump -n port 53 --immediate-mode -l | grep "myserver.tk"</code></p><p id="950e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">一个好一点的，特别是日志，所以不用担心屏幕和缓冲区:</p><p id="86fb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">tcpdump -n port 53 --immediate-mode -l &gt;&gt; logtcp.txt &amp; tail -f logtcp.txt | grep "myserver.tk"</code></p><p id="ce51" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> ffuf相关:</strong></p><p id="40fa" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于ffuf输出信号:</p><p id="60f2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">cut -d',' -f2,5,6 *csv | grep ',200,' |more</code></p><p id="12b6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于按数字排序(基本上是帮助用ffuf和cut从非fp-s中找出fp-s):</p><p id="e5b5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">sort -nk3 -t','</code></p><p id="ba5e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于删除匹配对的uniq排序(如果两个字符串相同，则与sort -u不同):</p><p id="5414" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">sort input.txt | uniq -u &gt; output.txt</code></p><p id="4189" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">对于pip3: </strong></p><p id="0ce4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">python3 -m pip install some_module</code>(如果pip3 install some_module不工作)</p><p id="696c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">对于bash脚本</strong>(不是真正的vps特定的，只是认为放在这里有意义):</p><div class="le lf gp gr lg lh"><a href="https://unix.stackexchange.com/questions/26601/how-to-read-from-two-input-files-using-while-loop" rel="noopener  ugc nofollow" target="_blank"><div class="li ab fo"><div class="lj ab lk cl cj ll"><h2 class="bd iu gy z fp lm fr fs ln fu fw is bi translated">如何使用while循环读取两个输入文件</h2><div class="lo l"><h3 class="bd b gy z fp lm fr fs ln fu fw dk translated">如果你确定某个字符不会出现在第一个文件中，那么你可以使用粘贴。</h3></div><div class="lp l"><p class="bd b dl z fp lm fr fs ln fu fw dk translated">unix.stackexchange.com</p></div></div><div class="lq l"><div class="lw l ls lt lu lq lv jz lh"/></div></div></a></div></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="1323" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">给你。请随意将它加入书签，或者拷贝到某个地方，添加内容等等。</p></div></div>    
</body>
</html>