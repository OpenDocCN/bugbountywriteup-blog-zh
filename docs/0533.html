<html>
<head>
<title>Mobile phone number verification bypass</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">手机号码验证旁路</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/mobile-phone-number-verification-bypass-5a9c19c42de8?source=collection_archive---------0-----------------------#2020-03-29">https://infosecwriteups.com/mobile-phone-number-verification-bypass-5a9c19c42de8?source=collection_archive---------0-----------------------#2020-03-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4e62" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在这篇文章中，我将展示我是如何绕过网站中的电话号码验证过程的。我还将解释为什么这是可能的，以及我们可以做些什么来防止这种类型的攻击。</h2></div><h1 id="1a58" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">什么是电话号码验证</h1><p id="3c0d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">当你在一些网站上创建帐户时，有时他们会要求你验证你在注册过程中提供的电话号码。他们向您提供的号码发送短信，并要求您输入短信中的代码。这样他们就知道你告知的号码真的是你的。这样做意味着你的帐户现在与一个“官方”手机号码相联系，这个号码与你的名字相联系。这是身份验证的一种形式。</p><h1 id="f0c5" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">他们为什么要求验证电话号码</h1><p id="2b7b" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这些验证过程允许网站将账户与真实的人联系起来。他们这样做是因为他们想防止机器人创建大量帐户。这也有助于防止黑客使用这些帐户做坏事，因为如果他们这样做，他们的手机号码会附加到他们的帐户上，更容易识别他们。当然，有几种方法可以绕过这个问题。</p><h1 id="eaae" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">实现电话号码验证的错误方法</h1><p id="1974" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">为了实现这样的安全措施，我们首先必须知道什么是最佳实践，以及对于这种场景可能的攻击类型。</p><p id="6f38" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">如今，不难找到针对数字验证过程的各种类型攻击的免费工具。基于此，我们必须记住，例如，通过短信发送的代码必须有多少位。如今，大多数网上银行应用程序使用七位、八位甚至九位数字代码登录网站，甚至授权交易。</p><p id="9b09" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">例如，今天使用四位数字代码来验证电话号码是不安全的，我们马上就会看到这一点。这是因为互联网上有无数的工具能够轻松地暴力破解一万个数字(四位数的代码，从0000到9999)。</p><p id="4d15" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">网站必须记住的另一件事是当一个人提交代码时错误尝试的次数。我的意思是，我们必须确保网站不允许暴力破解代码。当一个人输入一个代码时，可以通过设置某种限制来防止这种情况。一种方法是强迫用户发送一个新代码，并在少量错误尝试后使之前的代码无效。</p><p id="fcdd" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">此外，我们可以使用一些验证码实现，如果方法正确，可以防止自动化。</p><h1 id="d9f8" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">概念验证</h1><p id="b5d9" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我在一个网站上为自己创建了一个新帐户，当我进入帐户设置区域时，我看到他们要求验证我的电话号码。我按照流程操作，他们给我的手机发了一条短信，几秒钟后我就收到了。密码是2161，只有四个数字。当我看到这种情况时，我想“好吧，让我们验证我的号码并进行概念验证”。我做的第一件事是启动我的Kali和火打嗝套件。Burp是一种对web应用程序进行安全评估的工具。这是一个强大的工具，即使是免费版本，也可以做很多事情。</p><p id="7118" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">Burp就像一个代理，它站在你的浏览器和网络服务器之间。这样做可以让您在请求/响应到达目的地之前，看到浏览器生成的所有请求以及web服务器的响应。您还可以修改这些请求/响应来欺骗web服务器，有时绕过一些安全实现。</p><p id="4cf0" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">因此，我使用了burp提供的那些函数来查看我们在网站上输入代码后应用程序生成的请求是什么样子的。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi ly"><img src="../Images/c5a999723fbc2d17d2f662ea8966ab02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AUtvEXTc4le8UoVJ9oaD8g.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">拦截电话号码请求</figcaption></figure><p id="f1d8" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">正如我们在上面的图像中看到的，请求的最后一行带有数字“0000”，这是我在网站上键入的数字，以便强制它生成请求并将其发送到服务器。问题是这个请求从来没有到达web服务器，因为burp能够先拦截它。</p><h1 id="8909" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">强力过程</h1><p id="e5d9" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">知道了请求是如何形成的，现在我们可以让burp发送数以千计的请求，这些请求看起来就像原始的请求，但不同之处在于每个请求的验证码都是唯一的。服务器将接收包并处理它们，寻找验证码并将它们与正确的验证码进行比较。如果一个代码是错误的，web服务器用一个错误消息来回答这个请求，如果代码是正确的，它就验证这个电话号码。</p><p id="c362" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">为了暴力破解代码，我们将使用打嗝的“入侵者”标签。它允许我们将请求的特定部分标记为强制执行。我们将使用的攻击方法是狙击手，这是最简单的一种。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/b1b9a1c7b97a1640f8b3e0bd4b292e9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*GywTSlToAV1unC86azfXqw.png"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">使用Burp的入侵者配置暴力任务</figcaption></figure><p id="481d" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">“入侵者”的“有效载荷”选项卡允许我们生成一个将在攻击中使用的数字列表。每个数字将被放入一个请求中，取代原来的“0000”。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/6f62cc0c7dfe1b7323b77a3954ac91b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*esEqshIcY2x8KRXUqgwUgQ.png"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">使用Burp的入侵者配置暴力任务</figcaption></figure><p id="75ca" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">在列表中，我选择从2000到3000，因为我已经知道正确的代码，即2161。这意味着我们只需要发送162个请求就可以得到正确的代码。但是在真正的攻击中，burp会发送10000个请求，每个请求携带一个从0000到9999的代码。</p><p id="9bea" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">当我们开始攻击时，我们可以看到burp开始向服务器发送请求，每个请求都有自己的代码。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi mq"><img src="../Images/2328e87f26683ae7c91d347a4dedf902.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sUvlrRw6yjtL-I-iNKwJIw.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">强力任务请求的一个例子</figcaption></figure><p id="fa10" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">我们还可以看到web服务器的响应，它返回一条错误消息:</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi mr"><img src="../Images/3580f4bc418b42eb74ece40fb28f13ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TKiFYN1P37F3U-sYJoS6rQ.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">无效验证码的响应示例:“代码不正确”</figcaption></figure><p id="fb16" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">因此，过了一会儿，burp向服务器发送正确的代码，我们可以看到现在的响应是不同的，确认代码工作。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi ms"><img src="../Images/e8f88af519a5c8a378c7e407580c1a67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ow5crWuX_eMCmPPIawu5CQ.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">验证成功的回应:“您的手机号码已通过验证”</figcaption></figure><p id="de2a" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">所以我们知道服务器用正确的代码接受了我的请求。进入网页，我现在可以看到我的号码是绿色的，这意味着它是有效的。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/1736209cafefc0674fb7358154ff44f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:570/format:webp/1*vobt0lrK7USw6Slbgbj6SQ.png"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">电话号码通过暴力验证成功</figcaption></figure><p id="a34f" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">嗯，就是这样。我会联系负责网站安全的人，告诉他们我的发现。我希望我能够以一种简单的方式解释这个过程和它背后的概念。下次见！</p></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><h1 id="fd24" class="kf kg iq bd kh ki nb kk kl km nc ko kp jw nd jx kr jz ne ka kt kc nf kd kv kw bi translated">uolayfirertruaesbeilhidubgscnoklyfurousauciacsssstusnoikhoylhoysauebmloec</h1></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><h1 id="e5e8" class="kf kg iq bd kh ki nb kk kl km nc ko kp jw nd jx kr jz ne ka kt kc nf kd kv kw bi translated">🔈 🔈Infosec Writeups正在组织其首次虚拟会议和网络活动。如果你对信息安全感兴趣，这是最酷的地方，有16个令人难以置信的演讲者和10多个小时充满力量的讨论会议。<a class="ae ng" href="https://iwcon.live/" rel="noopener ugc nofollow" target="_blank">查看更多详情并在此注册。</a></h1><div class="nh ni gp gr nj nk"><a href="https://iwcon.live/" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd ir gy z fp np fr fs nq fu fw ip bi translated">IWCon2022 - Infosec书面报告虚拟会议</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">与世界上最优秀的信息安全专家建立联系。了解网络安全专家如何取得成功。将新技能添加到您的…</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">iwcon.live</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny mi nk"/></div></div></a></div></div></div>    
</body>
</html>