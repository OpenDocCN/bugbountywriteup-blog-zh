<html>
<head>
<title>How I could have accessed all your private videos/photos saved inside your device without even unlocking it?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我怎么能在不解锁的情况下访问你手机里保存的所有私人视频/照片呢？</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/how-i-could-have-accessed-all-your-private-videos-photos-saved-inside-your-device-without-even-1a7e455ddcc8?source=collection_archive---------0-----------------------#2021-06-06">https://infosecwriteups.com/how-i-could-have-accessed-all-your-private-videos-photos-saved-inside-your-device-without-even-1a7e455ddcc8?source=collection_archive---------0-----------------------#2021-06-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8918" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi">…</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/2ce1b511b4517073d55b3f6d83feffd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CwoVCl12r6jJzPdolMonGQ.jpeg"/></div></div></figure><blockquote class="kx ky kz"><p id="d860" class="jn jo la jp b jq jr js jt ju jv jw jx lb jz ka kb lc kd ke kf ld kh ki kj kk ij bi translated">这篇文章是关于用户保存在他/她的设备中的照片/视频等敏感隐私数据是如何通过脸书房间电话泄露出去的，即使是从一个锁定的Android设备上。</p></blockquote><p id="f144" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi">…</p><blockquote class="le"><p id="50ea" class="lf lg iq bd lh li lj lk ll lm ln kk dk translated">2020年10月；我在脸书怀特哈特项目中提交了一份有效的漏洞报告，用户私人保存的视频/观看历史可能会从锁定的Android设备的Messenger调用中的“一起观看”功能中暴露出来。</p></blockquote><div class="lo lp lq lr ls lt"><a rel="noopener  ugc nofollow" target="_blank" href="/users-private-watched-videos-list-saved-videos-etc-30faa8610b33"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd ir gy z fp ly fr fs lz fu fw ip bi translated">用户的私人观看视频列表，保存的视频等。</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">这篇文章是关于一个暴露用户私人观看的视频列表、保存的视频、共享的视频等的漏洞…</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">infosecwriteups.com</p></div></div><div class="mc l"><div class="md l me mf mg mc mh kv lt"/></div></div></a></div><p id="df22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">简要总结一下，有；用户可以通过messenger呼叫受害者的帐户，然后从受害者锁定的Android手机接收呼叫，在不解锁手机的情况下使用呼叫屏幕上的“一起观看”功能，从而允许入侵者访问脸书用户的所有保存的视频和观看历史。所以，基本上；这里的漏洞是，脸书允许用户在设备锁定的状态下使用手表这样的敏感功能。脸书修补了这个漏洞以及类似的漏洞，要求在使用锁定的安卓手机上的敏感功能之前先解锁手机。</p></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><p id="9585" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">于是，有一天；当我突然想起那篇报道时，脑海中触发了一些想法:</p><blockquote class="kx ky kz"><p id="b002" class="jn jo la jp b jq jr js jt ju jv jw jx lb jz ka kb lc kd ke kf ld kh ki kj kk ij bi translated"><strong class="jp ir"> 1)如果，不是一个正常的信使呼叫；那是一个</strong> <a class="ae mp" href="https://about.fb.com/news/2020/04/introducing-messenger-rooms/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">的房间叫</strong> </a> <strong class="jp ir">？</strong></p></blockquote><p id="ea80" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi">,</p><blockquote class="kx ky kz"><p id="7822" class="jn jo la jp b jq jr js jt ju jv jw jx lb jz ka kb lc kd ke kf ld kh ki kj kk ij bi translated"><strong class="jp ir"> 2)房间呼叫中是否有类似的敏感功能，可以在不解锁手机的情况下从锁定屏幕外部访问</strong>？</p></blockquote><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/7e452192a03c13334bbe3039e6939072.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*io2Eh4WoG4R_57yNupmkLA.gif"/></div></figure><p id="0976" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，没有任何延迟，</p><ol class=""><li id="469c" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated">我做了两个测试脸书账户；一个登录了我的Android手机(Let，UserA-受害者)，另一个登录了我的PC(Let，UserB-攻击者)。</li><li id="e95c" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">在这里，UserA的Android手机处于锁定状态。</li><li id="df8d" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">然后，从UserB，我主持了一个Messenger Room，并邀请UserA到这个房间&amp;我自己也加入了这个房间。</li><li id="f096" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">然后，从UserB我从“受邀用户”区给UserA打了电话。</li><li id="8e7c" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">几秒钟后，电话在UserA锁定的Android手机上响起。</li><li id="d193" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">然后，我拿起电话，尝试了所有已知的敏感功能，如“一起观看”、“添加联系人”等。但是他们都需要先解锁手机才能使用。</li><li id="5164" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">然后，突然，我在呼叫的右上角看到这样的东西:</li></ol><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/f3be9bd08eb0990a634a2e5496d4ebb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:336/format:webp/1*09MU-nEgaGDX0LD4mK0iAg.png"/></div><figcaption class="ng nh gj gh gi ni nj bd b be z dk translated"><strong class="bd nk">“注意到了吗？”</strong></figcaption></figure><p id="c4a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">房间参与者之间形成的群组有一个聊天选项。</p><p id="82cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，兴奋之余，我立即点击了它。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/41a9095fdd2a0691be2939abcaf1c10f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*myKGu3-PzGVTkI0nlKHpDg.gif"/></div></figure><p id="667f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我一点击，一幅美丽的画面就像这样跳了出来:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nm"><img src="../Images/ec142888565dce63f867c4ef053d38a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*kQB-ypVv4Bqla2h5uAo_iw.gif"/></div></div></figure><p id="9ccb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我当时想:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/79f8ff8c8b240813075e49fa0b7a1ad1.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/1*EBeFtTzL0ds-obiY-x_42A.gif"/></div></figure><p id="ed7b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不仅因为我知道我甚至不用解锁手机就可以给这个群组发消息，还因为文本框旁边有一个<strong class="jp ir"> gallery </strong>选项。</p><p id="397e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，马上；我以最快的速度点击了那个选项。</p><p id="9bbe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">看完那风景后，我就想:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi no"><img src="../Images/2708515a92ab033a2a4722febad12363.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/1*VZvK_J76HCgteidzvIhBKw.gif"/></div></figure><p id="343c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我发现我可以访问该设备上的所有私人照片/视频，甚至不用解锁手机。而且；我可以通过点击任何媒体的“编辑”选项，从相同的锁定状态向受害者用户的登录脸书发布故事。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi np"><img src="../Images/e79abb99ddff1a3accb1d047312ab814.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/1*dd5pnrQc6kmejyEyNO-1Yw.gif"/></div></figure></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><p id="0d9d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，我总结了所有的信息，很快向脸书做了报告。脸书安全团队在客户端快速修复了漏洞，并在服务器端进行了一些调整，以在之前易受攻击的版本中进行修补，在分流后不到一天的时间里，他们奖励了我一笔可观的奖金，这是我甚至没有想到的需要物理接触受害者设备的攻击场景。不过，我很欣赏他们基于这个漏洞会给Android FB用户带来的影响范围而做出的奖励决定。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/9b7c046719dc69a0b7633412cb1a21a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*z63WS8yU9xN-X8A4qLN9lw.png"/></div><figcaption class="ng nh gj gh gi ni nj bd b be z dk translated">最终奖励信息</figcaption></figure><blockquote class="le"><p id="336f" class="lf lg iq bd lh li nr ns nt nu nv kk dk translated">如果你想查看我随报告一起发送的这个漏洞的POC视频，你可以在这里<a class="ae mp" href="https://drive.google.com/file/d/1UlQ_PVoXKvoJ7xn3ydezC0R2U68qVs1E/view?usp=sharing" rel="noopener ugc nofollow" target="_blank">找到它</a>。</p></blockquote><p id="af91" class="pw-post-body-paragraph jn jo iq jp b jq nw js jt ju nx jw jx jy ny ka kb kc nz ke kf kg oa ki kj kk ij bi">…</p><h2 id="be63" class="ob oc iq bd nk od oe dn of og oh dp oi jy oj ok ol kc om on oo kg op oq or os bi translated"><strong class="ak">感谢您阅读这篇关于具有高度影响力的漏洞的简单场景的文章。如果您有任何疑问/建议，我可以在</strong><a class="ae mp" href="https://www.facebook.com/samiparyalfb/" rel="noopener ugc nofollow" target="_blank"><strong class="ak"/></a><strong class="ak">/</strong><a class="ae mp" href="https://www.instagram.com/samiparyal_/" rel="noopener ugc nofollow" target="_blank"><strong class="ak">insta gram</strong></a><strong class="ak">上找到您。</strong></h2><p id="9d0f" class="pw-post-body-paragraph jn jo iq jp b jq ot js jt ju ou jw jx jy ov ka kb kc ow ke kf kg ox ki kj kk ij bi">…</p><div class="oy oz gp gr pa lt"><a href="https://portswigger.net/daily-swig/android-screen-lock-protection-thwarted-by-facebook-messenger-rooms-exploit" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd ir gy z fp ly fr fs lz fu fw ip bi translated">Facebook Messenger Rooms漏洞利用阻碍了Android屏幕锁定保护</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">Adam Bannister 2021年6月14日12:40 UTC更新时间:2021年6月14日13:27 UTC研究人员获得3000美元的bug奖金</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">portswigger.net</p></div></div><div class="mc l"><div class="pb l me mf mg mc mh kv lt"/></div></div></a></div></div></div>    
</body>
</html>