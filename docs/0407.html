<html>
<head>
<title>GraphQL introspection leads to sensitive data disclosure.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GraphQL自省导致敏感数据泄露。</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/graphql-introspection-leads-to-sensitive-data-disclosure-714f1d9d9d4a?source=collection_archive---------0-----------------------#2019-10-30">https://infosecwriteups.com/graphql-introspection-leads-to-sensitive-data-disclosure-714f1d9d9d4a?source=collection_archive---------0-----------------------#2019-10-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/82c44bdf9d6ef8493919f4db6486763c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jtikZ8FzsZoir-qD"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">资料来源:lynda.com</figcaption></figure><p id="20a3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">简介</strong></p><p id="285b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">你好世界！我是艾山·辛格，又名<strong class="ke ir">T3【R0X4RT5】。我就是你朋友告诉你的那个黑客少年。我侵入网络服务器以确保系统安全。我在这里分享我最近关于GraphQL自省的发现。</strong></p><p id="bb48" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">什么是GraphQL </strong></p><p id="5589" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">众所周知，脸书使用自己的查询语言来正确存储数据。因此，根据GraphQL.org的说法，GraphQL是一种API查询语言，也是一种用现有数据完成这些查询的运行时语言。GraphQL为API中的数据提供了一个完整且易于理解的描述，让客户能够准确地了解他们的需求，使API更容易随时间发展，并支持强大的开发工具。</p><p id="1581" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">关于此漏洞</strong></p><p id="fa29" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为了发现这个bug，我花了至少5-6个小时学习GraphQL的基础知识，并阅读了所有其他相关的bug报告，尤其是Namhamsec的GraphQL CTF挑战赛。</p><p id="20b0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">之后在Bugcrowd上看到一个新的节目，就参与了。他们给了我一个域【就当域是<strong class="ke ir">example.com</strong>吧，因为漏洞还没修复】，也就是example.com。所以我在这个域名上建了一个账户，然后解雇了burpsuite，并为蜘蛛搜索添加了example.com；10-20秒后，我看到了example.com/graphql,，于是我有了example.com使用Graphql进行API管理的想法。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/ee615506dcfbd33842fbb5a6a805d7ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/0*yzk2WgL2FQHX6izR"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">资料来源:almostdumb.com</figcaption></figure><p id="185f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">我在此使用的工具</strong></p><ul class=""><li id="c9e3" class="lg lh iq ke b kf kg kj kk kn li kr lj kv lk kz ll lm ln lo bi translated">硬石膏</li><li id="a5dd" class="lg lh iq ke b kf lp kj lq kn lr kr ls kv lt kz ll lm ln lo bi translated">Burpsuite扩展—JSON beautiier和GraphQL Raider</li><li id="0196" class="lg lh iq ke b kf lp kj lq kn lr kr ls kv lt kz ll lm ln lo bi translated">网页浏览器[火狐] :P</li></ul><p id="473d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">我是如何获得漏洞的</strong></p><p id="bbff" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">首先，我注销并再次登录example.com，然后我进入<strong class="ke ir"> <em class="la">【更新个人资料】</em> </strong>部分，将我的名字从Eshan Singh改为Singh Eshan，并点击保存。然后截取那个请求，并发送给中继器，然后我看到了一些有趣的事情，即</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lu"><img src="../Images/9120dc74b8b9f5d7ffda6817e6ebe1ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0CJPSuCZyo-Xe9nD"/></div></div></figure><p id="83c4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">__typename带有PayRollAdmin，所以我将其替换为xyz，然后我再次发送请求，然后检查xyz在PayRollAdmin place上反映的响应。</p><p id="1502" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">因此，为了更深入地挖掘这个问题，我谷歌了GraphQL漏洞，然后我看到一个黑客披露了这个漏洞，即<a class="ae lv" href="https://hackerone.com/reports/291531" rel="noopener ugc nofollow" target="_blank">https://hackerone.com/reports/291531</a>。所以我想让我们试试这个人在这个报告上做的。</p><p id="e6d9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我谷歌了自省GraphQL有效载荷，我从PayloadAllTheThings repo:</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lw"><img src="../Images/667afcd95a4fe061659a830f111e7364.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jJIe304ag5wD2eQn"/></div></div></figure><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lx"><img src="../Images/948f277e6f9d11517d7026f3c4e95b66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WxjAOqUTAafECLC4"/></div></div></figure><p id="b392" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然后我复制了有效载荷并粘贴到burpsuite中的graphql选项卡上，发送了请求，然后walla！我得到了一个有趣的回答。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/abae986b8822b46a44a37ca344196118.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/0*X7Xw76Fs_f55rwGZ"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">来源:https://tenor.com/view/omg-oh-my-god-wow-gif-11411674</figcaption></figure><p id="1cf1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这种影响</p><p id="5a2d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">该应用程序基本上由工资单和人力资源使用。所以当我利用它时，我能够检索交易收据和用户密码电话号码等</p><p id="c1ed" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">感谢和问候</p><p id="5daf" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">埃尚·辛格[R0X4R]</p><p id="b1a7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">正在注销…</p></div></div>    
</body>
</html>