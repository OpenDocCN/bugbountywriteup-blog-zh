<html>
<head>
<title>Mirai from Hackthebox</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">黑客盒子的Mirai未来组合</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/mirai-from-hackthebox-9729e648acbf?source=collection_archive---------4-----------------------#2022-01-03">https://infosecwriteups.com/mirai-from-hackthebox-9729e648acbf?source=collection_archive---------4-----------------------#2022-01-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="de6f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Pi hole默认凭证和文件系统取证</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/db2be6fbaf65ff68df5a38f2f200dfee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*cd8qbM8bVXc2xyaixCl6vw.jpeg"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk translated">来源:hackthebox</figcaption></figure><p id="8c29" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">大家好，我是Hac，今天我们将为大家带来来自黑客盒子的Mirai未来组合。这是一个很容易退役的Linux机器，你需要做一些取证工作来获得根标志。所以，不浪费任何时间，让我们开始黑客攻击。</p><p id="3ea3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们首先从Nmap扫描开始:-</p><pre class="kg kh ki kj gt lo lp lq lr aw ls bi"><span id="d592" class="lt lu iq lp b gy lv lw l lx ly">#nmap -sS -sV -oA all_port -p- 10.129.179.164<br/>Nmap scan report for 10.129.179.164<br/>Host is up (0.17s latency).<br/>Not shown: 65529 closed tcp ports (reset)<br/>PORT STATE SERVICE VERSION<br/>22/tcp open ssh OpenSSH 6.7p1 Debian 5+deb8u3 (protocol 2.0)<br/>53/tcp open domain dnsmasq 2.76<br/>80/tcp open http lighttpd 1.4.35<br/>1691/tcp open upnp Platinum UPnP 1.0.5.13 (UPnP/1.0 DLNADOC/1.50)<br/>32400/tcp open http Plex Media Server httpd<br/>32469/tcp open upnp Platinum UPnP 1.0.5.13 (UPnP/1.0 DLNADOC/1.50)<br/>Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel<br/></span></pre><blockquote class="lz ma mb"><p id="d275" class="kr ks mc kt b ku kv jr kw kx ky ju kz md lb lc ld me lf lg lh mf lj lk ll lm ij bi translated"><em class="iq">我做了全端口扫描，对我来说有四个有趣的服务一个端口22 ssh，第二个端口80 http，它有最大的攻击面，端口32400运行plex媒体服务器，最后一个端口53我很快会告诉你为什么我认为它很有趣。</em></p></blockquote><p id="c3ab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="mc">我访问了IP地址为10.129.179.164的80端口</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mg"><img src="../Images/d2352d4812e9775cb39ca750514dfd72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w3TmFfPXQKHnVdiCQAWo-A.jpeg"/></div></div></figure><p id="a339" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">啊，现在端口53也就是DNS变得有趣了，我们可以在/etc/hosts文件中添加<a class="ae ln" href="http://mirai.htb/" rel="noopener ugc nofollow" target="_blank"> mirai.htb </a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi ml"><img src="../Images/f00b177f8f299435a953d1fbf0e11829.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZPc7gipNs65ZsGXX25tvyQ.jpeg"/></div></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk translated">访问mirai.htb后</figcaption></figure><p id="9ebf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，当我们导航到mirai.htb时，我有点困惑地看到该网站被阻止的页面。为了确保我没有漏掉什么，我进行了搜索。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/5e6969516b787265f620afaf17dbe89d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*DMiH2OH0A1JWyvdwY57kyQ.jpeg"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk translated">目录搜索结果</figcaption></figure><p id="dece" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从dirsearch结果，我导航到<strong class="kt ir"> /admin </strong>页面，整个管理控制台就在我面前</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mn"><img src="../Images/d6111cb04467a99cbc3b0a971f0e79b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C4-N2Z6v98NVJK1oKHn1kA.jpeg"/></div></div></figure><blockquote class="lz ma mb"><p id="20ab" class="kr ks mc kt b ku kv jr kw kx ky ju kz md lb lc ld me lf lg lh mf lj lk ll lm ij bi translated">这是我第一次碰到pi hole管理控制台，所以我试着用弱信用<strong class="kt ir"> admin:admin，admin:password，pi:raspberry </strong>登录。但是运气不好，在这里我有点不知所措，所以我访问了<strong class="kt ir">端口32400 </strong></p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mo"><img src="../Images/e4707eaadb5c93bfeef5a8cf0d9569a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jUnsn5Aef_353rkGlz-Opw.jpeg"/></div></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk translated">丛媒体页面</figcaption></figure><blockquote class="lz ma mb"><p id="c1fc" class="kr ks mc kt b ku kv jr kw kx ky ju kz md lb lc ld me lf lg lh mf lj lk ll lm ij bi translated">在这里，我再次尝试了默认信用，如<strong class="kt ir"> admin:admin，admin:password </strong>再次不走运，但我们可以创建自己的帐户，但当我试图创建帐户时，它给了我一些错误(在编写这篇文章时，我可以创建帐户并登录)。所以对我来说，只剩下最后一个选项了，那就是ssh。我知道这是个漏洞，所以我在ssh上尝试了它的默认凭证，然后我就进入了他们的系统。</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/49842f5c998c7cfebf8af85bb13588e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*-qc3yS1AexSZXmfSd-UL6Q.jpeg"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk translated">通过ssh登录pi-hole</figcaption></figure><p id="a091" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我们需要做一些艰苦的工作来获得user.txt，而你需要做这些艰苦的工作。目前，我们的主要目标是扎根。</p><blockquote class="lz ma mb"><p id="3982" class="kr ks mc kt b ku kv jr kw kx ky ju kz md lb lc ld me lf lg lh mf lj lk ll lm ij bi translated">所以每当我有了最初的立足点，我通常会检查sudo版本、sudo -l、内核版本和crontab。</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/4546c9237641f83906a3d859c97d5faf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*tGbrsxJcI02WxncBOmstYQ.jpeg"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk translated">须岛一号</figcaption></figure><p id="90d3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">呜哇！！！！！很简单，我们可以运行任何命令，因为root只需要运行<strong class="kt ir"> sudo su </strong>就可以成为这个机器上的root。成为root很容易，但我们的主要目标是找到一个root标志，相信我，你会喜欢并学习到很多新东西。</p><p id="6679" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将首先检查根标志的<strong class="kt ir"> /root </strong>目录</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mr"><img src="../Images/7540793858e12ade0f33f8d16f69ec9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ysfyusryval71Ja0DScT3g.jpeg"/></div></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk translated">正在检查root.txt的/root目录</figcaption></figure><blockquote class="lz ma mb"><p id="e135" class="kr ks mc kt b ku kv jr kw kx ky ju kz md lb lc ld me lf lg lh mf lj lk ll lm ij bi translated">哦，我们的root.txt文件被删除了，但他在u盘上做了备份。我们将使用<a class="ae ln" href="https://www.geeksforgeeks.org/df-command-in-linux-with-examples/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> df </strong> </a>(显示所有文件系统及其磁盘使用情况)。</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi ms"><img src="../Images/7fb1ae355b26682843c7391fc15b5f35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9HZCXejY_MhiGPuGFCMS0A.jpeg"/></div></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk translated">使用df命令</figcaption></figure><blockquote class="lz ma mb"><p id="d270" class="kr ks mc kt b ku kv jr kw kx ky ju kz md lb lc ld me lf lg lh mf lj lk ll lm ij bi translated">我们可以在<strong class="kt ir"> /media/usbstick </strong>中看到我们的USB stick(Linux中的<a class="ae ln" href="https://www.howtogeek.com/117939/htg-explains-what-everything-is-a-file-means-on-linux/" rel="noopener ugc nofollow" target="_blank">一切都是文件</a></p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mt"><img src="../Images/9124101438ea584e3a744580a9a7bcb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ls0iGUGNXm8MNTyE_s0tNQ.jpeg"/></div></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk translated">检查/媒体/USB棒</figcaption></figure><p id="3dd7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不不。！！！！我们的根标志被删除。我对如何恢复文件做了一些研究，我将向您展示所有最简单的选项。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mu"><img src="../Images/3b0ab91283af5d8852bd5f6e5ab7a1af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vi0dCywGbBzrv5wwH4TGwA.png"/></div></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk translated">我们可以在/dev/sdb中看到我们的标志</figcaption></figure><blockquote class="lz ma mb"><p id="d901" class="kr ks mc kt b ku kv jr kw kx ky ju kz md lb lc ld me lf lg lh mf lj lk ll lm ij bi translated">有许多其他方法来恢复这个文件，但我会请你做研究，这里有一些资源，这将是有帮助的，如果你正在做研究。<a class="ae ln" href="https://www.wikihow.com/Recover-Deleted-Files-from-Pen-Drive-in-Linux" rel="noopener ugc nofollow" target="_blank">https://www . wikihow . com/Recover-Deleted-Files-from-Pen-Drive-in-Linux</a></p><p id="40aa" class="kr ks mc kt b ku kv jr kw kx ky ju kz md lb lc ld me lf lg lh mf lj lk ll lm ij bi translated"><a class="ae ln" href="https://unix.stackexchange.com/questions/288059/how-can-i-safely-recover-deleted-data-from-a-usb-flash-drive" rel="noopener ugc nofollow" target="_blank">https://UNIX . stack exchange . com/questions/288059/how-can-I-safely-recover-deleted-data-from-a-a-USB-flash-drive</a></p></blockquote><p id="99dd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">谢谢大家看完这个。我希望这能对你有所帮助。可以关注我的</strong> <a class="ae ln" href="https://twitter.com/Hac10101" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">推特</strong> </a> <strong class="kt ir">。</strong></p></div></div>    
</body>
</html>