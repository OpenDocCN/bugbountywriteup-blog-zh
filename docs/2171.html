<html>
<head>
<title>Let’s Learn about Cookie and Its Security</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们了解一下Cookie及其安全性</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/lets-learn-about-cookie-and-its-security-f6d349f2ccc0?source=collection_archive---------1-----------------------#2022-07-08">https://infosecwriteups.com/lets-learn-about-cookie-and-its-security-f6d349f2ccc0?source=collection_archive---------1-----------------------#2022-07-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/61a6a30bf620e6f6fee32a49b56e8681.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dbMwNM_xNhn7DoIZ"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">照片由</strong> <a class="ae kg" href="https://unsplash.com/@vyshnavibisani?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> <strong class="bd kf">维什那维</strong> </a> <strong class="bd kf">上</strong> <a class="ae kg" href="https://unsplash.com/s/photos/cookie?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> <strong class="bd kf">下</strong> </a></figcaption></figure><p id="c0aa" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><strong class="kj iu">简介</strong></p><p id="691d" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">当我们讨论正确的会话管理以及应用程序当前如何处理用户的会话管理时，我们称之为“会话管理”有许多应用程序通常使用的基本组件，例如存储在标题或cookie中的令牌。每当使用cookie或向cookie添加任何值时，必须确保应用适当的保护。如果不这样做，cookies可能会受到危害，这就是为什么它们需要适当的保护。在今天的帖子中，我们将更深入地探讨cookie安全性的话题，以及在保护它们时应该考虑的因素。</p><h1 id="428c" class="lf lg it bd kf lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">保护Cookie</h1><p id="56c1" class="pw-post-body-paragraph kh ki it kj b kk mc km kn ko md kq kr ks me ku kv kw mf ky kz la mg lc ld le im bi translated"><strong class="kj iu">什么是Cookie </strong></p><p id="e5a2" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">每个在线应用程序为每个用户提供一个保存在客户端的独一无二的会话标识符，分配给该身份的值作为一个变量保存在cookie中，以便应用程序可以识别用户并更好地为他们服务。该应用程序能够确定哪个用户当前已登录，并为该用户提供适合其特定兴趣领域的内容。每次用户基于path变量访问应用程序时，都会随请求一起发送一个cookie。这允许应用程序验证用户，并确保它按照要求提供服务。除了确保用户得到正确的身份验证之外，这还可以用于实施任何必要的授权。这些在cookies中找到的会话令牌可以被认为是用户帐户的临时用户名和密码。一旦用户注销他们的帐户，它们就失效了。</p><p id="2549" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">让我们了解一下可以在cookie中使用的不同标志，以使它完全安全</p><h2 id="aa04" class="mh lg it bd kf mi mj dn lk mk ml dp lo ks mm mn ls kw mo mp lw la mq mr ma ms bi translated"><strong class="ak"> HttpOnly </strong></h2><figure class="mu mv mw mx gt ju gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/bc03b26cef511f9d03445084c04db2c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4h7yKc0MpiAc576R"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kg" href="https://dzone.com/articles/cross-site-cookie-manipulation" rel="noopener ugc nofollow" target="_blank"> <strong class="bd kf">来源</strong> </a></figcaption></figure><h2 id="e8b1" class="mh lg it bd kf mi mj dn lk mk ml dp lo ks mm mn ls kw mo mp lw la mq mr ma ms bi translated"><strong class="ak"> HttpOnly标志未设置为真</strong></h2><p id="baab" class="pw-post-body-paragraph kh ki it kj b kk mc km kn ko md kq kr ks me ku kv kw mf ky kz la mg lc ld le im bi translated">为了防止客户端脚本访问cookie的内容，有必要在cookie中设置HttpOnly标志。如果cookie上没有设置此标志，那么客户端脚本(包括恶意JS有效负载)将能够通过使用简单的属性文档轻松访问cookie。饼干。</p><p id="f139" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">在跨站点脚本攻击中，攻击者总是希望获得对cookie的访问权限，以便可以访问cookie并将其移动到由攻击者控制的域中。cookie遭到破坏后，如果不采取额外的保护措施，cookie就有可能被用来控制用户的帐户。因此，如果会话令牌和其他敏感信息保存在cookie中，攻击者将能够访问它们，并能够以不道德的方式利用它们。出于恶意目的访问用户的帐户、更改用户的个人资料或泄露用户的全部信息都是恶意意图的例子。</p><p id="d5fa" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">应用程序所有者需要将“HttpOnly”标志设置为“True”。</p><p id="34d8" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">Cookie中需要设置几个属性，“HttpOnly”是其中之一。</p><blockquote class="my mz na"><p id="1743" class="kh ki nb kj b kk kl km kn ko kp kq kr nc kt ku kv nd kx ky kz ne lb lc ld le im bi translated"><em class="it"> setcookie($name，$value，$expire，$path，$domain，$secure，$ http only)；</em></p></blockquote><p id="87d5" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">在设置cookie时，httponly标志的值必须设置为“$ <em class="nb"> httponly=True </em>”。</p><p id="988c" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><strong class="kj iu">示例</strong>:在下面的代码片段中，HTTPonly设置在cookie中。</p><blockquote class="my mz na"><p id="df80" class="kh ki nb kj b kk kl km kn ko kp kq kr nc kt ku kv nd kx ky kz ne lb lc ld le im bi translated"><em class="it"> setcookie("userCookie "，$userl，0，"/"，" www.example.com "，TRUE)；</em></p></blockquote><p id="7394" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><strong class="kj iu">设定到期时间</strong></p><p id="e74b" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">应该要求存储敏感信息(如会话令牌和其他信息)的Cookies设置过期时间。因为这些cookie包含可用于访问用户帐户的会话令牌，所以让它们长时间处于活动状态会带来安全风险，因为成功破坏其中一个cookie的黑客可以无限期地访问用户帐户。因此，在cookie上放置过期时间是绝对必要的。大多数组织，如处理敏感数据的组织(如银行网站)，通常具有较短的过期时间，并且在cookie生成后大约15-20分钟后删除。</p><p id="2819" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><strong class="kj iu">为了设置到期时间，您可以使用此技术</strong></p><blockquote class="my mz na"><p id="aaa0" class="kh ki nb kj b kk kl km kn ko kp kq kr nc kt ku kv nd kx ky kz ne lb lc ld le im bi translated"><em class="it"> setcookie("userCookie "，$user，time()+60 * 60 * 24 * 365 * 1)；</em></p></blockquote><p id="fb53" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">此后，该cookie的副本将在用户的计算机上保留一年。超过分配的时间后，它会自动终止。因为这样做可以提高用户帐户及其存储信息的安全性，所以始终建议将过期时间设置为24或48小时。</p><p id="2ac4" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><strong class="kj iu">安全属性</strong></p><figure class="mu mv mw mx gt ju gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/e45b4977f82e6042e5f153fe0bb89602.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/0*Q8EOJr4Oj0Xp0-1o"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kg" href="https://materials.rangeforce.com/tutorial/2017/03/06/Cookie-Security/" rel="noopener ugc nofollow" target="_blank"> <strong class="bd kf">来源</strong> </a></figcaption></figure><p id="d5d9" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">这是使用cookie的安全属性完成的。如果这个特征被改变，cookie将不能通过加密通道(在http上)传输。当用户连接到公共Wi-Fi网络时，希望实施中间人攻击的攻击者通常会强迫他们使用未加密的信道进行连接。这是因为，如果使用未加密的通道建立连接，攻击者将能够读取从用户计算机传输的所有信息。如果cookie不包含该属性，它也将通过未加密的通道流动，这使得攻击者有可能破坏它并获得用户帐户的访问权限。</p><p id="2109" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">应用程序的“安全”标志需要由其所有者设置为“真”。因此，即使攻击者成功说服用户通过未加密的通道进行通信，cookie也不会随请求一起传输，攻击者也无法获得它。</p><blockquote class="my mz na"><p id="0f3e" class="kh ki nb kj b kk kl km kn ko kp kq kr nc kt ku kv nd kx ky kz ne lb lc ld le im bi translated"><em class="it"> setcookie($name，$value，$expire，$path，$domain，</em><strong class="kj iu"><em class="it">$ secure</em></strong><em class="it">，$ http only)；</em></p></blockquote><p id="2987" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">在设置cookie值时，管理员可以设置“$Secure <em class="nb"> =True </em>”。</p><p id="d13a" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><strong class="kj iu">结论</strong></p><p id="70aa" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">Cookies在应用程序安全中起着重要的作用，所以要确保小心地实现它。在这篇博客中，我讨论了源代码审查过程中与Cookie相关的一些基本技术。安全团队可以手动发现问题，也可以使用自动化工具来发现问题。市场上有如此多的安全代码审查工具。</p></div></div>    
</body>
</html>