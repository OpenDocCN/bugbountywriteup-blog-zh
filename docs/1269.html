<html>
<head>
<title>RCE via Internal Access to Adminer Database Management (Critical)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过内部访问管理员数据库管理的RCE(关键)</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/rce-via-internal-access-to-adminer-database-management-critical-d3dc2a1d392a?source=collection_archive---------0-----------------------#2021-04-24">https://infosecwriteups.com/rce-via-internal-access-to-adminer-database-management-critical-d3dc2a1d392a?source=collection_archive---------0-----------------------#2021-04-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="bdae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你好，</p><p id="14dd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我的名字是艾哈迈德哈拉比，我在我的空闲时间做昆虫赏金猎人。我主要在HackerOne上打猎。</p><p id="26cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇文章中，我将与你分享我如何能够访问内部数据库管理，导致远程代码执行。</p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="4fb9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">概述::</strong></p><p id="c2c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我在一个公共程序上搜索时，我发现了一个有趣的子域<code class="fe ks kt ku kv b">remoteservices.target.com</code>，我对自己说，那里肯定隐藏着什么。</p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="8560" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">侦察方法::</p><p id="4aa3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我喜欢侦查，我花了很多时间做侦查，而不是真正的黑客。</p><p id="5617" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以浏览目标网站<a class="ae kw" href="https://remoteservices.target.com" rel="noopener ugc nofollow" target="_blank">https://remoteservices.target.com</a>显示404代码没有发现任何响应。</p><p id="ed2f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当您在响应中看到<code class="fe ks kt ku kv b">404 Not Found</code>时，这意味着该网站中可能隐藏了一些东西，这里最好的方法是目录暴力/枚举。</p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="4167" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">目录枚举::</strong></p><p id="44f4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一个最常见的问题是你使用哪个单词表？</p><p id="338b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对我个人来说，我不使用任何特定的一个，它总是取决于你正在黑客攻击的目标。例如，如果它是一个IIS服务器，那么您应该使用包含IIS目录和文件的单词表。如果是apache服务器，那么您应该使用包含apache目录和文件的单词表。对你接近的任何目标都这样做。因此，如果我发现一个新的有趣的目录和文件路径，我通常会编辑多个单词表。这就是你如何优化你的侦察，使它更快更准确。</p><p id="95fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我用FFUF工具暴力破解了目标子域的目录，我得到了一个有趣的响应:这个目录的<code class="fe ks kt ku kv b">admin</code>(<a class="ae kw" href="https://remoteservices.target.com/admin" rel="noopener ugc nofollow" target="_blank">https://remoteservices.target.com/admin</a>)。</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi kx"><img src="../Images/261e0b394623e5edb97ae6007e23cab8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YUDyD70LY2x5_jp1zmthZQ.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">403禁止响应</figcaption></figure><p id="9374" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这看起来很酷，因为禁止意味着肯定有一个隐藏的内容/部分，他们不想让你看到或访问。</p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="67d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">禁止绕过403的下一步::</strong></p><p id="165c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我想到的第一件事是强行打开https://remoteservices.target.com/admin/adminer.php的<code class="fe ks kt ku kv b">admin</code>目录，我得到了一个可爱的管理员登录面板<a class="ae kw" href="https://remoteservices.target.com/admin/adminer.php" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi ln"><img src="../Images/9ecc4f78513b47566ba67e0c910b7c88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EVrE0ZqIVlLdl5DiSQ_5pA.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">管理员登录</figcaption></figure><p id="ca85" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Adminer 是一个数据库管理工具，允许连接和管理不同的数据库管理系统，如MySQL和Oracle。</p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="96b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">获取内部访问::</strong></p><p id="c36e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我搜索CVEs和已知的漏洞属于这个管理员登录面板识别的版本号，但我没有运气。</p><p id="35ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我做的第二件事是，检查目标程序的Github存储库中指向Adminer登录面板的任何暴露的凭证，但我也没有发现任何有趣的东西。</p><p id="4261" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我做的最后一件事是，我在Google上搜索默认的管理员登录凭证和用于管理员登录的常用凭证。我得到了很酷的结果。经过两个小时的尝试，我成功地访问了公司的内部数据库，从而远程执行代码，在那里我可以操作他们的数据库。</p><p id="b9f6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">用户名是:<code class="fe ks kt ku kv b">homestead</code></p><p id="a1b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">密码是:<code class="fe ks kt ku kv b">secret</code></p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="803b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">补救::</strong></p><p id="d2f9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该程序立即删除了对目标网站的访问，然后修复了问题并更改了凭据。</p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="64dd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">遗憾的是，仍有一些知名公司使用默认凭证或容易被猜到的凭证。这有时会导致严重的问题，如果被罪犯而不是道德黑客发现，可能会造成有害的损害。</p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="6b40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">报告时间::</strong></p><p id="6728" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2020年9月17日:初步报告。</p><p id="6098" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">2020年10月18日:</strong>报告解决&amp;赏金发放。</p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="dd59" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我的黑客简介:<a class="ae kw" href="https://hackerone.com/ahmd_halabi" rel="noopener ugc nofollow" target="_blank">https://hackerone.com/ahmd_halabi</a></p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="d93e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">希望给我的创业公司`<a class="ae kw" href="https://cybitsec.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> Cybit Sec </strong> </a>`一个社交媒体简介:<a class="ae kw" href="https://twitter.com/CybitSec" rel="noopener ugc nofollow" target="_blank"> Twitter </a>，<a class="ae kw" href="https://www.linkedin.com/company/cybitsec" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>，<a class="ae kw" href="https://www.facebook.com/CybitSec1" rel="noopener ugc nofollow" target="_blank">脸书</a>，<a class="ae kw" href="https://www.instagram.com/cybitsec/" rel="noopener ugc nofollow" target="_blank"> Instagram </a>。</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi lo"><img src="../Images/2e436b5bf2fedf14154fc7bc9e1add18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jgVtA3c6Lu5mrD_QT6HEfQ.png"/></div></div></figure></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="24fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你还没有阅读我的文章，关于我如何开始bug bounty hunting，我如何在美国国防部(2019年)排名第一，以及我如何在hackerone上达到前100名黑客，你可以在下面找到它。</p><div class="lp lq gp gr lr ls"><a href="https://ahmdhalabi.medium.com/my-bug-bounty-journey-ranking-1st-in-u-s-dod-achieving-top-100-hackers-in-1-year-f208c10144fc" rel="noopener follow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd ir gy z fp lx fr fs ly fu fw ip bi translated">我的Bug Bounty之旅&amp;在美国国防部排名第一&amp;在一年内达到前100名黑客</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">我正在分享我的一些方法，资源，技巧和建议来成为一个更好的虫子赏金猎人。</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">ahmdhalabi.medium.com</p></div></div><div class="mb l"><div class="mc l md me mf mb mg lh ls"/></div></div></a></div><p id="abda" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本文还包含开始学习所需的所有资源和许多有价值的提示。</p><p id="019b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">祝你好运:)</p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="0014" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢阅读！</p></div></div>    
</body>
</html>