<html>
<head>
<title>When I found error logs through debug information(cgi scripts) and ws-ftp log</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">当我通过调试信息(cgi脚本)和ws-ftp日志找到错误日志时</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/when-i-found-error-logs-through-debug-information-cgi-scripts-and-ws-ftp-log-796470a71bea?source=collection_archive---------1-----------------------#2019-10-12">https://infosecwriteups.com/when-i-found-error-logs-through-debug-information-cgi-scripts-and-ws-ftp-log-796470a71bea?source=collection_archive---------1-----------------------#2019-10-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="176b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在评估过程中，我在xyz.com上找到了披露错误日志的调试URL..</p><p id="b619" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">抱歉我不能透露网站名称…</p><p id="dd41" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们开始…</p><p id="2b2d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当我开始侦察并试图找出这个程序的漏洞时。</p><p id="0804" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我尝试了很多东西，比如xss，idor，nd等等。(无斑点)</p><p id="b88b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当我试图找到xss时..然后大部分时间我都出错了(xyz.com/errors)</p><p id="1569" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一天后，我尝试了一些不同的有效载荷和许多东西，但没有工作。</p><p id="be08" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我尝试的任何东西(随机xss有效负载)总是重定向一个页面(xyz.com/errors)</p><p id="da60" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">几个小时后，我试着这样做</p><p id="996b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">获取/错误/errors.log HTTP/1.1</p><p id="eb2d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后…</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/9bbb873eddf7467929788a622a6ce40c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k4MXGmsAdEFvIP8F"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">乔丹·马蒂厄在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lf"><img src="../Images/c2d4deb2850b98ae2f32a46372ff4e8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G1qI6p3j_iSlHjAgwD5MGQ.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">你看到这个了吗</figcaption></figure><p id="b548" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下次你遇到一些错误，你重定向一些错误页面，请尝试/errors.log。可能是你增加银行存款的一个步骤。</p><p id="c4de" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们继续前进…</p><p id="c7c1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后我试着浏览这个网站，发现了一些关于WS_FTP的好东西。</p><p id="3a8e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先让我们来看看WS_FTP</p><p id="af76" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在您的web应用程序中发现了一个严重的WS_FTP漏洞。WS_FTP是一个流行的Windows客户端，系统管理员和开发人员利用它从web服务器上传和下载文件，默认情况下，每次传输都记录在日志文件中。与攻击者发现WS-FTP日志文件相关的风险源于这样一个事实，即应该保持隐藏的文件，如管理或维护应用程序、web应用程序配置文件或应用程序数据文件，可能会变得可见。建议包括从应用服务器中删除WS_FTP日志文件，并配置WS_FTP使其不创建日志文件。</p><p id="61a9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当WS_FTP用于传输文件时，服务器上会创建一个名为“ws_ftp.log”的日志文件。该日志文件包含WS_FTP访问的每个文件的记录，这可能包含对攻击者非常有价值的信息，因为它可能会列出本来“隐藏”的文件这通常包括管理或维护应用程序、web应用程序配置文件、开发中的应用程序、备份的应用程序源代码和可能的应用程序数据文件。</p><p id="3482" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，WS_FTP日志文件对攻击者很有价值，因为它们显示了目录中的所有文件，而不仅仅是打算使用的文件。攻击者通过在您的web应用程序服务器上发现WS_FTP日志文件来利用不安全的web应用程序有多容易？通常，这就像输入直接从WS_FTP日志文件中获得的文件名一样简单。本质上，获得对WS_TP日志文件的访问权大大减少了潜在攻击者获取web应用程序知识的工作量。</p><p id="03ee" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">成功攻击您的web应用程序的一个基本要素是侦察。攻击者会采用各种方法，包括恶意扫描代理和Google搜索，来尽可能多地找出关于您的web应用程序的信息。当攻击者制定下一步攻击方法时，可以利用这些信息。发现WS_FTP日志文件的攻击者已经完成了大部分侦察工作</p><p id="c1d4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我试过GET /WS_FTP。记录HTTP/1.1，但是我得到一些错误…</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lg"><img src="../Images/303fef6c3b26edd155e124a472534801.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dMBXZlqniPx2Z-5i9bKZ6A.png"/></div></div></figure><p id="128d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我再说一遍，你的一步改变了很多事情(花30分钟做同样的事情)我明白了..</p><p id="67d3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">获取/admin/WS_FTP。日志HTTP/1.1</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lh"><img src="../Images/091275ae63aa6e1d8144585de491503e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X6HnDMrhN0SrG9aZmh6fuA.png"/></div></div></figure><p id="5d89" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">对于开发:</strong> <br/>除非您积极参与web应用服务器的实现，否则没有广泛的可用解决方案来防止攻击者发现WS_FTP日志文件所带来的问题。这个问题主要由web应用服务器管理员来解决。但是，您可以采取某些措施来帮助保护您的web应用程序。</p><ul class=""><li id="07ea" class="li lj it js b jt ju jx jy kb lk kf ll kj lm kn ln lo lp lq bi translated">将重要文件或目录的访问权限限制在真正需要的人。</li><li id="38e0" class="li lj it js b jt lr jx ls kb lt kf lu kj lv kn ln lo lp lq bi translated">确保包含敏感信息的文件不会被公开访问，或者留在文件中的注释不会泄露最好保密的目录的位置。</li></ul><p id="e437" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">对于安全操作:</strong> <br/>要消除WS_FTP日志文件漏洞的风险，可以采取两种主要措施。</p><ul class=""><li id="48ba" class="li lj it js b jt ju jx jy kb lk kf ll kj lm kn ln lo lp lq bi translated">从应用服务器中手动删除WS_FTP日志文件。</li><li id="a31e" class="li lj it js b jt lr jx ls kb lt kf lu kj lv kn ln lo lp lq bi translated">配置WS_FTP，使其不在服务器上创建日志文件。</li></ul><p id="4dc2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">web应用程序安全性的一个最重要的方面是将对重要文件或目录的访问限制在那些真正需要访问它们的个人。确保您的web应用程序的私有架构结构不会暴露给任何希望查看它的人，因为即使看似无害的目录也可能向潜在的攻击者提供重要信息。</p><p id="9cc7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以下建议有助于确保您不会无意中允许访问可用于实施攻击的信息或存储在可公开访问的目录中的专有数据。</p><ul class=""><li id="d2db" class="li lj it js b jt ju jx jy kb lk kf ll kj lm kn ln lo lp lq bi translated">确保包含敏感信息的文件不会被公开访问，或者留在文件内的注释不会泄露最好保密的目录的位置。</li><li id="7fec" class="li lj it js b jt lr jx ls kb lt kf lu kj lv kn ln lo lp lq bi translated">将重要文件或目录的访问权限限制在真正需要的人。</li><li id="ea80" class="li lj it js b jt lr jx ls kb lt kf lu kj lv kn ln lo lp lq bi translated">不要遵循隐藏目录的标准命名程序。例如，不要创建包含cgi脚本的名为“cgi”的隐藏目录。显而易见的目录名只是…很容易被攻击者猜到。</li></ul><p id="27b1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">请记住，您使攻击者越难访问关于您的web应用程序的信息，他就越有可能找到一个更容易的目标。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="ac81" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你喜欢，请鼓掌。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="f560" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="md">关注</em> <a class="ae le" href="https://medium.com/bugbountywriteup" rel="noopener"> <em class="md"> Infosec报道</em> </a> <em class="md">获取更多此类精彩报道。</em></p><div class="me mf gp gr mg mh"><a href="https://medium.com/bugbountywriteup" rel="noopener follow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd iu gy z fp mm fr fs mn fu fw is bi translated">信息安全报道</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">收集了世界上最好的黑客的文章，主题从bug奖金和CTF到vulnhub…</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">medium.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv ky mh"/></div></div></a></div></div></div>    
</body>
</html>