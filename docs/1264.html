<html>
<head>
<title>Wekor Tryhackme Writeup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Wekor Tryhackme报道</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/wekor-tryhackme-writeup-17ade6e4e1a?source=collection_archive---------5-----------------------#2021-04-22">https://infosecwriteups.com/wekor-tryhackme-writeup-17ade6e4e1a?source=collection_archive---------5-----------------------#2021-04-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="cbf9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">作者Shamsher khan这是一篇关于Tryhackme room“Wekor”的文章</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi kl"><img src="../Images/e77499c906c6391a67d1bf0123f92b67.png" data-original-src="https://miro.medium.com/v2/resize:fit:894/format:webp/1*4HxyjMMFwoaNQqkYs7Ra_A.png"/></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk translated">https://tryhackme.com/room/wekorra<a class="ae kx" href="https://tryhackme.com/room/wekorra" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure><p id="768d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">房间链接:</strong><a class="ae kx" href="https://tryhackme.com/room/wekorra" rel="noopener ugc nofollow" target="_blank">https://tryhackme.com/room/wekorra</a><br/><strong class="jp ir">注:此房免费</strong></p><p id="e0dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将标签添加到主机文件</p><pre class="km kn ko kp gt ky kz la lb aw lc bi"><span id="32b4" class="ld le iq kz b gy lf lg l lh li">echo "10.10.62.4      wekor.thm" &gt;&gt; /etc/hosts</span></pre><h1 id="d66f" class="lj le iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">列举</h1><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/a5d0d922f43d0ff5cc4652fc2e7ce9c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*k-9_LqJyieQr-2ud7I_-IA.png"/></div></figure><p id="8c40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在端口80上</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/c3e858bccfb79259b37277defad46b67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*vaErRyXK-fpkKuN-qNoP_Q.png"/></div></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/66673d869faac17b7d45b39377e7d299.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*FI5iRg5YXIUWEll1Opn5Yg.png"/></div></figure><p id="a91f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">网站上还有一个robots.txt，在访问robots.txt时，我们会看到许多不同的目录路径。遗憾的是，除了一个“/comingrealysoon”之外，所有这些都将我们重定向到404(没有找到)</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/c0394a345571b6347114d6c842c7bbcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jZus1hReArnPUYYC2ePNwQ.png"/></div></div></figure><p id="cf15" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里我们找到了另一个目录</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mo"><img src="../Images/2a8007f88ef6d4152a47330a1b97b433.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kKVLphslr6bt5fbQB_V7QQ.png"/></div></div></figure><p id="4c2c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">经过一番探索，我们看到在网站的结帐部分有一个表单域，在那里他们要求提供优惠券代码。<br/>测试一个可能的SQL注入，试图只放一个单引号，网站反映一个错误信息。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/84869855a20f86f701017e8fb8e57318.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*a0rNtgy4DChAbfnL91-hDw.png"/></div></figure><p id="5aec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用“<strong class="jp ir">”或1 = 1—</strong>”，不带双引号，将获得实际的优惠券代码。</p><p id="12ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用Burpsuite捕获请求</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/aada78058cc9e508989fe85273b32b6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*mBGf7spwx_gvVUYBHzYlvg.png"/></div></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/20760aa57ef0c79ea4a0d4c487d5aa56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*lBW3Ryl2yfhOeSX4Kyz0NA.png"/></div></figure><p id="b1b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行SQLMAP</p><blockquote class="mr ms mt"><p id="f3df" class="jn jo mu jp b jq jr js jt ju jv jw jx mv jz ka kb mw kd ke kf mx kh ki kj kk ij bi translated"><em class="iq"> sqlmap -r request.txt </em></p></blockquote><p id="3864" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这证实了我们有SQL注入的可能:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi my"><img src="../Images/cc6f85854629bb35ac915420a46105f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jborf2JvFbUYBLvkfzN-pg.png"/></div></div></figure><p id="d649" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">检查可用的数据库:</p><blockquote class="mr ms mt"><p id="3383" class="jn jo mu jp b jq jr js jt ju jv jw jx mv jz ka kb mw kd ke kf mx kh ki kj kk ij bi translated"><em class="iq">sqlmap-r request . txt—DBS</em></p></blockquote><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/d6cc88e7afb09911fd5831cceadb922d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*XHpzyYZJuw3eS6MBRRe2yg.png"/></div></figure><p id="12c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">检查WordPress数据库中的表格:</p><blockquote class="mr ms mt"><p id="b9ce" class="jn jo mu jp b jq jr js jt ju jv jw jx mv jz ka kb mw kd ke kf mx kh ki kj kk ij bi translated"><em class="iq">sqlmap-r request . txt-D WordPress-tables</em></p></blockquote><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi na"><img src="../Images/a17c71e8292927c437b011f7d3b3cb58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*vVGBwM0qEvyGcwR9wenrbQ.png"/></div></figure><p id="2618" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">转储表“wp_users”</p><blockquote class="mr ms mt"><p id="f8a3" class="jn jo mu jp b jq jr js jt ju jv jw jx mv jz ka kb mw kd ke kf mx kh ki kj kk ij bi translated"><em class="iq">sqlmap-r request . txt—dump-D WordPress-T WP _ users</em></p></blockquote><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nb"><img src="../Images/e456d808698555de90cc36332b1e0d62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wa6_DdSUUg3z3BGeq3O1dw.png"/></div></div></figure><p id="d9ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，我们有网站用户“管理员”的散列:<a class="ae kx" href="http://site.wekor.thm/wordpress" rel="noopener ugc nofollow" target="_blank">http://site.wekor.thm/wordpress</a></p><p id="e1eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从<a class="ae kx" href="https://hashcat.net/wiki/doku.php?id=example_hashes" rel="noopener ugc nofollow" target="_blank">这里</a>我们可以看到has的类型是“phpass”:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/424e9ac60aaf9d07573f26753457ec1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*nahMHM9teO7pf5JYPd2aCQ.png"/></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk translated"><a class="ae kx" href="https://hashcat.net/wiki/doku.php?id=example_hashes" rel="noopener ugc nofollow" target="_blank">https://hashcat.net/wiki/doku.php?id=example_hashes</a></figcaption></figure><p id="084a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">把所有的散列放在一个文本文件中，然后用JTR破解:</p><blockquote class="mr ms mt"><p id="3596" class="jn jo mu jp b jq jr js jt ju jv jw jx mv jz ka kb mw kd ke kf mx kh ki kj kk ij bi translated"><em class="iq">John—word list = rock you . txt—format = phpass hash . txt</em></p></blockquote><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/ebf42cb95cbe0849ddba4d990db09bc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*CN-B4Xuufe1vi-p1nWfmAg.png"/></div></figure><p id="6aec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">破解了一些哈希，尝试破解用户“wp_yura”的密码，我们可以登录到<a class="ae kx" href="http://site.wekor.thm/wordpress/wp-" rel="noopener ugc nofollow" target="_blank">http://site.wekor.thm/wordpress/wp-</a>login.php。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nd"><img src="../Images/0b5ae78b9dea292bf54563c27eca5e64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jeSH_Ks_sPJEGiYtvKnFYQ.png"/></div></div></figure><h1 id="e871" class="lj le iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">反向外壳</h1><p id="6d03" class="pw-post-body-paragraph jn jo iq jp b jq ne js jt ju nf jw jx jy ng ka kb kc nh ke kf kg ni ki kj kk ij bi translated">现在可以从这里通过外观- &gt;主题编辑器- &gt; 404模板(404.php)注入一个<a class="ae kx" href="https://github.com/pentestmonkey/php-reverse-shell/blob/master/php-reverse-shell.php" rel="noopener ugc nofollow" target="_blank"> php反向外壳</a>得到一个反向外壳:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nj"><img src="../Images/dbcad5f9d2b54c71e31a6718bb81eb02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6e22csUKf__ZCDopt6JzkQ.png"/></div></div></figure><p id="81af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">记得输入我们想要获得反向shell的机器的IP地址和端口号。还要在该计算机上启动netcat会话。现在使用以下链接访问404.php:</p><blockquote class="mr ms mt"><p id="a0e2" class="jn jo mu jp b jq jr js jt ju jv jw jx mv jz ka kb mw kd ke kf mx kh ki kj kk ij bi translated"><a class="ae kx" href="http://site.wekor.thm/wordpress/wp-content/themes/twentytwentyone/404.php" rel="noopener ugc nofollow" target="_blank"><em class="iq">http://site . wekor . thm/WordPress/WP-content/themes/twenty twenty one/404 . PHP</em></a></p></blockquote><p id="317b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们得到了一个相反的外壳:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi gj"><img src="../Images/e171d1ba4a7a4403d3cb267d580353a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WvHkeneGC92Ev8zOaAM4hQ.png"/></div></div></figure><p id="abd1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们有哪些用户</p><pre class="km kn ko kp gt ky kz la lb aw lc bi"><span id="0fec" class="ld le iq kz b gy lf lg l lh li">cat /etc/passwd</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/19f8afbe5c497626288a9c626f6ef050.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*XRWgjZH7L9tRXAPD0KJ4pQ.png"/></div></figure><p id="b7ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">只有Orka和root拥有shell配置。</p><p id="ab29" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">寻找开放端口，您可以在端口11211中找到正在运行的东西。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nl"><img src="../Images/c5498d14f1258706b65a4d0957791bc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k8RhkzSJLZ1zB1SqGq-e4Q.png"/></div></div></figure><p id="c1b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在谷歌搜索后，我们发现这是一个memcached服务器。再进行一些搜索，我们得到了转储缓存数据的命令。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nm"><img src="../Images/b5893e46f6af019e8588ef575cc50046.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O3qR7FLNXhPlyHxGftqU3Q.png"/></div></div></figure><p id="c1ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好了，现在我们有Orka密码了。</p><p id="5fed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">作为奥卡，你能做什么？</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/d63a4d6227ba489b8f4ac159d1686f3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*se45kTL06Mw_7Mkjm8dvMg.png"/></div></figure><h1 id="87f9" class="lj le iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">权限提升</h1><p id="f90d" class="pw-post-body-paragraph jn jo iq jp b jq ne js jt ju nf jw jx jy ng ka kb kc nh ke kf kg ni ki kj kk ij bi translated">现在是时候进行权限升级了。首先，在运行任何脚本之前，让我们检查Orka是否可以使用<code class="fe no np nq kz b">sudo -l</code>运行任何东西:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/7734ed5ddcf2383668a402fc2a0f7829.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/format:webp/1*3Kgx6KdxvqKLxJ2pHE5skw.png"/></div></figure><p id="e15a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">可以执行比特币为sudo。你也不能改变比特币，但你可以改变桌面文件夹。我们把比特币换成bash，求根。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/d7b0ed2c5a1bb56c354a5a9159d37ac5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/1*mui86B_2ZhjUnFa_pwCFLg.png"/></div></figure><p id="4332" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在:<br/><strong class="jp ir">LinkedIn:-</strong><a class="ae kx" href="https://www.linkedin.com/in/shamsher-khan-651a35162/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/shamsher-khan-651a35162/</a><br/><strong class="jp ir">Twitter:-</strong><a class="ae kx" href="https://twitter.com/shamsherkhannn" rel="noopener ugc nofollow" target="_blank">https://twitter.com/shamsherkhannn</a><br/><strong class="jp ir">Tryhackme:-</strong><a class="ae kx" href="https://tryhackme.com/p/Shamsher" rel="noopener ugc nofollow" target="_blank">https://tryhackme.com/p/Shamsher</a></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/09e5bbba06c7688a702aeec8570d243c.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/format:webp/1*Vve7XR6kstH7qA5iQQ-kYA.png"/></div></figure><p id="35a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如需更多演练，请在出发前继续关注…<br/>…</p><p id="d8b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">访问我的其他演练:-</p><p id="d3fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢您花时间阅读我的演练。<br/>如果你觉得有用，请点击👏按钮👏(高达40倍)并分享<br/>它来帮助其他有类似兴趣的人！+随时欢迎反馈！</p></div></div>    
</body>
</html>