<html>
<head>
<title>Hunting Session Overloading Vulnerability</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">狩猎会话过载漏洞</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/hunting-session-overloading-d2ec860c49c0?source=collection_archive---------2-----------------------#2020-04-12">https://infosecwriteups.com/hunting-session-overloading-d2ec860c49c0?source=collection_archive---------2-----------------------#2020-04-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1e32d9b4820117250ecf1589d96d0eaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N-NrIrkcT_Ln-5eF05sHJQ.png"/></div></div></figure><p id="0cd1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了寻找网站中基于会话的缺陷，人们必须了解会话和cookies的总体情况。因此，让我们深入了解一下web应用程序是如何管理会话的。</p><h1 id="45af" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated"><strong class="ak">什么是会话？</strong></h1><p id="9f64" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">Web应用程序使用cookies是为了使HTTP协议的无状态本质有状态。cookie是由服务器发送给浏览器的一小段简单数据，浏览器可以存储该cookie并在下一次请求时将其发送回服务器。cookie可用于以下任何目的</p><h1 id="90f8" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">会话管理</h1><p id="60f9" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">会话管理包括处理一系列与用户对服务器的请求和响应相关联的HTTP请求。</p><p id="62aa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">每当用户访问一个特定的网站时，他可能会得到一个会话，并且他所做的任何事情都将在向用户提供的会话的上下文中进行。会话管理派上用场的一些常见例子包括登录或向购物车添加产品。</p><h1 id="9f54" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">个性化</h1><p id="d2ac" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">个性化仅仅涉及服务器能够记住用户偏好、主题或用户应用的设置。</p><h1 id="963f" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">跟踪</h1><p id="4ab6" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">现在，我甚至不打算跳到跟踪的话题上，因为我们生活在一个后斯诺登时代的世界里，我们已经有了像剑桥分析公司这样的丑闻，在那里，一种心理战武器是根据收集的用户数据开发的，所以你只需要知道web应用程序能够收集用户数据，这些数据可以被链接并有意义地得出商业决策等等，这通常是在cookies的帮助下完成的。</p><p id="976b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，如果你想了解更多关于追踪的信息，你可以在<a class="ae lz" href="https://www.youtube.com/watch?v=iX8GxLP1FHo&amp;t=33s" rel="noopener ugc nofollow" target="_blank">网飞</a>上观看一部精彩的纪录片。</p><p id="b400" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">有趣的事实:</strong>现代网络应用程序可以跟踪你的光标，还可以根据这个事实判断用户是左撇子还是右撇子，他们可能会在屏幕的左侧或右侧为你提供广告。</p><p id="f79d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">什么是会话id？它存放在哪里？又是如何发送的？</strong></p><p id="3272" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">会话是存储在服务器上的一个全局变量，每当创建一个会话时，它都会被分配一个唯一的id或值，用于检索存储的数据。每次创建会话时，都会向用户发送一个包含会话id的cookie。所以会话id存储在哪里，这实际上取决于实现，但通常存储在cookie jar、本地存储或内存中。这些通常被添加到请求头或cookie中并发送给服务器。</p><h1 id="e6d2" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">什么是会话莫名其妙或会话过载？</h1><p id="3c7b" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">当web应用程序将会话变量用于多种目的时，会出现会话过载或会话混乱的漏洞。会话过载可能允许攻击者绕过身份验证，冒充用户或提升帐户权限。</p><p id="09fa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们以密码重置功能为例，如果在访问网站时，给定了一个会话，登录后会话以类似于请求新密码时验证的方式得到验证，或者如果在请求新密码或登录时使用了相同的会话和会话id，那么很明显，如果web应用程序将会话变量用于多个目的，则可能会导致灾难。为了理解会话困惑，您需要观看下面给出的视频，其中有两个例子测试案例1展示了在一个名为<a class="ae lz" href="https://code.google.com/archive/p/puzzlemall/downloads" rel="noopener ugc nofollow" target="_blank"> Puzzlemall </a>的应用程序上测试的会话困惑，测试案例2涉及在<a class="ae lz" href="https://owasp-skf.gitbook.io/asvs-write-ups/" rel="noopener ugc nofollow" target="_blank"> OWASP SKF </a>上测试，这两个应用程序都存在设计上的漏洞。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="65ce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在测试案例1中，攻击者能够在不使用凭证的情况下访问具有uri/puzzle mall/private/view profile . JSP的登录后模块，因为现有会话的验证方式与攻击者仅通过请求新密码或生成忘记密码请求来使用正确凭证时的验证方式相似。</p><p id="28bb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在测试用例2中，您会注意到，当用户访问网站时，没有会话id或任何cookie，这取决于用户是否会在登录后获得会话，或者只是通过访问网站并在以后验证会话。会话是一种半永久性的信息交换，这仅仅意味着它是有状态的，但并不总是如此，这取决于用例。测试案例2中的攻击者能够在请求新密码时获得会话id，因此攻击者能够进入登录后模块“/dashboard”。</p></div></div>    
</body>
</html>