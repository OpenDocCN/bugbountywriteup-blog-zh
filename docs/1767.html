<html>
<head>
<title>Vulnhub: Pwned 1 Walkthrough</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vulnhub: Pwned 1演练</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/vulnhub-pwned-1-walkthrough-af16ad8cdff9?source=collection_archive---------2-----------------------#2022-01-05">https://infosecwriteups.com/vulnhub-pwned-1-walkthrough-af16ad8cdff9?source=collection_archive---------2-----------------------#2022-01-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="f9fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从<strong class="jp ir">vulnhub<em class="kl">Pwned 1</em></strong>T5】的下一篇文章中再次返回。你可以看看我刚刚发表的博客，<a class="ae km" href="https://hellfire0x01.medium.com/vulnhub-vulnos-2-walkthrough-7ca0b9db013f" rel="noopener"> Vulnhub: VulnOS 2演练</a>(随机地，我决定把它们链接起来，这样你就可以看看我以前的笔记了！).你可以从这里下载这个盒子，</p><div class="kn ko gp gr kp kq"><a href="https://www.vulnhub.com/entry/pwned-1,507/" rel="noopener  ugc nofollow" target="_blank"><div class="kr ab fo"><div class="ks ab kt cl cj ku"><h2 class="bd ir gy z fp kv fr fs kw fu fw ip bi translated">Pwned: 1</h2><div class="kx l"><h3 class="bd b gy z fp kv fr fs kw fu fw dk translated">该网站使用“cookies”为您提供最佳、最相关的体验。使用这个网站意味着你对…</h3></div><div class="ky l"><p class="bd b dl z fp kv fr fs kw fu fw dk translated">www.vulnhub.com</p></div></div><div class="kz l"><div class="la l lb lc ld kz le lf kq"/></div></div></a></div><p id="6bca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">扫描网络</strong></p><p id="4132" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用<code class="fe lg lh li lj b">netdiscover</code>我们将找出机器的IP地址</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="7447" class="ls lt iq lj b gy lu lv l lw lx">sudo netdiscover -r 10.0.2.0/24</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi ly"><img src="../Images/38b62d3afbfef1da03dabdf6de735f63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*eatAdDwyN9nstBZNhl2HDg.png"/></div></div></figure><p id="3d92" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们知道了机器的IP地址，我们可能想知道哪些端口是打开的，服务正在运行，等等，我们将通过nmap实现这一点，我们将把输出保存在<strong class="jp ir"> nmap.txt </strong>中。</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="5099" class="ls lt iq lj b gy lu lv l lw lx">sudo nmap -A -T4 -p- 10.0.2.65 -oN nmap_scan</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/1478aef5b8eb222364a79d4e12b2b28d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*K-lG-PA-WGCQ2H_92juu_g.png"/></div></figure><p id="2593" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以看到3个端口是打开的，FTP(21)、SSH(22)、Web-server(80)都在机器上运行。</p><p id="2eb5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们来访问<a class="ae km" href="http://10.0.2.65/" rel="noopener ugc nofollow" target="_blank"> http://10.0.2.65/ </a>，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/ad490a4585a26b0a5079e410499b44b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*pyUnH24MSUssjq5UzjrskA.png"/></div></figure><p id="64ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在网页上，我们可以看到一个攻击者留给我们的纸条，攻击者的名字叫<strong class="jp ir"> Annlynn </strong>。让我们查看源代码，看看是否有什么东西，</p><p id="ef90" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">向下滚动，在评论中有一条留言，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/1f1f7cf5568854e5870b970427a8302b.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*P_G99eaJIvz0mQijvXA90Q.png"/></div></figure><p id="0b32" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们将使用<strong class="jp ir"> gobuster </strong>工具暴力破解目录，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="3929" class="ls lt iq lj b gy lu lv l lw lx">gobuster dir -u http://10.0.2.65/ -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium -q 2&gt;/dev/null</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi mi"><img src="../Images/88df07b2d7a1ad162befa2f19d4c2a98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i5QBqAYOQUPEzYN0XD40qg.png"/></div></div></figure><p id="f338" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有两条路可以走。</p><p id="4d4e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们去拜访一下<strong class="jp ir"> /nothing </strong>看看有没有什么，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/83229f8e88238767fea8d22cdc33f218.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*JLit3fEnHWUXl_BuiAuSXA.png"/></div></figure><p id="4873" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击nothing.html的<strong class="jp ir"/>，我们得到了这个页面，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/c30d8919b1c8039d91f0b878b2cc2a11.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*2ytyRKQbtedwb_xbnPRLGA.png"/></div></figure><p id="2a52" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这似乎是来自黑客的消息。让我们检查一下源代码，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/16b996c4c6f893febbd74ddb09b2d1cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*U2NK5L2UGdzSKmJCGUoAGw.png"/></div></figure><p id="601f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还有另一个信息，但这还不够。让我们访问<strong class="jp ir"> /hidden_text </strong>路径，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi mm"><img src="../Images/cdd806b6487ecec3685789debfd64df3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*arrVL57K2thiK8H-cYqCmw.png"/></div></div></figure><p id="f860" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有一个<strong class="jp ir"> secret.dic </strong>文件。让我们检查一下里面有什么。</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/d2e8a9213992ad906040c6c78e6b4304.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*NVy0e6aW14tFyE64Uw07Mw.png"/></div></figure><p id="02a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这似乎是路径，可能包含一些东西。检查完之后，我遇到了<strong class="jp ir"> /pwned.vuln </strong>，它把我带到了登录页面，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi mo"><img src="../Images/9cada672093b0769e294bb8c055c086c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lCZ4G1Vs3LLCBFX0JI9OlQ.png"/></div></div></figure><p id="2023" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">似乎这是一个登录页面。在尝试登录网页之前，让我们看一下源代码，因为有时会有硬编码到源代码中的凭据(非常糟糕的主意！！！).</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/07c60071f15a46ad0095bca8cda3d32d.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*l8pn7l_bMMzvY5eHu2UR7g.png"/></div></figure><p id="e07b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">看看我们找到了什么。似乎这些是在机器上运行的FTP服务的凭证。我们试着登录吧！</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="6706" class="ls lt iq lj b gy lu lv l lw lx">ftp 10.0.2.65</span></pre><p id="0862" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用<strong class="jp ir"> ftpuser </strong>凭证，我们已经成功登录ftp服务。</p><p id="566f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们来列举一下，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/3bc1461ffcbda98a933d8b9bf71e40ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*TJo34SUiowhTFHL5hAwYag.png"/></div></figure><p id="bb59" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有一个<strong class="jp ir"> note.txt </strong>和<strong class="jp ir"> id_rsa </strong>文件。我们将使用get命令将它们下载到本地系统上，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="5f56" class="ls lt iq lj b gy lu lv l lw lx">get id_rsa<br/>get note.txt</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/22a539f2945c7c293daf72c4482baab1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*e5bR-HSTKGJaaOi8NDWU-Q.png"/></div></figure><p id="8332" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">文件被下载到我们的机器上。</p><p id="3d07" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们试着多列举一点，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/9ea25821396c65d684fbd673f3bbb958.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*74VpNtakksI_PZQ1p5Fycw.png"/></div></figure><p id="0561" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">换目录后，我们发现有一个<strong class="jp ir"> messenger.sh </strong>二进制，除了<strong class="jp ir"> ariana </strong>用户，还有<strong class="jp ir"> selena </strong>用户。但是我们不能将目录更改为selena用户。我们走出口。</p><p id="ae47" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们来看看<strong class="jp ir"> note.txt </strong>文件，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="fa04" class="ls lt iq lj b gy lu lv l lw lx">cat note.txt</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/3c951b0bb7a01c7f7ce5283f63584716.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*5Z0DdApo0PMePykmPBpYyg.png"/></div></figure><p id="8871" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个注释表明我们已经足够接近作为ariana用户登录SSH服务了。</p><p id="4687" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们看看<strong class="jp ir"> id_rsa </strong> key，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="218f" class="ls lt iq lj b gy lu lv l lw lx">cat id_rsa</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/f372e26d7fece7b58533bc61baa5f2d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*O8pLIxLSxoUEXGUqtXQNGw.png"/></div></figure><p id="9f5a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将更改它的权限，使ssh可以作为ariana用户登录。</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="fa28" class="ls lt iq lj b gy lu lv l lw lx">chmod 600 id_rsa</span></pre><p id="a7bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为密钥授予适当的权限。现在，让我们通过SSH服务登录。</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="601b" class="ls lt iq lj b gy lu lv l lw lx">ssh -i id_rsa ariana@10.0.2.65</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/2cc2a52ad872335d58c9f92fcb8a9d9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*RFyaLd8X2b0XstvFcps4oA.png"/></div></figure><p id="3b94" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在是阿丽亚娜用户。我们来枚举查找用户标志。</p><p id="7e55" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">做<strong class="jp ir"> ls </strong>，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/d9d7197d9daf3b7be37c62a1bebe7fee.png" data-original-src="https://miro.medium.com/v2/resize:fit:730/format:webp/1*8gYzaMTHJF0jgV12JnwNgA.png"/></div></figure><p id="ab77" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们有用户1标志吗？似乎系统里还有另一个用户。</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="d787" class="ls lt iq lj b gy lu lv l lw lx">cat user1.txt</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/78c04301be1ffda7eac66233402c3092.png" data-original-src="https://miro.medium.com/v2/resize:fit:726/format:webp/1*ZODlVq6KS_dz1VcLPbeXFg.png"/></div></figure><p id="ef9d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">除了flag1，还有一条信息说我们需要更加努力才能成为root。</p><p id="4ac4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们会找出<strong class="jp ir">阿丽亚娜-个人日记</strong>的内容，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="85f4" class="ls lt iq lj b gy lu lv l lw lx">cat ariana-personal.diary</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi mw"><img src="../Images/151c5897a269bf2304a5b8882e0478b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ojVU3hxKHpYVwcTDcz9LAw.png"/></div></div></figure><p id="41ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">看来这是我们横向升级的线索。</p><p id="23e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">列举一些能帮助我们提升selena用户特权的东西，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi mx"><img src="../Images/981db9914cb0f24ecfc37791b1f76546.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JYLrUv5mXH8FuZ1e2M04yw.png"/></div></div></figure><p id="261a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们不能。</p><p id="a677" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我试图检查内核版本和操作系统；这是因为通常我们大部分时间都会得到旧版本，这有助于我们获得root。然而，在这种情况下，它不起作用。</p><p id="ebf5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们检查一下哪个二进制文件或命令可以作为root用户运行，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="e85a" class="ls lt iq lj b gy lu lv l lw lx">sudo -l</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi my"><img src="../Images/3b1bd04f07895cdb81bf413972e95a4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*l83mhOYjdrKdGLHng1OadQ.png"/></div></figure><p id="fcae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们得到了一个二进制名<strong class="jp ir"> messenger.sh </strong>可以通过<strong class="jp ir"> selena </strong>用户运行。</p><p id="d29e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看看messenger.sh二进制文件的内容，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="669e" class="ls lt iq lj b gy lu lv l lw lx">cat messenger.sh</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi mz"><img src="../Images/c4e0f2e40566a6a54d448e9d3ff68c5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HxmQlFQn6_YTCgb1TVAaWQ.png"/></div></div></figure><p id="864a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这看起来像是给用户发送信息的信使。</p><p id="7ac4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将以selena用户的身份在/home目录下运行这个二进制文件，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="2922" class="ls lt iq lj b gy lu lv l lw lx">sudo -l selena /home/messenger.sh</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi na"><img src="../Images/f764a55ff00726699bddeae9fbb9a60c.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/format:webp/1*-WlREtnfpTfgm56vcSlrlA.png"/></div></figure><p id="351e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们获得了塞莱娜用户的权限。</p><p id="c55b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们将使用python升级shell，然后让我们看看user2标志，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="e077" class="ls lt iq lj b gy lu lv l lw lx">python3 -c 'import pty; pty.spawn("/bin/bash")' <br/>cd selena <br/>ls</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/116e98bbf7b1e2757c7e594579e72cfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*EaSW-X5MhqPKfOV-1ZZYnw.png"/></div></figure><p id="1a2e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们有两份文件。让我们先看看user2标志。</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="e63b" class="ls lt iq lj b gy lu lv l lw lx">cat user2.txt</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/aedcb6a3e75e46fc9a29311970182b30.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/format:webp/1*oWLt0ddrAeU_aUCWTMadwg.png"/></div></figure><p id="8c24" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们有用户2标志。现在，让我们来看看<strong class="jp ir">赛琳娜-personal.diary </strong>，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="ec9b" class="ls lt iq lj b gy lu lv l lw lx">cat selena-personal.diary</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi nd"><img src="../Images/8523dc647ad5f42ade9aab2b009bc854.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BBLYrqOPwdM7g58XZRUHbA.png"/></div></div></figure><p id="0e18" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这条消息对我们毫无意义。现在，是特权升级的时候了。</p><p id="db02" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用<code class="fe lg lh li lj b">id </code>命令，我们可以看到机器上正在运行什么，</p><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/24cd291783d526110338499cd0c362e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*CjE7tFpgswPYl2zzuiR31A.png"/></div></figure><p id="d1bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">docker服务正在运行。我们可以滥用docker来获取系统外壳。</p><p id="1c66" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看看docker上运行的图像，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="bb4f" class="ls lt iq lj b gy lu lv l lw lx">docker images</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/1308bb4e0cca33fe7092b0ad644a746f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*N4b03c4h3mMvUQcnd_uyjQ.png"/></div></figure><p id="f5b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有一个privesc映像正在运行。我们将使用这个映像来获取系统外壳，</p><p id="0ab3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过运行这个命令，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="812f" class="ls lt iq lj b gy lu lv l lw lx">docker run -v /:/mnt --rm -it privesc chroot /mnt /bin/bash</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/7814a87120ef54be1d081ab7ec1b2424.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*-M6PzAG4q1dnzO92smT6KQ.png"/></div></figure><p id="47ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们有根权限。这可以在GTFOBins上找到，(用privesc代替alpine)。</p><p id="cf69" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，读取根标志输出，</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="0a69" class="ls lt iq lj b gy lu lv l lw lx">cat /root/root.txt</span></pre><figure class="lk ll lm ln gt lz gh gi paragraph-image"><div class="gh gi my"><img src="../Images/0e1ca17d6d8028fee47a941c91dc9391.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*crRN_6peLFLFHa9z0btSsQ.png"/></div></figure><p id="54d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们已经成功利用了这个盒子。</p><p id="bc1b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">会和你们分享另一个，在那之前喝一口水！回见(:</p></div></div>    
</body>
</html>