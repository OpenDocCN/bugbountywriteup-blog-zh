<html>
<head>
<title>Basic Pentesting: 1 Walkthrough | Vulnhub</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基本测试:1次演练| Vulnhub</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/basic-pentesting-1-walkthrough-vulnhub-4dac91b416ff?source=collection_archive---------0-----------------------#2021-03-09">https://infosecwriteups.com/basic-pentesting-1-walkthrough-vulnhub-4dac91b416ff?source=collection_archive---------0-----------------------#2021-03-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9d2c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">这个演练是对基本的Pentesting: 1 Vulnhub机器由约西亚皮尔斯。它包括许多远程漏洞和提升权限的途径。点击<a class="ae kf" href="https://www.vulnhub.com/entry/basic-pentesting-1,216/" rel="noopener ugc nofollow" target="_blank">此处</a>了解更多详情或下载机器。</h2></div><p id="3adf" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">所以首先我得找到目标机器的IP地址。然后我使用了<strong class="ki ir"> netdisover </strong>命令。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/f2eebb16eaab8b7f5d0221c0df0a0011.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Gd0xV5J-aB-SXndvSF87g.jpeg"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated"><strong class="bd ls"> &lt; netdisover &gt; </strong></figcaption></figure><p id="d94b" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在侦察的第一步，我执行了一个<strong class="ki ir"> nmap扫描</strong>来识别开放的端口。</p><h2 id="c865" class="lt lu iq bd ls lv lw dn lx ly lz dp ma kp mb mc md kt me mf mg kx mh mi mj mk bi translated"><strong class="ak">nmap-sC-sV-Pn&lt;IP&gt;T9】</strong></h2><p id="55ba" class="pw-post-body-paragraph kg kh iq ki b kj ml jr kl km mm ju ko kp mn kr ks kt mo kv kw kx mp kz la lb ij bi translated">-sC:默认脚本<br/> -sV:默认版本<br/> -Pn:跳过主机发现</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi mq"><img src="../Images/c885882fd2ee57b5a43949da3c0517d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vpwW2h28Z-FvsNzAeotfdg.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated"><strong class="bd ls">T59】nmap扫描&gt;T13】</strong></figcaption></figure><p id="5500" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">所以在这台目标机器上有三个开放的端口。</p><ul class=""><li id="1ab6" class="mr ms iq ki b kj kk km kn kp mt kt mu kx mv lb mw mx my mz bi translated"><strong class="ki ir">端口21/tcp — FTP — (ProFTPD 1.3.3c) </strong></li><li id="a749" class="mr ms iq ki b kj na km nb kp nc kt nd kx ne lb mw mx my mz bi translated"><strong class="ki ir">端口22/TCP—SSH—(OpenSSH 7.2 p2 Ubuntu)</strong></li><li id="ed43" class="mr ms iq ki b kj na km nb kp nc kt nd kx ne lb mw mx my mz bi translated"><strong class="ki ir">端口80/TCP—HTTP—(Apache httpd 2 . 4 . 18)</strong></li></ul><p id="aa76" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我选择了<strong class="ki ir">开放端口21 FTP服务</strong>来找到一种方法来获得对这台目标机器的根访问权限。</p><p id="d6fc" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我用<strong class="ki ir">searchsploi</strong>t command在<strong class="ki ir"> ExploitDB上搜索<strong class="ki ir"> ProFTPD 1.3.3c </strong>。</strong></p><p id="9254" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><em class="nf">【Searchsploit是Exploit-DB的命令行搜索工具，也可以让你随身携带Exploit-DB的副本。]</em><br/><em class="nf">【ProFTPD是一个用于Unix/Linux服务器的FTP服务器，非常可配置，非常有效，它是免费的&amp;开源的，在GPL许可下发布。】</em></p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi ng"><img src="../Images/0d55fdf551d0d72ab4bcf4e5cac265e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fSFKwcv6xHNq73WFHVLEGQ.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated"><strong class="bd ls"> &lt; searchsploit &gt; </strong></figcaption></figure><p id="9fd1" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">然后我发现了两个漏洞。ProFTPD 1.3.3c被后门程序攻破，后门程序是源代码背后的恶意代码。Metasploit-framework可以利用此后门命令执行漏洞。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nh"><img src="../Images/c5f36c701985df170bd053c2c125209b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VzFiyVNVTsOzS-vO4lNQuw.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated"><strong class="bd ls">&lt;Metasploit-framework&gt;</strong></figcaption></figure><p id="c1ca" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在Metasploit控制台中，我搜索了<strong class="ki ir"> proftpd </strong>以找到一个漏洞。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi ni"><img src="../Images/8389854e91a9c8090ea98018ed5739ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mQxrZt3tX9vsaUyChNrL2w.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated"><strong class="bd ls"> &lt; Metasploit-framework —搜索&gt; </strong></figcaption></figure><p id="1b91" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">所以有好几个功勋都得这个<strong class="ki ir"> proftpd </strong>。而我用<strong class="ki ir">exploit/UNIX/FTP/proftpd _ 133 c _ back door</strong>攻击目标机。</p><p id="1b72" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">现在，我将看看此利用的选项。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nj"><img src="../Images/9fc49cdbf1bc3d4c494889886625a7ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hDgBMSbr-4GSjaevQLhMNA.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated"><strong class="bd ls"> &lt; Metasploit-framework —选项&gt; </strong></figcaption></figure><p id="8732" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">所以，现在我必须指定<strong class="ki ir"> RHOST </strong>【目标机器的IP地址】</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nk"><img src="../Images/7b714ec0765de39cf1053428fff745b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AVV4BuuW3NU7vakWcmaHiA.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated"><strong class="bd ls">&lt;Metasploit-framework—set RHOST&gt;</strong></figcaption></figure><p id="47bf" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">设置RHOST后，我搜索了<strong class="ki ir">有效载荷</strong>来寻找这个。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nl"><img src="../Images/48d897d3695582dafc1c68ece06218ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aV5rdl8w_V-Rrs-wPmcCFQ.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated"><strong class="bd ls"> &lt; Metasploit-framework —显示有效负载&gt; </strong></figcaption></figure><p id="f517" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">所以有各种有效载荷，我选择了<strong class="ki ir"> cmd/unix/reverse </strong>有效载荷来利用这个漏洞。</p><p id="ca75" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">设置<strong class="ki ir">有效载荷</strong></p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nm"><img src="../Images/bfadb675eb4f3e1fd1cb8d5279330cbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ps0njnQj_BvLTf4gJtn4AQ.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated"><strong class="bd ls"> &lt; Metasploit-framework —设置有效载荷&gt; </strong></figcaption></figure><p id="3437" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在设置有效负载之后，我必须指定LHOST [我的Kali机器的IP]</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nn"><img src="../Images/a0a310442c33491ca4eadfd430f8207e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cMmNOHbdX-ZZCRoHdDxLcg.jpeg"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated"><strong class="bd ls">&lt;Metasploit-framework—set LHOST&gt;</strong></figcaption></figure><p id="0685" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">好酷，所有的设置都已经完成了。现在我必须利用这一点。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi no"><img src="../Images/da7beeb881711478d5f1b9fac7408c89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fk38f12rfJ-ymycc-gXF7g.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated"><strong class="bd ls"> &lt; Metasploit-framework —漏洞利用&gt; </strong></figcaption></figure><p id="b0d9" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">好了，现在我有了对目标机器的根访问权。现在我要去找出马林鱼的密码。</p><p id="8acd" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">现在我打开<strong class="ki ir"> python衍生shell </strong> <br/> <em class="nf">交互终端衍生via Pythonedit <br/>识别一个终端(tty——终端的tty命令基本上打印连接到标准输入的终端的文件名。)是通过Python产生的。攻击者在获得对主机的初始访问权限后，可能会将简单的反向shell升级为完全交互式tty。</em></p><p id="794a" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">然后我在看影子文件<br/> <em class="nf">影子密码文件是一个存储加密用户密码的系统文件，这样那些试图闯入系统的人就无法得到这些密码。</em></p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi np"><img src="../Images/29ce125f87cba89da7275f0818b87ecb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HVn-RXJ2Q0UUBw4gZyJUeg.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated"><strong class="bd ls"> &lt;找到影子文件&gt; </strong></figcaption></figure><p id="7915" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">现在我把这个复制到一个新文件中来破解这个<strong class="ki ir">hash</strong><br/><strong class="ki ir">marlin spike:$ 6 $ wqb 5 NV 3t $ xB2WO/jokbn 4 t1 ruilrckw 69 lr/0 emtubbffcypm 3 muhvmtyy w 9 . ov/asztpwhlac 2 x 6 fvy 5 tpuxqbuhckbl 4/:17484:0:99999:7:::</strong></p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nq"><img src="../Images/6d2f888a4ee6d7fe4d077281a5859788.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YUM37sLzWqueQ84ZZ9oBJA.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated"><strong class="bd ls"> &lt;复制哈希&gt; </strong></figcaption></figure><p id="30e1" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">现在我用<strong class="ki ir">开膛手约翰</strong>来破解这个杂凑</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nr"><img src="../Images/a3d510a224294c17280551048f727209.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eEubH3_kd359ifLkaZ-3iQ.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated"><strong class="bd ls"> &lt;破解哈希&gt; </strong></figcaption></figure><p id="d90c" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">最后，我找到了<strong class="ki ir">马林鱼</strong>的密码，它就是<strong class="ki ir">马林鱼</strong></p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi ns"><img src="../Images/25f9ba004616af499c2e2d0cb672c541.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KVpu9FW4c6GI7iZKtE1SxA.png"/></div></div></figure><p id="848b" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">最后，我获得root访问权限，并找到这个机器的<strong class="ki ir"> marlinspike </strong>用户的密码。我使用了<strong class="ki ir">开放端口21/tcp — FTP — (ProFTPD 1.3.3c) </strong>来开发这个基本的Pentester:Vulnhub中的1 Box。</p><h2 id="a6e9" class="lt lu iq bd ls lv lw dn lx ly lz dp ma kp mb mc md kt me mf mg kx mh mi mj mk bi translated">总的来说，这是一个有趣的任务。我花了一段时间来了解细节，但它为我提供了一个很好的渗透基本测试的介绍，并确保我的家庭实验室工作良好。</h2></div></div>    
</body>
</html>