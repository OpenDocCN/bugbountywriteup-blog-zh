<html>
<head>
<title>Deep Dive into AWS Penetration Testing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">深入研究AWS渗透测试</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/deep-dive-into-aws-penetration-testing-a99192a26898?source=collection_archive---------0-----------------------#2021-06-14">https://infosecwriteups.com/deep-dive-into-aws-penetration-testing-a99192a26898?source=collection_archive---------0-----------------------#2021-06-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="36ef" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">AWS渗透测试入门:第1部分</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b4a514f8ab056c14644e619f8311fef1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-T6ujg9OEo-jLpxH65HDKA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://www.immuniweb.com/resources/aws-penetration-testing/" rel="noopener ugc nofollow" target="_blank"> immuniweb </a>拍摄</figcaption></figure><p id="de13" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇博客中，我们将了解各种AWS服务、用于AWS服务的笔测试工具，以及如何开始使用AWS Pentest。</p><p id="466a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">什么是AWS渗透测试？</strong> <br/>传统的pen测试流程与AWS pen测试方法完全不同。第一个也是最重要的因素是系统的所有权。AWS是亚马逊的子公司，拥有该公司的基础设施。由于pen测试中使用的常规“道德黑客”会违反AWS的可接受政策，因此安全响应团队使用独特的流程。</p><p id="7b44" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最近发生了许多数据泄露事件，暴露了各种漏洞，如s3 buckets、损坏的AWS基础设施等。<br/>要理解AWS攻击，需要熟悉AWS提供的各种服务。</p><p id="5f0d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">AWS服务配置错误是造成大量数据泄露的原因。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="049e" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">对于AWS渗透测试，有四个主要方面需要关注:</strong></h1><ol class=""><li id="bdea" class="mr ms iq ky b kz mt lc mu lf mv lj mw ln mx lr my mz na nb bi translated">您的AWS云的外部基础设施</li><li id="8f51" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">您在平台上托管/构建的应用程序</li><li id="d3ce" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">AWS云的内部基础设施</li><li id="14a7" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">AWS配置审查</li></ol><h1 id="8914" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated"><strong class="ak">AWS渗透测试方法</strong></h1><p id="b101" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">AWS平台的安全测试可分为两类:</p><ol class=""><li id="6535" class="mr ms iq ky b kz la lc ld lf np lj nq ln nr lr my mz na nb bi translated"><strong class="ky ir">云的安全</strong>:云的安全是亚马逊(AWS)的责任，以确保他们的云平台安全，防止使用AWS服务的企业面临任何潜在的漏洞和网络威胁。所有可在任何步骤被利用来中断AWS服务器性能的零日和逻辑缺陷都包含在云安全中。</li><li id="9040" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><strong class="ky ir">云中的安全性</strong>:用户/责任公司有责任确保他们在AWS基础设施上部署的应用程序/资产不会受到任何类型的网络攻击。通过遵循所需的安全程序，用户/公司可以提高他们在AWS云上的应用程序的安全性。</li></ol><blockquote class="ns nt nu"><p id="3d85" class="kw kx nv ky b kz la jr lb lc ld ju le nw lg lh li nx lk ll lm ny lo lp lq lr ij bi translated">在这一系列的博客文章中，我们将探讨如果没有正确设置这些服务，它们将如何被利用，以及对策。</p></blockquote><h1 id="3ce8" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated">让我们来看看AWS提供的一些服务。</h1><h1 id="1c19" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated"><strong class="ak"> 1。S3斗</strong></h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/b8a12c65265696a8e3952fa3e3510bfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/0*UjcYlQDgFi-lsjKi"/></div></figure><p id="ab56" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> S3代表简单存储服务</strong></p><ul class=""><li id="ede5" class="mr ms iq ky b kz la lc ld lf np lj nq ln nr lr oa mz na nb bi translated">高度可扩展且容量几乎无限的存储服务。</li><li id="bd9b" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">作为容器的桶是服务中最重要的部分。</li><li id="4405" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">对象是存储桶中的内容，例如文件、备份、文档、照片、敏感文件、源代码、静态网站等等</li><li id="8f0a" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">你可以使用亚马逊S3在互联网上存储和检索任意数量的数据</li><li id="e7f9" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">对于S3存储桶，使用不同的访问控制技术</li><li id="795e" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">访问控制列表</li><li id="97b7" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">基于存储桶的策略</li><li id="54ca" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">与IAM(身份和访问管理)相关的政策</li><li id="7136" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">可以使用AWS CLI和HTTP界面访问S3存储桶</li></ul><p id="4176" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="http://s3.amazonaws.com/bucket_name" rel="noopener ugc nofollow" target="_blank"><em class="nv"/>http://s3.amazonaws.com/bucket_name</a></p><p id="e2d0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="http://bucket_name.s3.amazonaws.com" rel="noopener ugc nofollow" target="_blank"><em class="nv">http://bucket _ name . S3 . Amazon AWS . com</em></a></p><h1 id="8a2c" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated">2.<strong class="ak"> EC2 </strong></h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/a0b0687a9b4bcdab492fc8a98a4e641e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DJ1OTi-Vpyn1QKPY.png"/></div></div></figure><ul class=""><li id="fcb9" class="mr ms iq ky b kz la lc ld lf np lj nq ln nr lr oa mz na nb bi translated">EC2代表的是弹性云计算</li><li id="60c0" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">云中使用最广泛的服务，提供安全且可调整大小的计算能力</li><li id="a74b" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">在现收现付的基础上，它可以用于启动您需要的任意多的虚拟服务器</li></ul><p id="df9b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">参考此链接详细了解EC2<a class="ae kv" href="https://aws.amazon.com/ec2/" rel="noopener ugc nofollow" target="_blank">https://aws.amazon.com/ec2/</a></p><h1 id="12a5" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated">3.<strong class="ak">身份和访问管理(IAM) </strong></h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/a0423b5badaafef81dc5d216a4655000.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*byJmIPG00AtyL2_6.png"/></div></div></figure><ul class=""><li id="c5a1" class="mr ms iq ky b kz la lc ld lf np lj nq ln nr lr oa mz na nb bi translated">为了能够管理权限</li><li id="f023" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">能够分配角色、组和策略</li><li id="b92a" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">可以将一个web服务与所有Amazon服务结合使用</li><li id="81e1" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">可用于连接来自不同组织的联合应用程序\用户</li><li id="4b42" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">管理从一个AWS帐户到另一个帐户的跨帐户访问</li></ul><p id="1d6a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请参考此链接详细了解IAM。<a class="ae kv" href="https://aws.amazon.com/iam/" rel="noopener ugc nofollow" target="_blank">https://aws.amazon.com/iam/</a></p><h1 id="d6fa" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated">4.<strong class="ak"> AWS Lambda </strong></h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/7491a7cbee836cba2927757356c5117d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pRC61qj6BlsicJTX.png"/></div></div></figure><ul class=""><li id="0f0b" class="mr ms iq ky b kz la lc ld lf np lj nq ln nr lr oa mz na nb bi translated">FaaS(作为服务的功能)</li><li id="ac20" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">无服务器功能和应用程序可用</li><li id="8a7c" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">作为对事件的反应，代码被执行</li></ul><p id="a570" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请参考此链接详细了解AWS Lambda。<a class="ae kv" href="https://aws.amazon.com/lambda/" rel="noopener ugc nofollow" target="_blank">https://aws.amazon.com/lambda/</a></p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><blockquote class="ns nt nu"><p id="f0e3" class="kw kx nv ky b kz la jr lb lc ld ju le nw lg lh li nx lk ll lm ny lo lp lq lr ij bi translated">随着越来越多的企业迁移到云，数据泄露的风险每天都在增加，需要使用笔测试来防范数据泄露。</p></blockquote><h1 id="f9bb" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated">在AWS中你能做什么样的笔测试？</h1><p id="ad2f" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">AWS允许企业全面测试其AWS EC2实例，同时消除与用户运营的服务的连续性中断相关的杂务，这些服务包含云产品并由用户控制。</p><p id="cda8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于供应商运营的服务(由单一第三方管理和配置的云产品)，AWS将pen-testing限制在云环境的设置和部署上，忽略了底层基础设施。</p><p id="91e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">AWS提供各种EC2(弹性云计算)领域的笔测试，包括:</p><ul class=""><li id="1bf6" class="mr ms iq ky b kz la lc ld lf np lj nq ln nr lr oa mz na nb bi translated">应用编程接口</li><li id="777b" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">您公司的web应用程序位于其服务器上</li><li id="a13a" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">编程语言</li><li id="6994" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">操作系统和虚拟机</li></ul><p id="0506" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是由于法律限制而无法测试的AWS云部分:</p><ul class=""><li id="fea4" class="mr ms iq ky b kz la lc ld lf np lj nq ln nr lr oa mz na nb bi translated">亚马逊网络服务(AWS)服务器</li><li id="d3f2" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">属于AWS EC2的其他公司的物理硬件、设施或底层基础设施</li><li id="fb33" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">亚马逊的关系数据库服务(RDS)</li><li id="185b" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">其他供应商管理安全设备</li></ul><h1 id="9cdd" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated"><strong class="ak"> AWS控件将接受严格的安全性测试</strong></h1><h1 id="fe9d" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated"><strong class="ak"> 1。治理</strong></h1><ul class=""><li id="6bd8" class="mr ms iq ky b kz mt lc mu lf mv lj mw ln mx lr oa mz na nb bi translated">定义AWS边界并识别资产</li><li id="aa69" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">管理访问的策略</li><li id="d3a2" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">应对风险进行识别、审查和评估</li><li id="e870" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">库存和文件</li><li id="66f0" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">在风险评估中应考虑AWS</li><li id="612a" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">信息技术(IT)安全和计划政策</li><li id="b7c0" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">了解AWS的使用/实施</li></ul><h1 id="9b35" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated">2.<strong class="ak">网络管理</strong></h1><ul class=""><li id="ce8f" class="mr ms iq ky b kz mt lc mu lf mv lj mw ln mx lr oa mz na nb bi translated">网络安全控制</li><li id="abff" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">有身体联系</li><li id="7622" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">授予和撤销访问权限</li><li id="416e" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">与环境隔绝</li><li id="6a06" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">库存和文件</li><li id="cf8d" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">分层DDoS保护</li><li id="0fcc" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">恶意代码占了上风</li></ul><h1 id="6477" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated">3.<strong class="ak">加密控制</strong></h1><ul class=""><li id="94fa" class="mr ms iq ky b kz mt lc mu lf mv lj mw ln mx lr oa mz na nb bi translated">访问AWS控制台</li><li id="b8e1" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">对AWS API的访问</li><li id="9728" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">IPsec隧道是一种互联网协议安全(IPSec)隧道</li><li id="6ad8" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">SSL密钥的管理</li><li id="f7ad" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">静止时，保持别针安全</li></ul><h1 id="261c" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated">4.<strong class="ak">记录和监控</strong></h1><ul class=""><li id="5394" class="mr ms iq ky b kz mt lc mu lf mv lj mw ln mx lr oa mz na nb bi translated">集中式日志存储</li><li id="e72c" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">检查政策的充分性</li><li id="1371" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">检查来自身份和访问管理(IAM)的凭据报告</li><li id="2f1b" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">组合来自多个来源的数据</li><li id="2839" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">入侵的检测和响应</li></ul><blockquote class="ns nt nu"><p id="e02d" class="kw kx nv ky b kz la jr lb lc ld ju le nw lg lh li nx lk ll lm ny lo lp lq lr ij bi translated">在执行AWS渗透测试之前，您应该做一些事情。</p></blockquote><ul class=""><li id="4489" class="mr ms iq ky b kz la lc ld lf np lj nq ln nr lr oa mz na nb bi translated">定义渗透测试的范围，包括目标系统</li><li id="7106" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">自己做初步测试</li><li id="9211" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">决定你将运行哪种安全测试</li><li id="1773" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">概述利益相关者的期望以及笔式测试。业务(如果外包)</li><li id="59c8" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">为了处理技术评估，创建一个时间表</li><li id="e74c" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">定义一组在测试发现安全性已经受到威胁时要遵循的流程</li><li id="ac08" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr oa mz na nb bi translated">获得相关方签署的许可进行pen测试</li></ul><h1 id="3d9f" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated"><strong class="ak">如何对亚马逊Web服务进行渗透测试？</strong></h1><h1 id="d55f" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated">1.身份和访问管理</h1><p id="824f" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">识别数据存储和应用程序的资产是渗透测试过程中的第一个也是最重要的阶段。以下是在识别资产时要记住的一些关键注意事项:</p><ol class=""><li id="602d" class="mr ms iq ky b kz la lc ld lf np lj nq ln nr lr my mz na nb bi translated">根帐户的密钥已被删除。</li><li id="3ee4" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">应实施双因素身份认证。</li><li id="5abd" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">不要自动执行或使用root帐户执行日常任务。</li><li id="157f" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">仅允许服务帐户访问。</li><li id="16ec" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">每个用户只允许使用一个密钥。</li><li id="d602" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">定期更改您的SSH和PGP密钥。</li><li id="92a6" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">删除所有不再活动的安全帐户。</li></ol><h1 id="e7eb" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated">2.逻辑访问控制</h1><p id="e45b" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">在资产识别之后，下一步是处理云中的访问控制。这是一种为资源分配各种操作的方法。控制对AWS资源、进程和用户的访问是逻辑访问控制的主要过程。AWS帐户的凭证必须保持安全可靠</p><h1 id="807b" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated">3.S3水桶</h1><p id="7a66" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">在资产识别之后，下一步是处理云中的访问控制。这是一种为资源分配各种操作的方法。控制对AWS资源、进程和用户的访问是逻辑访问控制的主要过程。AWS帐户的凭证必须保持安全可靠</p><ol class=""><li id="fdab" class="mr ms iq ky b kz la lc ld lf np lj nq ln nr lr my mz na nb bi translated">权限(对于HTTP方法，如GET、PUT、DELETE和LIST)应该限制在特定的用户。</li><li id="9387" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">应该启用bucket的日志记录和版本控制。</li></ol><h1 id="c203" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated">4.数据库服务</h1><p id="7d35" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">数据库是几乎所有web服务的基本组件。采取必要的预防措施来保护应用程序的数据库也是至关重要的。以下是进行安全审计时需要牢记的基本注意事项:</p><ol class=""><li id="6007" class="mr ms iq ky b kz la lc ld lf np lj nq ln nr lr my mz na nb bi translated">定期备份您的数据。</li><li id="b596" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">将自动备份计时器设置为不超过一周。</li><li id="0777" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">应该使用多AZ部署方法。</li><li id="d081" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">访问仅限于特定的IP地址。</li></ol></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="3171" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak"> AWS安全测试工具:</strong></h1><p id="b2bc" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">您可以使用许多工具来测试您的AWS集成服务。一套不同的工具可用于执行不同类型的测试。以下是其中的一些。</p><h1 id="8976" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated"><strong class="ak"> Pmapper </strong></h1><p id="6432" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">PMapper(主体映射器)是一个脚本和库，用于查找AWS帐户的AWS身份和访问管理(IAM)配置中的危险。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/02c43bd5a23cea5ed1fc219603353f98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*92hdUQYRpkmN0YaH.png"/></div></div></figure><p id="5819" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">来源:https://github.com/nccgroup/PMapper<a class="ae kv" href="https://github.com/nccgroup/PMapper" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="35d9" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated"><strong class="ak">AWS-库存</strong></h1><p id="7eb4" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">一个Python脚本，用于查找在给定帐户中创建的所有AWS资源。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/55e9781fd3e0db5731987d55714d6d7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1k7Vf8TEYfXBXuRc.png"/></div></div></figure><p id="eb56" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">来源:<a class="ae kv" href="https://github.com/nccgroup/aws-inventory" rel="noopener ugc nofollow" target="_blank">https://github.com/nccgroup/aws-inventory</a></p><h1 id="4c47" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated"><strong class="ak"> Bucket_finder </strong></h1><p id="588b" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">使用Ruby脚本，可以对S3桶进行暴力攻击。</p><p id="7854" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">来源:<a class="ae kv" href="https://github.com/FishermansEnemy/bucket_finder" rel="noopener ugc nofollow" target="_blank">https://github.com/FishermansEnemy/bucket_finder</a></p><h1 id="5e69" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated"><strong class="ak">小偷</strong></h1><p id="b141" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">prowler是一个命令行工具，用于按照CIS AMAZON Web Services Foundations基准实现AWS安全最佳实践、审计和强化。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/3889ff7f0fbc1d23b5d7eea3b79c6d29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cBWu1bV0ghKaadvA.png"/></div></div></figure><p id="2acb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">来源:<a class="ae kv" href="https://github.com/toniblyx/prowler" rel="noopener ugc nofollow" target="_blank">https://github.com/toniblyx/prowler</a></p><h1 id="5f2f" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated"><strong class="ak">雨层云</strong></h1><p id="c90e" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">识别和利用亚马逊云基础设施的工具。这些工具是我为我的“在亚马逊云中旋转”演讲开发的PoC，是使用伟大的boto库访问亚马逊的API开发的。</p><p id="68a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">来源:<a class="ae kv" href="https://github.com/andresriancho/nimbostratus" rel="noopener ugc nofollow" target="_blank">https://github.com/andresriancho/nimbostratus</a></p><h1 id="2643" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated"><strong class="ak"> CloudSploit </strong></h1><p id="b89c" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">CloudSploit by Aqua是一个开源项目，旨在允许检测云基础设施帐户中的安全风险，包括亚马逊网络服务(AWS)、微软Azure、谷歌云平台(GCP)、甲骨文云基础设施(OCI)和GitHub。这些脚本旨在返回一系列潜在的错误配置和安全风险。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/d312702578b1e45e7c63890aff757dec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8nhAQVnGNZjCMBI8.png"/></div></div></figure><p id="7b04" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">来源:https://github.com/aquasecurity/cloudsploit</p><h1 id="1193" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated"><strong class="ak">乌云密布</strong></h1><p id="2287" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">Cloudsplaining是一个AWS IAM安全评估工具，它可以识别最低权限的违规行为，并生成按风险划分优先级的HTML报告。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/abc47a1a35464497a64b32b41035c4c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-MTa0cOjVz0QmS76.gif"/></div></div></figure><p id="5d6c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">来源:https://github.com/salesforce/cloudsplaining<a class="ae kv" href="https://github.com/salesforce/cloudsplaining" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="9cb4" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated"><strong class="ak"> Pacu </strong></h1><p id="6eae" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">Pacu是一个开源的AWS开发框架，旨在针对云环境进行攻击性安全测试。Pacu由<strong class="ky ir"> Rhino Security Labs </strong>创建和维护，允许渗透测试人员利用aws帐户中的配置缺陷，使用模块轻松扩展其功能。当前的模块支持一系列攻击，包括用户权限提升、IAM用户后门、攻击易受攻击的Lambda函数等等。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/9ec663927a9f903cf3d0df7dd04ce9b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dfl_wYM_LuF_zLcm.png"/></div></div></figure><p id="0b5b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">来源:<a class="ae kv" href="https://github.com/RhinoSecurityLabs/pacu" rel="noopener ugc nofollow" target="_blank">https://github.com/RhinoSecurityLabs/pacu</a></p><p id="1e31" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">暂时就这些吧。S3桶的利用，设置和笔测试AWS Aurora RDS，设置AWS CLI，评估和笔测试Lambda服务，评估AWS API Gateway，了解您的pentest和AWS笔测试的未知因素将在即将到来的博客中讨论。</p><blockquote class="ns nt nu"><p id="87ca" class="kw kx nv ky b kz la jr lb lc ld ju le nw lg lh li nx lk ll lm ny lo lp lq lr ij bi translated"><em class="iq">感谢您阅读我的帖子；有什么建议请在下面留言:)</em></p></blockquote><p id="5242" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">谢谢，</p><p id="dbce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">亚西尔·汗</p><p id="fe65" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我的推特账号<a class="ae kv" href="https://twitter.com/n3t_hunt3r?lang=en" rel="noopener ugc nofollow" target="_blank"> @N3T_hunt3r </a>随时联系我。</p><p id="8f66" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">特别感谢<a class="ae kv" href="https://medium.com/@jonathanchelmus" rel="noopener"> Jonathan Helmus </a>，他写了一本非常棒的书，书中详细解释了如何对主要AWS资源进行安全评估并保护它们。</p><p id="7781" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">参考:<a class="ae kv" href="https://www.packtpub.com/product/aws-penetration-testing/9781839216923" rel="noopener ugc nofollow" target="_blank">https://www . packtpub . com/product/AWS-penetration-testing/9781839216923</a></p></div></div>    
</body>
</html>