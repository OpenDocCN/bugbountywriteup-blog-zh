<html>
<head>
<title>TryHackMe- Tartarus CTF Writeup (Detailed)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TryHackMe- Tartarus CTF报道(详细)</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/tryhackme-tartarus-ctf-writeup-detailed-711fa668cbff?source=collection_archive---------1-----------------------#2020-09-24">https://infosecwriteups.com/tryhackme-tartarus-ctf-writeup-detailed-711fa668cbff?source=collection_archive---------1-----------------------#2020-09-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/5ea13efa89f4e291c9365cf53a029d02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ySvT-mgSzTMDWTB9slqewQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">CTF报道#4</figcaption></figure><p id="e456" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">欢迎各位！！今天我们要在TryHackMe上玩CTF地狱。</p><div class="ld le gp gr lf lg"><a href="https://tryhackme.com/room/tartaraus" rel="noopener  ugc nofollow" target="_blank"><div class="lh ab fo"><div class="li ab lj cl cj lk"><h2 class="bd iu gy z fp ll fr fs lm fu fw is bi translated">塔尔塔罗斯</h2><div class="ln l"><h3 class="bd b gy z fp ll fr fs lm fu fw dk translated">这是一个基于简单的服务枚举和基本权限提升技术的初学者工具箱。基于杰克</h3></div><div class="lo l"><p class="bd b dl z fp ll fr fs lm fu fw dk translated">tryhackme.com</p></div></div><div class="lp l"><div class="lq l lr ls lt lp lu jz lg"/></div></div></a></div><p id="0fd7" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">部署机器。</p><p id="0bc4" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">让我们开始吧！！享受流动吧！！</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lv"><img src="../Images/5278c200ac042ae315f01a9fc9eeb09b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9SAiZqY1QT_T5HqFPPOv_A.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">任务列表</figcaption></figure><p id="e598" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">与此同时，当你等待机器被部署时，我希望你能在桌面上快速创建一个CTF目录，并在CTF目录中创建一个nmap目录。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/3bc4466733ac337a529e106517ce215f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/format:webp/1*fV-inDyz7kNERtJQCpPkUA.png"/></div></figure><p id="379e" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">先从扫网开始吧！</p><h2 id="2e9e" class="mb mc it bd md me mf dn mg mh mi dp mj kq mk ml mm ku mn mo mp ky mq mr ms mt bi translated">Nmap扫描:</h2><blockquote class="mu mv mw"><p id="bf08" class="kf kg mx kh b ki kj kk kl km kn ko kp my kr ks kt mz kv kw kx na kz la lb lc im bi translated">nmap -sC -sV -oN nmap/tartarus <target_ip/></p></blockquote><ul class=""><li id="fcea" class="nb nc it kh b ki kj km kn kq nd ku ne ky nf lc ng nh ni nj bi translated">-sC:默认脚本</li><li id="cd85" class="nb nc it kh b ki nk km nl kq nm ku nn ky no lc ng nh ni nj bi translated">-sV:版本检测</li><li id="5f0b" class="nb nc it kh b ki nk km nl kq nm ku nn ky no lc ng nh ni nj bi translated">-oN:输出将存储在您之前创建的目录“nmap”中</li></ul><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi np"><img src="../Images/3002da309a7d0035cb6b313625af82b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZfjCWr3_ThtMDD_j5Uuyjg.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">Nmap输出</figcaption></figure><p id="6e57" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">盒子上开了3个端口:<br/> 21/ftp- vsftpd 3.0.3允许匿名登录<br/>22/ssh-OpenSSH 7.2 p2<br/>80/http-Apache/2 . 4 . 18<br/>检测到OS-Linux</p><p id="8629" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们不会急于进入ftp，而是让我们导航到http:// <target_ip>。</target_ip></p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nq"><img src="../Images/1f2ffa0996017d104bb9f3c189c7183f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HfrklzU3TTy944s_8V3TPQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">Apache默认页面</figcaption></figure><p id="030a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们可以尝试通过gobuster找到URL上隐藏的目录。</p><h2 id="ddfc" class="mb mc it bd md me mf dn mg mh mi dp mj kq mk ml mm ku mn mo mp ky mq mr ms mt bi translated">Gobuster:</h2><blockquote class="mu mv mw"><p id="4d64" class="kf kg mx kh b ki kj kk kl km kn ko kp my kr ks kt mz kv kw kx na kz la lb lc im bi translated">gobuster dir -u http:// <target_ip> -w <path_to_wordlist/></target_ip></p></blockquote><ul class=""><li id="7601" class="nb nc it kh b ki kj km kn kq nd ku ne ky nf lc ng nh ni nj bi translated">-u : URL</li><li id="fbbf" class="nb nc it kh b ki nk km nl kq nm ku nn ky no lc ng nh ni nj bi translated">-w:单词表</li></ul><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nr"><img src="../Images/549b261849f647fad6e02b01dc1f2a5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZtF5d5qGJvKbs-Syl9WbfA.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">cleaGobuster输出</figcaption></figure><p id="7f10" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">您可以在gobuster中使用更多标志:</p><ul class=""><li id="17ad" class="nb nc it kh b ki kj km kn kq nd ku ne ky nf lc ng nh ni nj bi translated">-问:安静，无声扫描。将隐藏横幅。</li><li id="4069" class="nb nc it kh b ki nk km nl kq nm ku nn ky no lc ng nh ni nj bi translated">-o:要存储在目录中的输出</li><li id="8e15" class="nb nc it kh b ki nk km nl kq nm ku nn ky no lc ng nh ni nj bi translated">-x:搜索扩展名，如html、txt、php、phtml等。</li></ul><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ns"><img src="../Images/2bcf8b89b378032f15bc5177b50a1680.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3r68_vtPOdMrBhKDrisNEQ.png"/></div></div></figure><p id="693e" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">太棒了！我们有robots.txt <br/>我们可以去看看。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/010802e6e42dae397b5de109b7102b15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*qJpng9g1Vi7e2BYYGugVcQ.png"/></div></figure><p id="57d7" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">查看页面，我们注意到down <strong class="kh iu"> d4rckh </strong>可能是一个潜在的用户名。此外，还有一个名为/admin-dir的目录，其中可能包含对我们有用的信息。没有进一步的麻烦，导航到管理目录。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/92d1011f1f0c339756300a39b630a008.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*ZNwy5_OhpRok55SKBQjiKA.png"/></div></figure><p id="4b19" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">太棒了。！所以我们有两个文件，看看它们的名字，它们看起来很好吃。从第一个开始，credential.txt。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/fc1593de3408193df95bf220f689b559.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*4FWA_yu88dLsJeJsJwjukA.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">单词表</figcaption></figure><p id="63ef" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这是一个密码组合的单词表，我们可以用它来进行暴力破解。将单词表保存到你的机器上，以备后用。</p><p id="8789" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们需要检查第二个文件userid的内容</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/b49e05bb27b86c022cfa1d8a32886b5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*eoxA_4_1HfJiNq6rUOMGYQ.png"/></div></figure><p id="4239" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这是一个非常有用的用户名组合列表。也省省吧。</p><p id="7088" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">让我们开始列举FTP服务是开放的，并允许匿名登录。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/8cf573bd6577e6eca940853fe03cbd71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*krfQygGSCOdSr_WvPwE3mw.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">FTP登录成功</figcaption></figure><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ny"><img src="../Images/6b7c2ae58b4e37fa1f79528a28e3d209.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LKxHy4VTgob2X5o_7067ag.png"/></div></div></figure><p id="1eb1" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">有一个文件可以让我们把它转移到我们的机器上。使用命令:<br/>获取test.txt</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nz"><img src="../Images/1dd9bdc0cd90a6e9960bda3140af4faf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*37MYxvspOBSGGByGkjMuYQ.png"/></div></div></figure><p id="5af0" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们还能做什么？如果你看过我以前的文章，我说过在你退出FTP服务前总是检查任何隐藏的文件/目录是一个好习惯。让我们开始吧。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oa"><img src="../Images/ee084fcba8ec7fc4a787cdd9f5cc8bdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OIE7bRu9bvC35jOKE0X0uQ.png"/></div></div></figure><p id="e105" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">有一个目录… <br/> cd到那个里面，用ls -la看看有没有隐藏的东西。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ob"><img src="../Images/22734be3976e2eec1f72bfe3c74a0de9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0479Pe2oOgsHI0CKH_Kd3A.png"/></div></div></figure><p id="a8b2" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">事实上，里面还有另一个目录。<br/> cd放进去，用ls -la看看有没有隐藏的东西。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oc"><img src="../Images/9eb4b7a52dc51250b5906cb6108531de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y6taFivEy_0d_yM4Pva7yg.png"/></div></div></figure><p id="0354" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">的确，我们有一双好眼睛。yougotgoodeyes.txt文件就在那里，等待我们转移到我们的机器上。让我们转移它并退出服务。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi od"><img src="../Images/08a4ce33eeb11b6e0a510e863c3cfad4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1TdKXDXH9fitUac-pmgCvg.png"/></div></div></figure><p id="4345" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们需要检查test.txt文件和yougotgoodeyes.txt中的内容。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/478802207b8d096ecfc308ee88e7053f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/format:webp/1*tSAjuGlQVoet1HKmU1l5lQ.png"/></div></figure><p id="679f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这似乎很奇怪。它不包含任何信息。它只是一个对我们毫无用处的ASCII文本文件。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oe"><img src="../Images/3f0fffbd31657af25b2992a2e754810e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3oN-q6GXIXC84GNpD1HCfA.png"/></div></div></figure><p id="01da" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">嗯..所以又发现了一个目录。我们去看看！</p><p id="7ca9" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">http:// <target_ip> /sUp3r-s3cr3t</target_ip></p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi of"><img src="../Images/b1a6025917c9bc1f819701b0858eb57d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2mp0Kn-PtCIFjAOHe6Mgbw.png"/></div></div></figure><p id="74b4" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">干得好！！我们有一个登录页面。</p><p id="2004" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">怎么样，如果有隐藏的目录与此页。我们可以在这个目录中尝试gobuster，看看有什么隐藏的或有趣的东西。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi og"><img src="../Images/97a1b03fa7256c8e98685ef3c61b6099.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D4bA6vwdqxsSqMLzv6P_ug.png"/></div></div></figure><p id="0121" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">导航到/images目录，它有一个/uploads目录。我们将回到这一点。首先我们要想办法进去。</p><p id="b35a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们将使用两种不同的方法来进行暴力破解。从学习的角度来看，这两者都有好处。</p><h2 id="d040" class="mb mc it bd md me mf dn mg mh mi dp mj kq mk ml mm ku mn mo mp ky mq mr ms mt bi translated">方法1:用石膏进行粗磨</h2><p id="1669" class="pw-post-body-paragraph kf kg it kh b ki oh kk kl km oi ko kp kq oj ks kt ku ok kw kx ky ol la lb lc im bi translated">我得打个嗝。如果你不知道如何设置，让我给你演示一下。</p><p id="9e45" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">为Firefox安装FoxyProxy扩展，并为Burp配置代理。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi om"><img src="../Images/9856191bf4dd578d774a633c81d390e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i5uf58KShNCmAgodnJjzqg.png"/></div></div></figure><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi on"><img src="../Images/27b6fd6b75f109e5c2dcef1f75162c29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eFzeoMXsrzIE4Rx-kdIkeg.png"/></div></div></figure><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/4237c6b580ba7b75db4bca39e9aaa2ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*W4GyO7MGFHC3g31BmHSwaQ.png"/></div></figure><p id="7e18" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">Burpsuite正在以Burp默认值运行。因此，我们将首先安装CA证书。</p><p id="71c2" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">导航到<a class="ae op" href="http://burp" rel="noopener ugc nofollow" target="_blank"> http://burp </a></p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oq"><img src="../Images/510b99c67473a11f6f6dfba3fcc88179.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9FReycu1fQgjBybI27TWsA.png"/></div></div></figure><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi or"><img src="../Images/7e1241f34dfabfb78f2383b897aaf498.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*Xu5VckPehn_C4jR02cGusg.png"/></div></figure><p id="564a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">转到浏览器的首选项。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi os"><img src="../Images/420cae22dc693e85dbd8b74e09a36610.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*x4EsrXw66S_rSGshj6xikg.png"/></div></figure><p id="f37c" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">搜索证书。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ot"><img src="../Images/e5abe0867a83eace3cc15d7be27361aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h8guI_VBfEidqnGtOs00tg.png"/></div></div></figure><p id="4f33" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">导入证书并安装它。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ou"><img src="../Images/146a58932e1e6fb3dc127aedc95d0aea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EbSiqXgIl-LHlD8VpDzYAg.png"/></div></div></figure><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ov"><img src="../Images/bae06269c58254f7acb6470bd91228e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l7FRtRdhb13hQhBrX4lBUQ.png"/></div></div></figure><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ow"><img src="../Images/79a7676f32b7b9a24453f41f982fdaab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hm9cyQ0N0mcbx00xjEONTA.png"/></div></div></figure><p id="8370" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">Burp代理现在已经设置好了，为我们的浏览器配置来拦截请求。</p><p id="944d" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">点击，进入BurpSuite &gt; Proxy，打开拦截。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ox"><img src="../Images/aedf4243c3f1a2789d979afe615646d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CmM5hUC44_nNQyOeOrwfEw.png"/></div></div></figure><p id="db41" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">试着用admin:admin登录，看到拦截器弹出来给你头。</p><div class="lw lx ly lz gt ab cb"><figure class="oy ju oz pa pb pc pd paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/720847a497dabfb545c6c427d6e05b7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*mxvAC3V1vb8Yn9HeWarURA.png"/></div></figure><figure class="oy ju pe pa pb pc pd paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/5f8f397b649cf3251fae002824bfebd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*Ac8nFxSROkRJkoDj0VCaBA.png"/></div></figure></div><p id="fa74" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这是POST请求。将请求转发给authenticate.php·佩奇。</p><p id="28c0" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们可以把这个请求发送给入侵者并试图强行入侵</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/078a2847ea68740286ca44f2d1bc2f94.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*tmmUt-M6QBs1hiVge1D_ng.png"/></div></figure><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pg"><img src="../Images/cf975d7c247ea8784285fd9a06e1f3b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7XFUFNCmEDYD8Rjt2g_Fwg.png"/></div></div></figure><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ph"><img src="../Images/a8da2fd76feb12a5f2aed7fe418f4dbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4P0Y1DzrKX2-pDqDazytoA.png"/></div></div></figure><p id="6381" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们将选择集束炸弹作为我们的攻击类型。</p><p id="da65" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们有两个有效载荷。因此，有效负载1是用户名，有效负载2是密码。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pi"><img src="../Images/8efe9f6d2015a54d9bf228e097066bb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uVVQ1OyYj_QgiJeToxw8Fw.png"/></div></div></figure><p id="a943" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们需要分别加载单词表。<br/>有效负载1的用户标识文件<br/>有效负载2的凭证. txt</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pj"><img src="../Images/3eb516bb315759207411852b1a280f2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*XrZZr6ODA7ggCHp1XUaz2w.png"/></div></div></figure><p id="a2a6" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">取消勾选此框。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pk"><img src="../Images/17dedf1a1790115651d3d32425b349e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6aMwAIxtK21m_t55WAWpcA.png"/></div></div></figure><p id="ac29" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">开始攻击并等待状态代码为302的凭证。我们迟早会得到我们的用户名和密码。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pl"><img src="../Images/175b7785b621108faa6e445a76d3cf1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uLHswtRVcjy3EK_ruCetFA.png"/></div></div></figure><p id="3ae4" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">太棒了！！太棒了。！</p><h2 id="e1ac" class="mb mc it bd md me mf dn mg mh mi dp mj kq mk ml mm ku mn mo mp ky mq mr ms mt bi translated">方法2:使用九头蛇进行强力攻击</h2><p id="7c7f" class="pw-post-body-paragraph kf kg it kh b ki oh kk kl km oi ko kp kq oj ks kt ku ok kw kx ky ol la lb lc im bi translated">或者，我们可以使用九头蛇蛮力给我们同样的结果与相当短的时间。</p><p id="9ea4" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">Hydra是一个破解密码的神奇工具，它支持很多暴力破解服务。让我们一起旋转九头蛇。</p><blockquote class="mu mv mw"><p id="c6cc" class="kf kg mx kh b ki kj kk kl km kn ko kp my kr ks kt mz kv kw kx na kz la lb lc im bi translated">hydra-l userid-p credentials . txt 10 . 10 . 169 . 122 http-post-form " /sup3r-s3cr3t/authenticate.php/:username=^user^&amp;password=^pass^&amp;login=login:f=incorrect* "</p></blockquote><ul class=""><li id="743e" class="nb nc it kh b ki kj km kn kq nd ku ne ky nf lc ng nh ni nj bi translated">-L:包含用户名列表的文件</li><li id="a729" class="nb nc it kh b ki nk km nl kq nm ku nn ky no lc ng nh ni nj bi translated">-P:包含密码列表的文件</li></ul><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/dbed581e0956b626bf52050098536d48.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/format:webp/1*fAlq_o5P18E3342DKXmzVg.png"/></div></figure><ul class=""><li id="4a8c" class="nb nc it kh b ki kj km kn kq nd ku ne ky nf lc ng nh ni nj bi translated">http-post-form:这是一个post请求，正如在Burp拦截器中看到的那样</li><li id="2d63" class="nb nc it kh b ki nk km nl kq nm ku nn ky no lc ng nh ni nj bi translated">"/sUp3r-s3cr 3t/authenticate . PHP/:这是凭据从登录页面转发到的页面</li><li id="8642" class="nb nc it kh b ki nk km nl kq nm ku nn ky no lc ng nh ni nj bi translated">username=^USER^:用户名字段是通配符</li><li id="fed3" class="nb nc it kh b ki nk km nl kq nm ku nn ky no lc ng nh ni nj bi translated">password=^PASS^:密码字段是通配符</li><li id="8b5d" class="nb nc it kh b ki nk km nl kq nm ku nn ky no lc ng nh ni nj bi translated">登录=登录:这是我们点击验证用户和密码的按钮</li><li id="0e5a" class="nb nc it kh b ki nk km nl kq nm ku nn ky no lc ng nh ni nj bi translated">F=Incorrect*:这意味着当我们发送了不正确的凭据时，页面将会显示“不正确的用户名”行，因此我们告诉hydra tool，如果凭据错误，您将会收到不正确的消息，因此只需绕过它并尝试下一个组合。*表示如果页面上的任何地方显示不正确，hydra将继续强行破解。</li></ul><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pn"><img src="../Images/dc5e053bd8ae727a88c3ed3993ae8184.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MSyiIz2BCumiKivFOWortA.png"/></div></div></figure><p id="e667" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">瞧啊。！我们已经成功破解了用户名和密码。因此，我们可以继续登录页面。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi po"><img src="../Images/72237acc888a2eb7364bb4c2e9f76e78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*ia1b_mrq6doFyWWEEKML8A.png"/></div></figure><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/007230fabdf124285bb3a1ba4fe6c47b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*UspdIig1nTTPfccpB8PmWQ.png"/></div></figure><p id="4354" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">太棒了。！我们可以上传一个文件。对于这个任务，我们将上传php反向shell脚本。<br/>我经常使用pentest monkey php-reverse-shell.php脚本，试图通过netcat获得一个反向shell。【https://github.com/pentestmonkey/php-reverse-shell】Git链接下载脚本或在终端克隆:<a class="ae op" href="https://github.com/pentestmonkey/php-reverse-shell" rel="noopener ugc nofollow" target="_blank">T2</a></p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pq"><img src="../Images/5bff80edee8cc9cb50f4cadf27f70676.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bwdLDaJyP1Gc_i8eDYVxWQ.png"/></div></div></figure><blockquote class="mu mv mw"><p id="a613" class="kf kg mx kh b ki kj kk kl km kn ko kp my kr ks kt mz kv kw kx na kz la lb lc im bi translated">使用命令:<br/>chmod+x PHP _ reverse _ shell . PHP使您的php-reverse-shell脚本可执行。<br/>在编辑器中打开脚本，将$ip和$port更改为您想要监听的主机的ip和端口。</p></blockquote><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi pr"><img src="../Images/89374fc3a34ba5e6c3a14389f757f45a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*nYIMBe9dgWcNy7g_qXAx2Q.png"/></div></figure><p id="9708" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在您已经配置了脚本。我们将进一步上传脚本。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi ps"><img src="../Images/45d76c6106e2b88290f9d9975727b9e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*YsAzrtlljujwyQEYzx4I3g.png"/></div></figure><p id="276f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这个上传到哪里了？如果您还记得，我们之前进行了一次gobuster扫描，得到了一个位于sUp3r-s3cr3t目录中的目录。它是/images/目录，在/uploads/中包含一个子目录</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pt"><img src="../Images/fec801f76b77c939649da0a039978a66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ojkg6u43rqMy88YUbWIjbA.png"/></div></div></figure><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pu"><img src="../Images/366c22c3178d7e488679877157f1b835.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xcd4qlGgdw2FBKpNVMOqMw.png"/></div></div></figure><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pv"><img src="../Images/52f51cdf2c1533343a83f67301fb4441.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nBV_4b6FFmP3ulredQIBgg.png"/></div></div></figure><p id="0cc5" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们有我们的php-reverse-shell.php在这里。现在我们需要开始通过netcat监听端口9001，并尝试获得一个shell。</p><p id="30f1" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">就这么办吧。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pw"><img src="../Images/d88312da5f39c535b93561827ffc5398.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/format:webp/1*stdnF0k8Ie55Dc9m55rOug.png"/></div></div></figure><p id="f078" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">返回到/uploads/并执行脚本。</p><p id="04d0" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">检查一下监听器。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi px"><img src="../Images/33f438a195aa1df7f3b1b5d5aecd3998.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lu25u7VohZB5fNRA55vi0Q.png"/></div></div></figure><p id="9aee" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">干得好！！</p><p id="8f55" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们进去了。！我们已经成功获得了外壳！！<br/>但是壳不是稳定的壳。<br/>我们如何获得稳定的外壳？让我来带路。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi py"><img src="../Images/0c923e74f333fe8af8eeeab56b7eb4b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*flT70La5LC7r_roz0NtgFA.png"/></div></figure><blockquote class="mu mv mw"><p id="b72d" class="kf kg mx kh b ki kj kk kl km kn ko kp my kr ks kt mz kv kw kx na kz la lb lc im bi translated"><em class="it">$ python-c ' import pty；pty . spawn("/bin/bash ")'<br/>Ctrl+Z<br/>stty raw-echo<br/>fg<br/>export TERM = xterm</em></p></blockquote><p id="53f5" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们现在有一个稳定的外壳。<br/>上面的命令将让你通过TAB键自动完成，清除屏幕，在shell中轻松导航。</p><p id="dacb" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">让我们寻找我们的用户标志！</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi pz"><img src="../Images/987eb2cabf922557d1ba82fc8314ad24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*5vN28pgTViIJw7JYPh6weg.png"/></div></figure><p id="e9be" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">嗯。有。py脚本在这里。继续前进…<br/>碾碎它！！我们已经得到了我们的用户标志！！</p><blockquote class="mu mv mw"><p id="9ebf" class="kf kg mx kh b ki kj kk kl km kn ko kp my kr ks kt mz kv kw kx na kz la lb lc im bi translated">#1 user.txt <br/>回复:xxxxxxxxxxxxxxxxxxxxxx</p></blockquote><p id="d80f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">怎么办？你们认为这是对的。<br/>现在我们需要尝试提升我们的特权，成为root用户并获得我们的root标志。</p><p id="afb8" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">让我们看看有没有可以用root权限运行的二进制文件。</p><blockquote class="mu mv mw"><p id="afc9" class="kf kg mx kh b ki kj kk kl km kn ko kp my kr ks kt mz kv kw kx na kz la lb lc im bi translated">使用命令:<br/> sudo -l</p></blockquote><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi qa"><img src="../Images/83c3e38b31387531ff9b5077c4e06526.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LfJ0l9ZpwPcsEKAdI1CixA.png"/></div></div></figure><p id="24c0" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们有可以由用户' thirtytwo '运行的/var/www/gdb，我们将尝试提升我们的权限。我的第一个任务是去https://gtfobins.github.io/的<a class="ae op" href="https://gtfobins.github.io/" rel="noopener ugc nofollow" target="_blank"/>寻找提升权限的可能的权限提升命令。</p><p id="80a8" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在搜索栏搜索gdb。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi qb"><img src="../Images/db735a813ff6dbafad9f66ee65cab12f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gWW_VmJtx3oZdkuyIQe8Dg.png"/></div></div></figure><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi qc"><img src="../Images/dc6d8ee81f836f07d9352fc023484232.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O6PW70kb5yuyu2cUsET_MQ.png"/></div></div></figure><p id="5a5a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们需要以用户名“thirtytwo”的身份登录，用上面的命令运行二进制文件。只是对命令做了一点修改。</p><blockquote class="mu mv mw"><p id="d99a" class="kf kg mx kh b ki kj kk kl km kn ko kp my kr ks kt mz kv kw kx na kz la lb lc im bi translated">使用命令:<br/>sudo-u thirty two/var/www/GD b-NX-ex '！sh' -ex退出</p></blockquote><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oc"><img src="../Images/490e5e47fd67d5f5e64a94dd2b24795f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DVfsciRkq2Ymkdtdico1Nw.png"/></div></div></figure><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi qd"><img src="../Images/c69a3bbefa040e62e43ead258411430a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YCLsyAmtKfgcEn-CUHCywQ.png"/></div></div></figure><p id="a02c" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们是用户“三十二”</p><p id="4c59" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">让我们看看可以运行哪些二进制文件来提升权限。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi qe"><img src="../Images/016a9e8871a3c83bb8d92c1b145cc1d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ETuEkdDyzQA-CstiCdduOA.png"/></div></div></figure><p id="5f23" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">前往<a class="ae op" href="https://gtfobins.github.io/" rel="noopener ugc nofollow" target="_blank">https://gtfobins.github.io/</a>寻找提升权限的可能权限提升命令。<br/>在搜索栏中搜索git。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi qf"><img src="../Images/28f19d1733c98016c9db40200b041e90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OMqEaG4wnzof8J56f9qupQ.png"/></div></div></figure><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi qg"><img src="../Images/56b7730723a49710fa0c4592d90a1fe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*heufJHffEcUEQIrkOr1pSQ.png"/></div></div></figure><p id="880a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们需要sudo作为用户名' d4rckh '，运行二进制/usr/bin/git并在命令中附加帮助配置</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi qh"><img src="../Images/7dc186cfd5b714272c962c409eeb38e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*1PhvdhdrCAzfO4Unxvybqw.png"/></div></figure><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi qi"><img src="../Images/e574038dbe4268a5bd97149757b42d94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zsUB5dTrbz-4anIIBPfoMA.png"/></div></div></figure><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi qj"><img src="../Images/4cf924c7051b5b4e0526f2720a39d466.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qWZqzBZRFfWxGQjum7CpUw.png"/></div></div></figure><p id="7b17" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们可以确认我们是用户d4rckh。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi qk"><img src="../Images/3dc1b69e72d3c913f74990ae90c7ad54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*WnCAXK8TAJEKGBVYk5AonA.png"/></div></figure><p id="457c" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在，我们导航回他的主文件夹，查看我们之前找到的脚本，并将其用于我们的权限提升目的。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ql"><img src="../Images/91055a6a02aa80f2cfe2e836d6b73189.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qr3HMcN88WKjS3T20YfTAw.png"/></div></div></figure><p id="365b" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们拥有编辑脚本cleanup.py的写权限。</p><p id="9b55" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">让我们看看剧本里有什么。<br/>少清理. py</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nr"><img src="../Images/6206304a6fa505d9836e26f8ace1d321.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ShJDt5h6bZvkY9Kw83u5Wg.png"/></div></div></figure><p id="831e" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">阅读此脚本会删除主目录中cleanup文件夹中的内容。</p><p id="ad9f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们可以看到该脚本计划何时运行。在linux中，计划脚本由crontab运行。因此，我们可以“猫”入/etc/crontab</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi qm"><img src="../Images/3cf76e65c82e43e2ade438a4d056250a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kYdCvzgBgU9fd-R8lREqog.png"/></div></div></figure><p id="e737" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">cleanup.py脚本计划每2分钟运行一次。</p><div class="ld le gp gr lf lg"><a href="https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md#python" rel="noopener  ugc nofollow" target="_blank"><div class="lh ab fo"><div class="li ab lj cl cj lk"><h2 class="bd iu gy z fp ll fr fs lm fu fw is bi translated">swisskyrepo/payloads all things</h2><div class="ln l"><h3 class="bd b gy z fp ll fr fs lm fu fw dk translated">Web应用程序安全和Pentest/CTF-swisskyrepo/payloads all things的有用负载和旁路列表</h3></div><div class="lo l"><p class="bd b dl z fp ll fr fs lm fu fw dk translated">github.com</p></div></div><div class="lp l"><div class="qn l lr ls lt lp lu jz lg"/></div></div></a></div><p id="5780" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这一次我们将使用python脚本。请看下面git存储库中该脚本的位置。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi qo"><img src="../Images/58dbe6ef7de097c8d38dccde4c6d525b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*lFaMYpIdwgjBm5z9JhswfQ.png"/></div></figure><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi qp"><img src="../Images/36c7c0270a1f4e0e0285334f1ed76792.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DjHb83s6eCPfMWtWyMs_sQ.png"/></div></div></figure><p id="99d2" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们可以复制“cleanup.py”脚本，并将其命名为“cleanup1.py”</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi qq"><img src="../Images/4d459b9949fa7ba381e04698cf0c161a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OsnbtkQoDXzNGeMhc3WioQ.png"/></div></div></figure><p id="6e47" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们需要用nano来修改新的副本‘clean up . py’。</p><p id="6c0b" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">复制Python &gt; IPv4下git存储库中提供的脚本。</p><p id="82c6" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">该脚本是一行程序，因此，我们必须删除分隔符，并需要添加:<br/> #！/bin/bash</p><p id="e10c" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">指定我们的主机IP和我们将监听的端口。</p><p id="c29a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">最后，我们需要删除脚本中最后一个命令末尾的'。<br/>进口ptypty.spawn("/bin/bash ")'</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi qr"><img src="../Images/d37930936f1fe643360bcc3cbd8afb8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*prPWk-XD7RsThb0hTLHy4g.png"/></div></div></figure><p id="ebfc" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">通过netcat启动一个端口监听器，试图获得一个反向shell。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi qs"><img src="../Images/756da409d2bc0d1e2530a2dafaa00263.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*iPjm0H7bgwrQxm8XcHlisA.png"/></div></figure><p id="96ba" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们将删除cleanup.py，而不是cleanup1.py</p><blockquote class="mu mv mw"><p id="69a2" class="kf kg mx kh b ki kj kk kl km kn ko kp my kr ks kt mz kv kw kx na kz la lb lc im bi translated">使用命令:<br/> rm -rf cleanup.py</p></blockquote><p id="40d4" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ls确认我们已经删除了cleanup.py</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi qt"><img src="../Images/1869586f542a1248e009ce33281a3289.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*s78oR7SzF4gUEo2gu6ClKA.png"/></div></figure><p id="1c2e" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">它被移除了。<br/>我们现在使用命令将‘clean up 1 . py’重命名为‘clean up . py ’:</p><blockquote class="mu mv mw"><p id="371d" class="kf kg mx kh b ki kj kk kl km kn ko kp my kr ks kt mz kv kw kx na kz la lb lc im bi translated">mv清理1.py清理. py</p></blockquote><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi qu"><img src="../Images/aac2c1698d780bfff2fa02b909e6e5a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*z3p_wFwoQJR6T7xDq8Sa-A.png"/></div></figure><p id="604a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们可以确认机器上运行的python版本。是2.7.12。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi qv"><img src="../Images/1ef059c7cf6bcff836c3dbd74a047cff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W09WYje39Y8pwz2CalSxMA.png"/></div></div></figure><p id="518b" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们将使用python命令运行该脚本。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/59e2ef5d2cf32f1edab5876c544c46cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*CV-2NBRBm_STAsuKfov-vg.png"/></div></figure><p id="44f9" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我忘记在脚本中删除“所以我将快速删除”并保存脚本。没什么大不了的。<br/>我们可以继续再次执行脚本。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi qw"><img src="../Images/86e4c5ff34dbce8047e43ba1728ae90b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*biL7Bse8Oa8JDoVQM3JiqA.png"/></div></figure><p id="b7e7" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">它被执行。我们检查我们的netcat监听器。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi qx"><img src="../Images/55e34bf13a5a01695f8cafaec616972b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cSOP01FBzjmQg6nliYV1dQ.png"/></div></div></figure><p id="9418" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">宏伟！！干得好！！我们已经成功提升了权限。</p><figure class="lw lx ly lz gt ju"><div class="bz fp l di"><div class="qy qz l"/></div></figure><p id="73aa" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们可以确认我们是根。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi ra"><img src="../Images/be92cccc068744d4523e616424964e7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1186/format:webp/1*4O9xSYB7YddpqCrSbNo-8Q.png"/></div></figure><p id="1c50" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们剩下的就是拿到我们的根旗，完成盒子。</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi rb"><img src="../Images/966f96e0da86b28d38710835753af700.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*_2-N6r0YBkxYwIduxEr12w.png"/></div></figure><p id="ea94" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">恭喜你！！我们已经完成了CTF房间！！</p><figure class="lw lx ly lz gt ju gh gi paragraph-image"><div class="gh gi rc"><img src="../Images/f4504fdd412cf59dde1886e93c3310e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*kt9CaNOSe8RCHUiBN4b0TA.png"/></div></figure><p id="a160" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我很开心地找到了这个盒子，也为你们所有人写了一篇详细的文章。我将向早期的初学者推荐它，让他们接触这个盒子。你会学到很多东西。你可能会也可能不会掉进兔子洞，但这就是我们学习的方式。我相信在做CTFs的时候，兔子洞对初学者来说确实很烦人，但是有必要以艰难的方式学习。我被卡住了很多次，但这并没有阻止我更加努力。我希望你喜欢这篇文章。</p><p id="2915" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如果你喜欢这篇文章或者这篇文章在任何可能的方面帮助了你，请在评论中告诉我或者用掌声分享你的爱。</p><blockquote class="rd"><p id="c695" class="re rf it bd rg rh ri rj rk rl rm lc dk translated">作为10月PentesterLab赠品的一部分提交</p></blockquote><figure class="rn ro rp rq rr ju"><div class="bz fp l di"><div class="rs qz l"/></div></figure><p id="76a8" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">跟着我。</p><p id="84ad" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">谢谢你抽出时间。</p><p id="f6be" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">保重，注意安全，继续黑！</p><p id="66e8" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu">-哈桑·谢赫</strong></p></div></div>    
</body>
</html>