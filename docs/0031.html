<html>
<head>
<title>How I started a chain of subdomain takeovers and hacked 100’s of companies</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我是如何开始子域名收购链并黑掉100家公司的</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/how-i-started-a-chain-of-subdomain-takeovers-and-hacked-100s-of-companies-770d8f84885e?source=collection_archive---------0-----------------------#2017-12-04">https://infosecwriteups.com/how-i-started-a-chain-of-subdomain-takeovers-and-hacked-100s-of-companies-770d8f84885e?source=collection_archive---------0-----------------------#2017-12-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="678a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这一切开始于六个月前，当时我发现了<a class="kl km ep" href="https://medium.com/u/1979b6518264?source=post_page-----770d8f84885e--------------------------------" rel="noopener" target="_blank"> Frans Rosén </a>的博客(<a class="ae kn" href="https://labs.detectify.com/2014/10/21/hostile-subdomain-takeover-using-herokugithubdesk-more/" rel="noopener ugc nofollow" target="_blank">https://labs . detectify . com/2014/10/21/敌对子域接管使用-herokugithubdesk-more/ </a>)关于这个叫做子域接管(DNS劫持)的有趣漏洞。在那之后，我在不同的公司发现了这些漏洞，在披露我发现这些问题的公司之前，让我们详细讨论一下这个漏洞。</p><p id="7f5f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于这些公司来说，跟踪这种攻击并不容易，全球大约有16-17家服务提供商容易受到这种安全问题的攻击，其中一些服务提供商包括AWS、Heroku、Statuspage、Github、Pantheon、Bitbucket、Desk、Squarespace、Unbounce、Fastly和Shopify。</p><h2 id="e1ea" class="ko kp iq bd kq kr ks dn kt ku kv dp kw jy kx ky kz kc la lb lc kg ld le lf lg bi translated">那么如何发现这个漏洞呢？</h2><p id="3ff4" class="pw-post-body-paragraph jn jo iq jp b jq lh js jt ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk ij bi translated">查找带有以下错误消息的子域:</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi lm"><img src="../Images/96f14cf4efc9308b2e478d1cda731c82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZTmKLp-N9qSKng04pUkbQg.png"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">图片提供:<a class="kl km ep" href="https://medium.com/u/ac1a79a0eeea?source=post_page-----770d8f84885e--------------------------------" rel="noopener" target="_blank"> Ed </a></figcaption></figure><p id="2d0b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">更多信息可以访问<a class="kl km ep" href="https://medium.com/u/ac1a79a0eeea?source=post_page-----770d8f84885e--------------------------------" rel="noopener" target="_blank"> Ed </a>的Github:<a class="ae kn" href="https://github.com/EdOverflow/can-i-take-over-xyz" rel="noopener ugc nofollow" target="_blank">https://github.com/EdOverflow/can-i-take-over-xyz</a></p><h2 id="d93a" class="ko kp iq bd kq kr ks dn kt ku kv dp kw jy kx ky kz kc la lb lc kg ld le lf lg bi translated">攻击场景</h2><ol class=""><li id="1a1b" class="mc md iq jp b jq lh ju li jy me kc mf kg mg kk mh mi mj mk bi translated">您的公司开始使用新的服务，例如新的博客门户</li><li id="101d" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated">你的公司将一个子域指向博客门户，例如<a class="ae kn" href="http://support.your-domain.com/" rel="noopener ugc nofollow" target="_blank">blog.your-domain.com</a></li><li id="9acb" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated">您的公司停止使用此服务，但不会删除指向博客门户的子域重定向。</li><li id="0fc1" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated">攻击者注册该服务并声称该域是他们的。服务提供商不做任何验证，DNS设置已经正确设置。</li><li id="30fa" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated">攻击者现在可以构建真实网站的完整克隆，添加登录表单，重定向用户，窃取凭据(如管理员帐户)，cookies和/或完全破坏您公司的商业信誉。</li></ol><h2 id="8884" class="ko kp iq bd kq kr ks dn kt ku kv dp kw jy kx ky kz kc la lb lc kg ld le lf lg bi translated">那么，如何利用这个漏洞呢？</h2><ol class=""><li id="f24f" class="mc md iq jp b jq lh ju li jy me kc mf kg mg kk mh mi mj mk bi translated">你基本上开始蛮力迫使子域找到其中一个错误页面。</li><li id="3c37" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated">当你找到一个，你检查子域的CNAME，并注册为你的服务提供商，这就是现在你已经接管了子域。</li></ol><p id="13ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">利用这种攻击是非常容易的，并且很难跟踪它的域名所有者。</p><p id="33c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我最初对这些bug如此着迷，以至于我只是在寻找bug时才寻找它们，我在大约100家公司发现了这些问题，如耐克、兰博基尼、CNN、Musixmatch、网飞、Alienvault、索尼、奥迪、123contactform、Nearbuy和许多我不允许透露的私人项目。下面附上几张截图:</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/77b2d49df2ad98e62eaa3c47ec2cebb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SpaLWukJzHaLOMB91NPEQw.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">兰博基尼</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/eb161983449afbc18a3944ad6488be8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YnF8Jjx0kj9Y9v68Oz7Tog.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">沃尼克</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/171df965c2ea7ed94a1d270acf0b31ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k6Z6sYWMXzvkrOH8b7heDA.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">Exotel</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/4f1829c7a5f12ec99f06e61b08b1f3cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ed7PERjA-ZZtB4U_QP0CQ.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">Delhivery</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/178a7ce2f911f6a222612c634ba09fe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G3iiTowo8g1yaQ8TY6l9Lw.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">近购</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/238f412d0a678cbcf12617558b620493.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IENJ--zScAKVXyGCgHWBdg.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">紫色</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/f9e43472aaa7d21dae2b9756fef297d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fv4f2hne6k2GCCsu5EptVw.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">索尼移动</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/e904bd881b629f9d6d73171423444717.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r2BZ82FcYYA7G6G5ssgwrQ.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">Flood.io</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/a478be981bf5c0f9e2dcf3d0e1503725.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bLlQcBMXlM-x-BQyUsRWVw.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">Appknox</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/47190ca26bf046de953910704b038c0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7xd9SIQ0mhwR5Jb5XPaHIg.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">美国有线新闻网；卷积神经网络</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/c3f1a68dbd3f7d6dc9a548cf628b21fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nH6Z7AZXiHzkKbFy1uBzWA.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">索尼利夫</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/6b532dddf92340c469934ad7c791dd29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h6zElD3EKb_CEOwMN7B7Ag.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">奈基</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/6a339bdb49404d912f41684ac23bcd7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ddROGUByM1pkhyyZknyuKg.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">123联系方式</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/07a807a33482b47e6d144218d13c91c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1lFrHZZYGI1PDsH3zyWUAg.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">Wync音乐</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/0355a855d7aa70a5c36f01f16a467708.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LAQHla0PHwgszYuzNyAPeA.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">音乐比赛</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/35d7d436df6ab3ed75bcf829b781975f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4cwESTHrtrQSFZlVMQdiVA.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">向上保护</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/7ee2711c96a61f80b3346a179b2c568c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gsJ5E4v7UiUQ8R6LRFTKsA.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">艾伦沃特</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/5521d79319c12f10e484b4868d1ee649.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*owWc5wPg9KcAe5nNl6PLdQ.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">网飞</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/9ad0418bc87a2136f34b3116ead61aac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F14bXm_D20bZq5FBG5pSrA.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">奥迪</figcaption></figure><p id="6cad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这份名单还在不断增加，而且不会很快停止。</p><p id="6f18" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我只是希望这篇博客对你有所帮助，让你更好地理解子域收购。</p></div></div>    
</body>
</html>