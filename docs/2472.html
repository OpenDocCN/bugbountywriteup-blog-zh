<html>
<head>
<title>Android Pentesting 101 — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">安卓测试101 —第二部分</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/android-pentesting-101-part-2-419facdf11c1?source=collection_archive---------0-----------------------#2022-10-25">https://infosecwriteups.com/android-pentesting-101-part-2-419facdf11c1?source=collection_archive---------0-----------------------#2022-10-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="fefc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kl translated"><span class="l km kn ko bm kp kq kr ks kt di"> W </span>欢迎来到Android测试的第二部分。这个系列是关于你如何使用各种方法入侵Android并找到其中的漏洞。如果您还没有阅读第1部分，我强烈建议您在跳到本节之前先阅读一下。你可以在<a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/android-pentesting-101-part-1-8e31b8cd8b2b">这里</a>找到。</p><p id="0f3d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第二部分，我们的目标是涵盖Android Pentesting的静态分析，以及各种工具。所以让我们开始吧！！</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi kv"><img src="../Images/aa5279d5f37446368ff8c8dfa2cd468f.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*4UIGpu305LV9LI2L"/></div></figure><p id="3a4b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，Android Pentesting中的静态分析就是检查源代码并找到漏洞，你如何做到这一点呢？？第一步是拿到APK的档案。嗯，很简单，先找个安卓应用，把APK文件下载到手机上。</p><p id="63ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦你下载了APK，使用<a class="ae ku" href="https://play.google.com/store/apps/details?id=com.ext.ui&amp;hl=en_IN&amp;gl=US" rel="noopener ugc nofollow" target="_blank"> APK提取器</a>提取APK文件，然后将它发送到你的电脑进行进一步分析。同时，你也可以使用亚行拉它。以下是相同的命令:</p><ol class=""><li id="8baa" class="ld le iq jp b jq jr ju jv jy lf kc lg kg lh kk li lj lk ll bi translated">使用<code class="fe lm ln lo lp b">adb shell pm list packages -f | grep app_name</code>抓取包名</li><li id="8e1f" class="ld le iq jp b jq lq ju lr jy ls kc lt kg lu kk li lj lk ll bi translated">使用上面获得的包名获取路径<code class="fe lm ln lo lp b">adb shell pm path com.package_name.</code></li><li id="5c45" class="ld le iq jp b jq lq ju lr jy ls kc lt kg lu kk li lj lk ll bi translated">使用<code class="fe lm ln lo lp b">adb pull /data/app/com.package_name..apk</code>拉动apk</li></ol><p id="e6ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">或者，你也可以使用<a class="ae ku" href="https://github.com/ClaudiuGeorgiu/PlaystoreDownloader" rel="noopener ugc nofollow" target="_blank"> PlaystoreDownloader </a>下载APK文件。下一步是逆向工程代码。在第1部分中，我们已经看到了Java源代码是如何转换成APK文件的，我们只需颠倒整个过程，就可以得到可读的文件。要执行此操作:</p><ol class=""><li id="f08f" class="ld le iq jp b jq jr ju jv jy lf kc lg kg lh kk li lj lk ll bi translated">使用<a class="ae ku" href="https://www.win-rar.com/start.html?&amp;L=0" rel="noopener ugc nofollow" target="_blank"> WinRar </a>或类似工具提取APK文件。(如果不可提取，首先将apk文件转换为ZIP，即MyApp.zip)</li><li id="4222" class="ld le iq jp b jq lq ju lr jy ls kc lt kg lu kk li lj lk ll bi translated">提取之后，我们得到AndroidManifest.xml文件和某些DEX代码。我们必须逆转这些德克斯代码。这可以使用命令<code class="fe lm ln lo lp b">d2j-dex2jar -f classes.dex</code>轻松完成</li><li id="6f7a" class="ld le iq jp b jq lq ju lr jy ls kc lt kg lu kk li lj lk ll bi translated">JD-GUI工具现在可以解释jar文件，我们可以清楚地看到APK文件的源代码。</li></ol><p id="68f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">太好了，现在是进行所有人工分析的时候了。在一般情况下，静态分析会检查以下内容</p><ol class=""><li id="18cf" class="ld le iq jp b jq jr ju jv jy lf kc lg kg lh kk li lj lk ll bi translated">检查应用程序是否可调试</li><li id="0b30" class="ld le iq jp b jq lq ju lr jy ls kc lt kg lu kk li lj lk ll bi translated">检查任何导出的活动是否为真(如果是，使用drozer利用它)</li><li id="9cf5" class="ld le iq jp b jq lq ju lr jy ls kc lt kg lu kk li lj lk ll bi translated">请检查AndroidManifest.xml文件中自定义权限的印刷错误。类似的测试案例可以在<a class="ae ku" href="https://hackerone.com/reports/440749" rel="noopener ugc nofollow" target="_blank">这里</a>找到</li><li id="46a2" class="ld le iq jp b jq lq ju lr jy ls kc lt kg lu kk li lj lk ll bi translated">检查硬编码的API键、注释、秘密等。类似的测试案例可以在<a class="ae ku" href="https://hackerone.com/reports/351555" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</li><li id="29da" class="ld le iq jp b jq lq ju lr jy ls kc lt kg lu kk li lj lk ll bi translated">检查导出的广播行为。</li></ol><p id="1170" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">手动测试有时会很无聊，因此为了加快这个过程，我们有两个漂亮的工具可以帮你:</p><ol class=""><li id="359f" class="ld le iq jp b jq jr ju jv jy lf kc lg kg lh kk li lj lk ll bi translated"><a class="ae ku" href="https://github.com/MobSF/Mobile-Security-Framework-MobSF" rel="noopener ugc nofollow" target="_blank"> MobSF </a>:这是一款自动化的恶意软件分析工具，可以帮助你加快静态分析的速度。可以轻松<a class="ae ku" href="https://mobsf.github.io/docs/#/installation" rel="noopener ugc nofollow" target="_blank">下载</a>。让我们快速浏览一下。</li></ol><p id="64b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第一步是使用如上所述的各种方法下载APK，然后将APK上传到MobSF。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lv"><img src="../Images/22fe138b32cfeae72dd826cd0129511d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h7os0pJaWO5PeL7jkaSPnQ.png"/></div></div></figure><p id="ad6b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下面的截图中，您将能够看到所有的应用程序细节。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lv"><img src="../Images/ab1ab20c9222f2c0350d6ad5fa8e621d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nlaTsfb6yL0aOHHSMp-2xg.png"/></div></div></figure><p id="03a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一个屏幕显示了所有活动、服务、接收者、提供者等。您甚至可以查看AndroidManifest.xml文件以及源代码和Smali代码。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lv"><img src="../Images/763135a9b91b3cdcc073d1ebda4f3118.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RT7kLk9O9LKO45MWbr7n8Q.png"/></div></div></figure><p id="15e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以查看所有的安全分析，恶意软件分析，代码分析，文件分析等。一个接一个。同样的截图可以在下面看到。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi ma"><img src="../Images/e82c2cd911bb220311afc29793232909.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Onx45aanhwhmyDOTtSD8Cg.png"/></div></div></figure><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lv"><img src="../Images/187d6474907bdb807844a534001466b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*op9Z7MK-v2uqS_PfTj9Fqw.png"/></div></div></figure><p id="7c4b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您甚至可以打印静态分析的PDF报告。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi ma"><img src="../Images/0f225f6e493bfbf349d3d331912c184b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4AgfFKZcdDB6HZvzthHV3A.png"/></div></div></figure><p id="744a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.BeVigil:由CloudSek开发的全球首个也是唯一一个针对移动应用的安全搜索引擎。就我个人而言，我更喜欢这个工具，因为它使用起来非常简单，而且你可以提供一个到PlayStore URL的直接链接。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi mb"><img src="../Images/3bffbb454ceafece3f9bf683e29970d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cX4l6fuovNfEQSMkabbBcg.png"/></div></div></figure><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi mb"><img src="../Images/7da36b9a248c57db4c8d5340e6abe75d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-antUPMLzZaY-1Yq49OCLQ.png"/></div></div></figure><p id="7c38" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，您可以查看安全分数、所有检测到的问题及其描述。让我们随便举个例子:</p><ol class=""><li id="dd94" class="ld le iq jp b jq jr ju jv jy lf kc lg kg lh kk li lj lk ll bi translated">如果您可以看到此特定应用程序接受所有SSL证书，这意味着在动态分析中，我们不必绕过SSL锁定，因此我们可以尝试报告此漏洞。</li><li id="9a3b" class="ld le iq jp b jq lq ju lr jy ls kc lt kg lu kk li lj lk ll bi translated">经过进一步分析，我们发现一些Google API密钥也被泄露了。</li></ol><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi mc"><img src="../Images/9393b5361939eaa81a34b94ed8e5fdd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xKr_4F2BTXQZp_7dHRzPiQ.png"/></div></div></figure><p id="6f1d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.我们还可以看到，还编写了非参数化的查询，这使得攻击者能够执行SQL注入</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi md"><img src="../Images/b642674dd764f108c9df065d66237d7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KEkJNC2rQ_vFfjknv060Ww.png"/></div></div></figure><p id="9bb8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">等等所有的静态文件都可以被分析。</p><p id="c942" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是第二部分的所有人！我们希望你喜欢这篇文章！我们将很快返回另一部分，在那里我们将向您展示在执行Android Pentesting时的动态分析方法。</p><p id="e76d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">狩猎愉快！</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><p id="7033" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">作者:</strong></p><p id="27b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae ku" href="https://www.linkedin.com/in/vaibhav-lakhani" rel="noopener ugc nofollow" target="_blank">瓦伊巴夫·拉哈尼</a>:<a class="ae ku" href="https://www.linkedin.com/in/vaibhav-lakhani" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/vaibhav-lakhani</a></p><p id="58c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">迪尔·帕尔马:【https://www.linkedin.com/in/dhir-parmar-925b171a4】T2</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h2 id="1e64" class="ml mm iq bd mn mo mp dn mq mr ms dp mt jy mu mv mw kc mx my mz kg na nb nc nd bi translated">来自Infosec的报道:Infosec每天都有很多内容，很难跟上。<a class="ae ku" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank">加入我们的每周时事通讯</a>以5篇文章、4个线程、3个视频、2个GitHub Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</h2></div></div>    
</body>
</html>