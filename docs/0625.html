<html>
<head>
<title>Write-Up 02- TryHackMe- Basic Pentesting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向上写02- TryHackMe-基本测试</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/write-up-02-tryhackme-basic-pentesting-797dbd0721df?source=collection_archive---------0-----------------------#2020-06-07">https://infosecwriteups.com/write-up-02-tryhackme-basic-pentesting-797dbd0721df?source=collection_archive---------0-----------------------#2020-06-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/1c8858b9fd5cfa0aa7e7b7041a2d5bd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*1SkYGPNJIU6Niewh74OQpw.png"/></div></figure></div><div class="ab cl jx jy hx jz" role="separator"><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc"/></div><div class="im in io ip iq"><h1 id="9174" class="ke kf it bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">介绍</h1><p id="e5b1" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz im bi translated">这篇文章是关于TryHackMe平台上的<a class="ae ma" href="https://tryhackme.com/room/basicpentestingjt" rel="noopener ugc nofollow" target="_blank">基础测试室</a>的。我将详细解释解决挑战/任务所涉及的程序。</p><h1 id="e396" class="ke kf it bd kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx mf kz la lb bi translated">学习成果</h1><p id="1e78" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz im bi translated">通过解决与此房间相关的任务/挑战，我们将了解如何扫描主机以获取服务和打开的端口。此外，我们将寻找web服务器上的不同目录，为了访问主机，我们将破解密码和哈希。当我们开始解决这些任务时，更多的学习成果就会显现出来。所以让我们开始吧！！！</p><h1 id="923c" class="ke kf it bd kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx mf kz la lb bi translated">任务1和2</h1><p id="291e" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz im bi translated">连接到OpenVPN并部署机器。我们需要找到在主机上运行的服务，为此我们将在主机上运行Nmap。通过扫描，我们得出结论，web服务正在端口80上运行，与该服务相关的版本是Apache httpd 2.4.18。除此之外，还有一个SMB Samba服务运行在端口139上。这些服务可能是我们感兴趣的领域。</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mg"><img src="../Images/360a5e8b636ade6778b025c7167a7520.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F15qR3q_xUxDaLEdw72E9g.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">对主机进行Nmap扫描</figcaption></figure><h1 id="a886" class="ke kf it bd kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx mf kz la lb bi translated"><strong class="ak">任务三</strong></h1><p id="9748" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz im bi translated">我们需要找到网络服务器上的隐藏目录。让我们在web浏览器上访问主机的IP地址。如下所示，没有获得任何信息</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mt"><img src="../Images/b74fad4536942fb0d6fba006a9a56229.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MkHhghKV6CgCH32aDZGimw.png"/></div></div></figure><p id="979f" class="pw-post-body-paragraph lc ld it le b lf mu lh li lj mv ll lm ln mw lp lq lr mx lt lu lv my lx ly lz im bi translated">我们需要找到隐藏的目录，为此，我们将使用一个名为<a class="ae ma" href="https://tools.kali.org/web-applications/gobuster" rel="noopener ugc nofollow" target="_blank"> <strong class="le iu"> gobuster </strong> </a>的工具来寻找隐藏的目录和暴力目录。在参数中，我们将定义服务器的IP地址，并提供一个如下所示的世界列表。一旦这个过程完成，我们会找到一个隐藏的目录。所有其他目录都不可访问，我们可以通过查看状态代码来确认这一点。</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/b5481edb95b8f26b50e1439ccaee1651.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*U72Jrep3FNj-3hH5iUmnmA.png"/></div></figure><p id="5fe3" class="pw-post-body-paragraph lc ld it le b lf mu lh li lj mv ll lm ln mw lp lq lr mx lt lu lv my lx ly lz im bi translated">现在我们需要访问隐藏目录来查找更多信息</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div class="gh gi na"><img src="../Images/cf52054c3ac943c938b82dab3e3d6a67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*1t6NS6yGBeKqexLV9lzDHg.png"/></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">使用网络浏览器访问隐藏目录</figcaption></figure><p id="bfd6" class="pw-post-body-paragraph lc ld it le b lf mu lh li lj mv ll lm ln mw lp lq lr mx lt lu lv my lx ly lz im bi translated">在隐藏目录中有两个文本文件，让我们看看是否能找到一些信息。</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi nb"><img src="../Images/dd26b32368c1e7375128e2d3128b5f5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VrIRJBvnKDBWAXXNbACv4w.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">开发. txt</figcaption></figure><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/628b504164ad6b7310a35b6b2322f783.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*yyzmQ2o5Kf3CZXmMnnKB7A.png"/></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">j.txt</figcaption></figure><p id="a5de" class="pw-post-body-paragraph lc ld it le b lf mu lh li lj mv ll lm ln mw lp lq lr mx lt lu lv my lx ly lz im bi translated">通过查看dev.txt，我们找到了正在运行的<strong class="le iu"> apache webserver </strong>和<strong class="le iu"> SMB </strong>服务的版本。我试图找到针对HTTP服务的漏洞，但没有结果。观察j.txt，我们知道我们可以尝试破解用户的散列，因为密码可能很弱，他们的散列也是如此。</p><h1 id="ae4c" class="ke kf it bd kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx mf kz la lb bi translated"><strong class="ak">任务4 -7 </strong></h1><p id="bec1" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz im bi translated">再考虑一下我们的Nmap扫描，我们用<a class="ae ma" href="https://tools.kali.org/information-gathering/enum4linux" rel="noopener ugc nofollow" target="_blank"><strong class="le iu">enum 4 Linux</strong></a><strong class="le iu"/>依次列举samba。</p><p id="0697" class="pw-post-body-paragraph lc ld it le b lf mu lh li lj mv ll lm ln mw lp lq lr mx lt lu lv my lx ly lz im bi translated"><strong class="le iu"> enum4linux -a &lt;机器IP&gt;T21】</strong></p><p id="7cf7" class="pw-post-body-paragraph lc ld it le b lf mu lh li lj mv ll lm ln mw lp lq lr mx lt lu lv my lx ly lz im bi translated">使用这个工具，我们有两个用户。请注意，这可能需要一些时间，因为要对系统上的所有uid进行枚举。</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/02b713369654c71c3df48e34403e2e9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*HYrHOlYMa4AoF8l9BpzgKQ.png"/></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">Samba枚举</figcaption></figure><p id="bb4f" class="pw-post-body-paragraph lc ld it le b lf mu lh li lj mv ll lm ln mw lp lq lr mx lt lu lv my lx ly lz im bi translated">现在我们需要知道找到的用户的密码。所以我将使用<strong class="le iu"> hydra </strong>使用字典强行破解用户密码。记住，主机也运行ssh，所以我们将尝试暴力破解用户的ssh登录</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi ne"><img src="../Images/2f4934d4cc609bc8b9958d34cdf321d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0pOmviXobON5jso5petF2w.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">九头蛇代表暴力</figcaption></figure><p id="14b6" class="pw-post-body-paragraph lc ld it le b lf mu lh li lj mv ll lm ln mw lp lq lr mx lt lu lv my lx ly lz im bi translated">现在让我们使用凭证通过ssh登录</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/57a64b4058490e4a2838278f89db54fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*l65gFmxog0rT-eyHfDQfQA.png"/></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">SSH用户@ip</figcaption></figure><h1 id="798d" class="ke kf it bd kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx mf kz la lb bi translated">任务8–11</h1><p id="36ba" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz im bi translated">现在我们需要找到任何载体来提升我们的特权。在主机上查找文件。我们在用户Jan上找不到任何东西</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/b06fafb71809e99f2182c93124bdd3cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:818/format:webp/1*wXtvIBPD-YXVLjMH0Gfhdw.png"/></div></figure><p id="6f9f" class="pw-post-body-paragraph lc ld it le b lf mu lh li lj mv ll lm ln mw lp lq lr mx lt lu lv my lx ly lz im bi translated">让我们检查一下另一个用户。经过适当的查找，我们找到了另一个用户的公钥。公钥包含哈希，复制哈希密钥</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/ab5cd3252d5c2b44ff5913818f86f3e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*HR8l5jMs5Q3sIY7ldKYwTg.png"/></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">用户Kay文件</figcaption></figure><p id="fbd0" class="pw-post-body-paragraph lc ld it le b lf mu lh li lj mv ll lm ln mw lp lq lr mx lt lu lv my lx ly lz im bi translated">导航到。ssh文件夹，在那里我们可以找到用户的私钥</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/096ec20961dc0d339b7bff1189475060.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*CzIKnXbHKjK4uanACRg9Ng.png"/></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">用户Kay的密钥</figcaption></figure><p id="724a" class="pw-post-body-paragraph lc ld it le b lf mu lh li lj mv ll lm ln mw lp lq lr mx lt lu lv my lx ly lz im bi translated">在这之后，我们需要复制密钥并使用<strong class="le iu">约翰</strong>来破解散列。但是首先，我们需要将这个密钥文件转换成如下所示的散列格式</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi nj"><img src="../Images/b059bf72f6f2812a0b7d4c7d463600b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0xV7AJ5dCWpAO-R1WWnq7g.png"/></div></div></figure><p id="ce08" class="pw-post-body-paragraph lc ld it le b lf mu lh li lj mv ll lm ln mw lp lq lr mx lt lu lv my lx ly lz im bi translated">一旦我们完成了这个，我们现在将使用约翰破解散列使用单词列表<strong class="le iu"> rockyou.txt </strong></p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi nk"><img src="../Images/c149133bc01275495bc29ade794806b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cFH7T_6lkHzBtv9qiBIC6g.png"/></div></div></figure><p id="d068" class="pw-post-body-paragraph lc ld it le b lf mu lh li lj mv ll lm ln mw lp lq lr mx lt lu lv my lx ly lz im bi translated">现在我们有了用户kay的破解哈希。请记住，这不是ssh用户的密码，而是我们在通过ssh连接到<strong class="le iu"> Jan </strong>的<strong class="le iu"> kay </strong>用户目录中找到的私钥的破解散列。因此，我们需要通过<strong class="le iu"> Jan </strong>用户应用破解的哈希，如下所示</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/87d44e68d103bc2e28bb90e51477622d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*WdMlS75ViE5QP5PL0FZiTA.png"/></div></figure><p id="2b20" class="pw-post-body-paragraph lc ld it le b lf mu lh li lj mv ll lm ln mw lp lq lr mx lt lu lv my lx ly lz im bi translated">至此，我们的挑战/任务已经完成。</p><h1 id="1b94" class="ke kf it bd kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx mf kz la lb bi translated"><strong class="ak">结论</strong></h1><p id="abf3" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz im bi translated">解决这一挑战使我们能够对如何扫描我们的目标机器并在其上寻找漏洞有一个总体的想法。一旦我们试图获得访问权或提升我们的特权，我们也开始了解破解密码和散列。也就是说，试着先自己完成房间，如果你遇到困难，请随时查阅演练。黑客快乐:)！！</p></div><div class="ab cl jx jy hx jz" role="separator"><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc"/></div><div class="im in io ip iq"><h1 id="869f" class="ke kf it bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">关于我</h1><p id="d3de" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz im bi translated">我是一名网络安全爱好者，正在攻读信息安全硕士学位，并试图进入全职网络安全职业生涯。</p></div></div>    
</body>
</html>