<html>
<head>
<title>#BugBounty — How I was able to read chat of users in an Indian Online travel portal</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated"># bug bounty——我是如何在印度在线旅游门户网站上阅读用户聊天记录的</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/bugbounty-how-i-was-able-to-read-chat-of-users-in-an-online-travel-portal-c55a1787f999?source=collection_archive---------3-----------------------#2018-01-10">https://infosecwriteups.com/bugbounty-how-i-was-able-to-read-chat-of-users-in-an-online-travel-portal-c55a1787f999?source=collection_archive---------3-----------------------#2018-01-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="c51c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嗨伙计们，</p><p id="3684" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在进行常规的bug搜索时，我遇到了一个有趣的IDOR漏洞，它可以帮助我阅读在线旅游公司客户支持团队的用户的完整聊天记录。</p><p id="c14d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在浏览一家公司的网站时，我发现了一个在线聊天论坛，它允许客户与支持团队在线聊天，询问有关预订、付款、退款等问题。那骗我提取用户敏感数据的:)。我首先想到的是“我如何能阅读其他用户的聊天记录”,于是我开始寻找答案。当触发在线聊天功能时，它会发出以下HTTP请求—</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi kl"><img src="../Images/1788d41a8d234eb6f60a1aa34f72fb4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1394/format:webp/1*ILi8Z5ZesWD_lCWYsXFHHg.png"/></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk translated">聊天请求</figcaption></figure><p id="34de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对上述请求的响应是聊天过程中交换的对话消息—</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/243ff238624513d0264a4b14e6780e75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*XK5Z0yRDuSqik238WCbvMQ.png"/></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk translated">聊天回复</figcaption></figure><p id="ae67" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">黄色标记的值(在聊天请求图片中)是我必须使用的。在遍历更多内容时，我意识到第一个值(即hari013903158)是客户id，第二个值FL-132756是聊天id，进一步分析发现它是递增的。现在我知道该怎么做了，:D。</p><p id="d9c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是有一个障碍“如何找到有效的客户id ”,在本例中是一个13位的字母数字id。我回到登录页面，个人资料部分，看看它是否能有所帮助，但没有任何帮助。接下来是“救援”中的“博客区”——旅行者的博客页面，人们在这里分享他们的旅行故事。我开了一个博客来阅读(不是为了阅读；) )是由一个用户发布的，就这么简单，我可以在URL本身看到用户id。唷！值得欢呼的事情！现在我复制了那个用户id，在“聊天请求”中替换它，使用burp工具强制使用聊天id和…我仍然什么也没得到。可能是用户从未与支持团队进行过在线聊天。:/ .Race仍然没有完成，所以我又打开了10-20个博客，做了同样的事情，下面是一个特定用户id的请求-响应。☺</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi ky"><img src="../Images/d79fe4dcd2300263890388623d367c10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*70zrGfAsJkodyiTYbRnUrQ.png"/></div></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk translated">用户的聊天记录</figcaption></figure><p id="0c8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我可以访问那个用户的全部聊天记录。</p><p id="e7de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ld">报告详情</em> -</p><p id="cc07" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2017年11月9日—向相关公司报告了错误。</p><p id="2896" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2017年11月29日—错误被标记为已修复。</p><p id="2d12" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2017年11月30日—重新测试并确认了修复。</p><p id="ebf0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2017年12月21日—获得奖励和名人堂。</p><p id="5095" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这都是关于这个有趣的发现。☺</p><p id="fc3b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">谢谢！</p><p id="ff70" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">~逻辑炸弹(【https://twitter.com/logicbomb_1】T2</p></div></div>    
</body>
</html>