<html>
<head>
<title>Tryhackme: Anonymous</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Tryhackme:匿名</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/tryhackme-anonymous-d7d5b6d14478?source=collection_archive---------0-----------------------#2022-04-25">https://infosecwriteups.com/tryhackme-anonymous-d7d5b6d14478?source=collection_archive---------0-----------------------#2022-04-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="28a8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">游戏攻略</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/05372895518a5c95acb1e8ea5a96041e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*vEuXPztYIPrOfY00mWvEmQ.png"/></div></figure><h1 id="4cae" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">简介:</h1><p id="38d5" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">大家好。这次我们要做在Tryhackme上被评为中等的匿名房间。</p><p id="fa78" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">所以让我们支持:D</p><h1 id="c902" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">首字母</h1><p id="7ce3" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">用我的名字缩写，包括存储机器IP地址到变量、</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="c7e2" class="ml ko iq mh b gy mm mn l mo mp">export IP=10.10.193.59</span></pre><h2 id="7b3f" class="ml ko iq bd kp mq mr dn kt ms mt dp kx lo mu mv kz ls mw mx lb lw my mz ld na bi translated">端口扫描:</h2><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="ec15" class="ml ko iq mh b gy mm mn l mo mp">rustscan -a $IP --ulimit 5000 | tee rust.txt</span></pre><p id="55da" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">使用<strong class="lh ir"> rustscan </strong>我们发现4个端口打开，即</p><p id="9662" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated"><code class="fe nb nc nd mh b">21, 22, 139, 445</code></p><p id="d431" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">让我们用<strong class="lh ir"> nmap </strong>深入研究这些端口，</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="cad3" class="ml ko iq mh b gy mm mn l mo mp">nmap -sC -sV -p21,22,139,445 -oN nmap $IP -Pn</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi ne"><img src="../Images/705044109058fcf3aaac4e572ed59c9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HUYdnz1Lzr-oHjWDziab5g.png"/></div></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk translated">nmap扫描结果</figcaption></figure><h2 id="79f8" class="ml ko iq bd kp mq mr dn kt ms mt dp kx lo mu mv kz ls mw mx lb lw my mz ld na bi translated">端口- 139，445 (SMB):</h2><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="d60a" class="ml ko iq mh b gy mm mn l mo mp">smbclient -L $IP -N</span></pre><p id="c2a4" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我发现了一个名为“图片”的分享，让我们来深入了解一下</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/74be1e45cadcdf5d209751b1a71919e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*OJq21V-vFv4YlOat2s7UaQ.png"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk translated">中小企业份额</figcaption></figure><p id="44a1" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我查看了SMB共享，找到了两张图片，做了我所知道的所有速记工作，浪费了一些时间后，我知道这只是一个兔子洞:/</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="796e" class="kn ko iq bd kp kq nv ks kt ku nw kw kx jw nx jx kz jz ny ka lb kc nz kd ld le bi translated">剥削</h1><h2 id="e6a8" class="ml ko iq bd kp mq mr dn kt ms mt dp kx lo mu mv kz ls mw mx lb lw my mz ld na bi translated">端口21 (FTP):</h2><p id="e7bd" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">由于nmap扫描显示允许匿名登录，因此它以匿名用户身份登录并找到了一些文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/6ada2ea589d81d6d80237b1cd9a6e663.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*2gxBAs5jiWx7_LMromNmfw.png"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk translated">FTP共享</figcaption></figure><p id="4d98" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我的第一个注意是由<code class="fe nb nc nd mh b">clean.sh</code>引起的，因为它是一个可执行文件，它就在那里。</p><p id="ece7" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">将该文件放入我的本地机器，发现它正在自动进行清理工作。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi ob"><img src="../Images/113d162871ec2c77920e4a7bc224bd1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u4bTQ0YqOy8sp197xHgyWw.png"/></div></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk translated">clean.sh</figcaption></figure><p id="f9fb" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">所以我改变了文件夹的内容(添加了我的反向shell)并上传到machine。我突然发现FTP共享文件夹在nmap扫描上是可写的</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/c716850eb714c210f271707acd135ce4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*tktQgqQYH4ToS0kWfcMWMg.png"/></div></figure><p id="a315" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">几秒钟后，我拿到了贝壳:D</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/fa0d172b3c34caf0072e88b33472f084.png" data-original-src="https://miro.medium.com/v2/resize:fit:522/format:webp/1*wcnAULY2ML8d0LVEANd06A.png"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk translated">壳</figcaption></figure></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="0328" class="kn ko iq bd kp kq nv ks kt ku nw kw kx jw nx jx kz jz ny ka lb kc nz kd ld le bi translated">根</h1><p id="a125" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在我们有了用户，是时候获得根用户了。</p><p id="2d20" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">首先要尝试的是</p><p id="90b1" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated"><code class="fe nb nc nd mh b">sudo -l</code> →没有运气</p><p id="cb34" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated"><code class="fe nb nc nd mh b">suid</code>二进制→没有运气</p><p id="781e" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">然后我检查了组，找到了有线组名“lxd”</p><p id="84cf" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">这是我的时间看到，研究同样的黑客技巧和其他网站和一些特权提升技术。这个<a class="ae oe" href="https://www.hackingarticles.in/lxd-privilege-escalation/" rel="noopener ugc nofollow" target="_blank">网站</a>对我真的很有帮助(:</p><p id="d105" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我们是根！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi of"><img src="../Images/27e022d8ea92fbe7e79377bafb2e58e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:476/format:webp/1*neGEISibFKw9_KALgf6lIg.png"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk translated">根！！</figcaption></figure><p id="2180" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">虽然我被root了但是没有能够找到<code class="fe nb nc nd mh b">root.txt </code>的文件。只有一个文件在<code class="fe nb nc nd mh b">/root</code></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/a58a83982eca64329d760ab431f2b7e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:354/format:webp/1*GfikI6m3H8JYms3ARSfgRw.png"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk translated">/root</figcaption></figure><p id="c4f2" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">后来看文章，发现整个<code class="fe nb nc nd mh b">/</code>目录都在<code class="fe nb nc nd mh b">/mnt/root</code>下面，得到了<code class="fe nb nc nd mh b">root.txt</code>文件XD</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/81fbc39dc83714f931fab80d2530fa8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:502/format:webp/1*VD-OqQm4Ya_ooUeEbz00vQ.png"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk translated">root.txt</figcaption></figure></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><p id="faa5" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">就这样我们完成了匿名房间。感谢您阅读这篇文章(:</p><p id="e15a" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">|| <a class="ae oe" href="https://tryhackme.com/room/anonymous" rel="noopener ugc nofollow" target="_blank">房间</a> || <a class="ae oe" href="https://twitter.com/namx05" rel="noopener ugc nofollow" target="_blank">推特</a> ||</p></div></div>    
</body>
</html>