<html>
<head>
<title>DNS in Active Directory</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Active Directory中的DNS</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/dns-in-active-directory-dcb93b10c3f3?source=collection_archive---------1-----------------------#2022-07-03">https://infosecwriteups.com/dns-in-active-directory-dcb93b10c3f3?source=collection_archive---------1-----------------------#2022-07-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/9bb188e6159cd49a5fd763763a589a4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*oSsQf_VmxRU-ApnVhz9-tQ.png"/></div></figure><p id="38f7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">本文提供了域名系统(DNS)协议工作原理的基本概述。在这篇文章中，我们将探索DNS的基本功能以及如何在AD环境中使用它。DNS是一个很大的主题，本文将只涵盖基础知识，所以说，让我们深入！</p></div><div class="ab cl ks kt hu ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ij ik il im in"><h1 id="771e" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">什么是DNS？</h1><p id="c5bf" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated"><a class="ae mc" href="https://docs.microsoft.com/en-us/windows-server/networking/dns/dns-top" rel="noopener ugc nofollow" target="_blank">微软</a>这样描述DNS:</p><blockquote class="md me mf"><p id="7f78" class="ju jv mg jw b jx jy jz ka kb kc kd ke mh kg kh ki mi kk kl km mj ko kp kq kr ij bi translated">域名系统(DNS)是包含TCP/IP的行业标准协议套件之一，DNS客户端和DNS服务器一起向计算机和用户提供计算机名称到IP地址的映射名称解析服务。</p></blockquote><p id="be11" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">DNS是一种命名系统，它为用户提供了一种简单的方式来与互联网上的设备进行通信，而无需记住IP地址。相反，用户通过提供一个<strong class="jw ir">域名</strong>(例如demo.com)来发出请求，然后由DNS翻译成相应的IP地址。下图演示了一个基本的<strong class="jw ir"> DNS查找</strong>，其中客户端连接到DNS服务器，将完全合格的域名(FQDN)解析为IP地址。</p><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/d24c557de8b1103de54d6e5324ab474f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*kxQud6ScoIevDqBYQONa1g.png"/></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">基本DNS查找示例。</figcaption></figure></div><div class="ab cl ks kt hu ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ij ik il im in"><h1 id="3b9b" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">DNS的核心组件是什么？</h1><p id="1edf" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">在讨论DNS的核心组件时，经常会用到以下术语，这些术语将在下面各自的小节中进一步阐述。</p><ul class=""><li id="346d" class="mt mu iq jw b jx jy kb kc kf mv kj mw kn mx kr my mz na nb bi translated"><a class="ae mc" href="https://soundsupport.biz/2015/02/08/dns-for-small-business-owners/#:~:text=Real%20World%20Analogy&amp;text=DNS%20is%20like%20a%20phone,get%20ahold%20of%20that%20person." rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir">域名</strong> </a>:企业或个人注册的便于人类记忆的名称(如apple.com、youtube.com、ford.com等)。).</li><li id="a7c2" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated"><a class="ae mc" href="https://soundsupport.biz/2015/02/08/dns-for-small-business-owners/#:~:text=Real%20World%20Analogy&amp;text=DNS%20is%20like%20a%20phone,get%20ahold%20of%20that%20person." rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir">域名服务器</strong> </a>:存储某个域名的各个DNS记录的服务器。每个域名都分配有自己的名称服务器。</li><li id="cbe2" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated"><a class="ae mc" href="https://www.cloudflare.com/learning/dns/dns-records/" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> DNS记录</strong> </a>:列出存储企业网站或电子邮件账户的特定服务器的IP地址。</li></ul><h2 id="ea9b" class="nh la iq bd lb ni nj dn lf nk nl dp lj kf nm nn ln kj no np lr kn nq nr lv ns bi translated">域层次结构</h2><p id="b7bb" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">DNS使用不同管理区域的层次结构进行管理，这些区域称为<a class="ae mc" href="https://www.cloudflare.com/learning/dns/glossary/dns-zone/" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir">区域</strong> </a>，是授权给法人实体(即个人、组织或公司)的域名空间的独特部分。<strong class="jw ir">域名空间</strong>(即域名层次结构)是一个分层树，DNS根域名位于顶部。<a class="ae mc" href="https://www.interserver.net/tips/kb/dns-dns-hierarchy/" rel="noopener ugc nofollow" target="_blank">域层次结构</a>由以下元素组成:</p><ol class=""><li id="98cd" class="mt mu iq jw b jx jy kb kc kf mv kj mw kn mx kr nt mz na nb bi translated"><a class="ae mc" href="https://moz.com/learn/seo/domain" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir">根域</strong> </a>:是层次结构中最高的域。它是域名和TLD的结合。</li><li id="46dd" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr nt mz na nb bi translated"><a class="ae mc" href="https://moz.com/learn/seo/domain" rel="noopener ugc nofollow" target="_blank"><strong class="jw ir">【TLD】</strong></a>:是出现在域名末尾的后缀。</li><li id="407e" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr nt mz na nb bi translated"><a class="ae mc" href="https://moz.com/learn/seo/domain" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir">二级域名</strong> </a>:域名是一个域层次结构中的第二级(在顶级域名之后)。</li><li id="54ea" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr nt mz na nb bi translated"><a class="ae mc" href="https://moz.com/learn/seo/domain" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir">子域</strong> </a>:域层次结构的第三级，是更大的顶级域的一部分。</li></ol><p id="7e08" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">下图说明了这一点:</p><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gh gi nu"><img src="../Images/8fb64e356163f3ac524f765a7349c8ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*20Z2sHTAs1R1i12rcWfBnw.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated"><a class="ae mc" href="https://moz.com/learn/seo/domain" rel="noopener ugc nofollow" target="_blank">域名结构示例。</a></figcaption></figure><h2 id="1ea7" class="nh la iq bd lb ni nj dn lf nk nl dp lj kf nm nn ln kj no np lr kn nq nr lv ns bi translated">DNS服务器</h2><p id="2f0c" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">DNS服务器分为几类:</p><ul class=""><li id="1c6c" class="mt mu iq jw b jx jy kb kc kf mv kj mw kn mx kr my mz na nb bi translated"><a class="ae mc" href="https://www.cloudflare.com/learning/dns/dns-server-types#recursive-resolver" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> DNS Recursor </strong> </a>:作为客户端和DNS名称服务器之间的中间人，处理客户端查询和DNS服务器响应。</li><li id="8342" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated"><a class="ae mc" href="https://www.cloudflare.com/learning/dns/glossary/dns-root-server/" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir">根域名服务器</strong> </a>:接受包含域名的递归解析器的查询，根域名服务器根据该域名的扩展名(.com，。网，。org等。).</li><li id="0645" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated"><a class="ae mc" href="https://www.cloudflare.com/learning/dns/dns-server-types#tld-nameserver" rel="noopener ugc nofollow" target="_blank"><strong class="jw ir"/></a>:托管主机名的最后一部分(在example.com，TLD服务器是“com”)。</li><li id="68da" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated"><a class="ae mc" href="https://www.cloudflare.com/learning/dns/dns-server-types#authoritative-nameserver" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir">权威域名服务器</strong> </a>:如果服务器可以访问所请求的记录，它会将所请求主机名的IP地址返回给发出初始请求的DNS递归器。</li></ul><h2 id="2a8e" class="nh la iq bd lb ni nj dn lf nk nl dp lj kf nm nn ln kj no np lr kn nq nr lv ns bi translated">DNS记录</h2><p id="e1aa" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated"><a class="ae mc" href="https://www.cloudflare.com/learning/dns/dns-records/" rel="noopener ugc nofollow" target="_blank"> DNS记录</a>(又名区域文件)是列出存储企业网站或电子邮件账户的特定服务器的IP地址的指令。一些最常见的DNS记录类型包括:</p><ul class=""><li id="045c" class="mt mu iq jw b jx jy kb kc kf mv kj mw kn mx kr my mz na nb bi translated"><a class="ae mc" href="https://www.cloudflare.com/learning/dns/dns-records/dns-a-record/" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> A记录</strong> </a>:保存某个域的IPv4地址。</li><li id="c150" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated"><a class="ae mc" href="https://www.cloudflare.com/learning/dns/dns-records/dns-aaaa-record/" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> AAAA记录</strong> </a>:包含某个域的IPv6地址。</li><li id="a8bd" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated"><a class="ae mc" href="https://www.cloudflare.com/learning/dns/dns-records/dns-cname-record/" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> CNAME记录</strong> </a> : <strong class="jw ir"> </strong>将一个域或子域转发到另一个域，不提供IP地址。</li><li id="4f25" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated"><a class="ae mc" href="https://www.cloudflare.com/learning/dns/dns-records/dns-mx-record/" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> MX记录</strong> </a> : <strong class="jw ir"> </strong>将邮件定向到邮件服务器。</li><li id="6711" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated"><a class="ae mc" href="https://www.cloudflare.com/learning/dns/dns-records/dns-txt-record/" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> TXT记录</strong> </a> : <strong class="jw ir"> </strong>让管理员在记录中存储文本笔记。这些记录通常用于电子邮件安全。</li><li id="b150" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated"><a class="ae mc" href="https://www.cloudflare.com/learning/dns/dns-records/dns-ns-record/" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> NS记录</strong> </a> : <strong class="jw ir"> </strong>存储DNS条目的名称服务器。</li><li id="1e6d" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated"><a class="ae mc" href="https://www.cloudflare.com/learning/dns/dns-records/dns-soa-record/" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> SOA记录</strong> </a> : <strong class="jw ir"> </strong>存储一个域的管理信息。</li><li id="e8df" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated"><a class="ae mc" href="https://www.cloudflare.com/learning/dns/dns-records/dns-srv-record/" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> SRV记录</strong> </a>:指定特定服务的端口。</li><li id="bd4b" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated"><a class="ae mc" href="https://www.cloudflare.com/learning/dns/dns-records/dns-ptr-record/" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> PTR记录</strong> </a>:提供反向查找中的域名。</li></ul></div><div class="ab cl ks kt hu ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ij ik il im in"><h1 id="525a" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">DNS查找是如何工作的？</h1><p id="e8b8" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">在执行<a class="ae mc" href="https://www.cloudflare.com/learning/dns/what-is-dns/" rel="noopener ugc nofollow" target="_blank"> DNS查找</a>时，会采取一系列步骤:</p><ol class=""><li id="2885" class="mt mu iq jw b jx jy kb kc kf mv kj mw kn mx kr nt mz na nb bi translated">用户在网络浏览器中键入“【example.com】T2，查询进入互联网并被<strong class="jw ir"> DNS递归解析器</strong>接收。</li><li id="73f0" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr nt mz na nb bi translated">解析器然后查询一个<strong class="jw ir"> DNS根域名服务器</strong>(。).</li><li id="40bc" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr nt mz na nb bi translated">然后根服务器用一个<strong class="jw ir">顶级域名(TLD) DNS服务器</strong>的地址(比如。com或者。net)，它存储其域的信息。在寻找example.com的时候，我们的要求是指向。com TLD。</li><li id="04d4" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr nt mz na nb bi translated">然后，解析程序向。com TLD。</li><li id="bfa0" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr nt mz na nb bi translated">然后，example.com的TLD服务器用域名服务器的IP地址做出响应。</li><li id="eedf" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr nt mz na nb bi translated">最后，递归解析器向域名服务器发送一个查询。</li><li id="efd1" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr nt mz na nb bi translated">然后，example.com的IP地址从名称服务器返回给解析器。</li><li id="8585" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr nt mz na nb bi translated">然后，DNS解析器用最初请求的域的IP地址来响应web浏览器。</li><li id="f3d4" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr nt mz na nb bi translated">浏览器向IP地址发出一个<a class="ae mc" href="https://www.cloudflare.com/learning/ddos/glossary/hypertext-transfer-protocol-http/" rel="noopener ugc nofollow" target="_blank"> HTTP </a>请求。</li><li id="7403" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr nt mz na nb bi translated">该IP的服务器返回要在浏览器中呈现的网页。</li></ol><p id="6fa9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">下图说明了这些步骤。</p><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gh gi nz"><img src="../Images/d4df0f5e42e726d347a78be330244f80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9Ccc_NXvctSjULoR.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated"><a class="ae mc" href="https://www.cloudflare.com/learning/dns/what-is-dns/" rel="noopener ugc nofollow" target="_blank"> DNS查找和网页查询。</a></figcaption></figure></div><div class="ab cl ks kt hu ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ij ik il im in"><h1 id="9a30" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">为什么在AD环境中使用DNS？</h1><p id="12ee" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">在我以前的一篇题为“<a class="ae mc" rel="noopener ugc nofollow" target="_blank" href="/active-directory-overview-98692e1b0233"> <em class="mg">活动目录概述</em> </a>”的文章中，我提到活动目录域服务(AD DS)在安装时需要DNS服务器角色。根据微软的说法，AD DS使用DNS名称解析服务来使客户端定位域控制器和托管目录服务的域控制器相互通信成为可能。</p><p id="4b00" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">当执行任何主要AD操作(如身份验证、更新或搜索)时，计算机使用DNS来定位AD域控制器。此外，域控制器使用DNS相互定位。</p><p id="2f15" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">对于<a class="ae mc" href="https://docs.microsoft.com/en-us/windows-server/networking/dns/dns-top" rel="noopener ugc nofollow" target="_blank">示例</a>，当具有AD用户帐户的网络用户登录到AD域时，DNS客户端服务查询DNS服务器以定位AD域的域控制器。当DNS服务器响应查询并向客户端提供域控制器的IP地址时，客户端会联系域控制器，身份验证过程可以开始。</p></div><div class="ab cl ks kt hu ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ij ik il im in"><h1 id="1ca8" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">DNS动手实验</h1><p id="7aeb" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">为了演示AD中的DNS如何被枚举和潜在利用，我将使用名为“<strong class="jw ir"><em class="mg">【ra2】</em></strong>的TryHackMe房间作为示例。你可以在这里找到完整的<a class="ae mc" rel="noopener ugc nofollow" target="_blank" href="/thm-writeup-ra-2-ed3de7c719a8">文章</a>。使用NMAP，我找到域名"<strong class="jw ir"> <em class="mg"> windcorp.thm" </em> </strong>，看到<strong class="jw ir"> <em class="mg"> </em> </strong>端口53是打开的(即DNS):</p><pre class="ml mm mn mo gt oa ob oc od aw oe bi"><span id="75cc" class="nh la iq ob b gy of og l oh oi">PORT      STATE SERVICE             VERSION<br/>53/tcp    open  domain?<br/>| fingerprint-strings: <br/>|   DNSVersionBindReqTCP: <br/>|     version<br/>|_    bind</span></pre><p id="fc42" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我可以通过使用“<strong class="jw ir"> <em class="mg"> dig </em> </strong>”命令来执行DNS枚举以获取任何有用的信息。</p><pre class="ml mm mn mo gt oa ob oc od aw oe bi"><span id="de77" class="nh la iq ob b gy of og l oh oi"># Request any information<br/><strong class="ob ir">dig any @10.10.151.112 windcorp.thm</strong></span><span id="4dce" class="nh la iq ob b gy oj og l oh oi">;; ANSWER SECTION:<br/>windcorp.thm.           600     IN      A       10.10.151.112<br/>windcorp.thm.           600     IN      A       10.10.61.88<br/>windcorp.thm.           3600    IN      NS      fire.windcorp.thm.<br/>windcorp.thm.           3600    IN      SOA     fire.windcorp.thm. hostmaster.windcorp.thm. 291 900 600 86400 3600<br/>windcorp.thm.           86400   IN      TXT     "THM{....}"</span><span id="bf54" class="nh la iq ob b gy oj og l oh oi">;; ADDITIONAL SECTION:<br/>fire.windcorp.thm.      3600    IN      A       10.10.151.112<br/>fire.windcorp.thm.      3600    IN      A       192.168.112.1</span></pre><p id="77cd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">查看输出，我可以看到:</p><ul class=""><li id="4134" class="mt mu iq jw b jx jy kb kc kf mv kj mw kn mx kr my mz na nb bi translated"><strong class="jw ir">甲记载</strong>为域。</li><li id="cada" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated"><strong class="jw ir">DNS条目的名称服务器的NS记录</strong>。</li><li id="9522" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated"><strong class="jw ir"> SOA记录</strong>，其中<strong class="jw ir"> </strong>存储了一个域的管理信息。</li><li id="cadb" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated"><strong class="jw ir">TXT</strong>T30】记录其中包含管理文本注释。</li></ul><h2 id="f079" class="nh la iq bd lb ni nj dn lf nk nl dp lj kf nm nn ln kj no np lr kn nq nr lv ns bi translated">不安全的DNS更新</h2><p id="b9ea" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">对于这种挑战，可以进行不安全的DNS更新。我可以通过使用<a class="ae mc" href="https://linux.die.net/man/8/nsupdate" rel="noopener ugc nofollow" target="_blank"><strong class="jw ir">n update</strong></a>尝试添加一个TXT记录来测试这一点。</p><pre class="ml mm mn mo gt oa ob oc od aw oe bi"><span id="b79f" class="nh la iq ob b gy of og l oh oi">$ nsupdate&gt; server 10.10.172.217<br/>&gt; update add test.windcorp.thm 5 TXT "This is a Test for Insecure DNS Update"<br/>&gt; send</span></pre><p id="a666" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">接下来，我可以使用<strong class="jw ir"> nslookup </strong>来确认TXT记录已经被添加。</p><pre class="ml mm mn mo gt oa ob oc od aw oe bi"><span id="2a5e" class="nh la iq ob b gy of og l oh oi">&gt; server 10.10.172.217<br/>Default server: 10.10.172.217<br/>Address: 10.10.172.217#53<br/>&gt; set type=txt<br/>&gt; test.windcorp.thm</span></pre><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gh gi ok"><img src="../Images/ccac52e51152a5d17b536e2a02c015d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VLIeMv1JQ9D-kBEC.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">添加了DNS TXT记录。</figcaption></figure><p id="9b54" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我看到TXT记录已经成功添加了！从这里，您可以利用此漏洞进行攻击，如DNS缓存中毒或执行进一步的枚举。</p></div><div class="ab cl ks kt hu ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ij ik il im in"><h1 id="7694" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">结束语</h1><p id="bfee" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">希望这篇关于DNS的短文有助于提供它是什么以及它如何工作的基本概述。DNS是一个庞大的话题，值得了解更多。谢谢你看完，继续黑！😄</p></div></div>    
</body>
</html>