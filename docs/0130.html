<html>
<head>
<title>Latex to RCE, Private Bug Bounty Program</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">乳胶到RCE，私人昆虫赏金计划</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/latex-to-rce-private-bug-bounty-program-6a0b5b33d26a?source=collection_archive---------0-----------------------#2018-07-06">https://infosecwriteups.com/latex-to-rce-private-bug-bounty-program-6a0b5b33d26a?source=collection_archive---------0-----------------------#2018-07-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="863c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">大约一年前，我参加了一个私人的bug赏金项目，我想把我学到的东西发表出来。CMS是一个为作者、编辑等提供服务的期刊网站。我完成了获得编辑帐户的XSS，我不打算通过这个故事。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi kl"><img src="../Images/326f762968dd16086538a20b3b64ca0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*6iiBYwAkWTPHEdtyXjI8pw.png"/></div></figure><p id="c55d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在编辑的角色中，有许多选项，有趣的是“XML检查器”和“将LaTex代码转换为PDF”。第一个与我们的话题无关，第二个似乎很有趣。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi kt"><img src="../Images/f70ac3faa43c213e3214cacd70f92185.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xe5hlFHVMUQrMdHrnVA1fw.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">将LaTex代码转换为PDF</figcaption></figure><p id="2195" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于LaTex代码转换，远程攻击者可以远程执行命令，以下链接可能会有所帮助:</p><ol class=""><li id="eb23" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated"><a class="ae ll" href="https://tex.stackexchange.com/questions/262625/security-latex-injection-hack" rel="noopener ugc nofollow" target="_blank">https://tex . stack exchange . com/questions/262625/security-latex-injection-hack</a></li><li id="1afc" class="lc ld iq jp b jq lm ju ln jy lo kc lp kg lq kk lh li lj lk bi translated"><a class="ae ll" href="https://0day.work/hacking-with-latex/" rel="noopener ugc nofollow" target="_blank">https://0day.work/hacking-with-latex/</a></li><li id="983e" class="lc ld iq jp b jq lm ju ln jy lo kc lp kg lq kk lh li lj lk bi translated"><a class="ae ll" href="http://scumjr.github.io/2016/11/28/pwning-coworkers-thanks-to-latex/" rel="noopener ugc nofollow" target="_blank">http://scum Jr . github . io/2016/11/28/pwning-collaborates-thanks-to-latex/</a></li></ol><p id="a45e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，我精心制作了如下所示的漏洞利用代码，以读取服务器中的本地文件:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lr"><img src="../Images/93de1afee00d96b0701044d66d382774.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*GnWaNYJmFb4RXZFh0uJz8A.png"/></div></div></figure><p id="4570" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">导致了:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ls"><img src="../Images/b0fe91df37ac78f2bb3671a5453f0e83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B5qzd8gc_9fIvAwXSo7njw.jpeg"/></div></div></figure><p id="c395" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">答对了，我要了<code class="fe lt lu lv lw b">/etc/passwd</code>内容。命令执行的有效负载:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/dc8002cf314aade7c614bb55f1e2fc56.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*NwxyC_SuaVxtF8Hx_HUpyQ.png"/></div></figure><p id="634b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">导致了:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ly"><img src="../Images/d45266aeda5e9dba3b782e32c3ac5c08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j7PfMe0nQWqUgK5HOeeOGg.jpeg"/></div></div></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="f6cf" class="mg mh iq bd mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd bi translated">带外技术</h1><p id="a9fb" class="pw-post-body-paragraph jn jo iq jp b jq ne js jt ju nf jw jx jy ng ka kb kc nh ke kf kg ni ki kj kk ij bi translated">PDF转换很烦人，我想升级我的特权，所以我通过</p><ol class=""><li id="3743" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">编写利用漏洞的代码(LaTex到PDF)</li><li id="e0a7" class="lc ld iq jp b jq lm ju ln jy lo kc lp kg lq kk lh li lj lk bi translated">用python写一个服务器，接收结果，转换成明文，保存。</li></ol><p id="e766" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">流程如下所示:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nj"><img src="../Images/9fc2474fab59aa99a6fd17dbd635470a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hmTFx8p7dxMr9aHdU6lEpA.jpeg"/></div></div></figure><p id="9a36" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nk"><img src="../Images/11fb381910db4d0adb5e6c7f107dc8a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rijP811rP6Vw2nI2R4cJlA.jpeg"/></div></div></figure><p id="1876" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">后来，我适应了这个利用，寻找服务器，我得到了数据库和弹性搜索由SSRF和乐趣。</p></div></div>    
</body>
</html>