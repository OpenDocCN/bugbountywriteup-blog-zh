<html>
<head>
<title>CSRF for Begginers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">乞丐的CSRF</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/csrf-for-begginers-673d00efa770?source=collection_archive---------1-----------------------#2021-10-17">https://infosecwriteups.com/csrf-for-begginers-673d00efa770?source=collection_archive---------1-----------------------#2021-10-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0bb4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">CSRF(跨站点请求伪造)是一种web应用程序技术，攻击者诱使用户点击恶意链接，在受害者无意的情况下执行恶意操作，如更改密码、更改电子邮件、转账，甚至接管帐户</p><p id="2e19" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">CSRF的类型:-</p><p id="53f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> CSRF带着获取请求:- </strong></p><ul class=""><li id="fbbc" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">在GET请求期间，我们必须发送一个附加到路径的请求</li><li id="0c76" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">例如，在银行网站中，要将资金从受害者帐户转移到攻击者帐户，下面提供的链接将转移到受害者帐户</li></ul><p id="fcdc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kz la lb lc b">https://vulnbank.com/transfer?from=victim&amp;to=attacker&amp;amount=5000</code></p><p id="1663" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是攻击者不能将请求直接发送到目标网站，因为服务器需要会话cookies进行身份验证。所以他通过使用img标签来实现这一点，并且链接保存在src属性中</p><blockquote class="ld le lf"><p id="04fe" class="jn jo lg jp b jq jr js jt ju jv jw jx lh jz ka kb li kd ke kf lj kh ki kj kk ij bi translated">【https://vulnbank.com/transfer?from=victim】T4&amp;to =攻击者&amp; amount=5000  / &gt;</p></blockquote><p id="9552" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并将此链接发送给受害者，受害者将从浏览器获取会话令牌，并将请求发送给成功通过身份验证的浏览器，然后将金额发送给攻击者</p><ul class=""><li id="8b57" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">为了避免这个漏洞，开发人员不应该使用HTTP GET请求来执行任何后端数据修改请求，比如转账。但是任何只读请求都应该是安全的。许多用于构建网站的常见web框架，如Ruby on Rails、Django等，都希望开发人员遵循这一原则，因此他们会自动为POST请求而不是GET请求添加CSRF保护</li></ul><p id="0bc8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> CSRF跟帖请求:- </strong></p><ul class=""><li id="0b04" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">通过“img”标签发送post请求是不可能的，所以我们可以创建一个简单的隐藏html表单，它可以发送给受害者<br/> HTML表单</li></ul><blockquote class="ld le lf"><p id="f2c3" class="jn jo lg jp b jq jr js jt ju jv jw jx lh jz ka kb li kd ke kf lj kh ki kj kk ij bi translated"><form method="’POST’" action="’&lt;a" class="ae lk" href="http://vulnweb.com/transfer'" rel="noopener ugc nofollow" target="_blank">http://vulnweb.com/transfer'id = ' csrf-form '&gt;<br/>&lt;输入类型= ' hidden ' name = ' form ' value = ' vici TM '/&gt;<br/>&lt;输入类型= ' hidden ' name = ' value = ' attack '/&gt;<br/>&lt;输入类型= ' hidden ' name = ' amount ' value = ' 500 '/&gt;<br/>&lt;输入类型= ' submit ' value = ' submit '&gt;<br/>提交()&lt;/脚本&gt;</form></p></blockquote><ul class=""><li id="15e7" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">所以有一个HTML表单，其中action表示目标网站，id是表单的标识符</li><li id="2c58" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">然后，3个隐藏的输入字段不会显示在浏览器上</li><li id="0c8d" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">最后，脚本标签允许表单执行，并将请求发送到<code class="fe kz la lb lc b">action</code>参数中提到的目标网站</li><li id="8e94" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">因此，该表单被安装在攻击者的网站上，攻击者将其网站的链接发送给受害者，受害者将使用会话cookies触发对服务器的请求，并执行资金转账。</li></ul><p id="3c8e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">防御CSRF的攻击:- </strong></p><ul class=""><li id="3d8f" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">我们可以通过使用附加在参数上的令牌来缓解CSRF get/post攻击</li></ul><p id="4469" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">这怎么能减轻CSRF的攻击</strong></p><ul class=""><li id="327f" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">当攻击者创建一个HTML表单并发送给浏览器时，服务器希望该请求附带一个有效的令牌。除非攻击者可以在令牌中找到模式，否则他们可以生成令牌并将其发送给受害者。</li></ul></div><div class="ab cl ll lm hu ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ij ik il im in"><p id="9060" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢阅读，祝你有美好的一天；)</p></div></div>    
</body>
</html>