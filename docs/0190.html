<html>
<head>
<title>Stored XSS in Bug Bounty</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将XSS储存在昆虫赏金中</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/stored-xss-in-bug-bounty-13c08e6f5636?source=collection_archive---------0-----------------------#2018-11-01">https://infosecwriteups.com/stored-xss-in-bug-bounty-13c08e6f5636?source=collection_archive---------0-----------------------#2018-11-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><h1 id="34d7" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">序</h1><p id="3f2f" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">所以我不久前开始参与臭虫奖励计划，很快我发现至少有两个地方容易受到储存XSS的攻击(我相信相当大？他们有许多用户，并有一些大银行和公司作为他们的合作伙伴。)网站，帮助用户准备面试。</p><h1 id="93ca" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">摘要</h1><p id="f111" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">网站的仪表板显示用户提交的会议提议。XSS有效负载可以添加到会议提议中，并在访问仪表板(OMG)的任何用户的浏览器上触发XSS。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lj"><img src="../Images/b47eb7a004beeda5649f0d7e2fed09c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*a8Fe9RU2a1GKRAOR"/></div></div></figure><p id="c9e0" class="pw-post-body-paragraph kl km iq kn b ko lv kq kr ks lw ku kv kw lx ky kz la ly lc ld le lz lg lh li ij bi translated">当登录用户访问特定用户(在这种情况下，我的测试帐户)的配置文件时，XSS触发。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lj"><img src="../Images/484190fafae21291de62248c576b5bd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pa88rnAZ3FnfmX5O"/></div></div></figure><h1 id="e073" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">我是怎么发现的</h1><p id="8b88" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在我发现这个网站正在运行一个bug bounty程序后，首先我寻找任何反映XSS的入口点，比如网站上的搜索功能和显示的错误信息。我运气不好😦。但有时不幸是塞翁失马焉知非福。</p><p id="38c8" class="pw-post-body-paragraph kl km iq kn b ko lv kq kr ks lw ku kv kw lx ky kz la ly lc ld le lz lg lh li ij bi translated">作为一个客人，我挖了一段时间后，决定注册一个帐户来测试其他功能。很快我发现我可以在仪表板上留下一些东西:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lj"><img src="../Images/ecf692baea08dde35a035900a1be8dac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7KNBmMQ2nw36ampP"/></div></div></figure><p id="7d48" class="pw-post-body-paragraph kl km iq kn b ko lv kq kr ks lw ku kv kw lx ky kz la ly lc ld le lz lg lh li ij bi translated">用户可以添加会议提案，每个提案都会显示在仪表板上(有一段时间，这让我想起了过去一些论坛上的“欢迎新成员”功能！).嗯……这意味着我们可以在仪表板上留下一些文本，比如提案内容？测试的好地方。</p><p id="f908" class="pw-post-body-paragraph kl km iq kn b ko lv kq kr ks lw ku kv kw lx ky kz la ly lc ld le lz lg lh li ij bi translated">我发现用户可以为他/她的会议提议添加评论。让我们看看这个简单的脚本是否可行:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lj"><img src="../Images/51a85ecdb7d7a61273be76d02bf2b1e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IL8zhBF-2vkQCQgm"/></div></div></figure><p id="8af2" class="pw-post-body-paragraph kl km iq kn b ko lv kq kr ks lw ku kv kw lx ky kz la ly lc ld le lz lg lh li ij bi translated">原来是有效的！评论被插入到HTML中，没有经过任何过滤，所以现在每当我们访问仪表板(也是网站的主页——如果你登录的话)时，它都保持警告“1”</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lj"><img src="../Images/85d0a0a525bd435bc605760e0833226b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cpwQ72hQiT2W4gCj"/></div></div></figure><p id="84ef" class="pw-post-body-paragraph kl km iq kn b ko lv kq kr ks lw ku kv kw lx ky kz la ly lc ld le lz lg lh li ij bi translated">我决定探索更多。必须有更多的地方显示用户输入而不过滤。所以我访问了个人资料编辑功能，发现了一个叫做headline的东西(“测试”就在用户名“pk”下面)</p><p id="63fe" class="pw-post-body-paragraph kl km iq kn b ko lv kq kr ks lw ku kv kw lx ky kz la ly lc ld le lz lg lh li ij bi translated">嗯…..这意味着我可以向每个访问我的个人资料的用户显示定制的文本。如果我在这里插入javascript会怎样？</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lj"><img src="../Images/98b497051a39d2c856e6790a3519a14c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*inBjH2dB611lbLIJ"/></div></div></figure><p id="738f" class="pw-post-body-paragraph kl km iq kn b ko lv kq kr ks lw ku kv kw lx ky kz la ly lc ld le lz lg lh li ij bi translated">同样，网站没有过滤用户输入并直接插入HTML。所以我们得到了另一个储存的XSS:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lj"><img src="../Images/768e5b93d07a9cc6e683b0a0aa568ed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WVc2zNkg_-5K71aP"/></div></div></figure><p id="e5e7" class="pw-post-body-paragraph kl km iq kn b ko lv kq kr ks lw ku kv kw lx ky kz la ly lc ld le lz lg lh li ij bi translated">就是这样。肯定有更多的地方容易受到XSS的攻击。我会继续追踪它。</p></div></div>    
</body>
</html>