<html>
<head>
<title>Recovering a lost phone number using the hacker mindset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用黑客思维找回丢失的电话号码</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/recovering-a-lost-phone-number-using-hacker-mindset-5e7e7a30edbd?source=collection_archive---------1-----------------------#2020-09-12">https://infosecwriteups.com/recovering-a-lost-phone-number-using-hacker-mindset-5e7e7a30edbd?source=collection_archive---------1-----------------------#2020-09-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="499c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最近，由于擦除我的Android设备的数据分区，我意外地丢失了一个重要的电话号码(由于操作系统升级从官方但不支持的LineageOS分支迁移到<a class="ae kl" href="https://twitter.com/an0n_r0/status/1300002966951333888/retweets/with_comments" rel="noopener ugc nofollow" target="_blank">我的非官方但最新支持的LineageOS版本</a>)。所有的数据都被备份了，但不幸的是，这个电话号码没有备份，它很重要。所以我必须想办法找回它。</p><p id="063c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为被擦除的数据分区是加密的，并且加密密钥丢失了，所以对被擦除的分区的任何取证工作将会非常困难或者几乎不可能。</p><p id="3ce4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还能在哪里找到那个号码？从移动网络运营商那里获取信息似乎是显而易见的，因为他们肯定会记录所有信息。幸运的是，我的订阅资料中启用了(免费的)“电子通话详细信息”服务，因此我有机会轻松地在线获取历史通话的详细信息，访问我的历史发票。</p><p id="83fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">经过短暂的思考，我能够估计出一个狭窄的时间框架，当我开始打电话给我失去的联系。我在我的在线发票中检查了我打出电话的时间范围，过滤掉了已知的号码，只剩下一个，这几乎可以肯定是我正在寻找的那个丢失的号码。</p><p id="8198" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，还有一个小问题:由于隐私原因，网络运营商掩盖了通话记录中号码的最后两位数，因此丢失的电话号码看起来像3012345**，其中**仍然未知。</p><p id="45be" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我试着直接向运营商询问电话号码，但他们拒绝提供。(他们撒谎说自己都不知道，明显是什么伪隐私扯淡。:) )</p><p id="8e32" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">另一种(黑客风格的)选择是暴力破解。我们只有100个号码可以尝试，所以这应该可以。但也可以明智地这样做，例如不拨打无效或外来号码。我们的计划是一些开源智能(OSINT)，试图使用流行的消息应用程序或云服务(如谷歌、Whatsapp、Viber)的内部数据库。</p><p id="1868" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在实践中，我们应该将100个候选电话号码上传到Android电话簿，安装并注册到Whatsapp、Viber等。让我们看一下已经同步了哪些数据。例如，谷歌有号码的联系人姓名，Viber甚至为没有姓名的纯号码提供个人资料图片，所以如果我们幸运的话，我们可以获得足够的信息来识别失去的联系人。</p><p id="ca8b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了完成调查，我们需要一部安卓手机、一个谷歌账户和一个注册messenger应用程序的电话号码(实际上是一张SIM卡)。</p><p id="77de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为我不想把这个开源情报项目和我真实的个人资料混在一起，所以我使用了一个专用的假身份。我使用了一个Android模拟器而不是一个真实的设备，使用了一个专用的谷歌帐户和一个专用的电话号码(带有一个新的预付费SIM卡)。出于几个原因，强烈建议对这类项目使用专用账户。例如，如果消息应用程序检测到恶意使用，它可能会阻止您的身份，这是应该避免的。</p><p id="7125" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">得到一张SIM卡从来都不困难，我很简单<a class="ae kl" href="https://shop.vodafone.hu/probald-ki" rel="noopener ugc nofollow" target="_blank">就免费得到了一张</a>。我已经在我的一个+10岁的旧手机上激活了它。我需要的唯一服务是接收注册确认短信。</p><p id="6884" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我的<a class="ae kl" href="https://www.archlinux.org/" rel="noopener ugc nofollow" target="_blank"> Arch Linux </a>操作系统上运行Android模拟器是有据可查的，我的首选方式是使用在<a class="ae kl" href="https://aur.archlinux.org/" rel="noopener ugc nofollow" target="_blank"> AUR </a>中可用的<a class="ae kl" href="https://aur.archlinux.org/packages/android-sdk-cmdline-tools-latest/" rel="noopener ugc nofollow" target="_blank"> Android SDK cmdline工具</a>。</p><p id="5c38" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">安装命令行工具:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="3a21" class="kv kw iq kr b gy kx ky l kz la">$ git clone <a class="ae kl" href="https://aur.archlinux.org/android-sdk-cmdline-tools-latest.git" rel="noopener ugc nofollow" target="_blank">https://aur.archlinux.org/android-sdk-cmdline-tools-latest.git</a><br/>$ cd android-sdk-cmdline-tools-latest<br/>$ makepkg -s<br/>$ sudo pacman -U android-sdk-cmdline-tools-latest-2.1-1-x86_64.pkg.tar.zst</span></pre><p id="ccc8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">抓取最近的Android系统映像并创建一个Android虚拟设备:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="eeaa" class="kv kw iq kr b gy kx ky l kz la">$ sudo /opt/android-sdk/cmdline-tools/latest/bin/sdkmanager 'system-images;android-30;google_apis_playstore;x86_64'<br/>$ /opt/android-sdk/cmdline-tools/latest/bin/avdmanager create avd -n osint -d 10 -k 'system-images;android-30;google_apis_playstore;x86_64'</span></pre><p id="f536" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了方便，我一般会通过在<code class="fe lb lc ld kr b">~/.android/avd/osint.avd/config.ini</code>中添加<code class="fe lb lc ld kr b">hw.keyboard=yes </code>来增加硬件键盘支持。</p><p id="16a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在可以通过以下命令启动模拟器:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="ca85" class="kv kw iq kr b gy kx ky l kz la">$ ANDROID_SDK_ROOT=/opt/android-sdk /opt/android-sdk/emulator/emulator @osint</span></pre><p id="74b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">同时，我在我的桌面上注册了一个专用的谷歌账户(上面有我的专用电话号码)。这有利于Android个人资料，也有利于同步和上传100个候选电话号码到Android设备。</p><p id="6087" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们创建100个候选电话号码(作为一个适合在Google Contacts中导入的CSV):</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="133a" class="kv kw iq kr b gy kx ky l kz la">$ ( echo "Phone" ; for i in `seq 0 9`; do for j in `seq 0 9`; do echo "+363012345$i$j" ; done ; done ) &gt; phone.csv</span></pre><p id="9438" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在将创建好的<code class="fe lb lc ld kr b">phone.csv</code>导入到<a class="ae kl" href="https://contacts.google.com" rel="noopener ugc nofollow" target="_blank">contacts.google.com</a>:</p><figure class="km kn ko kp gt lf gh gi paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gh gi le"><img src="../Images/2044425a62f7c965bde2278a7813ee90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lTK0pUSbPidLz9oQDOWuOg.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk translated">将电话号码(从phone.csv)导入Google联系人</figcaption></figure><p id="4b97" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有几个号码已经确定了，但不幸的是，我要找的那个号码还没有确定:</p><figure class="km kn ko kp gt lf gh gi paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gh gi lq"><img src="../Images/2d0b4750e84ff4a161458fad4c6f1c4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TfAbL_Oa-pgDEjazIwbWBA.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk translated">谷歌联系人识别一些导入的电话号码</figcaption></figure><p id="9add" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们试试Android消息应用程序。同步后，导入的电话号码会出现在Android phonebook中(使用相同的Google帐户):</p><figure class="km kn ko kp gt lf gh gi paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gh gi lr"><img src="../Images/555f9f8f6d0eb6fe50a7bbedfdc59865.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PNl2zA1CGTUCdfphAPtNEQ.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk translated">Android模拟器中的同步电话簿</figcaption></figure><p id="5f4e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从Google Play安装Viber并注册一个电话号码(使用我的旧dump手机中的SIM卡)后，电话簿中的联系人(电话号码)会同步。</p><p id="9fa9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">同步后，将电话号码与Viber帐户匹配的个人资料图片就可用了:</p><figure class="km kn ko kp gt lf gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/d461330e1d7177d221c625d42de86b41.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*kLy8rN2tJjJoOOWwXPQ01A.png"/></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk translated">Android上的Viber显示电话簿中找到的电话号码的个人资料图片</figcaption></figure><p id="88db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">幸运的是，其中一张个人资料图片匹配，我认出了我丢失的联系人，所以我找到了丢失的电话号码。；)</p><figure class="km kn ko kp gt lf gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/d437f403e6198cb5fecd69e8395ae53e.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*3-Hd2CPE5e9IzbqqEvsq7Q.png"/></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk translated">最后，失去联系的人被找到了</figcaption></figure><p id="ec52" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意，使用Android联系人应用程序是一种众所周知的获取电话号码信息的OSINT技术。下面是来自<a class="ae kl" href="https://www.bellingcat.com/" rel="noopener ugc nofollow" target="_blank"> Bellingcat </a>的<a class="ae kl" href="https://twitter.com/arictoler" rel="noopener ugc nofollow" target="_blank">王高托勒</a>的一篇供参考和进一步阅读。</p></div></div>    
</body>
</html>