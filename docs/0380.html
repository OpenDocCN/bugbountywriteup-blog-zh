<html>
<head>
<title>Pentesting an IOT based Biometric Attendance device</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">测试基于IOT的生物识别考勤设备</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/pentesting-an-iot-based-biometric-attendance-device-10c0efd69392?source=collection_archive---------0-----------------------#2019-09-22">https://infosecwriteups.com/pentesting-an-iot-based-biometric-attendance-device-10c0efd69392?source=collection_archive---------0-----------------------#2019-09-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9f1e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在红队的一次活动中，我有机会测试一种生物识别考勤设备，这种设备通常被客户用来标记出勤情况和限制进入特定房间。</p><blockquote class="kl km kn"><p id="a064" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated">我在这里没有弹出任何零天，但事实上，该设备配置很差，它允许我在上面获得root访问权限。</p></blockquote><p id="2926" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是我测试的设备的快照。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ks"><img src="../Images/c7c3c0f702e3a83ccd269d82371c0e70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1tMaF90jB33TBu-SWoKn4w.jpeg"/></div></div></figure><p id="1090" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从评估开始，我发现设备连接到网络，并且我能够从设备的网络设置中获取其IP地址。</p><p id="bd62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我对设备的IP地址进行了端口扫描，发现远程主机上运行着<strong class="jp ir"> telnet </strong>和<strong class="jp ir"> web服务器</strong>。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi le"><img src="../Images/7d2ae4c70a9c91899df0b72214ebc946.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AYCR4ivQERINfHgsVtlP3g.jpeg"/></div></div></figure><p id="7a66" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里唯一的攻击面是损害目标上运行的<strong class="jp ir"> Telnet </strong>或<strong class="jp ir">web服务器</strong>。此外，我无法对Telnet版本进行指纹识别。此外，还试图使用默认凭证来强制telnet服务，但没有成功。然后，我继续沿着<strong class="jp ir"> Webserver </strong>路径前进。</p><p id="d6a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">目标在端口80上运行ZK Web服务器3.0</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lf"><img src="../Images/285f8e985fe00ff8422bb5cea99d979d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*57hU88-373NEgj3GidzFpA.jpeg"/></div></div></figure><p id="8004" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">用户手册<a class="ae lg" href="http://www.nod-finger.com/Download/web%20server%203.0_en.pdf" rel="noopener ugc nofollow" target="_blank">对我更好地理解ZK网络服务器3.0的工作是一个很好的指导。</a></p><p id="1164" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我很快发现Web服务器充满了漏洞，例如<strong class="jp ir">访问控制问题</strong>、<strong class="jp ir">会话固定</strong>和<strong class="jp ir">暴力攻击</strong>等等。</p><p id="f8a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">尽管如此，我还是能够使用默认凭证进入管理面板:<strong class="jp ir">管理员:123456 </strong></p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lh"><img src="../Images/0a241eaeee38c8ed4f4c46c8ec36cb3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4A8vk-i2cY6_taV0Vw1hPg.jpeg"/></div></div></figure><p id="c6f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我进一步导航到备份设备数据部分，这允许我下载系统和用户数据。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi li"><img src="../Images/41b8ae8692ee42259e04521f4982a448.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HLgqtqvVXYMXk41iCb3MGQ.jpeg"/></div></div></figure><p id="be9a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最糟糕的部分来了:</p><blockquote class="kl km kn"><p id="929f" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated">由于访问控制不当，您可以通过导航到URL来访问备份数据，而无需进行身份验证。</p></blockquote><p id="f37d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">备份系统数据下载一个<strong class="jp ir">。dat </strong>文件。<strong class="jp ir"> dat </strong>文件包含<strong class="jp ir"> ZKConfig.cfg </strong>文件，其中硬编码了Telnet凭证。:D</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lj"><img src="../Images/a7e5366f667bacdf03f656a03026c576.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TqwGZ8Y5Mc7fLOOkLAY_5g.jpeg"/></div></div></figure><p id="82db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我能够使用获得的凭证以<strong class="jp ir"> root </strong>身份登录<strong class="jp ir"> telnet </strong>。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lk"><img src="../Images/e6125ccab2cb136d928c513a17618f36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZYKt2POPHGtm5DZ9F1IuZQ.jpeg"/></div></div></figure><p id="4744" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在本地机器上挂载了整个文件系统，并分析了所有文件。文件系统包含web服务器的源代码，然后可以对其进行分析，以寻找web服务中的进一步漏洞。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ll"><img src="../Images/c2a11e5e7170f16a21834f39982cad22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E--pfq3l9Vv-nU5julRtuw.png"/></div></div></figure><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lm"><img src="../Images/6e152d3a5908a2a2a8902b00ca28dddf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NYQhOvdiZbH7RLuR13hf2Q.png"/></div></div></figure><p id="1bc6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">文件系统还包含所有用户数据。以下图片显示的是使用设备的生物特征进入受限房间的人。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ln"><img src="../Images/d0828dfa2dc5b38d21b32fcded8e7ec1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J6Chnz4HBayFRzrwuwfhSw.jpeg"/></div></div></figure><p id="c511" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">文件系统还包含<strong class="jp ir"> SQLite数据库</strong>，其中包含用户信息，包括他们的凭证以及<strong class="jp ir">指纹和生物数据</strong>。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lo"><img src="../Images/d40340158a16582ce84febf650b0a045.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wNILQdaSyaprbYduR77rpQ.jpeg"/></div></div></figure><p id="1c55" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">可以通过<strong class="jp ir">修改</strong>和<strong class="jp ir">在SQLite数据库中添加一个条目</strong>来验证和访问受限区域。</p><p id="157e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我使用<a class="ae lg" href="https://github.com/craigz28/firmwalker" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> Firmwalker </strong> </a>来提取我可以从文件系统中检索到的任何更敏感和有用的东西。</p><p id="f6e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，还发现IOT设备使用API将所有数据备份到<strong class="jp ir">云服务器</strong>中。因此，IOT设备可以进一步用于<strong class="jp ir">旋转</strong>并访问备份所有数据的云主机。</p><p id="32e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">继续进行不在我的范围之内，我的评估目标已经完成。</p><h1 id="a135" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">结论:</h1><p id="37e8" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">IOT设备通常被供应商错误配置，并可能为任何人访问敏感数据打开大门。在这种情况下，IOT设备不仅泄露了所有的用户信息，而且给了任何人访问或绕过访问控制机制的机会。</p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><p id="1777" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ko">关注</em> <a class="ae lg" href="https://medium.com/bugbountywriteup" rel="noopener"> <em class="ko"> Infosec报道</em> </a> <em class="ko">获取更多此类精彩报道。</em></p><div class="mz na gp gr nb nc"><a href="https://medium.com/bugbountywriteup" rel="noopener follow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd ir gy z fp nh fr fs ni fu fw ip bi translated">信息安全报道</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">收集了世界上最好的黑客的文章，主题从bug奖金和CTF到vulnhub…</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">medium.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq lc nc"/></div></div></a></div></div></div>    
</body>
</html>