<html>
<head>
<title>TryHackMe: Overpass 2 — Hacked Walkthrough</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TryHackMe:天桥2 —黑客攻略</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/tryhackme-overpass-2-hacked-walkthrough-351daeaeca89?source=collection_archive---------0-----------------------#2020-08-24">https://infosecwriteups.com/tryhackme-overpass-2-hacked-walkthrough-351daeaeca89?source=collection_archive---------0-----------------------#2020-08-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0497" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇文章中，我将提供一个<strong class="jp ir">天桥2-被黑的</strong>房间的漫游，这是一个由<strong class="jp ir"> NinjaJc01 </strong> <em class="kl">创建的TryHackMe平台上的免费房间。</em>我在下面的参考资料中提供了一个TryHackMe平台的链接，供有兴趣尝试这个免费房间的人使用。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/515590578417869232801cb8efd03ae9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/1*v_ahte3Luz0_EWybbh89HA.png"/></div></figure></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="fe23" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">放弃</h1><p id="e866" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">这是一个演练室，而不是你传统的CTF室，但是这篇文章仍然会包含一些剧透。我相信你会更喜欢这个房间，如果你先自己尝试，然后在遇到困难或需要提示时再来看这篇文章！</p></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="d03a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">房间背景—天桥被黑了！</h1><p id="83fd" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">以下是为这个免费房间提供的背景。</p><blockquote class="me mf mg"><p id="43f3" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated">立交桥被黑了！SOC团队(Paradox，祝贺晋升)在查看shibes时注意到一个夜班的可疑活动，并在攻击发生时设法捕获了数据包。</p><p id="a3a9" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated">你能找出攻击者是如何进入的吗？你能黑进天桥公司的生产服务器吗？</p></blockquote></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="441a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">取证—分析PCAP</h1><p id="4201" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">房间首先提供一个PCAP文件，其中包含攻击期间捕获的数据包。通过对捕获的网络数据包进行取证分析，需要回答五个问题。使用Wireshark ，我打开了PCAP文件来分析网络数据包并开始回答问题。</p><pre class="kn ko kp kq gt mk ml mm mn aw mo bi"><span id="7fd0" class="mp lc iq ml b gy mq mr l ms mt">sudo wireshark overpass2.pcapng </span></pre><blockquote class="me mf mg"><p id="d62f" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated"><strong class="jp ir"> 1。他们用来上传反向外壳的页面的URL是什么？</strong></p></blockquote><p id="5e00" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用Wireshark，我右键单击第一个TCP数据包，向下移动到follow选项，然后选择<strong class="jp ir"> TCP流</strong>。这使我能够跟踪TCP协议流，并以应用层的方式查看协议。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/36a719ab6f9286712e3d6d12645c4c3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*q6XcdPQ-SgYTF1zPo_bucA.png"/></div></figure><p id="f60e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">查看流中的第一个TCP包，我可以看到攻击者用来上传他们的反向shell的页面的URL。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/6f237785683f31f1183b7a3ac0002dba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*O9J5xrOPZs--49txUUYFeQ.png"/></div></figure><blockquote class="me mf mg"><p id="b3c8" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated"><strong class="jp ir"> 2。攻击者使用什么有效载荷来获得访问权限？</strong></p></blockquote><p id="ce08" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">查看数据流中的下一个TCP数据包，我可以看到攻击者使用<strong class="jp ir">upload.php</strong>页面上传了一个名为<strong class="jp ir">payload.php</strong>的文件，其中包含他们的反向外壳。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi mw"><img src="../Images/e7e075c4f7598acccd9801019218f8a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G6pJlV2HXv2qHN-FjyzKfw.png"/></div></div></figure><blockquote class="me mf mg"><p id="0fd5" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated"><strong class="jp ir"> 3。攻击者使用了什么密码来访问privesc？</strong></p></blockquote><p id="dfc5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在数据流中发现了另一个TCP数据包，它显示了攻击者在目标机器上获得反向外壳后所做的事情。攻击者首先使用<strong class="jp ir"> id </strong>命令检查他们是什么用户，显示他们是用户<strong class="jp ir"> www-data </strong>。接下来，他们使用python导入<strong class="jp ir"> pty模块</strong>，并生成一个新的、更稳定的shell。然后他们列出上传目录的内容，并查看一个名为<strong class="jp ir">的隐藏文件的内容。天桥</strong>。然后，攻击者使用<strong class="jp ir"> su </strong>命令切换到用户<strong class="jp ir"> james </strong>并输入密码，提升他们在目标机器上的权限。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/ebbbea915a17778bbf3ca5ad4ebe09f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*RLCYsP2QGhnfBX5-T50kCw.png"/></div></figure><blockquote class="me mf mg"><p id="7aab" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated"><strong class="jp ir"> 4。攻击者是如何建立持久性的？</strong></p></blockquote><p id="dd29" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦攻击者提升了他们的权限，他们就转到jame的主目录，并使用<strong class="jp ir"> sudo </strong> <strong class="jp ir"> -l </strong>查看他们可以使用root权限运行哪些命令。我可以看到，基于数据包捕获中的输出，用户<strong class="jp ir"> james </strong>被允许以root用户身份使用sudo运行所有命令。然后，攻击者开始查看存储在<strong class="jp ir"> /etc/shadow </strong>文件中的散列。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/c7b6f8246601a260a79b9489aba6d403.png" data-original-src="https://miro.medium.com/v2/resize:fit:1186/format:webp/1*N4naGoOmY3YrzmnBbITQlw.png"/></div></figure><p id="4f16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">攻击者继续将Github存储库克隆到目标机器上，这使他们能够创建SSH后门。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/239194f5bfccfa50453b957b61a52f5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/format:webp/1*hANYl1IKduLZ7Cozb4wkrQ.png"/></div></figure><blockquote class="me mf mg"><p id="3555" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated"><strong class="jp ir"> 5。使用快速跟踪单词表，有多少系统密码可以破解？</strong></p></blockquote><p id="4831" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如上面的影子文件所示，在目标机器上创建了5个用户。使用密码破解工具，如<strong class="jp ir">开膛手约翰</strong>和指定的单词表<strong class="jp ir">快速跟踪</strong>，我可以确定有多少密码可以破解。我首先将网络捕获中影子文件的最后五行复制到一个名为passwords的新文件中。接下来，我运行<strong class="jp ir">开膛手约翰</strong>工具来破解散列。</p><pre class="kn ko kp kq gt mk ml mm mn aw mo bi"><span id="21b4" class="mp lc iq ml b gy mq mr l ms mt">sudo john --wordlist=/usr/share/wordlists/fasttrack.txt passwords</span></pre><p id="c117" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从输出中可以看到<strong class="jp ir"> 4个哈希</strong>被破解。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/f51ced9022a1fb2a0bd6ec00d1f568f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*ORZIrD_nXehOMdzzB9kGkg.png"/></div></figure></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="7737" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">研究—分析代码</h1><p id="0c8b" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">这个房间的下一个阶段包括分析后门使用的代码。在对PCAP文件进行法律分析时，我可以通过使用之前找到的Github链接来检索代码。</p><blockquote class="me mf mg"><p id="f4f3" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated"><strong class="jp ir"> 1。后门的默认哈希是什么？</strong></p></blockquote><p id="3c46" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">翻看从Github下载的资源库内容，可以看到一个名为<strong class="jp ir"> main.go </strong>的文件。我决定使用<strong class="jp ir"> Sublime </strong>来检查这个文件，在查看前几行代码时，我可以看到后门的默认散列字符串。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi nf"><img src="../Images/95998101433df730d09292b5048ba32f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*09ABuXil_C_80DnHzBBPGw.png"/></div></div></figure><blockquote class="me mf mg"><p id="d8d4" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated"><strong class="jp ir"> 2。借壳的硬编码盐是什么？</strong></p></blockquote><p id="2832" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">向下移动<strong class="jp ir"> main.go </strong>文件中的代码，我找到了一个名为<strong class="jp ir"> verifypass </strong>的函数，它有三个参数，其中一个名为<strong class="jp ir"> salt </strong>。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/79c9756cef1b24c958dc5f43c962df87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*1rWJAoiJXSlsRCc9CAap2Q.png"/></div></figure><p id="04d0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">再往下，我发现了一个名为<strong class="jp ir"> passwordHandler </strong>的函数，它为salt参数使用了硬编码的字符串值。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi nh"><img src="../Images/6365b2ddc166e4daecd82e28a724e621.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UKjqMqrWKXSofYOLB5zbwA.png"/></div></div></figure><blockquote class="me mf mg"><p id="066c" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated"><strong class="jp ir"> 3。攻击者使用的哈希是什么？—为此回到PCAP！</strong></p></blockquote><p id="a600" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回到前面分析的PCAP文件，可以看到，在攻击者克隆了Github库并生成了RSA密钥对之后，攻击者接着使<strong class="jp ir">后门</strong>文件可执行，并使用使用<strong class="jp ir"> -a </strong>参数指定的散列来执行二进制文件。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/af17d4e8463c89b3f4738a1c90bad5cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/1*LVUpQMyNlvEV2PwSSLhqEw.png"/></div></figure><blockquote class="me mf mg"><p id="b642" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated"><strong class="jp ir"> 4。使用rockyou和您选择的破解工具来破解哈希。密码是什么？</strong></p></blockquote><p id="16e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在恢复散列之后，我可以使用工具<strong class="jp ir"> hashcat </strong>和<strong class="jp ir"> wordlist rockyou </strong>来破解上面恢复的散列。使用工具<strong class="jp ir">哈希标识符</strong>，我可以确认恢复的哈希使用了SHA-512算法。通过前面对后门代码的分析，我知道SHA-512散列是使用密码，然后是salt按照这个顺序创建的(即<strong class="jp ir">密码:salt </strong>)。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/2e165747abdb535ebd0f70a83bd9f8bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/1*_0SJrTVi2jcJ-USwqq2W3Q.png"/></div></figure><p id="445d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我可以访问hashcat wiki ( <strong class="jp ir">参见参考文献</strong>)并寻找一种与散列创建方式相匹配的散列模式。我看哈希模式<strong class="jp ir"> 1710 </strong>比较合适。</p><pre class="kn ko kp kq gt mk ml mm mn aw mo bi"><span id="c82c" class="mp lc iq ml b gy mq mr l ms mt">1710 | sha512($pass.$salt)        | Raw Hash, Salted and/or Iterated</span></pre><p id="2f5a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了破解hash，我需要提供在攻击者使用的数据包捕获中找到的<strong class="jp ir"> SHA-512 </strong> hash和在<strong class="jp ir"> main.go </strong>文件中找到的<strong class="jp ir">硬编码salt </strong>(即<strong class="jp ir"> hash:salt </strong>)。我将<strong class="jp ir"> hash:salt </strong>添加到一个文件中，然后使用下面的hashcat命令来破解这个散列。</p><pre class="kn ko kp kq gt mk ml mm mn aw mo bi"><span id="d7f5" class="mp lc iq ml b gy mq mr l ms mt">hashcat -m 1710 -a 0 -o cracked.txt hash.txt rockyou.txt</span></pre><p id="4c60" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是成功的，我能够恢复密码。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi nk"><img src="../Images/521d12cfd42118e759e2a646c0cb3088.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GFS00hmSNjBQqnT86iDs9Q.png"/></div></div></figure></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="b2c9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">进攻——退回去！</h1><p id="f9be" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">这个房间的最后阶段是再次控制跨平台生产服务器，并检索<strong class="jp ir">用户</strong>和<strong class="jp ir">根标志</strong>。我开始用NMAP扫描目标机器。</p><pre class="kn ko kp kq gt mk ml mm mn aw mo bi"><span id="d35e" class="mp lc iq ml b gy mq mr l ms mt">nmap -sV -sC -Pn -v -oN nmap_report 10.10.219.135</span></pre><p id="cc68" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该扫描显示目标机器上有三个打开的端口。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi nl"><img src="../Images/7af33657200159ee66bd016a069533a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EVsnrWszObNsXEIhwzn4gg.png"/></div></div></figure><blockquote class="me mf mg"><p id="3790" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated"><strong class="jp ir"> 1。攻击者破坏了网站。他们留下了什么信息作为标题？</strong></p></blockquote><p id="f604" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我的浏览器中输入IP地址会显示一个网页，看起来像是仙人掌在吃饼干(我猜😅).</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/b55276a64158061a51630c9b552c0f94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*MWiv36ct0Wh-gfzJwN2O9Q.png"/></div></figure><p id="9976" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过查看页面源代码，我得到了攻击者作为标题留下的完整信息。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/9d76abb6feadf9fb6decb985a541f9d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*ptXufLvZo5r5pPXtrKzWIQ.png"/></div></figure><h2 id="0d14" class="mp lc iq bd ld no np dn lh nq nr dp ll jy ns nt lp kc nu nv lt kg nw nx lx ny bi translated">用户标志</h2><p id="1f13" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">从上面的NMAP扫描结果中，我可以看到端口<strong class="jp ir"> 22 </strong>和<strong class="jp ir"> 2222 </strong>都运行着SSH服务。根据我目前收集的信息，我试着以用户<strong class="jp ir">詹姆斯</strong>的身份登录，使用的是检查PCAP文件时看到的原始密码。这对于端口22和2222都失败。然后，我尝试使用hashcat破解<strong class="jp ir"> SHA-512哈希</strong>得到的<strong class="jp ir">密码</strong>。这对端口22无效，但对端口2222有效。</p><pre class="kn ko kp kq gt mk ml mm mn aw mo bi"><span id="c0f2" class="mp lc iq ml b gy mq mr l ms mt">ssh -p 2222 james@10.10.219.135</span></pre><p id="ff9d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">登录后，我可以导航到James的主目录并检索用户标志。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/f4cfcd4914d90d4e79487e9c6a78b50d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*EVw_DfDZRAserRf2orgEhQ.png"/></div></figure><h2 id="01ba" class="mp lc iq bd ld no np dn lh nq nr dp ll jy ns nt lp kc nu nv lt kg nw nx lx ny bi translated">根标志</h2><p id="3758" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">起初，我相信用户<strong class="jp ir"> james </strong>能够根据之前在PCAP文件中找到的信息使用sudo以root权限运行任何命令。然而，我发现这不是真的，我不能使用sudo作为root运行任何命令。我决定回到詹姆斯的主目录，看看是否有什么有趣的文件。我立刻注意到在名为<strong class="jp ir">的目录中有一个root拥有的隐藏的<strong class="jp ir">二进制文件</strong>。suid_bash </strong>。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi oa"><img src="../Images/8c393c541d3ad1b594975bde535b68e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sbmQINGHMlB2wv5sXpLmaQ.png"/></div></div></figure><p id="b10d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我可以执行这个二进制文件，它将为我创建一个具有root权限的新shell。</p><pre class="kn ko kp kq gt mk ml mm mn aw mo bi"><span id="3c38" class="mp lc iq ml b gy mq mr l ms mt">./.suid_bash -p</span></pre><p id="b762" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我可以将目录更改为根目录，并检索根标志。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/f61dcce1d962fb01db7cf6c4a6214435.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*LaDmmEcC-sHvvlspinf87Q.png"/></div></figure></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="c993" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结束语</h1><p id="0a5d" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">我真的很喜欢这个自由空间，以及它如何在攻击目标机器之前整合多个阶段。这种风格的房间类似于我不久前完成的<strong class="jp ir">恢复CTF </strong>房间，其中包括对事件进行分类并修复所造成的损害，但没有那么非传统。</p><p id="4bbb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我真的很喜欢这样的房间，在这里您需要调查事件并了解发生了什么，然后才能修复造成的损害或使用收集的证据来攻击机器并获取标记。我希望在不久的将来能在TryHackMe平台上看到更多这样的房间。感谢阅读到最后，继续黑客😄！</p><h1 id="9706" class="lb lc iq bd ld le oc lg lh li od lk ll lm oe lo lp lq of ls lt lu og lw lx ly bi translated">参考</h1><ul class=""><li id="0e04" class="oh oi iq jp b jq lz ju ma jy oj kc ok kg ol kk om on oo op bi translated"><a class="ae oq" href="https://tryhackme.com/" rel="noopener ugc nofollow" target="_blank">https://tryhackme.com/</a></li><li id="e263" class="oh oi iq jp b jq or ju os jy ot kc ou kg ov kk om on oo op bi translated"><a class="ae oq" href="https://hashcat.net/wiki/doku.php?id=hashcat" rel="noopener ugc nofollow" target="_blank">https://hashcat.net/wiki/doku.php?id=hashcat</a></li></ul></div></div>    
</body>
</html>