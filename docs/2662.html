<html>
<head>
<title>Burp Suite Android Emulator Setup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Burp Suite Android模拟器设置</h1>
<blockquote>原文：<a href="https://infosecwriteups.com/burp-suite-android-emulator-5c030d420394?source=collection_archive---------1-----------------------#2022-12-18">https://infosecwriteups.com/burp-suite-android-emulator-5c030d420394?source=collection_archive---------1-----------------------#2022-12-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="69ec" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在Android模拟器上设置Burp套件的指南</p><p id="31fa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Burp Suite有一个<a class="ae ko" href="https://blog.ropnop.com/configuring-burp-suite-with-android-nougat" rel="noopener ugc nofollow" target="_blank">很棒的指南</a>来设置这一点，我会引用它，但它不是针对模拟器的，我在网上没有找到完整的指南，所以我在这里做一个。如果你喜欢，请关注我的推特和媒体以获得更多的指南和提示</p><p id="b4c4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">安装<a class="ae ko" href="https://developer.android.com/studio" rel="noopener ugc nofollow" target="_blank"> Android Studio </a></p><p id="19c9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在您的终端中运行此命令，允许您对仿真器的系统进行更改</p><pre class="kp kq kr ks gt kt ku kv bn kw kx bi"><span id="b25c" class="ky kz it ku b be la lb l lc ld">launchctl setenv studio.emu.params -writable-system</span></pre><p id="f38f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">安装<a class="ae ko" href="https://developer.android.com/studio/command-line/adb" rel="noopener ugc nofollow" target="_blank"> adb </a> : <code class="fe le lf lg ku b">adb devices</code>会让你知道它是否已经安装</p><p id="65bf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">转到Burp中的“代理选项卡”并选择“选项”在“代理监听器”中，以der格式导出您的证书。我称之为<code class="fe le lf lg ku b">cacert.der</code></p><figure class="kp kq kr ks gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi lh"><img src="../Images/bb26b00fafba4298f3030a6764c519a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gL5y6oUzO0NC5AM4kfx0kw.png"/></div></div></figure><p id="e4b2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">运行这3个命令，将证书更改为pem，并将其名称更改为添加了<code class="fe le lf lg ku b">.0</code>的<code class="fe le lf lg ku b">hash value</code>(用第二个命令打印的散列替换&lt;散列&gt;)</p><pre class="kp kq kr ks gt kt ku kv bn kw kx bi"><span id="c5d3" class="ky kz it ku b be la lb l lc ld">openssl x509 -inform DER -in cacert.der -out cacert.pem<br/>openssl x509 -inform PEM -subject_hash_old -in cacert.pem |head -1<br/>mv cacert.pem &lt;hash&gt;.0</span></pre><p id="854e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们需要在android studio上启动模拟器，所以打开一个空项目，点击我照片中高亮显示的开始按钮</p><figure class="kp kq kr ks gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi lp"><img src="../Images/02d42331ac16b83f639f9dce0e7fae39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bJw8EQPgAMVZoTeJ5VhyFA.png"/></div></div></figure><p id="cba8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">模拟器启动后，我们将把证书推送到设备上</p><pre class="kp kq kr ks gt kt ku kv bn kw kx bi"><span id="711d" class="ky kz it ku b be la lb l lc ld">adb root<br/>adb remount<br/>adb push &lt;cert&gt;.0 /sdcard/</span></pre><p id="f281" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我们将移动该文件，并为其授予权限</p><pre class="kp kq kr ks gt kt ku kv bn kw kx bi"><span id="7b48" class="ky kz it ku b be la lb l lc ld">adb shell<br/>mv /sdcard/&lt;cert&gt;.0 /system/etc/security/cacerts/<br/>chmod 644 /system/etc/security/cacerts/&lt;cert&gt;.0<br/>reboot</span></pre><p id="b3f7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">重新启动后，您的证书应该出现在“设置”= &gt;“安全”= &gt;“更多安全设置”= &gt;“加密和凭证”= &gt;“可信凭证”中</p><figure class="kp kq kr ks gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi lq"><img src="../Images/c8972c405e261f7b6f8d66ae5070d4d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*07ty2SLygAFCHGPYRZvzQA.png"/></div></div></figure><p id="0a5d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后一步是进入Android Studio设置并启用代理(无论你使用哪个端口都可以，只要它在burp上是相同的)</p><figure class="kp kq kr ks gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi lr"><img src="../Images/29a51bea3ae71bca870ee37ee77853f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*peGJDWw-ZPZETP4TYhWj1w.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">手动代理配置</figcaption></figure><p id="6e71" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对我来说，直到我使用127.0.0.1和谷歌一起使用<code class="fe le lf lg ku b">Check connection</code>,并在我的burp HTTP历史上看到它，它才起作用</p><figure class="kp kq kr ks gt li gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/afd145a4d5134406c6f37b3386f46477.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*fzbv51iTQUPjnuGTEqD0bQ.png"/></div></figure><p id="19be" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我在模拟器上有Play Store，所以我用<a class="ae ko" href="https://apkpure.com/" rel="noopener ugc nofollow" target="_blank">https://apkpure.com/</a>来获取apk，然后用<code class="fe le lf lg ku b">abd push</code>在设备上获取并运行它们</p><p id="6d08" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在推特<a class="ae ko" href="https://twitter.com/AdamJSturge" rel="noopener ugc nofollow" target="_blank">https://twitter.com/AdamJSturge</a>和媒体上关注我</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="a980" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，可以考虑报名成为一名媒体成员。一个月5美元，你可以无限制地阅读数千篇文章，包括我的文章。如果你使用<a class="ae ko" href="https://adamjsturge.medium.com/membership" rel="noopener">我的链接</a>注册，我会赚一小笔佣金，不需要你额外付费。</p></div></div>    
</body>
</html>